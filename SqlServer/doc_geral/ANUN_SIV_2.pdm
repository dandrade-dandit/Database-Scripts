<?xml version="1.0" encoding="UTF-8"?>
<?PowerDesigner ID="{69589EB1-8FBB-11D8-B6CA-00024416849C}" Name="PhysicalDataModel_6" Objects="425" Symbols="47" Type="{CDE44E21-9669-11D1-9914-006097355D9B}" signature="PDM_DATA_MODEL_XML" version="9.0.0.438 Evaluation"?>
<!-- please do not edit this file -->

<Model xmlns:a="attribute" xmlns:c="collection" xmlns:o="object">

<o:RootObject Id="o1">
<c:Children>
<o:Model Id="o2">
<a:ObjectID>69589EB1-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>PhysicalDataModel_6</a:Name>
<a:Code>PHYSICALDATAMODEL_6</a:Code>
<a:CreationDate>1081620221</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081629218</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PackageOptionsText>
[FolderOptions]

[FolderOptions\Physical Objects]
GenerationCheckModel=Yes
GenerationPath=
RevPkey=Yes
RevFkey=Yes
RevAkey=Yes
RevCheck=Yes
RevIndx=Yes
RevOpts=Yes
RevViewAsTabl=No
RevSystAsTabl=Yes
RevSynmAsTabl=Yes
GenScriptName=crebas
GenScriptName0=
GenScriptName1=
GenScriptName2=
GenScriptName3=
GenScriptName4=
GenScriptName5=
GenScriptName6=
GenScriptName7=
GenScriptName8=
GenScriptName9=
GenPathName=
GenSingleFile=Yes
GenTrgScriptName=cretrg
GenTrgScriptName0=
GenTrgScriptName1=
GenTrgScriptName2=
GenTrgScriptName3=
GenTrgScriptName4=
GenTrgScriptName5=
GenTrgScriptName6=
GenTrgScriptName7=
GenTrgScriptName8=
GenTrgScriptName9=
GenTrgPathName=
GenTrgSingleFile=Yes
GenODBC=No
GenCheckModel=Yes
GenScriptPrev=Yes
GenArchiveModel=No
GenDataPathName=
GenDataSinglefile=Yes
GenDataScriptName=testdata
GenDataScriptName0=
GenDataScriptName1=
GenDataScriptName2=
GenDataScriptName3=
GenDataScriptName4=
GenDataScriptName5=
GenDataScriptName6=
GenDataScriptName7=
GenDataScriptName8=
GenDataScriptName9=
GenDataOdbc=No
GenDataDelOld=No
GenDataTitle=No
GenDataDefNumRows=20
GenDataCommit=0
GenDataPacket=0
GenDataCSV=No
GenDataOwner=No
GenDataProfNumb=
GenDataProfChar=
GenDataProfDate=
GenTspcCrea=Yes
GenTspcDrop=Yes
GenStorCrea=Yes
GenStorDrop=Yes
GenUddtCrea=Yes
GenUddtDval=Yes
GenUddtChck=Yes
GenUddtCmmt=Yes
GenUddtDrop=Yes
GenClssCrea=Yes
GenClssHead=Yes
GenClssFoot=Yes
GenClssCmmt=Yes
GenClssDrop=Yes
GenClssInst=Yes
GenClssSupp=Yes
GenDtbsCrea=Yes
GenDtbsOpts=Yes
GenDtbsHead=Yes
GenDtbsFoot=Yes
GenDtbsOpen=Yes
GenDtbsClose=Yes
GenDtbsDrop=Yes
GenUserCrea=Yes
GenUserGrant=Yes
GenUserDrop=Yes
GenTablCrea=Yes
GenTablChck=Yes
GenTablOpts=Yes
GenTablHead=Yes
GenTablFoot=Yes
GenTablCmmt=Yes
GenTablDrop=Yes
GenColnUddt=Yes
GenColnDval=Yes
GenColnChck=Yes
GenColnOpts=Yes
GenColnCmmt=Yes
GenPkeyCrea=Yes
GenPkeyOpts=Yes
GenPkeyDrop=Yes
GenAkeyCrea=Yes
GenAkeyOpts=Yes
GenAkeyDrop=Yes
GenRefrCrea=Yes
GenRefrIdcl=Yes
GenRefrIDUR=Yes
GenRefrIDUC=Yes
GenRefrIDUN=Yes
GenRefrIDUD=Yes
GenRefrIDDR=Yes
GenRefrIDDC=Yes
GenRefrIDDN=Yes
GenRefrIDDD=Yes
GenRefrDrop=Yes
GenIndxCrea=Yes
GenIndxPkey=Yes
GenIndxFkey=Yes
GenIndxAkey=Yes
GenIndxClus=Yes
GenIndxOthr=Yes
GenIndxOpts=Yes
GenIndxCmmt=Yes
GenIndxDrop=Yes
GenViewCrea=Yes
GenViewHead=Yes
GenViewFoot=Yes
GenViewCmmt=Yes
GenViewDrop=Yes
GenJidxCrea=Yes
GenJidxHead=Yes
GenJidxFoot=Yes
GenJidxDrop=Yes
GenSqncCrea=Yes
GenSqncDrop=Yes
GenTrgrCrea=Yes
GenTrgrDrop=Yes
GenTrgrFIns=Yes
GenTrgrFUpd=Yes
GenTrgrFDel=Yes
GenProcCrea=Yes
GenProcDrop=Yes
GenScriptTitle=Yes
GenScriptNamLabl=No
GenScriptQDtbs=Yes
GenScriptQOwnr=Yes
GenScriptCase=0
GenScriptCharset=0
GenScriptNAcct=No
GenScriptODBC=No
GenUseSync=No
GenSyncChoice=0
GenSyncArch=
GenTmpTablCrea=Yes
GenTmpTablDrop=Yes
GenTrgrStdMsg=Yes
GenTrgrMsgTab=
GenTrgrMsgNo=
GenTrgrMsgTxt=
GenRuleCrea=Yes
GenRuleDrop=Yes

[FolderOptions\Pdm]
IndxIQName=%COLUMN%_%INDEXTYPE%
IndxPK=Yes
IndxFK=Yes
IndxAK=Yes
IndxPKName=%TABLE%_PK
IndxFKName=%REFR%_FK
IndxAKName=%AKEY%_AK
IndxPreserve=No
IndxThreshold=0
RefrPreserve=No
JidxPreserve=No
RbldMultiFact=Yes
RbldMultiDim=Yes
RbldMultiJidx=Yes
CubePreserve=No
CubeScriptPath=
CubeScriptCase=0
CubeScriptCharset=0
CubeScriptNacct=No
CubeScriptHeader=No
CubeScriptExt=csv
CubeScriptExt0=txt
CubeScriptExt1=
CubeScriptExt2=
CubeScriptSep=,
CubeScriptDeli=&quot;
TrgrPreserve=No
TrgrIns=Yes
TrgrUpd=Yes
TrgrDel=Yes
TrgrC2Ins=Yes
TrgrC2Upd=Yes
TrgrC3=Yes
TrgrC4=Yes
TrgrC5=Yes
TrgrC6=Yes
TrgrC7=Yes
TrgrC8=Yes
TrgrC9=Yes
TrgrC10=Yes
TrgrC11=Yes
TrgrC1=Yes
TrgrC12Ins=Yes
TrgrC12Upd=Yes
TrgrC13=Yes
</a:PackageOptionsText>
<a:ModelOptionsText>
[ModelOptions]

[ModelOptions\Physical Objects]
DisplayName=Yes
DefaultDttp=&lt;Undefined&gt;
IgnoreOwner=No
RefrUnique=No
RefrAutoMigrate=Yes
RefrMigrateReuse=Yes
RefrMigrateDomain=Yes
RefrMigrateCheck=Yes
RefrMigrateRule=Yes
RefrMigrateExtd=No
RefrMigrDefaultLink=No
DomnForbDivg=No
DomnCopyDttp=Yes
DomnCopyChck=No
DomnCopyRule=No
DomnCopyMand=No
DomnCopyExtd=No
DomnCopyProf=No

[ModelOptions\Connection]

[ModelOptions\Pdm]

[ModelOptions\Generate]

[ModelOptions\Generate\Cdm]
CheckModel=1
SaveLinks=1
NameToCode=0
Notation=2

[ModelOptions\Generate\Oom]
CheckModel=1
SaveLinks=1
ORMapping=0
NameToCode=0
ClassPrefix=

[ModelOptions\ClssNamingOptions]

[ModelOptions\ClssNamingOptions\PDMPCKG]

[ModelOptions\ClssNamingOptions\PDMPCKG\Name]
Template=
MaxLen=254
Case=M
ValidChar=
InvldChar=&quot;+-*/\.,!:;&#39;&quot;
AllValid=1
NoAccent=0
DefaultChar=_
Script=.foreach_part(%Name%)[CRLF].convert_name(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\PDMPCKG\Code]
Template=
MaxLen=254
Case=U
ValidChar=&#39;a&#39;-&#39;z&#39;,&#39;A&#39;-&#39;Z&#39;,&#39;0&#39;-&#39;9&#39;,&quot;_&quot;
InvldChar=
AllValid=0
NoAccent=1
DefaultChar=_
Script=.foreach_part(%Code%)[CRLF].convert_code(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\PDMDOMN]

[ModelOptions\ClssNamingOptions\PDMDOMN\Name]
Template=
MaxLen=254
Case=M
ValidChar=
InvldChar=&quot;+-*/\.,!:;&#39;&quot;
AllValid=1
NoAccent=0
DefaultChar=_
Script=.foreach_part(%Name%)[CRLF].convert_name(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\PDMDOMN\Code]
Template=
MaxLen=128
Case=U
ValidChar=&#39;a&#39;-&#39;z&#39;,&#39;A&#39;-&#39;Z&#39;,&#39;0&#39;-&#39;9&#39;,&quot;_&quot;
InvldChar=
AllValid=0
NoAccent=1
DefaultChar=_
Script=.foreach_part(%Code%)[CRLF].convert_code(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\TABL]

[ModelOptions\ClssNamingOptions\TABL\Name]
Template=
MaxLen=254
Case=M
ValidChar=
InvldChar=&quot;+-*/\.,!:;&#39;&quot;
AllValid=1
NoAccent=0
DefaultChar=_
Script=.foreach_part(%Name%)[CRLF].convert_name(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\TABL\Code]
Template=
MaxLen=128
Case=U
ValidChar=&#39;a&#39;-&#39;z&#39;,&#39;A&#39;-&#39;Z&#39;,&#39;0&#39;-&#39;9&#39;,&quot;_&quot;
InvldChar=
AllValid=0
NoAccent=1
DefaultChar=_
Script=.foreach_part(%Code%)[CRLF].convert_code(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\COLN]

[ModelOptions\ClssNamingOptions\COLN\Name]
Template=
MaxLen=254
Case=M
ValidChar=
InvldChar=&quot;+-*/\.,!:;&#39;&quot;
AllValid=1
NoAccent=0
DefaultChar=_
Script=.foreach_part(%Name%)[CRLF].convert_name(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\COLN\Code]
Template=
MaxLen=128
Case=M
ValidChar=&#39;a&#39;-&#39;z&#39;,&#39;A&#39;-&#39;Z&#39;,&#39;0&#39;-&#39;9&#39;,&quot;_&quot;
InvldChar=
AllValid=0
NoAccent=1
DefaultChar=_
Script=.foreach_part(%Code%)[CRLF].convert_code(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\REFR]

[ModelOptions\ClssNamingOptions\REFR\Name]
Template=
MaxLen=254
Case=M
ValidChar=
InvldChar=&quot;+-*/\.,!:;&#39;&quot;
AllValid=1
NoAccent=0
DefaultChar=_
Script=.foreach_part(%Name%)[CRLF].convert_name(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\REFR\Code]
Template=
MaxLen=254
Case=U
ValidChar=&#39;a&#39;-&#39;z&#39;,&#39;A&#39;-&#39;Z&#39;,&#39;0&#39;-&#39;9&#39;,&quot;_&quot;
InvldChar=
AllValid=0
NoAccent=1
DefaultChar=_
Script=.foreach_part(%Code%)[CRLF].convert_code(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\VREF]

[ModelOptions\ClssNamingOptions\VREF\Name]
Template=
MaxLen=254
Case=M
ValidChar=
InvldChar=&quot;+-*/\.,!:;&#39;&quot;
AllValid=1
NoAccent=0
DefaultChar=_
Script=.foreach_part(%Name%)[CRLF].convert_name(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\VREF\Code]
Template=
MaxLen=254
Case=U
ValidChar=&#39;a&#39;-&#39;z&#39;,&#39;A&#39;-&#39;Z&#39;,&#39;0&#39;-&#39;9&#39;,&quot;_&quot;
InvldChar=
AllValid=0
NoAccent=1
DefaultChar=_
Script=.foreach_part(%Code%)[CRLF].convert_code(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\VIEW]

[ModelOptions\ClssNamingOptions\VIEW\Name]
Template=
MaxLen=254
Case=M
ValidChar=
InvldChar=&quot;+-*/\.,!:;&#39;&quot;
AllValid=1
NoAccent=0
DefaultChar=_
Script=.foreach_part(%Name%)[CRLF].convert_name(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\VIEW\Code]
Template=
MaxLen=128
Case=U
ValidChar=&#39;a&#39;-&#39;z&#39;,&#39;A&#39;-&#39;Z&#39;,&#39;0&#39;-&#39;9&#39;,&quot;_&quot;
InvldChar=
AllValid=0
NoAccent=1
DefaultChar=_
Script=.foreach_part(%Code%)[CRLF].convert_code(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\FACT]

[ModelOptions\ClssNamingOptions\FACT\Name]
Template=
MaxLen=254
Case=M
ValidChar=
InvldChar=&quot;+-*/\.,!:;&#39;&quot;
AllValid=1
NoAccent=0
DefaultChar=_
Script=.foreach_part(%Name%)[CRLF].convert_name(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\FACT\Code]
Template=
MaxLen=254
Case=U
ValidChar=&#39;a&#39;-&#39;z&#39;,&#39;A&#39;-&#39;Z&#39;,&#39;0&#39;-&#39;9&#39;,&quot;_&quot;
InvldChar=
AllValid=0
NoAccent=1
DefaultChar=_
Script=.foreach_part(%Code%)[CRLF].convert_code(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\DIMN]

[ModelOptions\ClssNamingOptions\DIMN\Name]
Template=
MaxLen=254
Case=M
ValidChar=
InvldChar=&quot;+-*/\.,!:;&#39;&quot;
AllValid=1
NoAccent=0
DefaultChar=_
Script=.foreach_part(%Name%)[CRLF].convert_name(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\DIMN\Code]
Template=
MaxLen=254
Case=U
ValidChar=&#39;a&#39;-&#39;z&#39;,&#39;A&#39;-&#39;Z&#39;,&#39;0&#39;-&#39;9&#39;,&quot;_&quot;
InvldChar=
AllValid=0
NoAccent=1
DefaultChar=_
Script=.foreach_part(%Code%)[CRLF].convert_code(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\CUBE]

[ModelOptions\ClssNamingOptions\CUBE\Name]
Template=
MaxLen=254
Case=M
ValidChar=
InvldChar=&quot;+-*/\.,!:;&#39;&quot;
AllValid=1
NoAccent=0
DefaultChar=_
Script=.foreach_part(%Name%)[CRLF].convert_name(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\CUBE\Code]
Template=
MaxLen=254
Case=U
ValidChar=&#39;a&#39;-&#39;z&#39;,&#39;A&#39;-&#39;Z&#39;,&#39;0&#39;-&#39;9&#39;,&quot;_&quot;
InvldChar=
AllValid=0
NoAccent=1
DefaultChar=_
Script=.foreach_part(%Code%)[CRLF].convert_code(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\MEAS]

[ModelOptions\ClssNamingOptions\MEAS\Name]
Template=
MaxLen=254
Case=M
ValidChar=
InvldChar=&quot;+-*/\.,!:;&#39;&quot;
AllValid=1
NoAccent=0
DefaultChar=_
Script=.foreach_part(%Name%)[CRLF].convert_name(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\MEAS\Code]
Template=
MaxLen=254
Case=U
ValidChar=&#39;a&#39;-&#39;z&#39;,&#39;A&#39;-&#39;Z&#39;,&#39;0&#39;-&#39;9&#39;,&quot;_&quot;
InvldChar=
AllValid=0
NoAccent=1
DefaultChar=_
Script=.foreach_part(%Code%)[CRLF].convert_code(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\DATTR]

[ModelOptions\ClssNamingOptions\DATTR\Name]
Template=
MaxLen=254
Case=M
ValidChar=
InvldChar=&quot;+-*/\.,!:;&#39;&quot;
AllValid=1
NoAccent=0
DefaultChar=_
Script=.foreach_part(%Name%)[CRLF].convert_name(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\DATTR\Code]
Template=
MaxLen=254
Case=U
ValidChar=&#39;a&#39;-&#39;z&#39;,&#39;A&#39;-&#39;Z&#39;,&#39;0&#39;-&#39;9&#39;,&quot;_&quot;
InvldChar=
AllValid=0
NoAccent=1
DefaultChar=_
Script=.foreach_part(%Code%)[CRLF].convert_code(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\FILO]

[ModelOptions\ClssNamingOptions\FILO\Name]
Template=
MaxLen=254
Case=M
ValidChar=
InvldChar=&quot;\/:*?&lt;&gt;|&quot;
AllValid=1
NoAccent=0
DefaultChar=_
Script=.foreach_part(%Name%)[CRLF].convert_name(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\FILO\Code]
Template=
MaxLen=254
Case=U
ValidChar=&#39;a&#39;-&#39;z&#39;,&#39;A&#39;-&#39;Z&#39;,&#39;0&#39;-&#39;9&#39;,&quot;_.&quot;
InvldChar=
AllValid=0
NoAccent=1
DefaultChar=_
Script=.foreach_part(%Code%)[CRLF].convert_code(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\DefaultClass]

[ModelOptions\ClssNamingOptions\DefaultClass\Name]
Template=
MaxLen=254
Case=M
ValidChar=
InvldChar=&quot;+-*/\.,!:;&#39;&quot;
AllValid=1
NoAccent=0
DefaultChar=_
Script=.foreach_part(%Name%)[CRLF].convert_name(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\DefaultClass\Code]
Template=
MaxLen=254
Case=M
ValidChar=&#39;a&#39;-&#39;z&#39;,&#39;A&#39;-&#39;Z&#39;,&#39;0&#39;-&#39;9&#39;,&quot;_&quot;
InvldChar=
AllValid=0
NoAccent=1
DefaultChar=_
Script=.foreach_part(%Code%)[CRLF].convert_code(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\NamingOptionsTemplates]

[ModelOptions\Default Opts]

[ModelOptions\Default Opts\TABL]
PhysOpts=

[ModelOptions\Default Opts\COLN]
PhysOpts=

[ModelOptions\Default Opts\INDX]
PhysOpts=

[ModelOptions\Default Opts\AKEY]
PhysOpts=

[ModelOptions\Default Opts\PKEY]
PhysOpts=

[ModelOptions\Default Opts\STOR]
PhysOpts=

[ModelOptions\Default Opts\TSPC]
PhysOpts=

[ModelOptions\Default Opts\SQNC]
PhysOpts=

[ModelOptions\Default Opts\DTBS]
PhysOpts=
</a:ModelOptionsText>
<c:DBMS>
<o:Shortcut Id="o3">
<a:ObjectID>69589EB7-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Microsoft SQL Server 7.x</a:Name>
<a:Code>SQL SERVER 7</a:Code>
<a:CreationDate>1081620221</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620221</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:TargetID>986CB218-1936-4245-823C-883D7AF59B86</a:TargetID>
<a:TargetClassID>4BA9F647-DAB1-11D1-9944-006097355D9B</a:TargetClassID>
<a:TargetPackagePath/>
</o:Shortcut>
</c:DBMS>
<c:PhysicalDiagrams>
<o:PhysicalDiagram Id="o4">
<a:ObjectID>69589EB3-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>PhysicalDiagram_1</a:Name>
<a:Code>PHYSICALDIAGRAM_1</a:Code>
<a:CreationDate>1081620219</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1082140839</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DisplayPreferences>
[DisplayPreferences]

[DisplayPreferences\PDM]

[DisplayPreferences\General]
Adjust to text=Yes
Snap Grid=No
Display Grid=No
Show Page Delimiter=Yes
Grid size=800
Graphic unit=0
Window color=255 255 255

[DisplayPreferences\Object]
Mode=0
Trunc Length=80
Word Length=80
Word Text=!&quot;&quot;#$%&amp;&#39;()*+,-./:;&lt;=&gt;?@[\]^_`{|}~
Shortcut IntIcon=Yes
Shortcut IntLoct=No
Shortcut ExtIcon=Yes
Shortcut ExtLoct=No
File Location=No
TablColn=No
ColnMode=0
ColnMax=5
TablIndx=No
TablKey=No
TablTrgr=Yes
TablOwnr=No
ColnDttp=Yes
ColnDomn=No
ColnShowDomn=Yes
ColnKey=Yes
ColnIndx=Yes
ColnMand=Yes
ViewTabl=Yes
ViewColn=Yes
ViewOwnr=No
VColName=Yes
VColExpr=No
VColDttp=No
VColCMod=1
VColCMax=5
RefrName=No
RefrJoin=Yes
RefrCnam=No
RefrIntg=No
RefrImpl=No
RefrCard=No
RefrMode=2
VRefName=No
VRefJoin=No
VRefMode=0

[DisplayPreferences\Symbol]

[DisplayPreferences\Symbol\PDMPCKG]
DISPNAMEFont=arial,8,N
DISPNAMEFont color=0, 0, 0
AutoAdjustToText=Yes
Width=4800
Height=3600
Brush color=255 255 255
Fill Color=Yes
Pen=1 0 0, 0, 255
Shadow color=192 192 192
Shadow=No

[DisplayPreferences\Symbol\TABL]
DISPNAMEFont=arial,8,N
DISPNAMEFont color=0, 0, 0
TableColumnsFont=arial,8,N
TableColumnsFont color=0, 0, 0
TablePkColumnsFont=arial,8,N
TablePkColumnsFont color=0, 0, 0
TableIndexsFont=arial,8,N
TableIndexsFont color=0, 0, 0
TableKeysFont=arial,8,N
TableKeysFont color=0, 0, 0
TableTriggersFont=arial,8,N
TableTriggersFont color=0, 0, 0
AutoAdjustToText=Yes
Width=4800
Height=3600
Brush color=255 255 255
Fill Color=Yes
Pen=1 0 0, 0, 255
Shadow color=192 192 192
Shadow=No

[DisplayPreferences\Symbol\REFR]
DISPNAMEFont=arial,8,N
DISPNAMEFont color=0, 0, 0
CARDFont=arial,8,N
CARDFont color=0, 0, 0
Line style=0
Brush color=255 255 255
Fill Color=Yes
Pen=1 0 0, 0, 255
Shadow color=192 192 192
Shadow=No

[DisplayPreferences\Symbol\VREF]
DISPNAMEFont=arial,8,N
DISPNAMEFont color=0, 0, 0
Line style=0
Brush color=255 255 255
Fill Color=Yes
Pen=1 0 0, 0, 255
Shadow color=192 192 192
Shadow=No

[DisplayPreferences\Symbol\VIEW]
DISPNAMEFont=arial,8,N
DISPNAMEFont color=0, 0, 0
ViewColumnnFont=arial,8,N
ViewColumnnFont color=0, 0, 0
ViewTablesFont=arial,8,N
ViewTablesFont color=0, 0, 0
AutoAdjustToText=Yes
Width=4800
Height=3600
Brush color=255 255 255
Fill Color=Yes
Pen=1 0 0, 0, 255
Shadow color=192 192 192
Shadow=No

[DisplayPreferences\Symbol\FILO]
NAMEFont=arial,8,N
NAMEFont color=0, 0, 0
AutoAdjustToText=Yes
Width=2400
Height=2400
Brush color=255 255 255
Fill Color=No
Pen=1 0 0, 0, 255
Shadow color=192 192 192
Shadow=No

[DisplayPreferences\Symbol\USRDEPD]
OBJXSTRFont=arial,8,N
OBJXSTRFont color=0, 0, 0
Line style=0
Brush color=255 255 255
Fill Color=Yes
Pen=2 0 0 0 0
Shadow color=192 192 192
Shadow=No

[DisplayPreferences\Symbol\Free Symbol]
Free TextFont=arial,8,N
Free TextFont color=0, 0, 0
Line style=0
Brush color=255 255 255
Fill Color=Yes
Pen=1 0 0, 0, 255
Shadow color=192 192 192
Shadow=No
</a:DisplayPreferences>
<a:PaperSize>(8268, 11689)</a:PaperSize>
<a:PageMargins>((315,354), (433,354))</a:PageMargins>
<a:PageSize>9</a:PageSize>
<a:PaperSource>7</a:PaperSource>
<c:Symbols>
<o:ReferenceSymbol Id="o5">
<a:CenterTextOffset>(4, 0)</a:CenterTextOffset>
<a:Rect>((-738150,672264), (-730426,681249))</a:Rect>
<a:ListOfPoints>((-734272,672264),(-734313,681249))</a:ListOfPoints>
<a:ArrowStyle>4882</a:ArrowStyle>
<a:LineColor>32768</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Id="o6">
<a:Rect>((-737839,670640), (-731213,674300))</a:Rect>
<a:LineColor>32768</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o7">
<a:ObjectID>69589F00-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_ATA</a:Name>
<a:Code>T_ATA</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o8">
<a:ObjectID>69589EDB-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_ATA</a:Name>
<a:Code>CD_ATA</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o9">
<a:ObjectID>69589EDD-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_AAN</a:Name>
<a:Code>CD_AAN</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o10">
<a:ObjectID>69589EDF-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_TPA</a:Name>
<a:Code>CD_TPA</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o11">
<a:ObjectID>69589EE1-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Timestamp</a:Name>
<a:Code>Timestamp</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o12">
<a:ObjectID>69589EEB-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_ATA</a:Name>
<a:Code>Pk_T_ATA</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_ATA</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o8"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Indexes>
<o:Index Id="o13">
<a:ObjectID>69589EE5-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_AANTPA</a:Name>
<a:Code>I_AANTPA</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Unique>1</a:Unique>
<c:IndexColumns>
<o:IndexColumn Id="o14">
<a:ObjectID>69589EE7-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o9"/>
</c:Column>
</o:IndexColumn>
<o:IndexColumn Id="o15">
<a:ObjectID>69589EE9-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_1&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o10"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
</c:Indexes>
<c:Owner>
<o:User Id="o16">
<a:ObjectID>69589EBC-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>dbo</a:Name>
<a:Code>dbo</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
</o:User>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o17">
<a:ObjectID>6958A018-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_ATA_TRI</a:Name>
<a:Code>T_ATA_TRI</a:Code>
<a:Text>Create Trigger T_ATA_TRI On T_ATA
For Insert As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* Tipo de Anuncio»Área de Anúncio do Tipo de Anúncio: R:TPA-ATA */
If (Select Count(*) From T_TPA, Inserted
Where T_TPA.CD_TPA = Inserted.CD_TPA)
 &lt;&gt;(Select Count(CD_TPA) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Tipo de Anuncio&gt; que se deseja incluir na tabela &lt;Área de Anúncio do Tipo de Anúncio&gt; não está cadastrada&#39;
  Return
End
/* Área de Anúncio»Área de Anúncio do Tipo de Anúncio: R:AAN-ATA */
If (Select Count(*) From T_AAN, Inserted
Where T_AAN.CD_AAN = Inserted.CD_AAN)
 &lt;&gt;(Select Count(CD_AAN) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Área de Anúncio&gt; que se deseja incluir na tabela &lt;Área de Anúncio do Tipo de Anúncio&gt; não está cadastrada&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>I</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o18">
<a:ObjectID>6958A01A-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_ATA_TRU</a:Name>
<a:Code>T_ATA_TRU</a:Code>
<a:Text>Create Trigger T_ATA_TRU On T_ATA
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_ATA)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código da Área de Anúncio do Tipo de Anúncio&gt; da tabela &lt;Área de Anúncio do Tipo de Anúncio&gt; não pode ser alterada.&#39;
  Return
End
If Update (CD_TPA)
/* Tipo de Anuncio»Área de Anúncio do Tipo de Anúncio: R:TPA-ATA */
If (Select Count(*) From T_TPA, Inserted
Where T_TPA.CD_TPA = Inserted.CD_TPA)
 &lt;&gt;(Select Count(CD_TPA) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Tipo de Anuncio&gt; que se deseja incluir na tabela &lt;Área de Anúncio do Tipo de Anúncio&gt; não está cadastrada&#39;
  Return
End
If Update (CD_AAN)
/* Área de Anúncio»Área de Anúncio do Tipo de Anúncio: R:AAN-ATA */
If (Select Count(*) From T_AAN, Inserted
Where T_AAN.CD_AAN = Inserted.CD_AAN)
 &lt;&gt;(Select Count(CD_AAN) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Área de Anúncio&gt; que se deseja incluir na tabela &lt;Área de Anúncio do Tipo de Anúncio&gt; não está cadastrada&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o12"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Id="o19">
<a:Rect>((-737768,679405), (-731148,683595))</a:Rect>
<a:LineColor>32768</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o20">
<a:ObjectID>69589EF1-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_AAN</a:Name>
<a:Code>T_AAN</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o21">
<a:ObjectID>69589ECF-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_AAN</a:Name>
<a:Code>CD_AAN</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o22">
<a:ObjectID>69589ED1-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NM_AAN</a:Name>
<a:Code>NM_AAN</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>varchar(30)</a:DataType>
<a:Length>30</a:Length>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o23">
<a:ObjectID>69589ED3-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NR_AAN</a:Name>
<a:Code>NR_AAN</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL0    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL0 As
@valor &gt;= 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o24">
<a:ObjectID>69589ED4-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>FL_AAN</a:Name>
<a:Code>FL_AAN</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>bit</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o25">
<a:ObjectID>69589ED5-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Timestamp</a:Name>
<a:Code>Timestamp</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o26">
<a:ObjectID>69589ED9-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_AAN</a:Name>
<a:Code>Pk_T_AAN</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_AAN</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o21"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Owner>
<o:User Ref="o16"/>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o27">
<a:ObjectID>6958A005-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_AAN_TRD</a:Name>
<a:Code>T_AAN_TRD</a:Code>
<a:Text>Create Trigger T_AAN_TRD On T_AAN
For Delete As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* Área de Anúncio»Área de Anúncio do Tipo de Anúncio: R:AAN-ATA (Restrict) */
If (Select Count(*) From T_ATA dep, Deleted pri
 Where dep.CD_AAN = pri.CD_AAN) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Área de Anúncio&gt; está sendo referenciada na tabela &lt;Área de Anúncio do Tipo de Anúncio&gt;&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>D</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o28">
<a:ObjectID>6958A007-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_AAN_TRU</a:Name>
<a:Code>T_AAN_TRU</a:Code>
<a:Text>Create Trigger T_AAN_TRU On T_AAN
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_AAN)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código da Área de Anúncio&gt; da tabela &lt;Área de Anúncio&gt; não pode ser alterada.&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o26"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o29">
<a:ObjectID>69589F73-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_1</a:Name>
<a:Code>REFERENCE_1</a:Code>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o20"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o7"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o26"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o30">
<a:ObjectID>69589F75-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o21"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o9"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o31">
<a:CenterTextOffset>(5550, -1800)</a:CenterTextOffset>
<a:Rect>((-738399,649646), (-699166,651399))</a:Rect>
<a:ListOfPoints>((-738399,651399),(-699166,651350))</a:ListOfPoints>
<a:ArrowStyle>4881</a:ArrowStyle>
<a:LineColor>32768</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Id="o32">
<a:Rect>((-742322,650628), (-735696,654228))</a:Rect>
<a:LineColor>32768</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:ClonePredecessor>
<o:TableSymbol Id="o33">
<a:Rect>((-734116,685215), (-727490,688815))</a:Rect>
<a:LineColor>32768</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o34">
<a:ObjectID>69589F0F-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_CHA</a:Name>
<a:Code>T_CHA</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o35">
<a:ObjectID>69589EED-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_CHA</a:Name>
<a:Code>CD_CHA</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o36">
<a:ObjectID>69589EEF-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_CHG</a:Name>
<a:Code>CD_CHG</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
</o:Column>
<o:Column Id="o37">
<a:ObjectID>69589EF2-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_PAR</a:Name>
<a:Code>CD_PAR</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
</o:Column>
<o:Column Id="o38">
<a:ObjectID>69589EF4-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_IFT</a:Name>
<a:Code>CD_IFT</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
</o:Column>
<o:Column Id="o39">
<a:ObjectID>69589EF6-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>DH_CHA</a:Name>
<a:Code>DH_CHA</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>datetime</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o40">
<a:ObjectID>69589EF8-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_MSG</a:Name>
<a:Code>CD_MSG</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o41">
<a:ObjectID>69589EFA-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_USR</a:Name>
<a:Code>CD_USR</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o42">
<a:ObjectID>69589EFC-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TIMESTAMP</a:Name>
<a:Code>TIMESTAMP</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o43">
<a:ObjectID>69589F05-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_CHA</a:Name>
<a:Code>Pk_T_CHA</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_CHA</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o35"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Indexes>
<o:Index Id="o44">
<a:ObjectID>69589F01-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_CHA_DH_MSG</a:Name>
<a:Code>I_CHA_DH_MSG</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:IndexColumns>
<o:IndexColumn Id="o45">
<a:ObjectID>69589F02-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o39"/>
</c:Column>
</o:IndexColumn>
<o:IndexColumn Id="o46">
<a:ObjectID>69589F03-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_1&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o40"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
</c:Indexes>
<c:Owner>
<o:User Ref="o16"/>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o47">
<a:ObjectID>6958A02F-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_CHA_TRI</a:Name>
<a:Code>T_CHA_TRI</a:Code>
<a:Text>Create Trigger T_CHA_TRI On T_CHA
For Insert As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* Informante da Situação de Vôo»Chamadas de Anuncio: Informante da Chamada */
If (Select Count(*) From T_IFT, Inserted
Where T_IFT.CD_IFT = Inserted.CD_IFT)
 &lt;&gt;(Select Count(CD_IFT) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Informante da Situação de Vôo&gt; que se deseja incluir na tabela &lt;Chamadas de Anuncio&gt; não está cadastrada&#39;
  Return
End
/* Chegadas»Chamadas de Anuncio: Chamada da Chegada */
If (Select Count(*) From T_CHG, Inserted
Where T_CHG.CD_CHG = Inserted.CD_CHG)
 &lt;&gt;(Select Count(CD_CHG) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Chegadas&gt; que se deseja incluir na tabela &lt;Chamadas de Anuncio&gt; não está cadastrada&#39;
  Return
End
/* Partidas»Chamadas de Anuncio: Chamadas da Partida */
If (Select Count(*) From T_PAR, Inserted
Where T_PAR.CD_PAR = Inserted.CD_PAR)
 &lt;&gt;(Select Count(CD_PAR) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Partidas&gt; que se deseja incluir na tabela &lt;Chamadas de Anuncio&gt; não está cadastrada&#39;
  Return
End
/* Usuários»Chamadas de Anuncio: Usuário da Chamada */
If (Select Count(*) From T_USR, Inserted
Where T_USR.CD_USR = Inserted.CD_USR)
 &lt;&gt;(Select Count(CD_USR) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Usuários&gt; que se deseja incluir na tabela &lt;Chamadas de Anuncio&gt; não está cadastrada&#39;
  Return
End
/* Mensagens»Chamadas de Anuncio: Mensagem da Chamada */
If (Select Count(*) From T_MSG, Inserted
Where T_MSG.CD_MSG = Inserted.CD_MSG)
 &lt;&gt;(Select Count(CD_MSG) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Mensagens&gt; que se deseja incluir na tabela &lt;Chamadas de Anuncio&gt; não está cadastrada&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>I</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o48">
<a:ObjectID>6958A031-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_CHA_TRU</a:Name>
<a:Code>T_CHA_TRU</a:Code>
<a:Text>Create Trigger T_CHA_TRU On T_CHA
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_CHA)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código da Chamada de Anuncio&gt; da tabela &lt;Chamadas de Anuncio&gt; não pode ser alterada.&#39;
  Return
End
If Update (CD_IFT)
/* Informante da Situação de Vôo»Chamadas de Anuncio: Informante da Chamada */
If (Select Count(*) From T_IFT, Inserted
Where T_IFT.CD_IFT = Inserted.CD_IFT)
 &lt;&gt;(Select Count(CD_IFT) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Informante da Situação de Vôo&gt; que se deseja incluir na tabela &lt;Chamadas de Anuncio&gt; não está cadastrada&#39;
  Return
End
If Update (CD_CHG)
/* Chegadas»Chamadas de Anuncio: Chamada da Chegada */
If (Select Count(*) From T_CHG, Inserted
Where T_CHG.CD_CHG = Inserted.CD_CHG)
 &lt;&gt;(Select Count(CD_CHG) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Chegadas&gt; que se deseja incluir na tabela &lt;Chamadas de Anuncio&gt; não está cadastrada&#39;
  Return
End
If Update (CD_PAR)
/* Partidas»Chamadas de Anuncio: Chamadas da Partida */
If (Select Count(*) From T_PAR, Inserted
Where T_PAR.CD_PAR = Inserted.CD_PAR)
 &lt;&gt;(Select Count(CD_PAR) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Partidas&gt; que se deseja incluir na tabela &lt;Chamadas de Anuncio&gt; não está cadastrada&#39;
  Return
End
If Update (CD_USR)
/* Usuários»Chamadas de Anuncio: Usuário da Chamada */
If (Select Count(*) From T_USR, Inserted
Where T_USR.CD_USR = Inserted.CD_USR)
 &lt;&gt;(Select Count(CD_USR) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Usuários&gt; que se deseja incluir na tabela &lt;Chamadas de Anuncio&gt; não está cadastrada&#39;
  Return
End
If Update (CD_MSG)
/* Mensagens»Chamadas de Anuncio: Mensagem da Chamada */
If (Select Count(*) From T_MSG, Inserted
Where T_MSG.CD_MSG = Inserted.CD_MSG)
 &lt;&gt;(Select Count(CD_MSG) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Mensagens&gt; que se deseja incluir na tabela &lt;Chamadas de Anuncio&gt; não está cadastrada&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o43"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:ClonePredecessor>
<c:Object>
<o:Table Ref="o34"/>
</c:Object>
</o:TableSymbol>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Id="o49">
<a:Rect>((-701329,650687), (-694625,655233))</a:Rect>
<a:LineColor>32768</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o50">
<a:ObjectID>69589F14-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_CHG</a:Name>
<a:Code>T_CHG</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081629218</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o51">
<a:ObjectID>69589F07-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_CHG</a:Name>
<a:Code>CD_CHG</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o52">
<a:ObjectID>69589F09-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>DT_CHG</a:Name>
<a:Code>DT_CHG</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_DAT    Script Date: 7/8/2000 12:14:35 ******/
Create Rule        RU_DAT As
DATEPART(hh,@data) = 0 AND
DATEPART(mi,@data) = 0 AND
DATEPART(ss,@data) = 0 AND
DATEPART(ms,@data) = 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>smalldatetime</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o53">
<a:ObjectID>69589F0B-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_AER</a:Name>
<a:Code>CD_AER</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o54">
<a:ObjectID>69589F0D-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NR_CHG_VOO</a:Name>
<a:Code>NR_CHG_VOO</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>char(10)</a:DataType>
<a:Length>10</a:Length>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o55">
<a:ObjectID>69589F10-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NR_CHG_HOT</a:Name>
<a:Code>NR_CHG_HOT</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>char(9)</a:DataType>
<a:Length>9</a:Length>
</o:Column>
<o:Column Id="o56">
<a:ObjectID>69589F12-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TP_CHG_GRU</a:Name>
<a:Code>TP_CHG_GRU</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DefaultValue>/****** Object:  Default dbo.DF_VAL_001    Script Date: 7/8/2000 12:14:36 ******/
Create Default        DF_VAL_001 As
1</a:DefaultValue>
<a:DataType>tinyint</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o57">
<a:ObjectID>69589F15-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TP_CHG</a:Name>
<a:Code>TP_CHG</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>tinyint</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o58">
<a:ObjectID>69589F17-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TP_CHG_NAT</a:Name>
<a:Code>TP_CHG_NAT</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>tinyint</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o59">
<a:ObjectID>69589F19-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TP_CHG_CTG</a:Name>
<a:Code>TP_CHG_CTG</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>tinyint</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o60">
<a:ObjectID>69589F1C-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_CHG_VIN</a:Name>
<a:Code>CD_CHG_VIN</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
</o:Column>
<o:Column Id="o61">
<a:ObjectID>69589F1F-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>FL_CHG_ANU</a:Name>
<a:Code>FL_CHG_ANU</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>bit</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o62">
<a:ObjectID>69589F21-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>FL_CHG_TEL</a:Name>
<a:Code>FL_CHG_TEL</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>bit</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o63">
<a:ObjectID>69589F23-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_EQP_CHG</a:Name>
<a:Code>CD_EQP_CHG</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
</o:Column>
<o:Column Id="o64">
<a:ObjectID>69589F25-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_AEN_CHG</a:Name>
<a:Code>CD_AEN_CHG</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
</o:Column>
<o:Column Id="o65">
<a:ObjectID>69589F27-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_BOX</a:Name>
<a:Code>CD_BOX</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
</o:Column>
<o:Column Id="o66">
<a:ObjectID>69589F29-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>QT_CHG_PER_MIN</a:Name>
<a:Code>QT_CHG_PER_MIN</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o67">
<a:ObjectID>69589F2B-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>DH_CHG_NRM</a:Name>
<a:Code>DH_CHG_NRM</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>smalldatetime</a:DataType>
</o:Column>
<o:Column Id="o68">
<a:ObjectID>69589F2D-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>DH_CHG_EFE</a:Name>
<a:Code>DH_CHG_EFE</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>smalldatetime</a:DataType>
</o:Column>
<o:Column Id="o69">
<a:ObjectID>69589F2F-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>DH_CHG_EST</a:Name>
<a:Code>DH_CHG_EST</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>smalldatetime</a:DataType>
</o:Column>
<o:Column Id="o70">
<a:ObjectID>69589F32-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NM_CHG_COM_SIT</a:Name>
<a:Code>NM_CHG_COM_SIT</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>varchar(30)</a:DataType>
<a:Length>30</a:Length>
</o:Column>
<o:Column Id="o71">
<a:ObjectID>69589F34-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>DH_CHG_SIT</a:Name>
<a:Code>DH_CHG_SIT</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>smalldatetime</a:DataType>
</o:Column>
<o:Column Id="o72">
<a:ObjectID>69589F36-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>FL_CHG_CAN</a:Name>
<a:Code>FL_CHG_CAN</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DefaultValue>/****** Object:  Default dbo.DF_VAL_ZRO    Script Date: 7/8/2000 12:14:36 ******/
Create Default        DF_VAL_ZRO As
0</a:DefaultValue>
<a:DataType>bit</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o73">
<a:ObjectID>69589F38-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TP_CHG_STA</a:Name>
<a:Code>TP_CHG_STA</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>tinyint</a:DataType>
</o:Column>
<o:Column Id="o74">
<a:ObjectID>69589F3C-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>FL_CHG_PAR_ORI</a:Name>
<a:Code>FL_CHG_PAR_ORI</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DefaultValue>/****** Object:  Default dbo.DF_VAL_ZRO    Script Date: 7/8/2000 12:14:36 ******/
Create Default        DF_VAL_ZRO As
0</a:DefaultValue>
<a:DataType>bit</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o75">
<a:ObjectID>69589F3E-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TIMESTAMP</a:Name>
<a:Code>TIMESTAMP</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o76">
<a:ObjectID>69589F64-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_CHG</a:Name>
<a:Code>Pk_T_CHG</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_CHG</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o51"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Indexes>
<o:Index Id="o77">
<a:ObjectID>69589F42-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_CHG_EFE</a:Name>
<a:Code>I_CHG_EFE</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Unique>1</a:Unique>
<c:IndexColumns>
<o:IndexColumn Id="o78">
<a:ObjectID>69589F44-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o73"/>
</c:Column>
</o:IndexColumn>
<o:IndexColumn Id="o79">
<a:ObjectID>69589F46-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_1&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o68"/>
</c:Column>
</o:IndexColumn>
<o:IndexColumn Id="o80">
<a:ObjectID>69589F48-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_2&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o51"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
<o:Index Id="o81">
<a:ObjectID>69589F49-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_CHG_GRU</a:Name>
<a:Code>I_CHG_GRU</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Unique>1</a:Unique>
<c:IndexColumns>
<o:IndexColumn Id="o82">
<a:ObjectID>69589F4A-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o73"/>
</c:Column>
</o:IndexColumn>
<o:IndexColumn Id="o83">
<a:ObjectID>69589F4C-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_1&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o56"/>
</c:Column>
</o:IndexColumn>
<o:IndexColumn Id="o84">
<a:ObjectID>69589F4E-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_2&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o51"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
<o:Index Id="o85">
<a:ObjectID>69589F50-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_CHG_STA</a:Name>
<a:Code>I_CHG_STA</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Unique>1</a:Unique>
<c:IndexColumns>
<o:IndexColumn Id="o86">
<a:ObjectID>69589F52-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o73"/>
</c:Column>
</o:IndexColumn>
<o:IndexColumn Id="o87">
<a:ObjectID>69589F54-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_1&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o51"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
<o:Index Id="o88">
<a:ObjectID>69589F56-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_CHG_STA_DAT</a:Name>
<a:Code>I_CHG_STA_DAT</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Unique>1</a:Unique>
<c:IndexColumns>
<o:IndexColumn Id="o89">
<a:ObjectID>69589F57-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o73"/>
</c:Column>
</o:IndexColumn>
<o:IndexColumn Id="o90">
<a:ObjectID>69589F58-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_1&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o52"/>
</c:Column>
</o:IndexColumn>
<o:IndexColumn Id="o91">
<a:ObjectID>69589F5A-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_2&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o51"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
<o:Index Id="o92">
<a:ObjectID>69589F5C-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_CHG_TP</a:Name>
<a:Code>I_CHG_TP</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:IndexColumns>
<o:IndexColumn Id="o93">
<a:ObjectID>69589F5E-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o57"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
<o:Index Id="o94">
<a:ObjectID>69589F60-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_CHG_VIN</a:Name>
<a:Code>I_CHG_VIN</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:IndexColumns>
<o:IndexColumn Id="o95">
<a:ObjectID>69589F62-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o60"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
</c:Indexes>
<c:Owner>
<o:User Ref="o16"/>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o96">
<a:ObjectID>6958A035-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_CHG_TRD</a:Name>
<a:Code>T_CHG_TRD</a:Code>
<a:Text>Create Trigger T_CHG_TRD On T_CHG
For Delete As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* Chegadas»Chegadas: Chegada Vinculada (Restrict) */
If (Select Count(*) From T_CHG dep, Deleted pri
 Where dep.CD_CHG_VIN = pri.CD_CHG) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Chegadas&gt; está sendo referenciada na tabela &lt;Chegadas&gt;&#39;
  Return
End
/* Chegadas»Chamadas de Anuncio: Chamada da Chegada (Cascade) */
Delete T_CHA From T_CHA dep, Deleted pri
 Where dep.CD_CHG = pri.CD_CHG
/* Chegadas»Mensagem de Chegada: Chegada da Mensagem (Cascade) */
Delete T_MCH From T_MCH dep, Deleted pri
 Where dep.CD_CHG = pri.CD_CHG
/* Chegadas»Histórico de Situação de Vôo de Chegada: Chegada do HSC (Cascade) */
Delete T_HSC From T_HSC dep, Deleted pri
 Where dep.CD_CHG = pri.CD_CHG
/* Chegadas»Log da Programação de Anúncios: Chegadas do Log de Programação (Cascade) */
Delete T_PRALOG From T_PRALOG dep, Deleted pri
 Where dep.CD_CHG = pri.CD_CHG
/* Chegadas»Dados Estatísticos de Chegada: Dados Estatísticos da Chegada (Cascade) */
Delete T_DEC From T_DEC dep, Deleted pri
 Where dep.CD_CHG = pri.CD_CHG
/* Chegadas»Escala da Chegada de Vôo: Escalas de Chegada (Cascade) */
Delete T_ECC001 From T_ECC001 dep, Deleted pri
 Where dep.CD_CHG = pri.CD_CHG
/* Chegadas»Esteira da Chegada de Vôo: Esteiras de Chegada (Cascade) */
Delete T_ESV001 From T_ESV001 dep, Deleted pri
 Where dep.CD_CHG = pri.CD_CHG
/* Chegadas»Histórico de Permanência de Aeronaves: Histórico de Permanência dos Vôos de Chegada (Cascade) */
Delete T_HPA001 From T_HPA001 dep, Deleted pri
 Where dep.CD_CHG = pri.CD_CHG
/* Chegadas»Chegadas Candidatas a Vôo Antecessor: Vôo de Chegada candidato a antecessor (Cascade) */
Delete T_CHGANT From T_CHGANT dep, Deleted pri
 Where dep.CD_CHG = pri.CD_CHG
/* Chegadas»Partidas: Chegada Antecessora (Set Null) */
Update T_PAR Set CD_CHG_ANT = Null
 From T_PAR dep, Deleted pri
 Where dep.CD_CHG_ANT = pri.CD_CHG
/* Chegadas»Partidas: Chegada da Aeronave Sucessora (Set Null) */
Update T_PAR Set CD_CHG_AEN_ANT = Null
 From T_PAR dep, Deleted pri
 Where dep.CD_CHG_AEN_ANT = pri.CD_CHG
/* Regra de negócio */
/* INCLUIR REGISTROS EM T_ACH */
INSERT	T_ACH (DH_ACH, CD_CHG)
SELECT GETDATE(), CD_CHG FROM DELETED

End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>D</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o97">
<a:ObjectID>6958A037-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_CHG_TRI</a:Name>
<a:Code>T_CHG_TRI</a:Code>
<a:Text>Create Trigger T_CHG_TRI On T_CHG
For Insert As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* Aeroporto»Chegadas: Aeroporto da Chegada */
If (Select Count(*) From T_AER, Inserted
Where T_AER.CD_AER = Inserted.CD_AER)
 &lt;&gt;(Select Count(CD_AER) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Aeroporto&gt; que se deseja incluir na tabela &lt;Chegadas&gt; não está cadastrada&#39;
  Return
End
/* Aeronave»Chegadas: Aeronave da Chegada */
If (Select Count(*) From T_AEN, Inserted
Where T_AEN.CD_AEN = Inserted.CD_AEN_CHG)
 &lt;&gt;(Select Count(CD_AEN_CHG) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Aeronave&gt; que se deseja incluir na tabela &lt;Chegadas&gt; não está cadastrada&#39;
  Return
End
/* Companhia Aérea»Chegadas: Comapanhia Aérea da Chegada */
If (Select Count(*) From T_COM, Inserted
Where T_COM.CD_COM = Inserted.CD_COM)
 &lt;&gt;(Select Count(CD_COM) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Companhia Aérea&gt; que se deseja incluir na tabela &lt;Chegadas&gt; não está cadastrada&#39;
  Return
End
/* Equipamento»Chegadas: Equipamento da Chegada */
If (Select Count(*) From T_EQP, Inserted
Where T_EQP.CD_EQP = Inserted.CD_EQP_CHG)
 &lt;&gt;(Select Count(CD_EQP_CHG) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Equipamento&gt; que se deseja incluir na tabela &lt;Chegadas&gt; não está cadastrada&#39;
  Return
End
/* Box»Chegadas: Box da Chegada */
If (Select Count(*) From T_BOX, Inserted
Where T_BOX.CD_BOX = Inserted.CD_BOX)
 &lt;&gt;(Select Count(CD_BOX) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Box&gt; que se deseja incluir na tabela &lt;Chegadas&gt; não está cadastrada&#39;
  Return
End
/* Situação»Chegadas: Situação da Chegada */
If (Select Count(*) From T_SIT, Inserted
Where T_SIT.CD_SIT = Inserted.CD_SIT)
 &lt;&gt;(Select Count(CD_SIT) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Situação&gt; que se deseja incluir na tabela &lt;Chegadas&gt; não está cadastrada&#39;
  Return
End
/* Informante da Situação de Vôo»Chegadas: Informante da Situação de Chegada */
If (Select Count(*) From T_IFT, Inserted
Where T_IFT.CD_IFT = Inserted.CD_IFT)
 &lt;&gt;(Select Count(CD_IFT) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Informante da Situação de Vôo&gt; que se deseja incluir na tabela &lt;Chegadas&gt; não está cadastrada&#39;
  Return
End
/* Chegadas»Chegadas: Chegada Vinculada */
If (Select Count(*) From T_CHG, Inserted
Where T_CHG.CD_CHG = Inserted.CD_CHG_VIN)
 &lt;&gt;(Select Count(CD_CHG_VIN) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Chegadas&gt; que se deseja incluir na tabela &lt;Chegadas&gt; não está cadastrada&#39;
  Return
End
/* Usuários»Chegadas: Usuário logado */
If (Select Count(*) From T_USR, Inserted
Where T_USR.CD_USR = Inserted.CD_USR)
 &lt;&gt;(Select Count(CD_USR) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Usuários&gt; que se deseja incluir na tabela &lt;Chegadas&gt; não está cadastrada&#39;
  Return
End
/* Domínio de: Grupo do Vôo */
/* 1 - Grupo 1 */
/* 2 - Grupo 2 */
If (Select Count(*) From Inserted
    Where TP_CHG_GRU In (1,2))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Grupo do Vôo&gt; que se deseja incluir na tabela &lt;Chegadas&gt; não é uma opção válida&#39;
  Return
End
/* Domínio de: Tipo do Vôo de Chegada */
/* 1 - DOM-Doméstico */
/* 2 - INT-Internacional */
/* 3 - REG-Regional */
If (Select Count(*) From Inserted
    Where TP_CHG In (1,2,3))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Tipo do Vôo de Chegada&gt; quese deseja incluir na tabela &lt;Chegadas&gt; não é uma opção válida&#39;
  Return
End
/* Domínio de: Natureza do Vôo de Chegada */
/* 1 - PAX-Passageiro */
/* 2 - CRG-Carga */
/* 3 - MIS-Misto */
/* 4 - TSL-Translado */
If (Select Count(*) From Inserted
    Where TP_CHG_NAT In (1,2,3,4))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Natureza do Vôo de Chegada&gt; que se deseja incluir na tabela &lt;Chegadas&gt; não é uma opção válida&#39;
  Return
End
/* Domínio de: Categoria do Vôo de Chegada */
/* 1 - RGL-Regular */
/* 2 - CHT-Charter */
/* 3 - CSH-Codeshare */
/* 4 - DPL-Duplicate Leg */
/* 5 - TEC-Pouso Técnico */
/* 6 - TSL-Translado */
/* 7 - AVG-Aviação Geral */
/* 8 - MLT-Militar */
/* 9 - NRG-Não Regular */
/* 10 - TXA-Táxi Aéreo */
If (Select Count(*) From Inserted
    Where TP_CHG_CTG In (1,2,3,4,5,6,7,8,9,10))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Categoria do Vôo de Chegada&gt; que se deseja incluir na tabela &lt;Chegadas&gt; não é uma opção válida&#39;
  Return
End
/* Domínio de: Status de Chegada do Vôo */
/* 1 - Em Aberto */
/* 2 - Concluído */
If (Select Count(*) From Inserted
    Where TP_CHG_STA In (1,2))
 &lt;&gt;(Select Count(*) From Inserted
    Where TP_CHG_STA Is Not Null)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Status de Chegada do Vôo&gt; que se deseja incluir na tabela &lt;Chegadas&gt; não é uma opção válida&#39;
  Return
End
/* Regra de negócio */
/* RESTRIÇÕES */
/*********************************** RETIRADO PELO RONALDO EM 11/3/98 ***********************************************************
/* A data do vôo sendo incluído não pode ser maior do que a data posterior à da última geração nem anterior a data de hoje */
IF (	SELECT 	COUNT(*) 
	FROM 	INSERTED INS
	WHERE	(DATEDIFF(MI, Dateadd(HH, -Datepart(HH, GETDATE()), Dateadd(mi, -datepart(mi, GETDATE()), GETDATE())), INS.DT_CHG) &lt; 0 OR   /* (DATEDIFF(MI, CONVERT(DATETIME, (CONVERT(VARCHAR, DATEPART(MM, GETDATE())) + &#39;/&#39; + CONVERT(VARCHAR, DATEPART(DD, GETDATE()))  + &#39;/&#39; + CONVERT(VARCHAR, DATEPART(YY, GETDATE())) +  &#39; 00:00&#39;)), INS.DT_CHG) &lt; 0 OR */
		DATEADD(DD, -1, INS.DT_CHG) &gt; (SELECT MAX(DT_CHG) FROM T_CHG WHERE CD_CHG &lt;&gt; INS.CD_CHG) ) AND INS.NR_CHG_HOT IS NOT NULL) &gt; 0
BEGIN
	RAISERROR 20999 &#39;Operação não executada: Não é permitida a geração de vôos de datas anteriores à data de hoje ou posteriores à data da última geração mais um dia.&#39;
	ROLLBACK TRANSACTION
	RETURN
END
**********************************************************************************************************************************************/

/* Um vôo não pode ser incluído CANCELADO */
IF (	SELECT 	COUNT(*)
	FROM	INSERTED INS, 
		T_SIT SIT
	WHERE	SIT.CD_SIT = INS.CD_SIT AND
		FL_SIT_CAN_VOO &lt;&gt; 0) &gt; 0
BEGIN
	RAISERROR 20999 &#39;Operação não executada: Não é permitida a inclusão de vôos com situação de chegada cancelada&#39;
	ROLLBACK TRANSACTION
	RETURN
END

/* Incluir HPA dos registros de Chegada a incluir */
/* Declaração do cursor */
DECLARE INSCHG CURSOR FOR
	SELECT 	CHG.CD_AER,
		CHG.CD_EQP_CHG,
		CHG.CD_AEN_CHG,
		CHG.CD_BOX,
		CHG.CD_CHG,
		CHG.DH_CHG_NRM
	FROM	T_CHG CHG,
		INSERTED INS
	WHERE	CHG.CD_CHG = INS.CD_CHG AND
		CHG.TP_CHG_CTG NOT IN (3, 4)
	ORDER BY CHG.CD_CHG

/* Declaração das variáveis que receberão o cursor */
DECLARE @CD_AER	INT,
	 @CD_EQP_CHG 	INT,
	 @CD_AEN_CHG	INT,
	 @CD_BOX	INT,
	 @CD_CHG	INT,
	 @DH_CHG_NRM	SMALLDATETIME

/* Abertura do cursor */
OPEN INSCHG

/* Ir para o primeiro registro */
FETCH	INSCHG
INTO	@CD_AER,
	 @CD_EQP_CHG,
	 @CD_AEN_CHG,
	 @CD_BOX,
	 @CD_CHG,
	 @DH_CHG_NRM

/* Processar todos os registros de INSCHG*/
WHILE @@FETCH_STATUS = 0
BEGIN

	/* Lançar Histórico de Permanência de Aeronaves */
	INSERT T_HPA001 (
		CD_HPA,
		NR_HPA_SEQ,
		CD_AER,
		CD_EQP,
		CD_AEN,
		CD_BOX,
		CD_CHG,
		DH_HPA_ENT)
	SELECT	ISNULL(MAX(CD_HPA), 0) +1,
		1, 
		@CD_AER,
		@CD_EQP_CHG,
		@CD_AEN_CHG,
		@CD_BOX,
		@CD_CHG,
		@DH_CHG_NRM
	FROM	T_HPA001 HPA

	/* Ir para o próximo registro */
	FETCH NEXT FROM INSCHG
	INTO	@CD_AER,
		@CD_EQP_CHG,
		@CD_AEN_CHG,
		@CD_BOX,
		@CD_CHG,
		@DH_CHG_NRM

END
CLOSE INSCHG
DEALLOCATE INSCHG


/* Milena 14/01/98 - Inserir vôo que está sendo incluído na tabela de Vôos candidatos a vôo Antecessor se 
o vôo não for Codeshare ou Duplicate Leg */
INSERT T_CHGANT (
	CD_CHG)
SELECT	CD_CHG
FROM	INSERTED INS
WHERE	INS.TP_CHG_CTG NOT IN (3,4)

/* PROVOCAR A EXECUÇÃO DA TRIGGER DE UPDATE PARA A COMPLEMENTAÇÃO DAS VERIFICAÇÕES
    E PROCESSAR OUTRAS ATUALIZAÇÕES */
UPDATE	T_CHG
SET	CD_SIT = CHG.CD_SIT,
	DH_CHG_SIT = CHG.DH_CHG_NRM
FROM	T_CHG CHG,
	INSERTED INS

WHERE	CHG.CD_CHG = INS.CD_CHG
End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>I</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o98">
<a:ObjectID>69589E8F-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_CHG_TRU</a:Name>
<a:Code>T_CHG_TRU</a:Code>
<a:Text>CREATE Trigger T_CHG_TRU On T_CHG
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_CHG)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código do Vôo de Chegada&gt; da tabela &lt;Chegadas&gt; não pode ser alterada.&#39;
  Return
End
If Update (CD_AER)
/* Aeroporto Chegadas: Aeroporto da Chegada */
If (Select Count(*) From T_AER, Inserted
Where T_AER.CD_AER = Inserted.CD_AER)
 &lt;&gt;(Select Count(CD_AER) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Aeroporto&gt; que se deseja incluir na tabela &lt;Chegadas&gt; não está cadastrada&#39;
  Return
End
If Update (CD_AEN_CHG)
/* Aeronave»Chegadas: Aeronave da Chegada */
If (Select Count(*) From T_AEN, Inserted
Where T_AEN.CD_AEN = Inserted.CD_AEN_CHG)
 &lt;&gt;(Select Count(CD_AEN_CHG) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Aeronave&gt; que se deseja incluir na tabela &lt;Chegadas&gt; não está cadastrada&#39;
  Return
End
If Update (CD_COM)
/* Companhia Aérea»Chegadas: Comapanhia Aérea da Chegada */
If (Select Count(*) From T_COM, Inserted
Where T_COM.CD_COM = Inserted.CD_COM)
 &lt;&gt;(Select Count(CD_COM) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Companhia Aérea&gt; que se deseja incluir na tabela &lt;Chegadas&gt; não está cadastrada&#39;
  Return
End
If Update (CD_EQP_CHG)
/* Equipamento»Chegadas: Equipamento da Chegada */
If (Select Count(*) From T_EQP, Inserted
Where T_EQP.CD_EQP = Inserted.CD_EQP_CHG)
 &lt;&gt;(Select Count(CD_EQP_CHG) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Equipamento&gt; que se deseja incluir na tabela &lt;Chegadas&gt; não está cadastrada&#39;
  Return
End
If Update (CD_BOX)
/* Box»Chegadas: Box da Chegada */
If (Select Count(*) From T_BOX, Inserted
Where T_BOX.CD_BOX = Inserted.CD_BOX)
 &lt;&gt;(Select Count(CD_BOX) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Box&gt; que se deseja incluir na tabela &lt;Chegadas&gt; não está cadastrada&#39;
  Return
End
If Update (CD_SIT)
/* Situação»Chegadas: Situação da Chegada */
If (Select Count(*) From T_SIT, Inserted
Where T_SIT.CD_SIT = Inserted.CD_SIT)
 &lt;&gt;(Select Count(CD_SIT) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Situação&gt; que se deseja incluir na tabela &lt;Chegadas&gt; não está cadastrada&#39;
  Return
End
If Update (CD_IFT)
/* Informante da Situação de Vôo»Chegadas: Informante da Situação de Chegada */
If (Select Count(*) From T_IFT, Inserted
Where T_IFT.CD_IFT = Inserted.CD_IFT)
 &lt;&gt;(Select Count(CD_IFT) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Informante da Situação de Vôo&gt; que se deseja incluir na tabela &lt;Chegadas&gt; não está cadastrada&#39;
  Return
End
If Update (CD_CHG_VIN)
/* Chegadas»Chegadas: Chegada Vinculada */
If (Select Count(*) From T_CHG, Inserted
Where T_CHG.CD_CHG = Inserted.CD_CHG_VIN)
 &lt;&gt;(Select Count(CD_CHG_VIN) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Chegadas&gt; que se deseja incluir na tabela &lt;Chegadas&gt; não está cadastrada&#39;
  Return
End
If Update (CD_USR)
/* Usuários»Chegadas: Usuário logado */
If (Select Count(*) From T_USR, Inserted
Where T_USR.CD_USR = Inserted.CD_USR)
 &lt;&gt;(Select Count(CD_USR) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Usuários&gt; que se deseja incluir na tabela &lt;Chegadas&gt; não está cadastrada&#39;
  Return
End
If Update (TP_CHG_GRU)
Or Update (TP_CHG)
Or Update (TP_CHG_NAT)
Or Update (TP_CHG_CTG)
Or Update (TP_CHG_STA)
/* Domínio de: Grupo do Vôo */
/* 1 - Grupo 1 */
/* 2 - Grupo 2 */
If (Select Count(*) From Inserted
    Where TP_CHG_GRU In (1,2))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBackTransaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Grupo do Vôo&gt; que se deseja incluir na tabela &lt;Chegadas&gt; não é uma opção válida&#39;
  Return
End
/* Domínio de: Tipo do Vôo de Chegada */
/* 1 - DOM-Doméstico */
/* 2 - INT-Internacional */
/* 3 - REG-Regional */
If (Select Count(*) From Inserted
    Where TP_CHG In (1,2,3))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Tipo do Vôo de Chegada&gt; que se deseja incluir na tabela &lt;Chegadas&gt; não é uma opção válida&#39;
  Return
End
/* Domínio de: Natureza do Vôo de Chegada */
/* 1 - PAX-Passageiro */
/* 2 - CRG-Carga */
/* 3 - MIS-Misto */
/* 4 - TSL-Translado */
If (Select Count(*) From Inserted
    Where TP_CHG_NAT In (1,2,3,4))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Natureza do Vôo de Chegada&gt; que se deseja incluir na tabela &lt;Chegadas&gt; não é uma opção válida&#39;
  Return
End
/* Domínio de: Categoria do Vôo de Chegada */
/* 1 - RGL-Regular */
/* 2 - CHT-Charter */
/* 3 - CSH-Codeshare */
/* 4 - DPL-Duplicate Leg */
/* 5 - TEC-Pouso Técnico */
/* 6 - TSL-Translado */
/* 7 - AVG-Aviação Geral */
/* 8 - MLT-Militar */
/* 9 - NRG-Não Regular */
/* 10 - TXA-Táxi Aéreo */
If (Select Count(*) From Inserted
    Where TP_CHG_CTG In (1,2,3,4,5,6,7,8,9,10))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Categoria do Vôo de Chegada&gt; que se deseja incluir na tabela &lt;Chegadas&gt; não é uma opção válida&#39;
  Return
End
/* Domínio de: Status de Chegada do Vôo */
/* 1 - Em Aberto */
/* 2 - Concluído */
If (Select Count(*) From Inserted
    Where TP_CHG_STA In (1,2))
 &lt;&gt;(Select Count(*) From Inserted
    Where TP_CHG_STA Is Not Null)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Status de Chegada do Vôo&gt; que se deseja incluir na tabela &lt;Chegadas&gt; não é uma opção válida&#39;
  Return
End
/* Regra de negócio */
--CSH OU DPL
IF UPDATE(TP_CHG_CTG) OR UPDATE(CD_CHG_VIN)
	--Um vôo do tipo normal ou charter não pode ter vôo vinculado e um vôo do tipo CSH ou DPL tem de ter vôo vinculado
	IF (	SELECT 	COUNT(*) FROM INSERTED
		WHERE	(TP_CHG_CTG NOT IN (3,4) AND CD_CHG_VIN IS NOT NULL) OR (TP_CHG_CTG IN (3,4) AND CD_CHG_VIN IS NULL)) &gt; 0
	BEGIN
		RAISERROR 20999 &#39;Operação não executada: Um vôo do tipo Normal ou Charter não pode ter vôo vinculado, e um vôo do tipo Codeshare ou Duplicate Leg tem de ter vôo vinculado.&#39;
		ROLLBACK TRANSACTION
		RETURN
	END
IF UPDATE(TP_CHG_CTG)
	--Um vôo do tipo CSH ou DPL não pode ter vôo de PAR associado
	IF (	SELECT 	COUNT(*) FROM	INSERTED INS
		WHERE	TP_CHG_CTG IN (3,4) AND 
			EXISTS (SELECT * FROM T_PAR PAR WHERE PAR.CD_CHG_AEN_ANT = INS.CD_CHG)) &gt; 0
	BEGIN
		RAISERROR 20999 &#39;Operação não executada: Um vôo do tipo Codeshare ou Duplicate Leg não pode ter vôo de partida associado.&#39;
		ROLLBACK TRANSACTION
		RETURN
	END
--Não permitir que um vôo de CHG que tenha sido alterado para concluído, sem estar Cancelado e sem ser CSH ou DPL, possua o campo de aeronave nulo
IF (	SELECT 	COUNT(*) FROM 	INSERTED INS, T_SIT SIT
	WHERE	SIT.CD_SIT = INS.CD_SIT AND SIT.FL_SIT_CON_VOO = 1 AND INS.FL_CHG_CAN = 0 AND INS.TP_CHG_CTG NOT IN (3, 4) AND INS.CD_AEN_CHG IS NULL) &gt; 0
BEGIN
	RAISERROR 20999 &#39;Operação não executada: &lt;Hora de Entrada de Estacionamento&gt; ou &lt;Aeronave&gt; não informados.&#39;
	ROLLBACK TRANSACTION
	RETURN
END
IF UPDATE(CD_SIT)
BEGIN
	--Verificar se a situação informada é uma situação de CHG
	IF (SELECT COUNT(*) FROM	INSERTED INS, T_SIT SIT WHERE SIT.CD_SIT = INS.CD_SIT AND SIT.FL_SIT_CHG &lt;&gt; 1) &gt; 0
	BEGIN
		RAISERROR 20999 &#39;Operação não executada: A situação informada não é uma situação de chegada.&#39;
		ROLLBACK TRANSACTION
		RETURN
	END
END
--Atualizar o complemento de chegada
IF UPDATE(CD_SIT) OR UPDATE(DH_CHG_EFE)
BEGIN
	--Hora
	UPDATE	T_CHG SET NM_CHG_COM_SIT = CONVERT(CHAR(5), CHG.DH_CHG_EFE, 8)
	FROM	T_CHG CHG, INSERTED INS, T_SIT SIT
	WHERE	CHG.CD_CHG = INS.CD_CHG AND SIT.CD_SIT = CHG.CD_SIT AND SIT.TP_SIT_COM = 1
	--Nenhum
	UPDATE	T_CHG SET NM_CHG_COM_SIT = NULL
	FROM	T_CHG CHG, INSERTED INS, T_SIT SIT
	WHERE	CHG.CD_CHG = INS.CD_CHG AND SIT.CD_SIT = CHG.CD_SIT AND SIT.TP_SIT_COM = 3
	--Caso a Data e Hora da Situação não já tenha sido alerada
	IF NOT UPDATE(DH_CHG_SIT)
	BEGIN
		--Atualizar hora da alteração da situação do vôo de CHG
		UPDATE	T_CHG SET DH_CHG_SIT = GETDATE()
		FROM	T_CHG CHG, INSERTED INS
		WHERE	CHG.CD_CHG = INS.CD_CHG
	END
END
IF UPDATE(CD_SIT)
BEGIN
	--Um vôo de PAR não pode ser cancelado se existir algum registro em T_DEC para este vôo ou para um dos seus vôos vinculados
	IF (	SELECT	COUNT(*) FROM INSERTED INS, T_SIT SIT
		WHERE	SIT.CD_SIT = INS.CD_SIT AND SIT.FL_SIT_CAN_VOO = 1 AND
			(EXISTS (SELECT CD_CHG FROM T_DEC WHERE CD_CHG = INS.CD_CHG) OR
			EXISTS (SELECT DEC.CD_CHG FROM T_DEC DEC, T_CHG CHG WHERE CHG.CD_CHG_VIN = INS.CD_CHG AND DEC.CD_CHG = CHG.CD_CHG))) &gt; 0
	BEGIN
		RAISERROR 20999 &#39;Operação não executada: O vôo de Chegada não pode ser cancelado pois existe registro de &lt;Dados Estatísticos de Chegada&gt; para este vôo ou para algum de seus vôos vinculados.&#39;
		ROLLBACK TRANSACTION
		RETURN
	END
	--A alteração da situação de vôo de CHG de Etapa Concluída para outra qualquer não pode ser efetuada se o HPA do vôo estiver associado a mais de um Status
	IF (	SELECT 	COUNT(*)
		FROM 	T_STA STA, T_HPA001 HPA, INSERTED INS, DELETED DEL, T_SIT SITDEL, T_SIT SITINS
		WHERE 	STA.CD_STA = HPA.CD_STA AND HPA.CD_CHG = INS.CD_CHG AND
			DEL.CD_CHG = INS.CD_CHG AND SITDEL.CD_SIT = DEL.CD_SIT AND
			SITDEL.FL_SIT_CON_VOO = 1 AND SITINS.CD_SIT = INS.CD_SIT AND
			SITINS.FL_SIT_CON_VOO = 0) &gt; 1
	BEGIN
		RAISERROR 20999 &#39;Operação não executada: A situação do vôo não pode ser alterada de Etapa Concluída para outra qualquer se este vôo estiver associado a mais de um Status de Aeronave.&#39;
		ROLLBACK TRANSACTION
		RETURN
	END
	--Atualizar Flag de CHG Cancelada em vôo
	UPDATE 	T_CHG SET FL_CHG_CAN = SIT.FL_SIT_CAN_VOO
	FROM 	T_CHG CHG, INSERTED INS, T_SIT SIT
	WHERE 	CHG.CD_CHG = INS.CD_CHG AND SIT.CD_SIT = INS.CD_SIT AND (SIT.FL_SIT_CAN_VOO = 1 OR SIT.FL_SIT_CON_VOO = 0)
	--Setar CD_CHG_ANT do vôo sucessor para nulo caso a CHG seja cancelada
	IF (	SELECT 	COUNT(*) FROM T_PAR PAR, INSERTED INS, T_SIT SIT
		WHERE 	PAR.CD_CHG_ANT = INS.CD_CHG AND SIT.CD_SIT = INS.CD_SIT AND SIT.FL_SIT_CAN_VOO = 1) &gt; 0
	BEGIN
		UPDATE 	T_PAR SET CD_CHG_ANT = NULL
		FROM 	T_PAR PAR, INSERTED INS, T_SIT SIT
		WHERE 	PAR.CD_CHG_ANT = INS.CD_CHG AND SIT.CD_SIT = INS.CD_SIT AND SIT.FL_SIT_CAN_VOO = 1
	END
	--Setar CD_CHG_AEN_ANT do vôo da aeronave sucessora para nulo caso a CHG seja cancelada
	IF (	SELECT 	COUNT(*) FROM T_PAR PAR, INSERTED INS, T_SIT SIT
		WHERE 	PAR.CD_CHG_AEN_ANT = INS.CD_CHG AND SIT.CD_SIT = INS.CD_SIT AND SIT.FL_SIT_CAN_VOO = 1) &gt;0
	BEGIN
		UPDATE 	T_PAR SET CD_CHG_AEN_ANT = NULL
		FROM 	T_PAR PAR, INSERTED INS, T_SIT SIT
		WHERE 	PAR.CD_CHG_AEN_ANT = INS.CD_CHG AND SIT.CD_SIT = INS.CD_SIT AND SIT.FL_SIT_CAN_VOO = 1
	END
	--Atualizar o Código da Aeronave para Null caso a CHG tenha sido cancelado
	IF (	SELECT COUNT(*) 	FROM T_CHG CHG, INSERTED INS, T_SIT SIT
		WHERE  	CHG.CD_CHG = INS.CD_CHG AND SIT.CD_SIT = INS.CD_SIT AND SIT.FL_SIT_CAN_VOO = 1) &gt; 0
	BEGIN
		UPDATE 	T_CHG SET CD_AEN_CHG = NULL
		FROM 	T_CHG CHG, INSERTED INS, T_SIT SIT
		WHERE  	CHG.CD_CHG = INS.CD_CHG AND SIT.CD_SIT = INS.CD_SIT AND SIT.FL_SIT_CAN_VOO = 1
	END
	--Apagar os HPA&#39;s de CHG caso a CHG tenha sido cancelada
	IF (	SELECT	COUNT(*) FROM T_HPA001 HPA, T_SIT SIT, INSERTED INS
		WHERE  	HPA.CD_CHG = INS.CD_CHG AND SIT.CD_SIT = INS.CD_SIT AND SIT.FL_SIT_CAN_VOO = 1) &gt; 0
	BEGIN
		DELETE 	T_HPA001
		FROM 	T_HPA001 HPA, T_SIT SIT, INSERTED INS
		WHERE  	HPA.CD_CHG = INS.CD_CHG AND SIT.CD_SIT = INS.CD_SIT AND SIT.FL_SIT_CAN_VOO = 1
	END
	--Excluir vôo da tabela de vôos candidatos a vôos Antecessores se a CHG tiver sido cancelada
	IF (	SELECT 	COUNT(*) FROM T_CHGANT CHGANT, T_SIT SIT, INSERTED INS
		WHERE	CHGANT.CD_CHG = INS.CD_CHG AND SIT.CD_SIT = INS.CD_SIT AND SIT.FL_SIT_CAN_VOO = 1) &gt; 0
	BEGIN
		DELETE	T_CHGANT
		FROM	T_CHGANT CHGANT, T_SIT SIT, INSERTED INS
		WHERE	CHGANT.CD_CHG = INS.CD_CHG AND SIT.CD_SIT = INS.CD_SIT AND SIT.FL_SIT_CAN_VOO = 1
	END
	--Incluir vôo na tabela de vôos candidatos a vôos Antecessores se a CHG estiver cancelada e for alterada para uma situação diferente de Etapa Concluída  e Cancelado
	IF (	SELECT 	COUNT(*) FROM T_CHG CHG, T_SIT SIT, INSERTED INS, DELETED DEL
		WHERE	CHG.CD_CHG = INS.CD_CHG AND INS.CD_CHG = DEL.CD_CHG AND
			DEL.FL_CHG_CAN = 1 AND SIT.CD_SIT = INS.CD_SIT AND
			SIT.FL_SIT_CON_VOO = 0 AND SIT.FL_SIT_CAN_VOO = 0) &gt; 0
	BEGIN
		INSERT	T_CHGANT (CD_CHG)
		SELECT	CHG.CD_CHG FROM T_CHG CHG, T_SIT SIT, INSERTED INS, DELETED DEL
		WHERE	CHG.CD_CHG = INS.CD_CHG AND INS.CD_CHG = DEL.CD_CHG AND
			DEL.FL_CHG_CAN = 1 AND SIT.CD_SIT = INS.CD_SIT AND
			SIT.FL_SIT_CON_VOO = 0 AND SIT.FL_SIT_CAN_VOO = 0
	END
	--Deletar da tabela T_REP todos os registros que tiverem os campos companhia e número do vôo iguais aos do registro atualizado e o aeroporto destino igual ao aeroporto usuário, caso a situação	do vôo tenha sido alterada para &quot;Etapa Concluída&quot;
	DELETE	T_REP001 FROM INSERTED INS, T_REP001 REP, T_COM COM, T_SIT SIT
	WHERE	SIT.CD_SIT = INS.CD_SIT AND
		SIT.FL_SIT_CON_VOO = 1 AND	--Etapa Concluída
		COM.CD_COM = INS.CD_COM AND
		RTRIM(REP.SG_COM_IAT_003) = RTRIM(COM.SG_COM_IAT_003) AND
		RTRIM(REP.NR_VOO) = RTRIM(INS.NR_CHG_VOO) AND
		REP.SG_AER_ICA_DES = (SELECT SG_AER_ICA FROM T_AER WHERE CD_AER = (SELECT CD_AER FROM T_PSI))
	--Setar flag de vôo não concluído ou concluído
	UPDATE 	T_CHG SET TP_CHG_STA = SIT.FL_SIT_CON_VOO + 1   --2=Concluída
	FROM 	T_CHG CHG, T_SIT SIT, INSERTED INS
	WHERE 	CHG.CD_CHG = INS.CD_CHG AND SIT.CD_SIT = INS.CD_SIT
	--Atualizar Flag de entrada concluída em T_HPA
	UPDATE 	T_HPA001 SET FL_HPA_ENT = SIT.FL_SIT_CON_VOO 
	FROM 	T_HPA001 HPA, T_SIT SIT, INSERTED INS
	WHERE  	HPA.CD_CHG = INS.CD_CHG AND SIT.CD_SIT = INS.CD_SIT 
	--INCLUSÃO DE STATUS DA AERONAVE
	DECLARE INSSTA CURSOR FOR
		SELECT 	INS.CD_CHG, INS.CD_SIT, INS.DH_CHG_EFE, AEN.FL_AEN_ISE, 
			COM.FL_COM_TAR_RED, PSI.QT_PSI_ISE, PSI.QT_PSI_TAR_RED
		FROM	INSERTED INS,  T_AEN AEN, T_COM COM, T_PSI PSI
		WHERE	TP_CHG_CTG NOT IN (3, 4) 	AND AEN.CD_AEN = INS.CD_AEN_CHG AND COM.CD_COM = INS.CD_COM
		ORDER BY CD_CHG
	--Declaração das variáveis
	DECLARE	@CD_CHG INT, @CD_SIT INT, @DH_CHG_EFE SMALLDATETIME, @CD_STA INT,
			@FL_AEN_ISE TINYINT, @FL_COM_TAR_RED TINYINT, 	@QT_PSI_ISE INT, @QT_PSI_TAR_RED INT
	--Abre o curso e posiciona no primeiro registro
	OPEN INSSTA
	FETCH	INSSTA INTO @CD_CHG, @CD_SIT, @DH_CHG_EFE, @FL_AEN_ISE, @FL_COM_TAR_RED, @QT_PSI_ISE, @QT_PSI_TAR_RED
	--Processar todos os registros de INSSTA
	WHILE @@FETCH_STATUS = 0
	BEGIN
		SELECT @CD_STA = (SELECT ISNULL(MAX(CD_STA), 0) +1 FROM T_STA)
		--Inserir o Status caso a situação seja Etapa Concluída e o vôo não esteja Cancelado
		INSERT 	INTO T_STA (
			CD_STA, DH_STA_ABE, MA_STA_ABE, NR_STA,
			DH_STA_FEC, MA_STA_FEC, CD_STA_ANT,
			TP_STA, 	FL_STA_AEN_ISE, FL_STA_COM_TAR_RED, 
			QT_STA_PSI_ISE, 	QT_STA_PSI_TAR_RED)
		SELECT	@CD_STA,
			@DH_CHG_EFE, 
			DATEADD(DD, 1- DATEPART(DD, Dateadd(HH, -Datepart(HH, @DH_CHG_EFE), Dateadd(mi, -datepart(mi, @DH_CHG_EFE), @DH_CHG_EFE))), Dateadd(HH, -Datepart(HH, @DH_CHG_EFE), Dateadd(mi, -datepart(mi, @DH_CHG_EFE), @DH_CHG_EFE))), --Primeiro dia do mês da Data da CHG
			(SELECT ISNULL(MAX(NR_STA), 0) + 1 FROM T_STA STA WHERE STA.MA_STA_ABE = DATEADD(DD, 1- DATEPART(DD, Dateadd(HH, -Datepart(HH, @DH_CHG_EFE), Dateadd(mi, -datepart(mi, @DH_CHG_EFE), @DH_CHG_EFE))), Dateadd(HH, -Datepart(HH, @DH_CHG_EFE), Dateadd(mi, -datepart(mi, @DH_CHG_EFE), @DH_CHG_EFE)))),
			NULL, NULL, NULL, 1, --Em Aberto
			@FL_AEN_ISE, @FL_COM_TAR_RED, @QT_PSI_ISE, @QT_PSI_TAR_RED
		FROM	T_CHG CHG, T_SIT SIT
		WHERE	SIT.CD_SIT = CHG.CD_SIT AND CHG.CD_CHG = @CD_CHG AND

			CHG.FL_CHG_CAN = 0 AND 		--CHG não Cancelada
			SIT.FL_SIT_CON_VOO = 1		--Situação Etapa Concluída
		IF @@ROWCOUNT &lt;&gt; 0 
		BEGIN
			--Atualizar CD_STA em T_HPA caso a situação seja Etapa Concluída e o vôo não esteja Cancelado
			UPDATE 	HPA SET CD_STA = @CD_STA
			FROM	T_CHG CHG, T_SIT SIT, T_HPA001 HPA
			WHERE	HPA.CD_CHG = CHG.CD_CHG AND
				SIT.CD_SIT = CHG.CD_SIT AND CHG.CD_CHG = @CD_CHG AND
				CHG.FL_CHG_CAN = 0 AND 		--CHG não Cancelada
				SIT.FL_SIT_CON_VOO = 1		--Situação Etapa Concluída
		END
		--Próximo registro
		FETCH NEXT FROM INSSTA
		INTO	@CD_CHG, @CD_SIT, @DH_CHG_EFE, @FL_AEN_ISE, @FL_COM_TAR_RED, @QT_PSI_ISE, @QT_PSI_TAR_RED
	END
	CLOSE INSSTA
	DEALLOCATE INSSTA
	--Cancelar o Status caso a CHG esteja concluída e a situação seja alterada para outra qualquer
	IF (	SELECT COUNT(*) 	FROM T_STA STA, INSERTED INS, DELETED DEL, T_SIT SITDEL, T_SIT SITINS, T_HPA001 HPA
		WHERE 	STA.CD_STA = HPA.CD_STA AND HPA.CD_CHG = INS.CD_CHG AND
			DEL.CD_CHG = INS.CD_CHG AND SITDEL.CD_SIT = DEL.CD_SIT AND
			SITDEL.FL_SIT_CON_VOO = 1 AND SITINS.CD_SIT = INS.CD_SIT AND
			SITINS.FL_SIT_CON_VOO = 0) &gt; 0
	BEGIN
		UPDATE 	STA
		SET 	TP_STA = 3,  --Cancelado
			DH_STA_FEC = NULL, MA_STA_FEC = NULL,
			CD_STA_ANT = NULL, FL_STA_AEN_ISE = NULL,
			FL_STA_COM_TAR_RED = NULL, QT_STA_PSI_ISE = NULL,
			QT_STA_PSI_TAR_RED = NULL
		FROM 	T_STA STA, INSERTED INS, DELETED DEL, T_SIT SITDEL, T_SIT SITINS, T_HPA001 HPA
		WHERE 	STA.CD_STA = HPA.CD_STA AND HPA.CD_CHG = INS.CD_CHG AND
			DEL.CD_CHG = INS.CD_CHG AND SITDEL.CD_SIT = DEL.CD_SIT AND
			SITDEL.FL_SIT_CON_VOO = 1 AND SITINS.CD_SIT = INS.CD_SIT AND
			SITINS.FL_SIT_CON_VOO = 0
	END
	--Alterar CD_STA de HPA para NULL caso a CHG esteja concluída e a situação seja alterada para outra qualquer
	IF (	SELECT COUNT(*) 	FROM T_HPA001 HPA, INSERTED INS, DELETED DEL, T_SIT SITDEL, T_SIT SITINS
		WHERE 	HPA.CD_CHG = INS.CD_CHG AND DEL.CD_CHG = INS.CD_CHG AND
			SITDEL.CD_SIT = DEL.CD_SIT AND SITDEL.FL_SIT_CON_VOO = 1 AND
			SITINS.CD_SIT = INS.CD_SIT AND SITINS.FL_SIT_CON_VOO = 0) &gt; 0
	BEGIN
		UPDATE 	HPA SET CD_STA = NULL
		FROM 	T_HPA001 HPA, INSERTED INS, DELETED DEL, T_SIT SITDEL, T_SIT SITINS
		WHERE 	HPA.CD_CHG = INS.CD_CHG AND DEL.CD_CHG = INS.CD_CHG AND
			SITDEL.CD_SIT = DEL.CD_SIT AND SITDEL.FL_SIT_CON_VOO = 1 AND
			SITINS.CD_SIT = INS.CD_SIT AND SITINS.FL_SIT_CON_VOO = 0
	END
END
IF UPDATE(NR_CHG_VOO)
BEGIN
	--Atualizar o prefixo da aeronave dos vôos do grupo 2 caso o número do vôo tenha sido alterado
	UPDATE	CHG
	SET	CD_AEN_CHG = (	SELECT 	CD_AEN 
					FROM 	T_AEN AEN WHERE RTRIM(AEN.NR_AEN) = RTRIM(INS.NR_CHG_VOO))
	FROM	T_CHG CHG, INSERTED INS
	WHERE	CHG.CD_CHG = INS.CD_CHG AND INS.TP_CHG_GRU = 2
	--Atualizar o número do vôo de PAR associado caso este voo seja do Grupo 2
	IF (	SELECT COUNT(*) 	FROM T_PAR PAR, INSERTED INS
		WHERE	PAR.CD_CHG_AEN_ANT = INS.CD_CHG AND
			INS.TP_CHG_GRU = 2 AND PAR.TP_PAR_GRU = 2) &gt; 0
	BEGIN
		UPDATE	PAR SET NR_PAR_VOO = INS.NR_CHG_VOO
		FROM	T_PAR PAR, INSERTED INS
		WHERE	PAR.CD_CHG_AEN_ANT = INS.CD_CHG AND
			INS.TP_CHG_GRU = 2 AND PAR.TP_PAR_GRU = 2
	END
	--Atualizar em HPA o prefixo da aeronave dos vôos do grupo 2 caso o número do vôo tenha sido alterado
	IF (	SELECT 	COUNT(*) FROM T_HPA001 HPA, INSERTED INS
		WHERE	HPA.CD_CHG = INS.CD_CHG AND INS.TP_CHG_GRU = 2) &gt; 0
	BEGIN
		UPDATE	T_HPA001
		SET	CD_AEN = (	SELECT 	CD_AEN 
					FROM 	T_AEN AEN WHERE RTRIM(AEN.NR_AEN) = RTRIM(INS.NR_CHG_VOO))
		FROM	T_HPA001 HPA, INSERTED INS
		WHERE	HPA.CD_CHG = INS.CD_CHG AND INS.TP_CHG_GRU = 2 
	END
END
IF UPDATE(TP_CHG_CTG)
BEGIN
	--Apagar os hpa dos vôos de CHG que passaram a ser CSH ou DPL
	DELETE	T_HPA001 FROM T_HPA001 HPA, INSERTED INS
	WHERE	HPA.CD_CHG = INS.CD_CHG AND INS.TP_CHG_CTG IN (3,4)
	--Anular o tipo de equipamento, o box e a aeronave dos vôos que passaram a ser CSH ou DPL
	UPDATE	T_CHG
	SET	CD_EQP_CHG = NULL, CD_AEN_CHG = NULL, CD_BOX = NULL
	FROM	T_CHG CHG, INSERTED INS
	WHERE	CHG.CD_CHG = INS.CD_CHG AND INS.TP_CHG_CTG IN (3,4)
	--Incluir vôo na tabela de vôos candidatos a vôos Antecessores se TP_CHG_CTG mudar de 3 ou 4 para uma categoria que seja diferente de 3 ou 4
	INSERT	T_CHGANT(CD_CHG)
	SELECT	INS.CD_CHG FROM INSERTED INS, DELETED DEL
	WHERE	INS.CD_CHG = DEL.CD_CHG AND DEL.TP_CHG_CTG IN (3,4) AND INS.TP_CHG_CTG NOT IN (3,4)
	--Excluir vôo da tabela de vôos candidatos a vôos Antecessores se TP_CHG_CTG mudar para 3 ou 4
	DELETE	T_CHGANT FROM T_CHGANT CHGANT, INSERTED INS
	WHERE	CHGANT.CD_CHG = INS.CD_CHG AND INS.TP_CHG_CTG IN (3,4)
END
IF UPDATE(DH_CHG_EFE)
BEGIN
	--Atualizar a hora do vôo de PAR caso a diferença entre a hora da PAR e a hora da CHG seja menor que o tempo mínimo de permanência do vôo.
	IF (	SELECT COUNT(*) 	FROM T_PAR PAR, INSERTED INS
		WHERE	PAR.CD_CHG_AEN_ANT = INS.CD_CHG AND 
			(DATEDIFF(MI, INS.DH_CHG_EFE, PAR.DH_PAR_EFE) &lt; INS.QT_CHG_PER_MIN OR PAR.DH_PAR_EFE &gt; PAR.DH_PAR_NRM)) &gt;0
	BEGIN
		UPDATE 	T_PAR
		SET 	DH_PAR_SIT = GETDATE(),
			DH_PAR_EFE  =  DATEADD( MI, INS.QT_CHG_PER_MIN, INS.DH_CHG_EFE),
			DH_PAR_EST  =  DATEADD( MI, INS.QT_CHG_PER_MIN, INS.DH_CHG_EFE)
		FROM 	T_PAR PAR, INSERTED INS
		WHERE	PAR.CD_CHG_AEN_ANT = INS.CD_CHG AND (DATEDIFF(MI, INS.DH_CHG_EFE, PAR.DH_PAR_EFE) &lt; INS.QT_CHG_PER_MIN OR PAR.DH_PAR_EFE &gt; PAR.DH_PAR_NRM)
	END
	--Atualizar a hora prevista e de estacionamento dos vôos que ficaram com estas horas menores que a hora normal
	IF (	SELECT	COUNT(*) FROM T_PAR PAR, INSERTED INS
		WHERE	PAR.CD_CHG_AEN_ANT = INS.CD_CHG AND PAR.DH_PAR_EFE &lt; PAR.DH_PAR_NRM) &gt; 0
	BEGIN
		UPDATE 	T_PAR
		SET	DH_PAR_EFE = PAR.DH_PAR_NRM, DH_PAR_EST = PAR.DH_PAR_NRM
		FROM 	T_PAR PAR, INSERTED INS
		WHERE	PAR.CD_CHG_AEN_ANT = INS.CD_CHG AND PAR.DH_PAR_EFE &lt; PAR.DH_PAR_NRM
	END
	--Atualizar os campos DH_STA_ABE e MA_STA_ABE do Status de Aeronave associado ao primeiro HPA do vôo alterado, se houver alteração na Data/Hora Efetiva do Vôo de CHG, e o Status associado ao primeiro HPA desse vôo, estiver aberto
	UPDATE	STA
	SET	DH_STA_ABE = INS.DH_CHG_EFE,
		MA_STA_ABE = DATEADD(DD, 1- DATEPART(DD, Dateadd(HH, -Datepart(HH, INS.DH_CHG_EFE), Dateadd(mi, -datepart(mi, INS.DH_CHG_EFE), INS.DH_CHG_EFE))), Dateadd(HH, -Datepart(HH, INS.DH_CHG_EFE), Dateadd(mi, -datepart(mi, INS.DH_CHG_EFE), INS.DH_CHG_EFE))) --Primeiro dia do mês da Data da CHG
	FROM	T_STA STA, T_CHG CHG, INSERTED INS, T_HPA001 HPA
	WHERE	CHG.CD_CHG = INS.CD_CHG AND HPA.CD_CHG = INS.CD_CHG AND
		HPA.NR_HPA_SEQ = 1 AND 	STA.CD_STA = HPA.CD_STA AND STA.TP_STA = 1
END
--Se o vôo possuir CHG e atualizarmos a aeronave de CHG do vôo, temos que atualizá-la também em HPA
IF UPDATE(CD_AEN_CHG)
BEGIN
	IF (	SELECT 	COUNT(*) FROM INSERTED INS, T_CHG CHG
		WHERE	CHG.CD_CHG = INS.CD_CHG AND CHG.FL_CHG_CAN = 1 AND INS.CD_AEN_CHG IS NOT NULL) &gt; 0
	BEGIN
		RAISERROR 20999 &#39;Operação não executada: Não é permitido definir aeronave para vôos cancelados.&#39;
		ROLLBACK TRANSACTION
		RETURN
	END
	--Não permitir que o prefixo da aeronave seja nulo para vôos do grupo 2
	IF (	SELECT 	COUNT(*) FROM INSERTED INS
		WHERE	INS.TP_CHG_GRU = 2 AND INS.CD_AEN_CHG IS NULL) &gt; 0
	BEGIN
		RAISERROR 20999 &#39;Operação não executada: O &lt;Prefixo da Aeronave&gt; para vôos da Aviação Geral não deve ser nulo, e sim igual ao &lt;Número do Vôo&gt;.&#39;
		ROLLBACK TRANSACTION
		RETURN
	END
	--Atualizar o número do vôo de CHG para vôos do grupo 2 caso o prefixo da aeronave tenha sido alterado
	UPDATE	CHG
	SET	NR_CHG_VOO = (SELECT NR_AEN FROM T_AEN AEN WHERE AEN.CD_AEN = INS.CD_AEN_CHG)
	FROM	T_CHG CHG, INSERTED INS
	WHERE	CHG.CD_CHG = INS.CD_CHG AND INS.TP_CHG_GRU = 2

	--Atualizar o número do vôo de PAR para vôos do grupo 2 caso o prefixo da aeronave tenha sido alterado
	IF (	SELECT	COUNT(*) FROM T_PAR PAR, INSERTED INS
		WHERE	PAR.CD_CHG_AEN_ANT = INS.CD_CHG AND
			INS.TP_CHG_GRU = 2 AND PAR.TP_PAR_GRU = 2) &gt;0
	BEGIN
		UPDATE	PAR
		SET	NR_PAR_VOO = (SELECT NR_AEN FROM T_AEN AEN WHERE AEN.CD_AEN = INS.CD_AEN_CHG)
		FROM	T_PAR PAR, INSERTED INS
		WHERE	PAR.CD_CHG_AEN_ANT = INS.CD_CHG AND
			INS.TP_CHG_GRU = 2 AND 	PAR.TP_PAR_GRU = 2
	END
	--Atualizar aeronave em HPA
	UPDATE 	T_HPA001 SET CD_AEN = INS.CD_AEN_CHG
	FROM 	T_HPA001 HPA, T_CHG CHG, INSERTED INS
	WHERE  	HPA.CD_CHG = INS.CD_CHG AND CHG.CD_CHG = INS.CD_CHG
END
--Se atualizarmos a aeronave de CHG do vôo para outra que não seja Null e a situação do vôo for etapa concluída, temos que atualizar as informações referentes à aeronave em STA
IF UPDATE(CD_AEN_CHG) 
BEGIN
	UPDATE 	T_STA SET FL_STA_AEN_ISE = AEN.FL_AEN_ISE
	FROM 	T_STA STA, T_CHG CHG, T_HPA001 HPA, T_AEN AEN, T_SIT SIT, INSERTED INS
	WHERE  STA.CD_STA = HPA.CD_STA AND HPA.CD_CHG = INS.CD_CHG AND
		CHG.CD_CHG = INS.CD_CHG AND AEN.CD_AEN = INS.CD_AEN_CHG AND
		INS.CD_AEN_CHG is not Null AND SIT.CD_SIT = INS.CD_SIT AND SIT.FL_SIT_CON_VOO = 1
END
--Se atualizarmos a companhia aérea do vôo de CHG e a situação do vôo for etapa concluída, temos que atualizar as informações referentes à companhia aérea em STA
IF UPDATE(CD_COM) 
BEGIN
	UPDATE 	T_STA SET FL_STA_COM_TAR_RED = COM.FL_COM_TAR_RED
	FROM 	T_STA STA, T_CHG CHG, T_HPA001 HPA, T_COM COM, T_SIT SIT, INSERTED INS
	WHERE  STA.CD_STA = HPA.CD_STA AND HPA.CD_CHG = INS.CD_CHG AND
		CHG.CD_CHG = INS.CD_CHG AND COM.CD_COM = INS.CD_COM AND
		SIT.CD_SIT = INS.CD_SIT AND SIT.FL_SIT_CON_VOO = 1 
END
IF UPDATE(DH_CHG_EST)
BEGIN
	--Não permitir alteração na Data ou Hora de Estacionamento de um Vôo de CHG, se o Status de Aeronave associado ao primeiro HPA desse vôo, estiver Fechado
	IF (	SELECT	COUNT(*)
		FROM 	T_CHG CHG, INSERTED INS, T_HPA001 HPA, T_STA STA
		WHERE	CHG.CD_CHG = INS.CD_CHG AND HPA.CD_CHG = INS.CD_CHG AND
			HPA.NR_HPA_SEQ = 1 AND STA.CD_STA = HPA.CD_STA AND STA.TP_STA = 2) &gt; 0
	BEGIN
		RAISERROR 20999 &#39;Operação não executada: A &lt;Data ou Hora de Estacionamento&gt; do vôo de Chegada não pode ser alterada, se o Status de Aeronave associado ao primeiro HPA desse vôo, estiver Fechado.&#39;
		ROLLBACK TRANSACTION
		RETURN
	END
	--Atualizamos Hora de Entrada em HPA como Hora de Estacionamento de CHG, no registro que possue o Vôo sendo atualizado como Vôo de CHG
	UPDATE 	T_HPA001 SET DH_HPA_ENT = CHG.DH_CHG_EST
	FROM	T_HPA001 HPA, T_CHG CHG, INSERTED INS
	WHERE 	CHG.CD_CHG = INS.CD_CHG AND HPA.CD_CHG = INS.CD_CHG AND HPA.NR_HPA_SEQ = 1
END
--CONSISTÊNCIAS A SEREM FEITAS APÓS AS ATUALIZAÇÕES
--Verificar se há horas de CHG maiores que as horas de PAR
IF   (	SELECT COUNT(*) FROM T_CHG CHG, T_PAR PAR, INSERTED INS
	WHERE 	CHG.CD_CHG = INS.CD_CHG AND PAR.CD_CHG_AEN_ANT = CHG.CD_CHG AND
		( (CHG.DH_CHG_EFE &gt;= PAR.DH_PAR_EFE) OR (CHG.DH_CHG_EST &gt;= PAR.DH_PAR_EST))) &gt; 0
BEGIN
	RAISERROR 20999 &#39;Operação não executada: A hora de chegada não pode ser maior nem igual à hora de partida.&#39;
	ROLLBACK TRANSACTION
	RETURN
END
--Alexei 18/06/01
IF UPDATE(FL_CHG_TEL)
BEGIN
	--Se desmarcar da tela desmarcar do anunciador automático
	Update	T_CHG
	set	FL_CHG_ANU = 0
	FROM	T_CHG CHG
	JOIN	INSERTED INS ON INS.CD_CHG = CHG.CD_CHG
	WHERE	INS.FL_CHG_TEL = 0
END

--Verificar se são satisfeitas as condições para a nova situação de CHG
--Alexei 18/06/01
IF UPDATE(CD_SIT) OR UPDATE(DH_CHG_EFE)
BEGIN
	--Lançar Histórico de Situação de Vôo
	INSERT T_HSC (DH_HSC, CD_CHG, CD_IFT, CD_SIT, DH_HSC_CHG, CD_USR) SELECT GETDATE(), INS.CD_CHG, INS.CD_IFT, INS.CD_SIT, INS.DH_CHG_EFE, INS.CD_USR FROM INSERTED INS

	--Deleta todos os registros da programação não anunciados e que estejam vinculados a este vôo
	DELETE T_PRALOG FROM T_PRALOG JOIN INSERTED INS ON INS.CD_CHG = T_PRALOG.CD_CHG WHERE T_PRALOG.FL_LOG = 0

	--Inserir programação de Log
	--Antes da Hora Prevista
	INSERT INTO T_PRALOG (CD_PRA, CD_CHG, CD_PAR, DH_LOG, FL_LOG)
	SELECT 	CD_PRA, INS.CD_CHG, NULL, DATEADD(MI, -PRA.QT_PRA_TMP, INS.DH_CHG_EFE), 0
	FROM	T_PRA PRA JOIN INSERTED INS ON INS.CD_SIT = PRA.CD_SIT AND INS.FL_CHG_TEL = 1 AND INS.FL_CHG_ANU = 1
	JOIN	T_TPA TPA ON TPA.CD_TPA = PRA.CD_TPA AND TPA.TP_TPA = 1 JOIN T_SIT SIT ON SIT.CD_SIT = INS.CD_SIT AND FL_SIT_CON_VOO = 0
	WHERE	PRA.TP_PRA = 1 AND NOT EXISTS (SELECT * FROM T_PRALOG WHERE CD_PRA = PRA.CD_PRA AND CD_CHG = INS.CD_CHG) 

	 --Após a Alteração da Situação
	INSERT INTO T_PRALOG (CD_PRA, CD_CHG, CD_PAR, DH_LOG, FL_LOG)
	SELECT 	CD_PRA, INS.CD_CHG, NULL, DATEADD(MI, PRA.QT_PRA_TMP, GETDATE()), 0
	FROM	T_PRA PRA JOIN INSERTED INS ON INS.CD_SIT = PRA.CD_SIT AND INS.FL_CHG_TEL = 1 AND INS.FL_CHG_ANU = 1
	JOIN	T_TPA TPA ON TPA.CD_TPA = PRA.CD_TPA AND TPA.TP_TPA = 1 JOIN T_SIT SIT ON SIT.CD_SIT = INS.CD_SIT AND FL_SIT_CON_VOO = 0
	WHERE	PRA.TP_PRA = 2 AND NOT EXISTS (SELECT * FROM T_PRALOG WHERE CD_PRA = PRA.CD_PRA AND CD_CHG = INS.CD_CHG)
END
IF UPDATE(CD_SIT)
BEGIN
	IF (	SELECT	COUNT(*) FROM INSERTED INS, T_PAR AEN, T_SIT SITAEN
		WHERE	AEN.CD_CHG_AEN_ANT = INS.CD_CHG AND 
			SITAEN.CD_SIT = AEN.CD_SIT AND SITAEN.FL_SIT_TOD = 1 AND 
			EXISTS (SELECT * FROM T_SCA SCA WHERE SCA.CD_SIT = AEN.CD_SIT) AND 
			INS.CD_SIT NOT IN (SELECT CD_SIT_ANT FROM T_SCA SCA WHERE SCA.CD_SIT = AEN.CD_SIT)) &gt; 0
	BEGIN
		RAISERROR 20999 &#39;Operação não executada: A nova situação do vôo de chegada é incompatível com as situações dos vôos sucessores.&#39;
		ROLLBACK TRANSACTION
		RETURN
	END

	--Antes da Hora Prevista
	INSERT INTO T_PRALOG (CD_PRA, CD_CHG, CD_PAR, DH_LOG, FL_LOG)
	SELECT 	CD_PRA, NULL, NULL, DATEADD(MI, -PRA.QT_PRA_TMP, INS.DH_CHG_EFE), 0
	FROM	T_PRA PRA JOIN INSERTED INS ON INS.CD_SIT = PRA.CD_SIT AND INS.FL_CHG_TEL = 1 AND INS.FL_CHG_ANU = 1
	JOIN	T_TPA TPA ON TPA.CD_TPA = PRA.CD_TPA AND TPA.TP_TPA = 3 JOIN T_SIT SIT ON SIT.CD_SIT = INS.CD_SIT AND FL_SIT_CON_VOO = 0
	WHERE	PRA.TP_PRA = 1 AND NOT EXISTS (SELECT * FROM T_PRALOG WHERE CD_PRA = PRA.CD_PRA AND CD_CHG = INS.CD_CHG) AND TP_PRA_TPA = 1

	--Após a Alteração da Situação
	INSERT INTO T_PRALOG (CD_PRA, CD_CHG, CD_PAR, DH_LOG, FL_LOG)
	SELECT 	CD_PRA, NULL, NULL, DATEADD(MI, PRA.QT_PRA_TMP, GETDATE()), 0
	FROM	T_PRA PRA JOIN INSERTED INS ON INS.CD_SIT = PRA.CD_SIT AND INS.FL_CHG_TEL = 1 AND INS.FL_CHG_ANU = 1
	JOIN	T_TPA TPA ON TPA.CD_TPA = PRA.CD_TPA AND TPA.TP_TPA = 3 JOIN T_SIT SIT ON SIT.CD_SIT = INS.CD_SIT AND FL_SIT_CON_VOO = 0
	WHERE	PRA.TP_PRA = 2 AND NOT EXISTS (SELECT * FROM T_PRALOG WHERE CD_PRA = PRA.CD_PRA AND CD_CHG = INS.CD_CHG) AND TP_PRA_TPA = 1
END
--JOGAR os dados dos vôos do tipo Normal, nos vôos do tipo Codeshare
IF (	SELECT 	COUNT(*)  FROM T_CHG CHG, T_CHG CHGVIN, INSERTED INS
	WHERE	CHG.CD_CHG_VIN = INS.CD_CHG AND CHGVIN.CD_CHG = INS.CD_CHG) &gt;0
BEGIN
	UPDATE	CHG
	SET	CD_EQP_CHG = CHGVIN.CD_EQP_CHG, CD_BOX = CHGVIN.CD_BOX,
		QT_CHG_PER_MIN = CHGVIN.QT_CHG_PER_MIN, DH_CHG_NRM = CHGVIN.DH_CHG_NRM,
		DH_CHG_EFE = CHGVIN.DH_CHG_EFE, DH_CHG_EST = CHGVIN.DH_CHG_EST,
		NM_CHG_COM_SIT = CHGVIN.NM_CHG_COM_SIT, DH_CHG_SIT  = CHGVIN.DH_CHG_SIT,
		FL_CHG_CAN = CHGVIN.FL_CHG_CAN, CD_SIT = CHGVIN.CD_SIT,
		TP_CHG_STA = CHGVIN.TP_CHG_STA, CD_USR = CHGVIN.CD_USR
	FROM	T_CHG CHG, T_CHG CHGVIN, INSERTED INS
	WHERE	CHG.CD_CHG_VIN = INS.CD_CHG AND CHGVIN.CD_CHG = INS.CD_CHG
END
--PUXAR os dados dos vôos do tipo Normal, nos vôos do tipo Codeshare
IF (	SELECT 	COUNT(*) FROM T_CHG CHG, T_CHG CHGVIN, INSERTED INS
	WHERE	CHG.CD_CHG = INS.CD_CHG AND CHGVIN.CD_CHG = INS.CD_CHG_VIN) &gt; 0
BEGIN
	UPDATE	CHG
	SET	CD_EQP_CHG = CHGVIN.CD_EQP_CHG, CD_BOX = CHGVIN.CD_BOX,
		QT_CHG_PER_MIN = CHGVIN.QT_CHG_PER_MIN, DH_CHG_NRM = CHGVIN.DH_CHG_NRM,
		DH_CHG_EFE = CHGVIN.DH_CHG_EFE, DH_CHG_EST = CHGVIN.DH_CHG_EST,
		NM_CHG_COM_SIT = CHGVIN.NM_CHG_COM_SIT, DH_CHG_SIT  = CHGVIN.DH_CHG_SIT,
		FL_CHG_CAN = CHGVIN.FL_CHG_CAN, CD_SIT = CHGVIN.CD_SIT,
		TP_CHG_STA = CHGVIN.TP_CHG_STA, CD_USR = CHGVIN.CD_USR
	FROM	T_CHG CHG, T_CHG CHGVIN, INSERTED INS
	WHERE	CHG.CD_CHG = INS.CD_CHG AND CHGVIN.CD_CHG = INS.CD_CHG_VIN
END
--Lançar registro para Replicação na tabela T_REP001
IF UPDATE(CD_SIT) OR UPDATE(CD_AEN_CHG)
BEGIN
	DECLARE @HR_REP_ZUL INT
	DECLARE @HR_HOR_NRM INT
	DECLARE @HR_HOR_VER INT

	--Verifica Defazagem em relação ao horário Zulu
	SELECT 	@HR_HOR_NRM = HR_HOR_NRM, @HR_HOR_VER = HR_HOR_VER
	FROM 	T_HOR HOR, T_AER AER, T_CID CID, T_PSI PSI
	WHERE 	CID.CD_CID = AER.CD_CID And HOR.CD_HOR = CID.CD_HOR And AER.CD_AER = PSI.CD_AER
   
	--Verifica se o Aeroporto está no Horário de Verão
	IF (SELECT COUNT(*) FROM T_HRV WHERE GETDATE() BETWEEN DT_HRV_INI AND DT_HRV_FIM) &gt; 0
		SELECT @HR_REP_ZUL = @HR_HOR_VER
	ELSE
		SELECT @HR_REP_ZUL = @HR_HOR_NRM
END
IF UPDATE(CD_SIT)
BEGIN
	--Vôos de CHG cujas situações estão sendo atualizadas para &quot;Etapa Concluída&quot; e cuja primeira escala posterior do vôo de PAR associado é um dos aeroportos ativos existentes na tabela T_RED
	DECLARE REP1 CURSOR FOR
	SELECT 	PAR.CD_PAR, SG_COM_IAT_003, NR_VOO = PAR.NR_PAR_VOO, 
		DH_VOO_EFE = INS.DH_CHG_EFE, QT_VOO_DIF = DATEDIFF(MI, INS.DH_CHG_NRM, INS.DH_CHG_EFE)
	FROM 	INSERTED INS, T_CHG CHG, T_SIT SIT, T_PAR PAR, T_COM COM
	WHERE	INS.CD_CHG = CHG.CD_CHG AND SIT.CD_SIT = INS.CD_SIT AND
		SIT.FL_SIT_CON_VOO = 1 AND CHG.FL_CHG_CAN = 0 AND
		PAR.CD_CHG_AEN_ANT = INS.CD_CHG AND
		PAR.CD_PAR IN (	SELECT	CD_PAR FROM T_ECP001 ECP
				WHERE	ECP.CD_PAR = PAR.CD_PAR AND
					ECP.CD_ECP = (SELECT MIN(CD_ECP) FROM T_ECP001 ECP1 WHERE ECP1.CD_PAR = ECP.CD_PAR) AND
					ECP.CD_AER IN (SELECT CD_AER FROM T_AER WHERE SG_AER_ICA IN (SELECT SG_AER_ICA FROM T_RED WHERE FL_RED_ATI = 1))) AND
		COM.CD_COM = PAR.CD_COM
	--Declaração das variáveis
	DECLARE @CD_PAR INT, @SG_COM_IAT_003 CHAR(3), 	@NR_VOO CHAR(10), @DH_VOO_EFE SMALLDATETIME, @QT_VOO_DIF INT
	--Abre cursor e posiciona no primeiro registro
	OPEN REP1
	FETCH REP1 INTO	@CD_PAR, @SG_COM_IAT_003, @NR_VOO, @DH_VOO_EFE, @QT_VOO_DIF
	--Processar todos os registros de REP1
	WHILE @@FETCH_STATUS = 0
	BEGIN
		--Inserir registro na tabela T_REP001
		INSERT INTO T_REP001 (
			SG_AER_ICA_ORI, SG_AER_ICA_DES, SG_COM_IAT_003, NR_VOO, 
			DH_VOO_EFE, QT_VOO_DIF, NM_SIT, NR_AEN,
			FL_CHG_CON, FL_PAR_CON, FL_AEN, DH_REP, DH_REP_ORI, HR_REP_ZUL)
		SELECT 	(SELECT SG_AER_ICA FROM T_AER WHERE CD_AER = (SELECT CD_AER FROM T_PSI)),
			(SELECT SG_AER_ICA FROM T_ECP001 ECP, T_AER AER WHERE ECP.CD_PAR = @CD_PAR AND ECP.CD_ECP = (SELECT MIN(CD_ECP) FROM T_ECP001 WHERE CD_PAR = @CD_PAR) AND ECP.CD_AER = AER.CD_AER),
			@SG_COM_IAT_003, @NR_VOO,
			@DH_VOO_EFE, @QT_VOO_DIF,
			NULL, NULL, 1, 0, 0, GETDATE(), GETDATE(), @HR_REP_ZUL
		--Ir para o próximo registro
		FETCH NEXT FROM REP1
		INTO	@CD_PAR, @SG_COM_IAT_003, @NR_VOO, @DH_VOO_EFE, @QT_VOO_DIF
	END
	CLOSE REP1
	DEALLOCATE REP1
END
IF UPDATE(CD_AEN_CHG)
BEGIN
	--Vôos de CHG cujas prefixos das aeronaves estão sendo atualizadas e cuja primeira escala posterior do vôo de PAR associado é um dos aeroportos ativos existentes na tabela T_RED
	DECLARE REP2 CURSOR FOR
	SELECT 	PAR.CD_PAR, SG_COM_IAT_003, NR_VOO = PAR.NR_PAR_VOO, NR_AEN
	FROM 	INSERTED INS, T_PAR PAR, T_COM COM, T_AEN AEN
	WHERE	PAR.CD_CHG_AEN_ANT = INS.CD_CHG AND
		PAR.CD_PAR IN (	SELECT	CD_PAR 	FROM T_ECP001 ECP
				WHERE	ECP.CD_PAR = PAR.CD_PAR AND
					ECP.CD_ECP = (SELECT MIN(CD_ECP) FROM T_ECP001 ECP1 WHERE ECP1.CD_PAR = ECP.CD_PAR) AND
					ECP.CD_AER IN (SELECT CD_AER FROM T_AER WHERE SG_AER_ICA IN (SELECT SG_AER_ICA FROM T_RED WHERE FL_RED_ATI = 1))) AND
		COM.CD_COM = PAR.CD_COM AND AEN.CD_AEN =* INS.CD_AEN_CHG
	--Declaração das variáveis
	DECLARE @NR_AEN CHAR(10)
	--Abre curso e posiciona no primeiro registro
	OPEN REP2
	FETCH REP2 INTO @CD_PAR, @SG_COM_IAT_003, @NR_VOO, @NR_AEN
	--Processar todos os registros de REP2
	WHILE @@FETCH_STATUS = 0
	BEGIN
		--Inserir registro na tabela T_REP001
		INSERT INTO T_REP001 (
			SG_AER_ICA_ORI, SG_AER_ICA_DES, SG_COM_IAT_003, NR_VOO, 
			DH_VOO_EFE, QT_VOO_DIF, NM_SIT, NR_AEN,
			FL_CHG_CON, FL_PAR_CON, FL_AEN, DH_REP, DH_REP_ORI, HR_REP_ZUL)
		SELECT 	(SELECT SG_AER_ICA FROM T_AER WHERE CD_AER = (SELECT CD_AER FROM T_PSI)),
			(SELECT SG_AER_ICA FROM T_ECP001 ECP, T_AER AER WHERE ECP.CD_PAR = @CD_PAR AND ECP.CD_ECP = (SELECT MIN(CD_ECP) FROM T_ECP001 WHERE CD_PAR = @CD_PAR) AND ECP.CD_AER = AER.CD_AER),
			@SG_COM_IAT_003, @NR_VOO,
			NULL, NULL, NULL, @NR_AEN, 0, 0, 1, GETDATE(), GETDATE(), @HR_REP_ZUL

		--Ir para o próximo registro
		FETCH NEXT FROM REP2 INTO @CD_PAR, @SG_COM_IAT_003, @NR_VOO, @NR_AEN
	END
	CLOSE REP2
	DEALLOCATE REP2
END
--INCLUIR REGISTROS EM T_ACH
INSERT	T_ACH (DH_ACH, CD_CHG)
SELECT GETDATE(), CD_CHG FROM INSERTED

IF 	UPDATE(NR_CHG_VOO) OR UPDATE(TP_CHG_GRU) OR UPDATE(TP_CHG) OR 
	UPDATE(TP_CHG_NAT) OR UPDATE(TP_CHG_CTG) OR UPDATE(CD_COM)
BEGIN
	--Incluir registros em T_AHP
	INSERT	T_AHP (CD_HPA, DH_AHP)
	Select 	DISTINCT CD_HPA, GETDATE()
	From 	T_HPA001 HPA, T_CHG CHG, T_SIT SIT, INSERTED INS
	Where	HPA.CD_CHG = CHG.CD_CHG AND SIT.CD_SIT = CHG.CD_SIT AND
		HPA.CD_AER = (Select CD_AER From T_PSI) AND
		(HPA.FL_HPA_ENT = 1 OR SIT.FL_SIT_AEN_PAT = 1) AND HPA.FL_HPA_SAI = 0 AND
		HPA.CD_AEN IS NOT NULL AND CHG.CD_CHG = INS.CD_CHG
END
IF 	UPDATE(CD_AEN_CHG)
BEGIN
	--Incluir registros em T_APA
	INSERT	T_APA (CD_PAR, DH_APA)
	Select 	DISTINCT CD_PAR, GETDATE()
	From 	T_PAR PAR, INSERTED INS
	Where	PAR.CD_CHG_AEN_ANT = INS.CD_CHG AND
		PAR.TP_PAR_STA = 1 AND
		PAR.CD_AER = (Select CD_AER From T_PSI)

END
End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o76"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o99">
<a:ObjectID>69589F76-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_2</a:Name>
<a:Code>REFERENCE_2</a:Code>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o50"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o34"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o76"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o100">
<a:ObjectID>69589F77-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o51"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o36"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o101">
<a:CenterTextOffset>(-2400, -12000)</a:CenterTextOffset>
<a:Rect>((-698587,654128), (-690713,721037))</a:Rect>
<a:ListOfPoints>((-694551,721037),(-694749,654128))</a:ListOfPoints>
<a:ArrowStyle>4882</a:ArrowStyle>
<a:LineColor>32768</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Id="o102">
<a:Rect>((-700992,719161), (-694212,722761))</a:Rect>
<a:LineColor>32768</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o103">
<a:ObjectID>69589F99-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_MCH</a:Name>
<a:Code>T_MCH</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o104">
<a:ObjectID>69589FB1-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_MCH</a:Name>
<a:Code>CD_MCH</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o105">
<a:ObjectID>69589FB3-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_CHG</a:Name>
<a:Code>CD_CHG</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o106">
<a:ObjectID>69589FB5-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_USR</a:Name>
<a:Code>CD_USR</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o107">
<a:ObjectID>69589FB8-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>DH_MCH</a:Name>
<a:Code>DH_MCH</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>smalldatetime</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o108">
<a:ObjectID>69589FB9-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>DH_MCH_EFE</a:Name>
<a:Code>DH_MCH_EFE</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>smalldatetime</a:DataType>
</o:Column>
<o:Column Id="o109">
<a:ObjectID>69589FBB-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_SIT</a:Name>
<a:Code>CD_SIT</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
</o:Column>
<o:Column Id="o110">
<a:ObjectID>69589FBC-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NM_MCH_COM_SIT</a:Name>
<a:Code>NM_MCH_COM_SIT</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>varchar(30)</a:DataType>
<a:Length>30</a:Length>
</o:Column>
<o:Column Id="o111">
<a:ObjectID>69589FBD-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_TPA</a:Name>
<a:Code>CD_TPA</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
</o:Column>
<o:Column Id="o112">
<a:ObjectID>69589FBF-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_IFT</a:Name>
<a:Code>CD_IFT</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
</o:Column>
<o:Column Id="o113">
<a:ObjectID>69589FC2-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>DS_MCH_EST</a:Name>
<a:Code>DS_MCH_EST</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>varchar(255)</a:DataType>
<a:Length>255</a:Length>
</o:Column>
<o:Column Id="o114">
<a:ObjectID>69589FC5-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NR_MCH_AEN</a:Name>
<a:Code>NR_MCH_AEN</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>char(10)</a:DataType>
<a:Length>10</a:Length>
</o:Column>
<o:Column Id="o115">
<a:ObjectID>69589FC7-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TT_MCH_OBS</a:Name>
<a:Code>TT_MCH_OBS</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>varchar(255)</a:DataType>
<a:Length>255</a:Length>
</o:Column>
<o:Column Id="o116">
<a:ObjectID>69589FCA-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TP_MCH</a:Name>
<a:Code>TP_MCH</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o117">
<a:ObjectID>69589FCD-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>FL_MCH_TEL</a:Name>
<a:Code>FL_MCH_TEL</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL0    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL0 As
@valor &gt;= 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>tinyint</a:DataType>
</o:Column>
<o:Column Id="o118">
<a:ObjectID>69589FCE-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TIMESTAMP</a:Name>
<a:Code>TIMESTAMP</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o119">
<a:ObjectID>69589FE3-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_MCH</a:Name>
<a:Code>Pk_T_MCH</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_MCH</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o104"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Indexes>
<o:Index Id="o120">
<a:ObjectID>69589FD4-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_MCH_CHG</a:Name>
<a:Code>I_MCH_CHG</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:IndexColumns>
<o:IndexColumn Id="o121">
<a:ObjectID>69589FD7-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o105"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
<o:Index Id="o122">
<a:ObjectID>69589FD9-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_MCH_DH</a:Name>
<a:Code>I_MCH_DH</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:IndexColumns>
<o:IndexColumn Id="o123">
<a:ObjectID>69589FDB-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o107"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
<o:Index Id="o124">
<a:ObjectID>69589FDE-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_MCH_TP</a:Name>
<a:Code>I_MCH_TP</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:IndexColumns>
<o:IndexColumn Id="o125">
<a:ObjectID>69589FE0-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o116"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
</c:Indexes>
<c:Owner>
<o:User Ref="o16"/>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o126">
<a:ObjectID>69589FA7-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_MCH_TRI</a:Name>
<a:Code>T_MCH_TRI</a:Code>
<a:Text>Create Trigger T_MCH_TRI On T_MCH
For Insert As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* Situação»Mensagem de Chegada: Situação da Mensagem de Chegada */
If (Select Count(*) From T_SIT, Inserted
Where T_SIT.CD_SIT = Inserted.CD_SIT)
 &lt;&gt;(Select Count(CD_SIT) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Situação&gt; que se deseja incluir na tabela &lt;Mensagem de Chegada&gt; não está cadastrada&#39;
  Return
End
/* Informante da Situação de Vôo»Mensagem de Chegada: Informante da Mensagem de Chegada */
If (Select Count(*) From T_IFT, Inserted
Where T_IFT.CD_IFT = Inserted.CD_IFT)
 &lt;&gt;(Select Count(CD_IFT) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Informante da Situação de Vôo&gt; que se deseja incluir na tabela &lt;Mensagem de Chegada&gt; não está cadastrada&#39;
  Return
End
/* Chegadas»Mensagem de Chegada: Chegada da Mensagem */
If (Select Count(*) From T_CHG, Inserted
Where T_CHG.CD_CHG = Inserted.CD_CHG)
 &lt;&gt;(Select Count(CD_CHG) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Chegadas&gt; que se deseja incluir na tabela &lt;Mensagem de Chegada&gt; não está cadastrada&#39;
  Return
End
/* Usuários»Mensagem de Chegada: Usuário da Mensagem de Chegada */
If (Select Count(*) From T_USR, Inserted
Where T_USR.CD_USR = Inserted.CD_USR)
 &lt;&gt;(Select Count(CD_USR) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Usuários&gt; que se deseja incluir na tabela &lt;Mensagem de Chegada&gt; não está cadastrada&#39;
  Return
End
/* Tipo de Anuncio»Mensagem de Chegada: Tipo de Anúncio da Mensagem de Chegada */
If (Select Count(*) From T_TPA, Inserted
Where T_TPA.CD_TPA = Inserted.CD_TPA)
 &lt;&gt;(Select Count(CD_TPA) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Tipo de Anuncio&gt; que se deseja incluir na tabela &lt;Mensagem de Chegada&gt; não está cadastrada&#39;
  Return
End
/* Domínio de: Status de Mensagem de Chegada */
/* 1 - Pendente */
/* 2 - Lida */
/* 3 - Executada */
/* 4 - Cancelada */
If (Select Count(*) From Inserted
    Where TP_MCH In (1,2,3,4))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Status de Mensagem de Chegada&gt; que se deseja incluir na tabela &lt;Mensagem de Chegada&gt; não é uma opção válida&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>I</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o127">
<a:ObjectID>69589FAA-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_MCH_TRU</a:Name>
<a:Code>T_MCH_TRU</a:Code>
<a:Text>Create Trigger T_MCH_TRU On T_MCH
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_MCH)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código da Mensagem de Chegada&gt; da tabela &lt;Mensagem de Chegada&gt; não pode ser alterada.&#39;
  Return
End
If Update (CD_SIT)
/* Situação»Mensagem de Chegada: Situação da Mensagem de Chegada */
If (Select Count(*) From T_SIT, Inserted
Where T_SIT.CD_SIT = Inserted.CD_SIT)
 &lt;&gt;(Select Count(CD_SIT) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Situação&gt; que se deseja incluir na tabela &lt;Mensagem de Chegada&gt; não está cadastrada&#39;
  Return
End
If Update (CD_IFT)
/* Informante da Situação de Vôo»Mensagem de Chegada: Informante da Mensagem de Chegada */
If (Select Count(*) From T_IFT, Inserted
Where T_IFT.CD_IFT = Inserted.CD_IFT)
 &lt;&gt;(Select Count(CD_IFT) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Informante da Situação de Vôo&gt; que se deseja incluir na tabela &lt;Mensagem de Chegada&gt; não está cadastrada&#39;
  Return
End
If Update (CD_CHG)
/* Chegadas»Mensagem de Chegada: Chegada da Mensagem */
If (Select Count(*) From T_CHG, Inserted
Where T_CHG.CD_CHG = Inserted.CD_CHG)
 &lt;&gt;(Select Count(CD_CHG) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Chegadas&gt; que se deseja incluir na tabela &lt;Mensagem de Chegada&gt; não está cadastrada&#39;
  Return
End
If Update (CD_USR)
/* Usuários»Mensagem de Chegada: Usuário da Mensagem de Chegada */
If (Select Count(*) From T_USR, Inserted
Where T_USR.CD_USR = Inserted.CD_USR)
 &lt;&gt;(Select Count(CD_USR) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Usuários&gt; que se deseja incluir na tabela &lt;Mensagem de Chegada&gt; não está cadastrada&#39;
  Return
End
If Update (CD_TPA)
/* Tipo de Anuncio»Mensagem de Chegada: Tipo de Anúncio da Mensagem de Chegada */
If (Select Count(*) From T_TPA, Inserted
Where T_TPA.CD_TPA = Inserted.CD_TPA)
 &lt;&gt;(Select Count(CD_TPA) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Tipo de Anuncio&gt; que se deseja incluir na tabela &lt;Mensagem de Chegada&gt; não está cadastrada&#39;
  Return
End
If Update (TP_MCH)
/* Domínio de: Status de Mensagem de Chegada */
/* 1 - Pendente */
/* 2 - Lida */
/* 3 - Executada */
/* 4 - Cancelada */
If (Select Count(*) From Inserted
    Where TP_MCH In (1,2,3,4))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Status de Mensagem de Chegada&gt; que se deseja incluir na tabela &lt;Mensagem de Chegada&gt; não é uma opção válida&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o119"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Ref="o49"/>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o128">
<a:ObjectID>69589F79-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_3</a:Name>
<a:Code>REFERENCE_3</a:Code>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o50"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o103"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o76"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o129">
<a:ObjectID>69589F7B-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o51"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o105"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o130">
<a:CenterTextOffset>(756, 1650)</a:CenterTextOffset>
<a:Rect>((-740568,693800), (-732394,713912))</a:Rect>
<a:ListOfPoints>((-737207,713912),(-737266,693800))</a:ListOfPoints>
<a:ArrowStyle>4881</a:ArrowStyle>
<a:LineColor>32768</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Id="o131">
<a:Rect>((-740524,711584), (-734284,716130))</a:Rect>
<a:LineColor>32768</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o132">
<a:ObjectID>69589F92-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_IFT</a:Name>
<a:Code>T_IFT</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081629081</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o133">
<a:ObjectID>69589FA3-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_IFT</a:Name>
<a:Code>CD_IFT</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o134">
<a:ObjectID>69589FA4-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_COM</a:Name>
<a:Code>CD_COM</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
</o:Column>
<o:Column Id="o135">
<a:ObjectID>69589F82-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_PES</a:Name>
<a:Code>CD_PES</a:Code>
<a:CreationDate>1081624823</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081624823</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
</o:Column>
<o:Column Id="o136">
<a:ObjectID>69589FA5-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TT_IFT</a:Name>
<a:Code>TT_IFT</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>varchar(255)</a:DataType>
<a:Length>255</a:Length>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o137">
<a:ObjectID>69589FA8-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TIMESTAMP</a:Name>
<a:Code>TIMESTAMP</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o138">
<a:ObjectID>69589FAE-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_IFT</a:Name>
<a:Code>Pk_T_IFT</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_IFT</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o133"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Owner>
<o:User Ref="o16"/>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o139">
<a:ObjectID>69589F9A-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_IFT_TRD</a:Name>
<a:Code>T_IFT_TRD</a:Code>
<a:Text>Create Trigger T_IFT_TRD On T_IFT
For Delete As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* Informante da Situação de Vôo»Chamadas de Anuncio: Informante da Chamada (Restrict) */
If (Select Count(*) From T_CHA dep, Deleted pri
 Where dep.CD_IFT = pri.CD_IFT) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Informante da Situação de Vôo&gt; está sendo referenciada na tabela &lt;Chamadas de Anuncio&gt;&#39;
  Return
End
/* Informante da Situação de Vôo»Chamadas de Anuncio - Mirror: Informante da Chamada (Restrict) */
If (Select Count(*) From T_CHA_MIR dep, Deleted pri
 Where dep.CD_IFT = pri.CD_IFT) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Informante da Situação de Vôo&gt; está sendo referenciada na tabela &lt;Chamadas de Anuncio - Mirror&gt;&#39;
  Return
End
/* Informante da Situação de Vôo»Mensagem de Chegada - Mirror: Informante da Mensagem de Chegada (Restrict) */
If (Select Count(*) From T_MCH_MIR dep, Deleted pri
 Where dep.CD_IFT = pri.CD_IFT) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Informante da Situação de Vôo&gt; está sendo referenciada na tabela &lt;Mensagem de Chegada - Mirror&gt;&#39;
  Return
End
/* Informante da Situação de Vôo»Mensagem de Chegada: Informante da Mensagem de Chegada (Restrict) */
If (Select Count(*) From T_MCH dep, Deleted pri
 Where dep.CD_IFT = pri.CD_IFT) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Informante da Situação de Vôo&gt; está sendo referenciada na tabela &lt;Mensagem de Chegada&gt;&#39;
  Return
End
/* Informante da Situação de Vôo»Mensagem de Partida - Mirror: Informante da Mensagem de Partida (Restrict) */
If (Select Count(*) From T_MPA_MIR dep, Deleted pri
 Where dep.CD_IFT = pri.CD_IFT) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Informante da Situação de Vôo&gt; está sendo referenciada na tabela &lt;Mensagem de Partida - Mirror&gt;&#39;
  Return
End
/* Informante da Situação de Vôo»Mensagem de Partida: Informante da Mensagem de Partida (Restrict) */
If (Select Count(*) From T_MPA dep, Deleted pri
 Where dep.CD_IFT = pri.CD_IFT) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Informante da Situação de Vôo&gt; está sendo referenciada na tabela &lt;Mensagem de Partida&gt;&#39;
  Return
End
/* Informante da Situação de Vôo»Chegadas - Mirror: Informante da Situação de Chegada (Restrict) */
If (Select Count(*) From T_CHG_MIR dep, Deleted pri
 Where dep.CD_IFT = pri.CD_IFT) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Informante da Situação de Vôo&gt; está sendo referenciada na tabela &lt;Chegadas - Mirror&gt;&#39;
  Return
End
/* Informante da Situação de Vôo»Chegadas: Informante da Situação de Chegada (Restrict) */
If (Select Count(*) From T_CHG dep, Deleted pri
 Where dep.CD_IFT = pri.CD_IFT) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Informante da Situação de Vôo&gt; está sendo referenciada na tabela &lt;Chegadas&gt;&#39;
  Return
End
/* Informante da Situação de Vôo»Partidas - Mirror: Informante da Situação de Partida (Restrict) */
If (Select Count(*) From T_PAR_MIR dep, Deleted pri
 Where dep.CD_IFT = pri.CD_IFT) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Informante da Situação de Vôo&gt; está sendo referenciada na tabela &lt;Partidas - Mirror&gt;&#39;
  Return
End
/* Informante da Situação de Vôo»Partidas: Informante da Situação de Partida (Restrict) */
If (Select Count(*) From T_PAR dep, Deleted pri
 Where dep.CD_IFT = pri.CD_IFT) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Informante da Situação de Vôo&gt; está sendo referenciada na tabela &lt;Partidas&gt;&#39;
  Return
End
/* Informante da Situação de Vôo»Histórico de Situação de Vôo de Chegada - Mirror: Informante do HSC (Restrict) */
If (Select Count(*) From T_HSC_MIR dep, Deleted pri
 Where dep.CD_IFT = pri.CD_IFT) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Informante da Situação de Vôo&gt; está sendo referenciada na tabela &lt;Histórico de Situação de Vôo de Chegada - Mirror&gt;&#39;
  Return
End
/* Informante da Situação de Vôo»Histórico de Situação de Vôo de Chegada: Informante do HSC (Restrict) */
If (Select Count(*) From T_HSC dep, Deleted pri
 Where dep.CD_IFT = pri.CD_IFT) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Informante da Situação de Vôo&gt; está sendo referenciada na tabela &lt;Histórico de Situação de Vôo de Chegada&gt;&#39;
  Return
End
/* Informante da Situação de Vôo»Histórico de Situação de Vôo de Partida - Mirror: Informante do HSP (Restrict) */
If (Select Count(*) From T_HSP_MIR dep, Deleted pri
 Where dep.CD_IFT = pri.CD_IFT) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Informante da Situação de Vôo&gt; está sendo referenciada na tabela &lt;Histórico de Situação de Vôo de Partida - Mirror&gt;&#39;
  Return
End
/* Informante da Situação de Vôo»Histórico de Situação de Vôo de Partida: Informante do HSP (Restrict) */
If (Select Count(*) From T_HSP dep, Deleted pri
 Where dep.CD_IFT = pri.CD_IFT) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Informante da Situação de Vôo&gt; está sendo referenciada na tabela &lt;Histórico de Situação de Vôo de Partida&gt;&#39;
  Return
End
/* Informante da Situação de Vôo»Log da Programação de Anúncios: C:IFT-PRALOG (Cascade) */
Delete T_PRALOG From T_PRALOG dep, Deleted pri
 Where dep.CD_IFT = pri.CD_IFT
End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>D</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o140">
<a:ObjectID>69589F9D-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_IFT_TRI</a:Name>
<a:Code>T_IFT_TRI</a:Code>
<a:Text>Create Trigger T_IFT_TRI On T_IFT
For Insert As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* Companhia Aérea»Informante da Situação de Vôo: possui */
If (Select Count(*) From T_COM, Inserted
Where T_COM.CD_COM = Inserted.CD_COM)
 &lt;&gt;(Select Count(CD_COM) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Companhia Aérea&gt; que se deseja incluir na tabela &lt;Informante da Situação de Vôo&gt; não está cadastrada&#39;
  Return
End
/* Pessoas»Informante da Situação de Vôo: Pessoa do Informante */
If (Select Count(*) From T_PES, Inserted
Where T_PES.CD_PES = Inserted.CD_IFT)
 &lt;&gt;(Select Count(CD_IFT) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Pessoas&gt; que se deseja incluir na tabela &lt;Informante da Situação de Vôo&gt; não está cadastrada&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>I</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o141">
<a:ObjectID>69589F9F-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_IFT_TRU</a:Name>
<a:Code>T_IFT_TRU</a:Code>
<a:Text>Create Trigger T_IFT_TRU On T_IFT
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_IFT)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código do Informante da Situação de Vôo&gt; da tabela &lt;Informante da Situação de Vôo&gt; não pode ser alterada.&#39;
  Return
End
If Update (CD_COM)
/* Companhia Aérea»Informante da Situação de Vôo: possui */
If (Select Count(*) From T_COM, Inserted
Where T_COM.CD_COM = Inserted.CD_COM)
 &lt;&gt;(Select Count(CD_COM) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Companhia Aérea&gt; que se deseja incluir na tabela &lt;Informante da Situação de Vôo&gt; não está cadastrada&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o138"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Id="o142">
<a:Rect>((-737995,690365), (-731137,694911))</a:Rect>
<a:LineColor>32768</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o143">
<a:ObjectID>69589F26-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_COM</a:Name>
<a:Code>T_COM</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o144">
<a:ObjectID>69589F66-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_COM</a:Name>
<a:Code>CD_COM</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o145">
<a:ObjectID>69589F68-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NM_COM</a:Name>
<a:Code>NM_COM</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>char(30)</a:DataType>
<a:Length>30</a:Length>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o146">
<a:ObjectID>69589F6A-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>SG_COM_IAT_003</a:Name>
<a:Code>SG_COM_IAT_003</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>char(3)</a:DataType>
<a:Length>3</a:Length>
</o:Column>
<o:Column Id="o147">
<a:ObjectID>69589F6C-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>SG_COM_IAT_002</a:Name>
<a:Code>SG_COM_IAT_002</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>char(2)</a:DataType>
<a:Length>2</a:Length>
</o:Column>
<o:Column Id="o148">
<a:ObjectID>69589F6E-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>FL_COM_GR1</a:Name>
<a:Code>FL_COM_GR1</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>tinyint</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o149">
<a:ObjectID>69589F6F-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>FL_COM_GR2</a:Name>
<a:Code>FL_COM_GR2</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>tinyint</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o150">
<a:ObjectID>69589F70-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>FL_COM_TAR_RED</a:Name>
<a:Code>FL_COM_TAR_RED</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>tinyint</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o151">
<a:ObjectID>69589F72-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_COM_MAT</a:Name>
<a:Code>CD_COM_MAT</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o152">
<a:ObjectID>69589F74-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TIMESTAMP</a:Name>
<a:Code>TIMESTAMP</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o153">
<a:ObjectID>69589F87-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_COM</a:Name>
<a:Code>Pk_T_COM</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_COM</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o144"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Indexes>
<o:Index Id="o154">
<a:ObjectID>69589F78-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_COM_GR1</a:Name>
<a:Code>I_COM_GR1</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:IndexColumns>
<o:IndexColumn Id="o155">
<a:ObjectID>69589F7A-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o148"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
<o:Index Id="o156">
<a:ObjectID>69589F7C-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_COM_GR2</a:Name>
<a:Code>I_COM_GR2</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:IndexColumns>
<o:IndexColumn Id="o157">
<a:ObjectID>69589F7E-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o149"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
<o:Index Id="o158">
<a:ObjectID>69589F80-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_COM_IAT_002</a:Name>
<a:Code>I_COM_IAT_002</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:IndexColumns>
<o:IndexColumn Id="o159">
<a:ObjectID>69589F83-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o147"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
<o:Index Id="o160">
<a:ObjectID>69589F85-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_COM_IAT_003</a:Name>
<a:Code>I_COM_IAT_003</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:IndexColumns>
<o:IndexColumn Id="o161">
<a:ObjectID>69589F86-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o146"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
</c:Indexes>
<c:Owner>
<o:User Ref="o16"/>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o162">
<a:ObjectID>69589EA5-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_COM_TRD</a:Name>
<a:Code>T_COM_TRD</a:Code>
<a:Text>Create Trigger T_COM_TRD On T_COM
For Delete As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* Companhia Aérea»Chegadas: Comapanhia Aérea da Chegada (Restrict) */
If (Select Count(*) From T_CHG dep, Deleted pri
 Where dep.CD_COM = pri.CD_COM) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Companhia Aérea&gt; está sendo referenciada na tabela &lt;Chegadas&gt;&#39;
  Return
End
/* Companhia Aérea»Chegadas - Mirror: Companhia Aérea da Chegada (Restrict) */
If (Select Count(*) From T_CHG_MIR dep, Deleted pri
 Where dep.CD_COM = pri.CD_COM) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Companhia Aérea&gt; está sendo referenciada na tabela &lt;Chegadas - Mirror&gt;&#39;
  Return
End
/* Companhia Aérea»Partidas - Mirror: Companhia Aérea da Partida (Restrict) */
If (Select Count(*) From T_PAR_MIR dep, Deleted pri
 Where dep.CD_COM = pri.CD_COM) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Companhia Aérea&gt; está sendo referenciada na tabela &lt;Partidas - Mirror&gt;&#39;
  Return
End
/* Companhia Aérea»Partidas: Companhia Aérea da Partida (Restrict) */
If (Select Count(*) From T_PAR dep, Deleted pri
 Where dep.CD_COM = pri.CD_COM) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Companhia Aérea&gt; está sendo referenciada na tabela &lt;Partidas&gt;&#39;
  Return
End
/* Companhia Aérea»FIDS - IST Companhia: Companhia do ISC (Restrict) */
If (Select Count(*) From T_FIDS_ISC dep, Deleted pri
 Where dep.CD_COM = pri.CD_COM) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Companhia Aérea&gt; está sendo referenciada na tabela &lt;FIDS - IST Companhia&gt;&#39;
  Return
End
/* Companhia Aérea»FIDS - Usuário do Grupo de Displays: DGT-COM:R (Restrict) */
If (Select Count(*) From T_FIDS_DGU dep, Deleted pri
 Where dep.CD_COM = pri.CD_COM) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Companhia Aérea&gt; está sendo referenciada na tabela &lt;FIDS - Usuário do Grupo de Displays&gt;&#39;
  Return
End
/* Companhia Aérea»Hotran: É Companhia do Hotran (Restrict) */
If (Select Count(*) From T_HOT001 dep, Deleted pri
 Where dep.SG_COM = pri.SG_COM_IAT_003) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Companhia Aérea&gt; está sendo referenciada na tabela &lt;Hotran&gt;&#39;
  Return
End
/* Companhia Aérea»Companhia Aérea: É Matriz de (Restrict) */
If (Select Count(*) From T_COM dep, Deleted pri
 Where dep.CD_COM_MAT = pri.CD_COM) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Companhia Aérea&gt; está sendo referenciada na tabela &lt;Companhia Aérea&gt;&#39;
  Return
End
/* Companhia Aérea»Informante da Situação de Vôo: possui (Restrict) */
If (Select Count(*) From T_IFT dep, Deleted pri
 Where dep.CD_COM = pri.CD_COM) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Companhia Aérea&gt; está sendo referenciada na tabela &lt;Informante da Situação de Vôo&gt;&#39;
  Return
End
/* Companhia Aérea»Tarifas Pagas no Bilhete: Se Relaciona (Restrict) */
If (Select Count(*) From T_TFB001 dep, Deleted pri
 Where dep.CD_COM = pri.CD_COM) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Companhia Aérea&gt; está sendo referenciada na tabela &lt;Tarifas Pagas no Bilhete&gt;&#39;
  Return
End
/* Companhia Aérea»Tarifas Pagas no Bilhete - Mirror: Se relaciona (Restrict) */
If (Select Count(*) From T_TFB001_MIR dep, Deleted pri
 Where dep.CD_COM = pri.CD_COM) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Companhia Aérea&gt; está sendo referenciada na tabela &lt;Tarifas Pagas no Bilhete - Mirror&gt;&#39;
  Return
End
/* Companhia Aérea»Boxes da Companhia Aérea: Boxes da Companhia Aérea (Cascade) */
Delete T_BCO From T_BCO dep, Deleted pri
 Where dep.CD_COM = pri.CD_COM
/* Companhia Aérea»Aeronave: Companh Aérea possui Aeronaves (Cascade) */
Delete T_AEN From T_AEN dep, Deleted pri
 Where dep.CD_COM = pri.CD_COM
/* Companhia Aérea»Checkin: Companhia Aér. possui Checkins (Cascade) */
Delete T_CHK From T_CHK dep, Deleted pri
 Where dep.CD_COM = pri.CD_COM
End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>D</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o163">
<a:ObjectID>69589EA7-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_COM_TRI</a:Name>
<a:Code>T_COM_TRI</a:Code>
<a:Text>Create Trigger T_COM_TRI On T_COM
For Insert As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* Companhia Aérea»Companhia Aérea: É Matriz de */
If (Select Count(*) From T_COM, Inserted
Where T_COM.CD_COM = Inserted.CD_COM_MAT)
 &lt;&gt;(Select Count(CD_COM_MAT) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Companhia Aérea&gt; que se deseja incluir na tabela &lt;Companhia Aérea&gt; não está cadastrada&#39;
  Return
End
/* Regra de negócio */
/* Verificar se há alguma situação que não seja do Grupo 1 nem do Grupo 2 */
IF (	SELECT	COUNT(*)
	FROM	INSERTED INS,
		T_COM COM
	WHERE	COM.CD_COM = INS.CD_COM AND
		INS.FL_COM_GR1 = 0 AND 
		INS.FL_COM_GR2 = 0) &gt; 0
BEGIN
	RAISERROR 20310 &#39;Operação não executada: Uma Companhia Aérea deve pertencer a pelo menos um Grupo .&#39;
	ROLLBACK TRANSACTION
	RETURN
END

/* Verificar se quando a companhia for do Grupo 1, existe sigla IATA-3 */
IF (	SELECT	COUNT(*)
	FROM	INSERTED INS,
		T_COM COM
	WHERE	COM.CD_COM = INS.CD_COM AND
		INS.FL_COM_GR1 = 1 AND 
		INS.SG_COM_IAT_003 = &#39;&#39;) &gt; 0
BEGIN
	RAISERROR 20310 &#39;Operação não executada: Uma Companhia Aérea do Grupo 1 deve possuir sigla IATA-3.&#39;
	ROLLBACK TRANSACTION
	RETURN
END

/* Verificar se quando a companhia for do Grupo 1, existe sigla IATA-2 */
IF (	SELECT	COUNT(*)
	FROM	INSERTED INS,
		T_COM COM
	WHERE	COM.CD_COM = INS.CD_COM AND
		INS.FL_COM_GR1 = 1 AND 
		INS.SG_COM_IAT_002 = &#39;&#39;) &gt; 0
BEGIN
	RAISERROR 20310 &#39;Operação não executada: Uma Companhia Aérea do Grupo 1 deve possuir sigla IATA-2.&#39;
	ROLLBACK TRANSACTION
	RETURN
END

/* Verificar se já existe alguma companhia cadastrada com a sigla IATA-3 da companhia que se está incluindo */
IF (	SELECT	COUNT(*)
	FROM	T_COM COM, 
		INSERTED INS
	WHERE	COM.CD_COM &lt;&gt; INS.CD_COM AND
		COM.SG_COM_IAT_003 = INS.SG_COM_IAT_003 AND
		INS.SG_COM_IAT_003 &lt;&gt; &#39;&#39;) &gt; 0
BEGIN
	RAISERROR 20310 &#39;Operação não executada: Já existe uma Companhia Áerea cadastrada com esta sigla IATA-3.&#39;
	ROLLBACK TRANSACTION
	RETURN
END


/* Verificar se já existe alguma companhia cadastrada com a sigla IATA-2 da companhia que se está incluindo */
IF (	SELECT	COUNT(*)
	FROM	T_COM COM, 
		INSERTED INS
	WHERE	COM.CD_COM &lt;&gt; INS.CD_COM AND
		COM.SG_COM_IAT_002 = INS.SG_COM_IAT_002 AND
		INS.SG_COM_IAT_002 &lt;&gt; &#39;&#39;) &gt; 0
BEGIN 
	RAISERROR 20310 &#39;Operação não executada: Já existe uma Companhia Áerea cadastrada com esta sigla IATA-2.&#39;
	ROLLBACK TRANSACTION
	RETURN
END

End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>I</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o164">
<a:ObjectID>69589EA9-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_COM_TRU</a:Name>
<a:Code>T_COM_TRU</a:Code>
<a:Text>Create Trigger T_COM_TRU On T_COM
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_COM)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código da Companhia Aérea&gt; da tabela &lt;Companhia Aérea&gt; não pode ser alterada.&#39;
  Return
End
If Update (CD_COM_MAT)
/* Companhia Aérea»Companhia Aérea: É Matriz de */
If (Select Count(*) From T_COM, Inserted
Where T_COM.CD_COM = Inserted.CD_COM_MAT)
 &lt;&gt;(Select Count(CD_COM_MAT) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Companhia Aérea&gt; que se deseja incluir na tabela &lt;Companhia Aérea&gt; não está cadastrada&#39;
  Return
End
/* Regra de negócio */
/* Verificar se há alguma Companhia que não seja do Grupo 1 nem do Grupo 2 */
IF (	SELECT	COUNT(*)
	FROM	INSERTED
	WHERE	FL_COM_GR1 = 0 AND FL_COM_GR2 = 0) &gt; 0
BEGIN
	RAISERROR 20310 &#39;Operação não executada: Uma Companhia Aérea deve pertencer a pelo menos um Grupo.&#39;
	ROLLBACK TRANSACTION
	RETURN
END

/* Verificar se quando a companhia for do Grupo 1, existe sigla IATA-3 */
IF (	SELECT	COUNT(*)
	FROM	INSERTED INS,
		T_COM COM
	WHERE	COM.CD_COM = INS.CD_COM AND
		INS.FL_COM_GR1 = 1 AND 
		INS.SG_COM_IAT_003 = &#39;&#39;) &gt; 0
BEGIN
	RAISERROR 20310 &#39;Operação não executada: Uma Companhia Aérea do Grupo 1 deve possuir sigla IATA-3.&#39;
	ROLLBACK TRANSACTION
	RETURN
END

/* Verificar se quando a companhia for do Grupo 1, existe sigla IATA-2 */
IF (	SELECT	COUNT(*)
	FROM	INSERTED INS,
		T_COM COM
	WHERE	COM.CD_COM = INS.CD_COM AND
		INS.FL_COM_GR1 = 1 AND 
		INS.SG_COM_IAT_002 = &#39;&#39;) &gt; 0
BEGIN
	RAISERROR 20310 &#39;Operação não executada: Uma Companhia Aérea do Grupo 1 deve possuir sigla IATA-2.&#39;
	ROLLBACK TRANSACTION
	RETURN
END

/* Não permitir que o campo SG_COM_IAT_003 seja alterado se existir alguma referência a esta sigla na tabela T_HOT001 */
IF UPDATE(SG_COM_IAT_003)
BEGIN
	IF (	SELECT	COUNT(*)
		FROM	DELETED DEL, T_HOT001 HOT
		WHERE	HOT.SG_COM = DEL.SG_COM_IAT_003) &gt; 0
	BEGIN 
		RAISERROR 20310 &#39;Operação não executada: A sigla IATA-3 dessa Companhia Aérea não pode ser alterada pois está sendo referenciada em pelo menos um Hotran.&#39;
		ROLLBACK TRANSACTION
		RETURN
	END
END

/* Verificar se já existe alguma companhia cadastrada com a sigla IATA-3 da companhia que se está alterando */
IF (	SELECT	COUNT(*)
	FROM	T_COM COM, 
		INSERTED INS
	WHERE	COM.CD_COM &lt;&gt; INS.CD_COM AND
		COM.SG_COM_IAT_003 = INS.SG_COM_IAT_003 AND
		INS.SG_COM_IAT_003 &lt;&gt; &#39;&#39;) &gt; 0
BEGIN
	RAISERROR 20310 &#39;Operação não executada: Já existe uma Companhia Áerea cadastrada com esta sigla IATA-3.&#39;
	ROLLBACK TRANSACTION
	RETURN
END

/* Verificar se já existe alguma companhia cadastrada com a sigla IATA-2 da companhia que se está alterando */
IF (	SELECT	COUNT(*)
	FROM	T_COM COM, 
		INSERTED INS
	WHERE	COM.CD_COM &lt;&gt; INS.CD_COM AND
		COM.SG_COM_IAT_002 = INS.SG_COM_IAT_002 AND
		INS.SG_COM_IAT_002 &lt;&gt; &#39;&#39;) &gt; 0
BEGIN 
	RAISERROR 20310 &#39;Operação não executada: Já existe uma Companhia Áerea cadastrada com esta sigla IATA-2.&#39;
	ROLLBACK TRANSACTION
	RETURN
END

IF UPDATE(SG_COM_IAT_003)
BEGIN
	/* Incluir Registros em T_ACH */
	INSERT	T_ACH (DH_ACH, CD_CHG)
	Select 	GETDATE(), CD_CHG
	From 	T_CHG CHG, INSERTED INS
	Where	CHG.TP_CHG_STA = 1 AND
		CHG.CD_AER = (Select CD_AER From T_PSI) AND
		CHG.CD_COM = INS.CD_COM

	/* Incluir Registros em T_APA */
	INSERT	T_APA (DH_APA, CD_PAR)
	Select 	GETDATE(), CD_PAR
	From 	T_PAR PAR, INSERTED INS
	Where	PAR.TP_PAR_STA = 1 AND
		PAR.CD_AER = (Select CD_AER From T_PSI) AND
		PAR.CD_COM = INS.CD_COM

	/* Incluir Registros em T_AHP - Chegadas */
	INSERT	T_AHP (CD_HPA, DH_AHP)
	Select 	DISTINCT CD_HPA, GETDATE()
	From 	T_HPA001 HPA, T_CHG CHG, T_SIT SIT, INSERTED INS
	Where	HPA.CD_CHG = CHG.CD_CHG AND
		SIT.CD_SIT = CHG.CD_SIT AND
		HPA.CD_AER = (Select CD_AER From T_PSI) AND
		(HPA.FL_HPA_ENT = 1 OR SIT.FL_SIT_AEN_PAT = 1) AND
		HPA.FL_HPA_SAI = 0 AND
		HPA.CD_AEN IS NOT NULL AND
		CHG.CD_COM = INS.CD_COM

	/* Incluir Registros em T_AHP - Partidas */
	INSERT	T_AHP (CD_HPA, DH_AHP)
	Select 	DISTINCT CD_HPA, GETDATE()
	From 	T_HPA001 HPA, T_CHG CHG, T_SIT SIT, T_PAR PAR, INSERTED INS
	Where	HPA.CD_CHG = CHG.CD_CHG AND
		SIT.CD_SIT = CHG.CD_SIT AND
		HPA.CD_AER = (Select CD_AER From T_PSI) AND
		(HPA.FL_HPA_ENT = 1 OR SIT.FL_SIT_AEN_PAT = 1) AND
		HPA.FL_HPA_SAI = 0 AND
		HPA.CD_AEN IS NOT NULL AND
		PAR.CD_CHG_AEN_ANT = HPA.CD_CHG AND
		PAR.CD_COM = INS.CD_COM

END
End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o153"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o165">
<a:ObjectID>69589F81-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_5</a:Name>
<a:Code>REFERENCE_5</a:Code>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o143"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o132"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o153"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o166">
<a:ObjectID>69589F84-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o144"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o134"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o167">
<a:CenterTextOffset>(-746, -1050)</a:CenterTextOffset>
<a:Rect>((-721371,656447), (-708271,658936))</a:Rect>
<a:ListOfPoints>((-708271,656447),(-721371,658936))</a:ListOfPoints>
<a:ArrowStyle>4882</a:ArrowStyle>
<a:LineColor>32768</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Id="o168">
<a:Rect>((-711240,653927), (-704382,658473))</a:Rect>
<a:LineColor>32768</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o169">
<a:ObjectID>69589FB0-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_MSG</a:Name>
<a:Code>T_MSG</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o170">
<a:ObjectID>6958A013-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_MSG</a:Name>
<a:Code>CD_MSG</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o171">
<a:ObjectID>6958A014-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_IDI</a:Name>
<a:Code>CD_IDI</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o172">
<a:ObjectID>6958A015-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_TPA</a:Name>
<a:Code>CD_TPA</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o173">
<a:ObjectID>6958A016-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>DS_MSG</a:Name>
<a:Code>DS_MSG</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>varchar(255)</a:DataType>
<a:Length>255</a:Length>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o174">
<a:ObjectID>6958A017-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_SIT</a:Name>
<a:Code>CD_SIT</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
</o:Column>
<o:Column Id="o175">
<a:ObjectID>6958A019-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TP_TEL</a:Name>
<a:Code>TP_TEL</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
</o:Column>
<o:Column Id="o176">
<a:ObjectID>6958A01C-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TIMESTAMP</a:Name>
<a:Code>TIMESTAMP</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o177">
<a:ObjectID>6958A028-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_MSG</a:Name>
<a:Code>Pk_T_MSG</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_MSG</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o170"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Indexes>
<o:Index Id="o178">
<a:ObjectID>6958A01E-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_MSG_IDI_TPA</a:Name>
<a:Code>I_MSG_IDI_TPA</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Unique>1</a:Unique>
<c:IndexColumns>
<o:IndexColumn Id="o179">
<a:ObjectID>6958A01F-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o171"/>
</c:Column>
</o:IndexColumn>
<o:IndexColumn Id="o180">
<a:ObjectID>6958A020-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_1&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o172"/>
</c:Column>
</o:IndexColumn>
<o:IndexColumn Id="o181">
<a:ObjectID>6958A021-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_2&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o174"/>
</c:Column>
</o:IndexColumn>
<o:IndexColumn Id="o182">
<a:ObjectID>6958A022-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_3&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o175"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
<o:Index Id="o183">
<a:ObjectID>6958A023-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_MSG_IDI_SIT</a:Name>
<a:Code>I_MSG_IDI_SIT</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:IndexColumns>
<o:IndexColumn Id="o184">
<a:ObjectID>6958A024-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o171"/>
</c:Column>
</o:IndexColumn>
<o:IndexColumn Id="o185">
<a:ObjectID>6958A025-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_1&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o172"/>
</c:Column>
</o:IndexColumn>
<o:IndexColumn Id="o186">
<a:ObjectID>6958A026-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_2&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o174"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
</c:Indexes>
<c:Owner>
<o:User Ref="o16"/>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o187">
<a:ObjectID>69589FD1-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_MSG_TRD</a:Name>
<a:Code>T_MSG_TRD</a:Code>
<a:Text>Create Trigger T_MSG_TRD On T_MSG
For Delete As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* Mensagens»Chamadas de Anuncio: Mensagem da Chamada (Restrict) */
If (Select Count(*) From T_CHA dep, Deleted pri
 Where dep.CD_MSG = pri.CD_MSG) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Mensagens&gt; está sendo referenciada na tabela &lt;Chamadas de Anuncio&gt;&#39;
  Return
End
/* Mensagens»Chamadas de Anuncio - Mirror: Mensagem da Chamada (Restrict) */
If (Select Count(*) From T_CHA_MIR dep, Deleted pri
 Where dep.CD_MSG = pri.CD_MSG) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Mensagens&gt; está sendo referenciada na tabela &lt;Chamadas de Anuncio - Mirror&gt;&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>D</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o188">
<a:ObjectID>69589FD3-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_MSG_TRI</a:Name>
<a:Code>T_MSG_TRI</a:Code>
<a:Text>Create Trigger T_MSG_TRI On T_MSG
For Insert As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* Situação»Mensagens: Situação das Mensagens */
If (Select Count(*) From T_SIT, Inserted
Where T_SIT.CD_SIT = Inserted.CD_SIT)
 &lt;&gt;(Select Count(CD_SIT) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Situação&gt; que se deseja incluir na tabela &lt;Mensagens&gt; não está cadastrada&#39;
  Return
End
/* Idiomas»Mensagens: Idioma da Mensagem */
If (Select Count(*) From T_IDI, Inserted
Where T_IDI.CD_IDI = Inserted.CD_IDI)
 &lt;&gt;(Select Count(CD_IDI) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Idiomas&gt; que se deseja incluir na tabela &lt;Mensagens&gt; não está cadastrada&#39;
  Return
End
/* Tipo de Anuncio»Mensagens: Tipo de Mensagem */
If (Select Count(*) From T_TPA, Inserted
Where T_TPA.CD_TPA = Inserted.CD_TPA)
 &lt;&gt;(Select Count(CD_TPA) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Tipo de Anuncio&gt; que se deseja incluir na tabela &lt;Mensagens&gt; não está cadastrada&#39;
  Return
End
/* Domínio de: Tipo de Mensagem Telefônica */
/* 1 - 1-PickUp */
/* 2 - 2-Escolha da Lingua */
/* 3 - 3-Número do Vôo */
/* 4 - 4-Situação de Chegada */
/* 5 - 5-Situação de Partida */
/* 6 - 6-HangUp */
/* 7 - 7-Repetir */
/* 8 - 8-Opções */
/* 9 - 9-Mensagem */
If (Select Count(*) From Inserted
    Where TP_TEL In (1,2,3,4,5,6,7,8,9))
 &lt;&gt;(Select Count(*) From Inserted
    Where TP_TEL Is Not Null)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Tipo de Mensagem Telefônica&gt; que se deseja incluir na tabela &lt;Mensagens&gt; não é uma opção válida&#39;
  Return
End
/* Regra de negócio */
IF (	Select	Count(*)
	From	INSERTED INS
	Where	TP_TEL = 4 And
		Exists (Select * from T_TPA Where CD_TPA = INS.CD_TPA And TP_TPA &lt;&gt; 1)) &gt; 0
BEGIN
	RAISERROR 20999 &#39;Operação não executada: Não pode existir &lt;Mensagem de Chegada&gt; para Tipo de Mensagem Telefônica diferente de &lt;Chegada&gt;.&#39;
	ROLLBACK TRANSACTION
	RETURN
END

IF (	Select	Count(*)
	From	INSERTED INS
	Where	TP_TEL = 5 And
		Exists (Select * from T_TPA Where CD_TPA = INS.CD_TPA And TP_TPA &lt;&gt;2)) &gt; 0
BEGIN
	RAISERROR 20999 &#39;Operação não executada: Não pode existir &lt;Mensagem de Partida&gt; para Tipo de Mensagem Telefônica diferente de &lt;Partida&gt;.&#39;
	ROLLBACK TRANSACTION
	RETURN
END

IF (	Select	Count(*)
	From	INSERTED INS
	Where	TP_TEL IN (1,2,3,6,7,8,9) And
		Exists (Select * from T_TPA Where CD_TPA = INS.CD_TPA And TP_TPA &lt;&gt; 3)) &gt; 0
BEGIN
	RAISERROR 20999 &#39;Operação não executada: Não pode existir &lt;Mensagens Diversas&gt; para tipos de Mensagem Telefônica diferentes de &lt;Tipo de Mensagem Telefônica de Chegada&gt; e &lt;Tipo de Mensagem Telefônica de Partida&gt;.&#39;
	ROLLBACK TRANSACTION
	RETURN
END

End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>I</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o189">
<a:ObjectID>69589FD6-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_MSG_TRU</a:Name>
<a:Code>T_MSG_TRU</a:Code>
<a:Text>Create Trigger T_MSG_TRU On T_MSG
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_MSG)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código da Mensagem&gt; da tabela &lt;Mensagens&gt; não pode ser alterada.&#39;
  Return
End
If Update (CD_SIT)
/* Situação»Mensagens: Situação das Mensagens */
If (Select Count(*) From T_SIT, Inserted
Where T_SIT.CD_SIT = Inserted.CD_SIT)
 &lt;&gt;(Select Count(CD_SIT) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Situação&gt; que se deseja incluir na tabela &lt;Mensagens&gt; não está cadastrada&#39;
  Return
End
If Update (CD_IDI)
/* Idiomas»Mensagens: Idioma da Mensagem */
If (Select Count(*) From T_IDI, Inserted
Where T_IDI.CD_IDI = Inserted.CD_IDI)
 &lt;&gt;(Select Count(CD_IDI) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Idiomas&gt; que se deseja incluir na tabela &lt;Mensagens&gt; não está cadastrada&#39;
  Return
End
If Update (CD_TPA)
/* Tipo de Anuncio»Mensagens: Tipo de Mensagem */
If (Select Count(*) From T_TPA, Inserted
Where T_TPA.CD_TPA = Inserted.CD_TPA)
 &lt;&gt;(Select Count(CD_TPA) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Tipo de Anuncio&gt; que se deseja incluir na tabela &lt;Mensagens&gt; não está cadastrada&#39;
  Return
End
If Update (TP_TEL)
/* Domínio de: Tipo de Mensagem Telefônica */
/* 1 - 1-PickUp */
/* 2 - 2-Escolha da Lingua */
/* 3 - 3-Número do Vôo */
/* 4 - 4-Situação de Chegada */
/* 5 - 5-Situação de Partida */
/* 6 - 6-HangUp */
/* 7 - 7-Repetir */
/* 8 - 8-Opções */
/* 9 - 9-Mensagem */
If (Select Count(*) From Inserted
    Where TP_TEL In (1,2,3,4,5,6,7,8,9))
 &lt;&gt;(Select Count(*) From Inserted
    Where TP_TEL Is Not Null)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Tipo de Mensagem Telefônica&gt; que se deseja incluir na tabela &lt;Mensagens&gt; não é uma opção válida&#39;
  Return
End
/* Regra de negócio */
IF (	Select	Count(*)
	From	INSERTED INS
	Where	TP_TEL = 4 And
		Exists (Select * from T_TPA Where CD_TPA = INS.CD_TPA And TP_TPA &lt;&gt; 1)) &gt; 0
BEGIN
	RAISERROR 20999 &#39;Operação não executada: Não pode existir &lt;Mensagem de Chegada&gt; para Tipo de Mensagem Telefônica diferente de &lt;Chegada&gt;.&#39;
	ROLLBACK TRANSACTION
	RETURN
END

IF (	Select	Count(*)
	From	INSERTED INS
	Where	TP_TEL = 5 And
		Exists (Select * from T_TPA Where CD_TPA = INS.CD_TPA And TP_TPA &lt;&gt;2)) &gt; 0
BEGIN
	RAISERROR 20999 &#39;Operação não executada: Não pode existir &lt;Mensagem de Partida&gt; para Tipo de Mensagem Telefônica diferente de &lt;Partida&gt;.&#39;
	ROLLBACK TRANSACTION
	RETURN
END

IF (	Select	Count(*)
	From	INSERTED INS
	Where	TP_TEL IN (1,2,3,6,7,8,9) And
		Exists (Select * from T_TPA Where CD_TPA = INS.CD_TPA And TP_TPA &lt;&gt; 3)) &gt; 0
BEGIN
	RAISERROR 20999 &#39;Operação não executada: Não pode existir &lt;Mensagens Diversas&gt; para tipos de Mensagem Telefônica diferentes de &lt;Tipo de Mensagem Telefônica de Chegada&gt; e &lt;Tipo de Mensagem Telefônica de Partida&gt;.&#39;
	ROLLBACK TRANSACTION
	RETURN
END

End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o177"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Id="o190">
<a:Rect>((-724053,657969), (-718045,661569))</a:Rect>
<a:LineColor>32768</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o191">
<a:ObjectID>69589F8F-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_IDI</a:Name>
<a:Code>T_IDI</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o192">
<a:ObjectID>69589F89-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_IDI</a:Name>
<a:Code>CD_IDI</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o193">
<a:ObjectID>69589F8B-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NM_IDI</a:Name>
<a:Code>NM_IDI</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>char(30)</a:DataType>
<a:Length>30</a:Length>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o194">
<a:ObjectID>69589F8D-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>SG_IDI</a:Name>
<a:Code>SG_IDI</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>char(3)</a:DataType>
<a:Length>3</a:Length>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o195">
<a:ObjectID>69589F90-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>SG_IDI_INI</a:Name>
<a:Code>SG_IDI_INI</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>char(1)</a:DataType>
<a:Length>1</a:Length>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o196">
<a:ObjectID>69589F93-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>SG_IDI_FIM</a:Name>
<a:Code>SG_IDI_FIM</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>char(1)</a:DataType>
<a:Length>1</a:Length>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o197">
<a:ObjectID>69589F96-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>FL_IDI_ANU</a:Name>
<a:Code>FL_IDI_ANU</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>bit</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o198">
<a:ObjectID>69589F98-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>FL_IDI_INI</a:Name>
<a:Code>FL_IDI_INI</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>bit</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o199">
<a:ObjectID>69589F9B-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TIMESTAMP</a:Name>
<a:Code>TIMESTAMP</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o200">
<a:ObjectID>69589FA1-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_IDI</a:Name>
<a:Code>Pk_T_IDI</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_IDI</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o192"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Owner>
<o:User Ref="o16"/>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o201">
<a:ObjectID>69589F95-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_IDI_TRD</a:Name>
<a:Code>T_IDI_TRD</a:Code>
<a:Text>Create Trigger T_IDI_TRD On T_IDI
For Delete As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* Idiomas»Mensagens: Idioma da Mensagem (Restrict) */
If (Select Count(*) From T_MSG dep, Deleted pri
 Where dep.CD_IDI = pri.CD_IDI) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Idiomas&gt; está sendo referenciada na tabela &lt;Mensagens&gt;&#39;
  Return
End
/* Idiomas»Programação de Anúncios: Idioma da Programação de Anúncios (Restrict) */
If (Select Count(*) From T_PRA dep, Deleted pri
 Where dep.CD_IDI = pri.CD_IDI) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Idiomas&gt; está sendo referenciada na tabela &lt;Programação de Anúncios&gt;&#39;
  Return
End
/* Idiomas»Log da Programação de Anúncios: C:IDI-PRALOG (Cascade) */
Delete T_PRALOG From T_PRALOG dep, Deleted pri
 Where dep.CD_IDI = pri.CD_IDI
End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>D</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o202">
<a:ObjectID>69589F97-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_IDI_TRU</a:Name>
<a:Code>T_IDI_TRU</a:Code>
<a:Text>Create Trigger T_IDI_TRU On T_IDI
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_IDI)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código do Idioma&gt; da tabela &lt;Idiomas&gt; não pode ser alterada.&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o200"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o203">
<a:ObjectID>69589F88-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_7</a:Name>
<a:Code>REFERENCE_7</a:Code>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o191"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o169"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o200"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o204">
<a:ObjectID>69589F8A-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o192"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o171"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o205">
<a:CenterTextOffset>(4, 0)</a:CenterTextOffset>
<a:Rect>((-725068,660929), (-718544,669044))</a:Rect>
<a:ListOfPoints>((-722112,669044),(-721570,660929))</a:ListOfPoints>
<a:ArrowStyle>4882</a:ArrowStyle>
<a:LineColor>32768</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Id="o206">
<a:Rect>((-724407,667508), (-717781,672054))</a:Rect>
<a:LineColor>32768</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:ClonePredecessor>
<o:TableSymbol Id="o207">
<a:Rect>((-703151,678466), (-696525,683284))</a:Rect>
<a:LineColor>32768</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o208">
<a:ObjectID>69589FC4-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_PRA</a:Name>
<a:Code>T_PRA</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o209">
<a:ObjectID>69589EE2-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_PRA</a:Name>
<a:Code>CD_PRA</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o210">
<a:ObjectID>69589EE3-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_IDI</a:Name>
<a:Code>CD_IDI</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o211">
<a:ObjectID>69589EE4-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_TPA</a:Name>
<a:Code>CD_TPA</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o212">
<a:ObjectID>69589EE6-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TP_PRA_TPA</a:Name>
<a:Code>TP_PRA_TPA</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o213">
<a:ObjectID>69589EE8-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_SIT</a:Name>
<a:Code>CD_SIT</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
</o:Column>
<o:Column Id="o214">
<a:ObjectID>69589EEA-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>QT_PRA</a:Name>
<a:Code>QT_PRA</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL0    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL0 As
@valor &gt;= 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o215">
<a:ObjectID>69589EEC-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>QT_PRA_TMP</a:Name>
<a:Code>QT_PRA_TMP</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL0    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL0 As
@valor &gt;= 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o216">
<a:ObjectID>69589EEE-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>QT_PRA_ENT</a:Name>
<a:Code>QT_PRA_ENT</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL0    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL0 As
@valor &gt;= 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o217">
<a:ObjectID>69589EF0-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>QT_PRA_LIM</a:Name>
<a:Code>QT_PRA_LIM</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL0    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL0 As
@valor &gt;= 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o218">
<a:ObjectID>69589EF3-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TP_PRA</a:Name>
<a:Code>TP_PRA</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o219">
<a:ObjectID>69589EF5-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>DT_PRA_INI</a:Name>
<a:Code>DT_PRA_INI</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_DAT    Script Date: 7/8/2000 12:14:35 ******/
Create Rule        RU_DAT As
DATEPART(hh,@data) = 0 AND
DATEPART(mi,@data) = 0 AND
DATEPART(ss,@data) = 0 AND
DATEPART(ms,@data) = 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>smalldatetime</a:DataType>
</o:Column>
<o:Column Id="o220">
<a:ObjectID>69589EF7-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>DT_PRA_FIM</a:Name>
<a:Code>DT_PRA_FIM</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_DAT    Script Date: 7/8/2000 12:14:35 ******/
Create Rule        RU_DAT As
DATEPART(hh,@data) = 0 AND
DATEPART(mi,@data) = 0 AND
DATEPART(ss,@data) = 0 AND
DATEPART(ms,@data) = 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>smalldatetime</a:DataType>
</o:Column>
<o:Column Id="o221">
<a:ObjectID>69589EF9-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>HR_PRA_INI</a:Name>
<a:Code>HR_PRA_INI</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_HOR    Script Date: 7/8/2000 12:14:35 ******/
Create Rule        RU_HOR As
DATEPART(yy,@data) = 1900 AND
DATEPART(mm,@data) = 1 AND
DATEPART(dd,@data) = 1 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>smalldatetime</a:DataType>
</o:Column>
<o:Column Id="o222">
<a:ObjectID>69589EFB-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>HR_PRA_FIM</a:Name>
<a:Code>HR_PRA_FIM</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_HOR    Script Date: 7/8/2000 12:14:35 ******/
Create Rule        RU_HOR As
DATEPART(yy,@data) = 1900 AND
DATEPART(mm,@data) = 1 AND
DATEPART(dd,@data) = 1 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>smalldatetime</a:DataType>
</o:Column>
<o:Column Id="o223">
<a:ObjectID>69589EFD-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>FL_PRA</a:Name>
<a:Code>FL_PRA</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>tinyint</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o224">
<a:ObjectID>69589EFE-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>FL_PRA_POR</a:Name>
<a:Code>FL_PRA_POR</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>bit</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o225">
<a:ObjectID>69589EFF-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TIMESTAMP</a:Name>
<a:Code>TIMESTAMP</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o226">
<a:ObjectID>69589F0E-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_PRA</a:Name>
<a:Code>Pk_T_PRA</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_PRA</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o209"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Indexes>
<o:Index Id="o227">
<a:ObjectID>69589F04-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_IDITPATPASIT</a:Name>
<a:Code>I_IDITPATPASIT</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Unique>1</a:Unique>
<c:IndexColumns>
<o:IndexColumn Id="o228">
<a:ObjectID>69589F06-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o210"/>
</c:Column>
</o:IndexColumn>
<o:IndexColumn Id="o229">
<a:ObjectID>69589F08-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_1&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o211"/>
</c:Column>
</o:IndexColumn>
<o:IndexColumn Id="o230">
<a:ObjectID>69589F0A-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_2&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o212"/>
</c:Column>
</o:IndexColumn>
<o:IndexColumn Id="o231">
<a:ObjectID>69589F0C-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_3&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o213"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
</c:Indexes>
<c:Owner>
<o:User Ref="o16"/>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o232">
<a:ObjectID>6958A009-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_PRA_TRD</a:Name>
<a:Code>T_PRA_TRD</a:Code>
<a:Text>Create Trigger T_PRA_TRD On T_PRA
For Delete As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* Programação de Anúncios»Log da Programação de Anúncios: Programação do Log (Cascade) */
Delete T_PRALOG From T_PRALOG dep, Deleted pri
 Where dep.CD_PRA = pri.CD_PRA
End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>D</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o233">
<a:ObjectID>6958A00B-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_PRA_TRI</a:Name>
<a:Code>T_PRA_TRI</a:Code>
<a:Text>Create Trigger T_PRA_TRI On T_PRA
For Insert As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* Situação»Programação de Anúncios: Situação da Programação */
If (Select Count(*) From T_SIT, Inserted
Where T_SIT.CD_SIT = Inserted.CD_SIT)
 &lt;&gt;(Select Count(CD_SIT) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Situação&gt; que se deseja incluir na tabela &lt;Programação de Anúncios&gt; não está cadastrada&#39;
  Return
End
/* Idiomas»Programação de Anúncios: Idioma da Programação de Anúncios */
If (Select Count(*) From T_IDI, Inserted
Where T_IDI.CD_IDI = Inserted.CD_IDI)
 &lt;&gt;(Select Count(CD_IDI) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Idiomas&gt; que se deseja incluir na tabela &lt;Programação de Anúncios&gt; não está cadastrada&#39;
  Return
End
/* Tipo de Anuncio»Programação de Anúncios: Tipo de anúncio da programação */
If (Select Count(*) From T_TPA, Inserted
Where T_TPA.CD_TPA = Inserted.CD_TPA)
 &lt;&gt;(Select Count(CD_TPA) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Tipo de Anuncio&gt; que se deseja incluir na tabela &lt;Programação de Anúncios&gt; não está cadastrada&#39;
  Return
End
/* Domínio de: Tipo de Mensagem */
/* 1 - Anuncio de Chegada */
/* 2 - Anuncio de Partida */
/* 3 - Mensagens diversas */
If (Select Count(*) From Inserted
    Where TP_PRA_TPA In (1,2,3))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Tipo de Mensagem&gt; que se deseja incluir na tabela &lt;Programação de Anúncios&gt; não é uma opção válida&#39;
  Return
End
/* Domínio de: Tipo de Programação de Anúncio */
/* 1 - Antes da Hora Prevista */
/* 2 - Após a Alteração da Situação */
/* 3 - Mensagens Diversas */
If (Select Count(*) From Inserted
    Where TP_PRA In (1,2,3))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Tipo de Programação de Anúncio&gt; que se deseja incluir na tabela &lt;Programação de Anúncios&gt; não é uma opção válida&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>I</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o234">
<a:ObjectID>6958A00D-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_PRA_TRU</a:Name>
<a:Code>T_PRA_TRU</a:Code>
<a:Text>Create Trigger T_PRA_TRU On T_PRA
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_PRA)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código da programação de anúncios&gt; da tabela &lt;Programação de Anúncios&gt; não pode ser alterada.&#39;
  Return
End
If Update (CD_SIT)
/* Situação»Programação de Anúncios: Situação da Programação */
If (Select Count(*) From T_SIT, Inserted
Where T_SIT.CD_SIT = Inserted.CD_SIT)
 &lt;&gt;(Select Count(CD_SIT) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Situação&gt; que se deseja incluir na tabela &lt;Programação de Anúncios&gt; não está cadastrada&#39;
  Return
End
If Update (CD_IDI)
/* Idiomas»Programação de Anúncios: Idioma da Programação de Anúncios */
If (Select Count(*) From T_IDI, Inserted
Where T_IDI.CD_IDI = Inserted.CD_IDI)
 &lt;&gt;(Select Count(CD_IDI) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Idiomas&gt; que se deseja incluir na tabela &lt;Programação de Anúncios&gt; não está cadastrada&#39;
  Return
End
If Update (CD_TPA)
/* Tipo de Anuncio»Programação de Anúncios: Tipo de anúncio da programação */
If (Select Count(*) From T_TPA, Inserted
Where T_TPA.CD_TPA = Inserted.CD_TPA)
 &lt;&gt;(Select Count(CD_TPA) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Tipo de Anuncio&gt; que se deseja incluir na tabela &lt;Programação de Anúncios&gt; não está cadastrada&#39;
  Return
End
If Update (TP_PRA_TPA)
Or Update (TP_PRA)
/* Domínio de: Tipo de Mensagem */
/* 1 - Anuncio de Chegada */
/* 2 - Anuncio de Partida */
/* 3 - Mensagens diversas */
If (Select Count(*) From Inserted
    Where TP_PRA_TPA In (1,2,3))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Tipo de Mensagem&gt; que se deseja incluir na tabela &lt;Programação de Anúncios&gt; não é uma opção válida&#39;
  Return
End
/* Domínio de: Tipo de Programação de Anúncio */
/* 1 - Antes da Hora Prevista */
/* 2 - Após a Alteração da Situação */
/* 3 - Mensagens Diversas */
If (Select Count(*) From Inserted
    Where TP_PRA In (1,2,3))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Tipo de Programação de Anúncio&gt; que se deseja incluir na tabela &lt;Programação de Anúncios&gt; não é uma opção válida&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o226"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:ClonePredecessor>
<c:Object>
<o:Table Ref="o208"/>
</c:Object>
</o:TableSymbol>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Ref="o190"/>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o235">
<a:ObjectID>69589F8C-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_8</a:Name>
<a:Code>REFERENCE_8</a:Code>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o191"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o208"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o200"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o236">
<a:ObjectID>69589F8E-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o192"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o210"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o237">
<a:CenterTextOffset>(2107, -16950)</a:CenterTextOffset>
<a:Rect>((-743401,653600), (-736427,714650))</a:Rect>
<a:ListOfPoints>((-739868,653600),(-739981,714650))</a:ListOfPoints>
<a:ArrowStyle>4881</a:ArrowStyle>
<a:LineColor>32768</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Ref="o32"/>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Ref="o131"/>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o238">
<a:ObjectID>69589F91-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_9</a:Name>
<a:Code>REFERENCE_9</a:Code>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o132"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o34"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o138"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o239">
<a:ObjectID>69589F94-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o133"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o38"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o240">
<a:Rect>((-737223,714830), (-698566,720650))</a:Rect>
<a:ListOfPoints>((-698566,720650),(-737223,714830))</a:ListOfPoints>
<a:ArrowStyle>4881</a:ArrowStyle>
<a:LineColor>32768</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Ref="o102"/>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Ref="o131"/>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o241">
<a:ObjectID>69589F9C-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_11</a:Name>
<a:Code>REFERENCE_11</a:Code>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o132"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o103"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o138"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o242">
<a:ObjectID>69589F9E-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o133"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o112"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o243">
<a:CenterTextOffset>(7, 0)</a:CenterTextOffset>
<a:Rect>((-737027,707000), (-718868,714230))</a:Rect>
<a:ListOfPoints>((-718868,707000),(-737027,714230))</a:ListOfPoints>
<a:ArrowStyle>4881</a:ArrowStyle>
<a:LineColor>32768</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Id="o244">
<a:Rect>((-721653,705786), (-714873,709600))</a:Rect>
<a:LineColor>32768</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o245">
<a:ObjectID>69589FAC-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_MPA</a:Name>
<a:Code>T_MPA</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o246">
<a:ObjectID>69589FE6-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_MPA</a:Name>
<a:Code>CD_MPA</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o247">
<a:ObjectID>69589FE9-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_PAR</a:Name>
<a:Code>CD_PAR</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o248">
<a:ObjectID>69589FEB-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_USR</a:Name>
<a:Code>CD_USR</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o249">
<a:ObjectID>69589FED-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>DH_MPA</a:Name>
<a:Code>DH_MPA</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>smalldatetime</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o250">
<a:ObjectID>69589FEF-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>DH_MPA_EFE</a:Name>
<a:Code>DH_MPA_EFE</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>smalldatetime</a:DataType>
</o:Column>
<o:Column Id="o251">
<a:ObjectID>69589FF3-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_SIT</a:Name>
<a:Code>CD_SIT</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
</o:Column>
<o:Column Id="o252">
<a:ObjectID>69589FF5-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NM_MPA_COM_SIT</a:Name>
<a:Code>NM_MPA_COM_SIT</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>varchar(30)</a:DataType>
<a:Length>30</a:Length>
</o:Column>
<o:Column Id="o253">
<a:ObjectID>69589FF7-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_TPA</a:Name>
<a:Code>CD_TPA</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
</o:Column>
<o:Column Id="o254">
<a:ObjectID>69589FFA-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_IFT</a:Name>
<a:Code>CD_IFT</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
</o:Column>
<o:Column Id="o255">
<a:ObjectID>69589FFC-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_POR</a:Name>
<a:Code>CD_POR</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
</o:Column>
<o:Column Id="o256">
<a:ObjectID>69589FFE-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>DS_MPA_CHK</a:Name>
<a:Code>DS_MPA_CHK</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>varchar(255)</a:DataType>
<a:Length>255</a:Length>
</o:Column>
<o:Column Id="o257">
<a:ObjectID>6958A000-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TT_MPA_OBS</a:Name>
<a:Code>TT_MPA_OBS</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>varchar(255)</a:DataType>
<a:Length>255</a:Length>
</o:Column>
<o:Column Id="o258">
<a:ObjectID>6958A001-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TP_MPA</a:Name>
<a:Code>TP_MPA</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o259">
<a:ObjectID>6958A002-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>FL_MPA_TEL</a:Name>
<a:Code>FL_MPA_TEL</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL0    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL0 As
@valor &gt;= 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>tinyint</a:DataType>
</o:Column>
<o:Column Id="o260">
<a:ObjectID>6958A004-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TIMESTAMP</a:Name>
<a:Code>TIMESTAMP</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o261">
<a:ObjectID>6958A012-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_MPA</a:Name>
<a:Code>Pk_T_MPA</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_MPA</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o246"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Indexes>
<o:Index Id="o262">
<a:ObjectID>6958A00A-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_MPA_DH</a:Name>
<a:Code>I_MPA_DH</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:IndexColumns>
<o:IndexColumn Id="o263">
<a:ObjectID>6958A00C-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o249"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
<o:Index Id="o264">
<a:ObjectID>6958A00E-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_MPA_PAR</a:Name>
<a:Code>I_MPA_PAR</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:IndexColumns>
<o:IndexColumn Id="o265">
<a:ObjectID>6958A00F-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o247"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
<o:Index Id="o266">
<a:ObjectID>6958A010-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_MPA_TP</a:Name>
<a:Code>I_MPA_TP</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:IndexColumns>
<o:IndexColumn Id="o267">
<a:ObjectID>6958A011-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o258"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
</c:Indexes>
<c:Owner>
<o:User Ref="o16"/>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o268">
<a:ObjectID>69589FC9-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_MPA_TRI</a:Name>
<a:Code>T_MPA_TRI</a:Code>
<a:Text>Create Trigger T_MPA_TRI On T_MPA
For Insert As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* Portão»Mensagem de Partida: Portão da Mensagem de Partida */
If (Select Count(*) From T_POR, Inserted
Where T_POR.CD_POR = Inserted.CD_POR)
 &lt;&gt;(Select Count(CD_POR) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Portão&gt; que se deseja incluir na tabela &lt;Mensagem de Partida&gt; não está cadastrada&#39;
  Return
End
/* Situação»Mensagem de Partida: Situação da Mensagem de Partida */
If (Select Count(*) From T_SIT, Inserted
Where T_SIT.CD_SIT = Inserted.CD_SIT)
 &lt;&gt;(Select Count(CD_SIT) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Situação&gt; que se deseja incluir na tabela &lt;Mensagem de Partida&gt; não está cadastrada&#39;
  Return
End
/* Informante da Situação de Vôo»Mensagem de Partida: Informante da Mensagem de Partida */
If (Select Count(*) From T_IFT, Inserted
Where T_IFT.CD_IFT = Inserted.CD_IFT)
 &lt;&gt;(Select Count(CD_IFT) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Informante da Situação de Vôo&gt; que se deseja incluir na tabela &lt;Mensagem de Partida&gt; não está cadastrada&#39;
  Return
End
/* Partidas»Mensagem de Partida: Partida da Mensagem */
If (Select Count(*) From T_PAR, Inserted
Where T_PAR.CD_PAR = Inserted.CD_PAR)
 &lt;&gt;(Select Count(CD_PAR) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Partidas&gt; que se deseja incluir na tabela &lt;Mensagem de Partida&gt; não está cadastrada&#39;
  Return
End
/* Usuários»Mensagem de Partida: Usuário da Mensagem de Partida */
If (Select Count(*) From T_USR, Inserted
Where T_USR.CD_USR = Inserted.CD_USR)
 &lt;&gt;(Select Count(CD_USR) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Usuários&gt; que se deseja incluir na tabela &lt;Mensagem de Partida&gt; não está cadastrada&#39;
  Return
End
/* Tipo de Anuncio»Mensagem de Partida: Tipo de Anúncio da Mensagem de Partida */
If (Select Count(*) From T_TPA, Inserted
Where T_TPA.CD_TPA = Inserted.CD_TPA)
 &lt;&gt;(Select Count(CD_TPA) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Tipo de Anuncio&gt; que se deseja incluir na tabela &lt;Mensagem de Partida&gt; não está cadastrada&#39;
  Return
End
/* Domínio de: Status de Mensagem de Partida */
/* 1 - Pendente */
/* 2 - Lida */
/* 3 - Executada */
/* 4 - Cancelada */
If (Select Count(*) From Inserted
    Where TP_MPA In (1,2,3,4))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Status de Mensagem de Partida&gt; que se deseja incluir na tabela &lt;Mensagem de Partida&gt; não é uma opção válida&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>I</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o269">
<a:ObjectID>69589FCC-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_MPA_TRU</a:Name>
<a:Code>T_MPA_TRU</a:Code>
<a:Text>Create Trigger T_MPA_TRU On T_MPA
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_MPA)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código da Mensagem de Partida&gt; da tabela &lt;Mensagem de Partida&gt; não pode ser alterada.&#39;
  Return
End
If Update (CD_POR)
/* Portão»Mensagem de Partida: Portão da Mensagem de Partida */
If (Select Count(*) From T_POR, Inserted
Where T_POR.CD_POR = Inserted.CD_POR)
 &lt;&gt;(Select Count(CD_POR) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Portão&gt; que se deseja incluir na tabela &lt;Mensagem de Partida&gt; não está cadastrada&#39;
  Return
End
If Update (CD_SIT)
/* Situação»Mensagem de Partida: Situação da Mensagem de Partida */
If (Select Count(*) From T_SIT, Inserted
Where T_SIT.CD_SIT = Inserted.CD_SIT)
 &lt;&gt;(Select Count(CD_SIT) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Situação&gt; que se deseja incluir na tabela &lt;Mensagem de Partida&gt; não está cadastrada&#39;
  Return
End
If Update (CD_IFT)
/* Informante da Situação de Vôo»Mensagem de Partida: Informante da Mensagem de Partida */
If (Select Count(*) From T_IFT, Inserted
Where T_IFT.CD_IFT = Inserted.CD_IFT)
 &lt;&gt;(Select Count(CD_IFT) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Informante da Situação de Vôo&gt; que se deseja incluir na tabela &lt;Mensagem de Partida&gt; não está cadastrada&#39;
  Return
End
If Update (CD_PAR)
/* Partidas»Mensagem de Partida: Partida da Mensagem */
If (Select Count(*) From T_PAR, Inserted
Where T_PAR.CD_PAR = Inserted.CD_PAR)
 &lt;&gt;(Select Count(CD_PAR) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Partidas&gt; que se deseja incluir na tabela &lt;Mensagem de Partida&gt; não está cadastrada&#39;
  Return
End
If Update (CD_USR)
/* Usuários»Mensagem de Partida: Usuário da Mensagem de Partida */
If (Select Count(*) From T_USR, Inserted
Where T_USR.CD_USR = Inserted.CD_USR)
 &lt;&gt;(Select Count(CD_USR) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Usuários&gt; que se deseja incluir na tabela &lt;Mensagem de Partida&gt; não está cadastrada&#39;
  Return
End
If Update (CD_TPA)
/* Tipo de Anuncio»Mensagem de Partida: Tipo de Anúncio da Mensagem de Partida */
If (Select Count(*) From T_TPA, Inserted
Where T_TPA.CD_TPA = Inserted.CD_TPA)
 &lt;&gt;(Select Count(CD_TPA) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Tipo de Anuncio&gt; que se deseja incluir na tabela &lt;Mensagem de Partida&gt; não está cadastrada&#39;
  Return
End
If Update (TP_MPA)
/* Domínio de: Status de Mensagem de Partida */
/* 1 - Pendente */
/* 2 - Lida */
/* 3 - Executada */
/* 4 - Cancelada */
If (Select Count(*) From Inserted
    Where TP_MPA In (1,2,3,4))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Status de Mensagem de Partida&gt; que se deseja incluir na tabela &lt;Mensagem de Partida&gt; não é uma opção válida&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o261"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Ref="o131"/>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o270">
<a:ObjectID>69589FA0-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_12</a:Name>
<a:Code>REFERENCE_12</a:Code>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o132"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o245"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o138"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o271">
<a:ObjectID>69589FA2-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o133"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o254"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o272">
<a:CenterTextOffset>(4, 0)</a:CenterTextOffset>
<a:Rect>((-740266,652747), (-707566,654650))</a:Rect>
<a:ListOfPoints>((-740266,653300),(-707566,654650))</a:ListOfPoints>
<a:ArrowStyle>4882</a:ArrowStyle>
<a:LineColor>32768</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Ref="o32"/>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Ref="o168"/>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o273">
<a:ObjectID>69589FA6-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_14</a:Name>
<a:Code>REFERENCE_14</a:Code>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o169"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o34"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o177"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o274">
<a:ObjectID>69589FA9-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o170"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o40"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o275">
<a:CenterTextOffset>(2, 0)</a:CenterTextOffset>
<a:Rect>((-731266,686095), (-723383,695117))</a:Rect>
<a:ListOfPoints>((-731266,686095),(-724529,695117))</a:ListOfPoints>
<a:ArrowStyle>4881</a:ArrowStyle>
<a:LineColor>32768</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Ref="o33"/>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Id="o276">
<a:Rect>((-727760,694135), (-721134,698681))</a:Rect>
<a:LineColor>32768</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o277">
<a:ObjectID>69589FB7-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_PAR</a:Name>
<a:Code>T_PAR</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081628963</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o278">
<a:ObjectID>6958A02A-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_PAR</a:Name>
<a:Code>CD_PAR</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o279">
<a:ObjectID>6958A02C-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>DT_PAR</a:Name>
<a:Code>DT_PAR</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_DAT    Script Date: 7/8/2000 12:14:35 ******/
Create Rule        RU_DAT As
DATEPART(hh,@data) = 0 AND
DATEPART(mi,@data) = 0 AND
DATEPART(ss,@data) = 0 AND
DATEPART(ms,@data) = 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>smalldatetime</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o280">
<a:ObjectID>6958A02D-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_AER</a:Name>
<a:Code>CD_AER</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o281">
<a:ObjectID>6958A02E-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NR_PAR_VOO</a:Name>
<a:Code>NR_PAR_VOO</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>char(10)</a:DataType>
<a:Length>10</a:Length>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o282">
<a:ObjectID>6958A030-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NR_PAR_HOT</a:Name>
<a:Code>NR_PAR_HOT</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>char(9)</a:DataType>
<a:Length>9</a:Length>
</o:Column>
<o:Column Id="o283">
<a:ObjectID>6958A032-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TP_PAR_GRU</a:Name>
<a:Code>TP_PAR_GRU</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DefaultValue>/****** Object:  Default dbo.DF_VAL_001    Script Date: 7/8/2000 12:14:36 ******/
Create Default        DF_VAL_001 As
1</a:DefaultValue>
<a:DataType>tinyint</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o284">
<a:ObjectID>6958A033-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TP_PAR</a:Name>
<a:Code>TP_PAR</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>tinyint</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o285">
<a:ObjectID>6958A034-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TP_PAR_NAT</a:Name>
<a:Code>TP_PAR_NAT</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>tinyint</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o286">
<a:ObjectID>6958A036-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TP_PAR_CTG</a:Name>
<a:Code>TP_PAR_CTG</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>tinyint</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o287">
<a:ObjectID>69589E90-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_CHG_ANT</a:Name>
<a:Code>CD_CHG_ANT</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
</o:Column>
<o:Column Id="o288">
<a:ObjectID>69589E91-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_CHG_AEN_ANT</a:Name>
<a:Code>CD_CHG_AEN_ANT</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
</o:Column>
<o:Column Id="o289">
<a:ObjectID>69589E92-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_PAR_VIN</a:Name>
<a:Code>CD_PAR_VIN</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
</o:Column>
<o:Column Id="o290">
<a:ObjectID>69589E93-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>FL_PAR_ANU</a:Name>
<a:Code>FL_PAR_ANU</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>bit</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o291">
<a:ObjectID>69589E94-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>FL_PAR_TEL</a:Name>
<a:Code>FL_PAR_TEL</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>bit</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o292">
<a:ObjectID>69589E95-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>DH_PAR_NRM</a:Name>
<a:Code>DH_PAR_NRM</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>smalldatetime</a:DataType>
</o:Column>
<o:Column Id="o293">
<a:ObjectID>69589E96-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>DH_PAR_EFE</a:Name>
<a:Code>DH_PAR_EFE</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>smalldatetime</a:DataType>
</o:Column>
<o:Column Id="o294">
<a:ObjectID>69589E97-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>DH_PAR_EST</a:Name>
<a:Code>DH_PAR_EST</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>smalldatetime</a:DataType>
</o:Column>
<o:Column Id="o295">
<a:ObjectID>69589E98-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NM_PAR_COM_SIT</a:Name>
<a:Code>NM_PAR_COM_SIT</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>varchar(30)</a:DataType>
<a:Length>30</a:Length>
</o:Column>
<o:Column Id="o296">
<a:ObjectID>69589E99-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>DH_PAR_SIT</a:Name>
<a:Code>DH_PAR_SIT</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>smalldatetime</a:DataType>
</o:Column>
<o:Column Id="o297">
<a:ObjectID>69589E9C-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>FL_PAR_CAN</a:Name>
<a:Code>FL_PAR_CAN</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DefaultValue>/****** Object:  Default dbo.DF_VAL_ZRO    Script Date: 7/8/2000 12:14:36 ******/
Create Default        DF_VAL_ZRO As
0</a:DefaultValue>
<a:DataType>bit</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o298">
<a:ObjectID>69589E9E-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TP_PAR_STA</a:Name>
<a:Code>TP_PAR_STA</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>tinyint</a:DataType>
</o:Column>
<o:Column Id="o299">
<a:ObjectID>69589E9F-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TIMESTAMP</a:Name>
<a:Code>TIMESTAMP</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o300">
<a:ObjectID>69589EC4-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_PAR</a:Name>
<a:Code>Pk_T_PAR</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_PAR</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o278"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Indexes>
<o:Index Id="o301">
<a:ObjectID>69589EA2-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_PAR_EFE</a:Name>
<a:Code>I_PAR_EFE</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Unique>1</a:Unique>
<c:IndexColumns>
<o:IndexColumn Id="o302">
<a:ObjectID>69589EA4-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o298"/>
</c:Column>
</o:IndexColumn>
<o:IndexColumn Id="o303">
<a:ObjectID>69589EA6-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_1&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o293"/>
</c:Column>
</o:IndexColumn>
<o:IndexColumn Id="o304">
<a:ObjectID>69589EA8-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_2&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o278"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
<o:Index Id="o305">
<a:ObjectID>69589EAA-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_PAR_GRU</a:Name>
<a:Code>I_PAR_GRU</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Unique>1</a:Unique>
<c:IndexColumns>
<o:IndexColumn Id="o306">
<a:ObjectID>69589EAB-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o298"/>
</c:Column>
</o:IndexColumn>
<o:IndexColumn Id="o307">
<a:ObjectID>69589EAC-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_1&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o283"/>
</c:Column>
</o:IndexColumn>
<o:IndexColumn Id="o308">
<a:ObjectID>69589EAD-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_2&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o278"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
<o:Index Id="o309">
<a:ObjectID>69589EAE-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_PAR_POR</a:Name>
<a:Code>I_PAR_POR</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081628409</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Unique>1</a:Unique>
<c:IndexColumns>
<o:IndexColumn Id="o310">
<a:ObjectID>69589EAF-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o298"/>
</c:Column>
</o:IndexColumn>
<o:IndexColumn Id="o311">
<a:ObjectID>69589EB0-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_2&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o278"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
<o:Index Id="o312">
<a:ObjectID>69589EB2-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_PAR_STA</a:Name>
<a:Code>I_PAR_STA</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Unique>1</a:Unique>
<c:IndexColumns>
<o:IndexColumn Id="o313">
<a:ObjectID>69589EB4-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o298"/>
</c:Column>
</o:IndexColumn>
<o:IndexColumn Id="o314">
<a:ObjectID>69589EB6-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_1&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o278"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
<o:Index Id="o315">
<a:ObjectID>69589EB8-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_PAR_STA_DAT</a:Name>
<a:Code>I_PAR_STA_DAT</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Unique>1</a:Unique>
<c:IndexColumns>
<o:IndexColumn Id="o316">
<a:ObjectID>69589EB9-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o298"/>
</c:Column>
</o:IndexColumn>
<o:IndexColumn Id="o317">
<a:ObjectID>69589EBB-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_1&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o279"/>
</c:Column>
</o:IndexColumn>
<o:IndexColumn Id="o318">
<a:ObjectID>69589EBD-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_2&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o278"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
<o:Index Id="o319">
<a:ObjectID>69589EBE-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_PAR_AEN_ANT</a:Name>
<a:Code>I_PAR_AEN_ANT</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:IndexColumns>
<o:IndexColumn Id="o320">
<a:ObjectID>69589EBF-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o288"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
<o:Index Id="o321">
<a:ObjectID>69589EC0-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_PAR_DAT_COM</a:Name>
<a:Code>I_PAR_DAT_COM</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081628963</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:IndexColumns>
<o:IndexColumn Id="o322">
<a:ObjectID>69589EC1-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o279"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
<o:Index Id="o323">
<a:ObjectID>69589EC2-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_PAR_TP</a:Name>
<a:Code>I_PAR_TP</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:IndexColumns>
<o:IndexColumn Id="o324">
<a:ObjectID>69589EC3-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o284"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
</c:Indexes>
<c:Owner>
<o:User Ref="o16"/>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o325">
<a:ObjectID>69589FE2-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_PAR_TRD</a:Name>
<a:Code>T_PAR_TRD</a:Code>
<a:Text>Create Trigger T_PAR_TRD On T_PAR
For Delete As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* Partidas»Partidas: Partida Vinculada (Restrict) */
If (Select Count(*) From T_PAR dep, Deleted pri
 Where dep.CD_PAR_VIN = pri.CD_PAR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Partidas&gt; está sendo referenciada na tabela &lt;Partidas&gt;&#39;
  Return
End
/* Partidas»Chamadas de Anuncio: Chamadas da Partida (Cascade) */
Delete T_CHA From T_CHA dep, Deleted pri
 Where dep.CD_PAR = pri.CD_PAR
/* Partidas»Checkin da Partida de Vôo: Checkins de Partida (Cascade) */
Delete T_CKV001 From T_CKV001 dep, Deleted pri
 Where dep.CD_PAR = pri.CD_PAR
/* Partidas»Dados Estatísticos de Partida: Dados Estatísticos de Partida (Cascade) */
Delete T_DEP From T_DEP dep, Deleted pri
 Where dep.CD_PAR = pri.CD_PAR
/* Partidas»Escala da Partida de Vôo: Escalas de Partida (Cascade) */
Delete T_ECP001 From T_ECP001 dep, Deleted pri
 Where dep.CD_PAR = pri.CD_PAR
/* Partidas»Mensagem de Partida: Partida da Mensagem (Cascade) */
Delete T_MPA From T_MPA dep, Deleted pri
 Where dep.CD_PAR = pri.CD_PAR
/* Partidas»Histórico de Situação de Vôo de Partida: Partida do HSP (Cascade) */
Delete T_HSP From T_HSP dep, Deleted pri
 Where dep.CD_PAR = pri.CD_PAR
/* Partidas»Log da Programação de Anúncios: Partidas do Log de Programação (Cascade) */
Delete T_PRALOG From T_PRALOG dep, Deleted pri
 Where dep.CD_PAR = pri.CD_PAR
/* Partidas»Histórico de Permanência de Aeronaves: Histórico de Permanência dos Vôos de Partida (Set Null) */
Update T_HPA001 Set CD_PAR = Null
 From T_HPA001 dep, Deleted pri
 Where dep.CD_PAR = pri.CD_PAR
/* Regra de negócio */
/* Milena 14/01/98 - Se o Vôo de partida for excluído e o vôo de chegada antecessor vinculado a ele não for nulo, 
este deve ser incluído na tabela de vôos de chegada candidatos a antecessor */
INSERT	T_CHGANT(
	CD_CHG)
SELECT	DEL.CD_CHG_AEN_ANT
FROM	DELETED DEL
WHERE	DEL.CD_CHG_AEN_ANT IS NOT NULL

/* INCLUIR REGISTROS EM T_APA */
INSERT	T_APA (DH_APA, CD_PAR)
SELECT GETDATE(), CD_PAR FROM DELETED

End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>D</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o326">
<a:ObjectID>69589FE5-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_PAR_TRI</a:Name>
<a:Code>T_PAR_TRI</a:Code>
<a:Text>Create Trigger T_PAR_TRI On T_PAR
For Insert As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* Aeroporto»Partidas: Aeroporto da Partida */
If (Select Count(*) From T_AER, Inserted
Where T_AER.CD_AER = Inserted.CD_AER)
 &lt;&gt;(Select Count(CD_AER) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Aeroporto&gt; que se deseja incluir na tabela &lt;Partidas&gt; não está cadastrada&#39;
  Return
End
/* Companhia Aérea»Partidas: Companhia Aérea da Partida */
If (Select Count(*) From T_COM, Inserted
Where T_COM.CD_COM = Inserted.CD_COM)
 &lt;&gt;(Select Count(CD_COM) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Companhia Aérea&gt; que se deseja incluir na tabela &lt;Partidas&gt; não está cadastrada&#39;
  Return
End
/* Portão»Partidas: Portão da Partida */
If (Select Count(*) From T_POR, Inserted
Where T_POR.CD_POR = Inserted.CD_POR)
 &lt;&gt;(Select Count(CD_POR) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Portão&gt; que se deseja incluir na tabela &lt;Partidas&gt; não está cadastrada&#39;
  Return
End
/* Situação»Partidas: Situação da Partida */
If (Select Count(*) From T_SIT, Inserted
Where T_SIT.CD_SIT = Inserted.CD_SIT)
 &lt;&gt;(Select Count(CD_SIT) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Situação&gt; que se deseja incluir na tabela &lt;Partidas&gt; não está cadastrada&#39;
  Return
End
/* Informante da Situação de Vôo»Partidas: Informante da Situação de Partida */
If (Select Count(*) From T_IFT, Inserted
Where T_IFT.CD_IFT = Inserted.CD_IFT)
 &lt;&gt;(Select Count(CD_IFT) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Informante da Situação de Vôo&gt; que se deseja incluir na tabela &lt;Partidas&gt; não está cadastrada&#39;
  Return
End
/* Chegadas»Partidas: Chegada Antecessora */
If (Select Count(*) From T_CHG, Inserted
Where T_CHG.CD_CHG = Inserted.CD_CHG_ANT)
 &lt;&gt;(Select Count(CD_CHG_ANT) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Chegadas&gt; que se deseja incluir na tabela &lt;Partidas&gt; não está cadastrada&#39;
  Return
End
/* Chegadas»Partidas: Chegada da Aeronave Sucessora */
If (Select Count(*) From T_CHG, Inserted
Where T_CHG.CD_CHG = Inserted.CD_CHG_AEN_ANT)
 &lt;&gt;(Select Count(CD_CHG_AEN_ANT) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Chegadas&gt; que se deseja incluir na tabela &lt;Partidas&gt; não está cadastrada&#39;
  Return
End
/* Partidas»Partidas: Partida Vinculada */
If (Select Count(*) From T_PAR, Inserted
Where T_PAR.CD_PAR = Inserted.CD_PAR_VIN)
 &lt;&gt;(Select Count(CD_PAR_VIN) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Partidas&gt; que se deseja incluir na tabela &lt;Partidas&gt; não está cadastrada&#39;
  Return
End
/* Usuários»Partidas: Usuário logado */
If (Select Count(*) From T_USR, Inserted
Where T_USR.CD_USR = Inserted.CD_USR)
 &lt;&gt;(Select Count(CD_USR) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Usuários&gt; que se deseja incluir na tabela &lt;Partidas&gt; não está cadastrada&#39;
  Return
End
/* Domínio de: Grupo do Vôo */
/* 1 - Grupo 1 */
/* 2 - Grupo 2 */
If (Select Count(*) From Inserted
    Where TP_PAR_GRU In (1,2))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Grupo do Vôo&gt; que se deseja incluir na tabela &lt;Partidas&gt; não é uma opção válida&#39;
  Return
End
/* Domínio de: Tipo do Vôo de Partida */
/* 1 - DOM-Doméstico */
/* 2 - INT-Internacional */
/* 3 - REG-Regional */
If (Select Count(*) From Inserted
    Where TP_PAR In (1,2,3))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Tipo do Vôo de Partida&gt; que se deseja incluir na tabela &lt;Partidas&gt; não é uma opção válida&#39;
  Return
End
/* Domínio de: Natureza do Vôo de Partida */
/* 1 - PAX-Passageiro */
/* 2 - CRG-Carga */
/* 3 - MIS-Misto */
/* 4 - TSL-Translado */
If (Select Count(*) From Inserted
    Where TP_PAR_NAT In (1,2,3,4))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Natureza do Vôo de Partida&gt; que se deseja incluir na tabela &lt;Partidas&gt; não é uma opção válida&#39;
  Return
End
/* Domínio de: Categoria do Vôo de Partida */
/* 1 - RGL-Regular */
/* 2 - CHT-Charter */
/* 3 - CSH-Codeshare */
/* 4 - DPL-Duplicate Leg */
/* 5 - TEC-Pouso Técnico */
/* 6 - TSL-Translado */
/* 7 - AVG-Aviação Geral */
/* 8 - MLT-Militar */
/* 9 - NRG-Não Regular */
/* 10 - TXA-Táxi Aéreo */
If (Select Count(*) From Inserted
    Where TP_PAR_CTG In (1,2,3,4,5,6,7,8,9,10))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Categoria do Vôo de Partida&gt; que se deseja incluir na tabela &lt;Partidas&gt; não é uma opção válida&#39;
  Return
End
/* Domínio de: Tipo do Status de Partida do Vôo */
/* 1 - Em Aberto */
/* 2 - Concluído */
If (Select Count(*) From Inserted
    Where TP_PAR_STA In (1,2))
 &lt;&gt;(Select Count(*) From Inserted
    Where TP_PAR_STA Is Not Null)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Tipo do Status de Partida do Vôo&gt; que se deseja incluir na tabela &lt;Partidas&gt; não é uma opção válida&#39;
  Return
End
/* Regra de negócio */
/* RESTRIÇÕES */
/*********************************** RETIRADO PELO RONALDO EM 11/3/98 ***********************************************************
/* A data do vôo sendo incluído não pode ser maior do que a data posterior à da última geração nem anterior a data de hoje */
IF (	SELECT 	COUNT(*) 
	FROM 	INSERTED INS
	WHERE	(DATEDIFF(MI, Dateadd(HH, -Datepart(HH, GETDATE()), Dateadd(mi, -datepart(mi, GETDATE()), GETDATE())), INS.DT_PAR) &lt; 0 OR
		/* (DATEDIFF(MI, CONVERT(DATETIME, (CONVERT(VARCHAR, DATEPART(MM, GETDATE())) + &#39;/&#39; + CONVERT(VARCHAR, DATEPART(DD, GETDATE()))  + &#39;/&#39; + CONVERT(VARCHAR, DATEPART(YY, GETDATE())) +  &#39; 00:00&#39;)), INS.DT_PAR) &lt; 0 OR */
		DATEADD(DD, -1, INS.DT_PAR) &gt; (SELECT MAX(DT_PAR) FROM T_PAR WHERE CD_PAR &lt;&gt; INS.CD_PAR) ) AND INS.NR_PAR_HOT IS NOT NULL) &gt; 0
BEGIN
	RAISERROR 20999 &#39;Operação não executada: Não é permitida a geração de vôos de datas anteriores à data de hoje ou posteriores à data da última geração mais um dia.&#39;
	ROLLBACK TRANSACTION
	RETURN
END
**********************************************************************************************************************************************/
/* Um vôo não pode ser incluído CANCELADO */
IF (	SELECT 	COUNT(*)
	FROM	INSERTED INS, 
		T_SIT SIT
	WHERE	SIT.CD_SIT = INS.CD_SIT AND
		FL_SIT_CAN_VOO &lt;&gt; 0) &gt; 0
BEGIN
	RAISERROR 20999 &#39;Operação não executada: Não é permitida a inclusão de vôos com situação de partida cancelada&#39;
	ROLLBACK TRANSACTION
	RETURN
END

/* PROVOCAR A EXECUÇÃO DA TRIGGER DE UPDATE PARA A COMPLEMENTAÇÃO DAS VERIFICAÇÕES
    E PROCESSAR OUTRAS ATUALIZAÇÕES */
UPDATE	T_PAR
SET	CD_SIT = PAR.CD_SIT,
	DH_PAR_SIT = PAR.DH_PAR_NRM,
	CD_CHG_AEN_ANT = PAR.CD_CHG_AEN_ANT
FROM	T_PAR PAR,
	INSERTED INS

WHERE	PAR.CD_PAR = INS.CD_PAR
End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>I</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o327">
<a:ObjectID>69589FE8-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_PAR_TRU</a:Name>
<a:Code>T_PAR_TRU</a:Code>
<a:Text>CREATE Trigger T_PAR_TRU On T_PAR
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_PAR)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código do Vôo de Partida&gt; da tabela &lt;Partidas&gt; não pode ser alterada.&#39;
  Return
End
If Update (CD_AER)
/* Aeroporto»Partidas: Aeroporto da Partida */
If (Select Count(*) From T_AER, Inserted
Where T_AER.CD_AER = Inserted.CD_AER)
 &lt;&gt;(Select Count(CD_AER) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Aeroporto&gt; que se deseja incluir na tabela &lt;Partidas&gt; não está cadastrada&#39;
  Return
End
If Update (CD_COM)
/* Companhia Aérea»Partidas: Companhia Aérea da Partida */
If (Select Count(*) From T_COM, Inserted
Where T_COM.CD_COM = Inserted.CD_COM)
 &lt;&gt;(Select Count(CD_COM) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Companhia Aérea&gt; que se deseja incluir na tabela &lt;Partidas&gt; não está cadastrada&#39;
  Return
End
If Update (CD_POR)
/* Portão»Partidas: Portão da Partida */
If (Select Count(*) From T_POR, Inserted
Where T_POR.CD_POR = Inserted.CD_POR)
 &lt;&gt;(Select Count(CD_POR) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Portão&gt; que se deseja incluir na tabela &lt;Partidas&gt; não está cadastrada&#39;
  Return
End
If Update (CD_SIT)
/* Situação»Partidas: Situação da Partida */
If (Select Count(*) From T_SIT, Inserted
Where T_SIT.CD_SIT = Inserted.CD_SIT)
 &lt;&gt;(Select Count(CD_SIT) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Situação&gt; que se deseja incluir na tabela &lt;Partidas&gt; não está cadastrada&#39;
  Return
End
If Update (CD_IFT)
/* Informante da Situação de Vôo»Partidas: Informante da Situação de Partida */
If (Select Count(*) From T_IFT, Inserted
Where T_IFT.CD_IFT = Inserted.CD_IFT)
 &lt;&gt;(Select Count(CD_IFT) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Informante da Situação de Vôo&gt; que se deseja incluir na tabela &lt;Partidas&gt; não está cadastrada&#39;
  Return
End
If Update (CD_CHG_ANT)
/* Chegadas»Partidas: Chegada Antecessora */
If (Select Count(*) From T_CHG, Inserted
Where T_CHG.CD_CHG = Inserted.CD_CHG_ANT)
 &lt;&gt;(Select Count(CD_CHG_ANT) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Chegadas&gt; que se deseja incluir na tabela &lt;Partidas&gt; não está cadastrada&#39;
  Return
End
If Update (CD_CHG_AEN_ANT)
/* Chegadas»Partidas: Chegada da Aeronave Sucessora */
If (Select Count(*) From T_CHG, Inserted
Where T_CHG.CD_CHG = Inserted.CD_CHG_AEN_ANT)
 &lt;&gt;(Select Count(CD_CHG_AEN_ANT) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Chegadas&gt; que se deseja incluir na tabela &lt;Partidas&gt; não está cadastrada&#39;
  Return
End
If Update (CD_PAR_VIN)
/* Partidas»Partidas: Partida Vinculada */
If (Select Count(*) From T_PAR, Inserted
Where T_PAR.CD_PAR = Inserted.CD_PAR_VIN)
 &lt;&gt;(Select Count(CD_PAR_VIN) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Partidas&gt; que se deseja incluir na tabela &lt;Partidas&gt; não está cadastrada&#39;
  Return
End
If Update (CD_USR)
/* Usuários»Partidas: Usuário logado */
If (Select Count(*) From T_USR, Inserted
Where T_USR.CD_USR = Inserted.CD_USR)
 &lt;&gt;(Select Count(CD_USR) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Usuários&gt; que se deseja incluir na tabela &lt;Partidas&gt; não está cadastrada&#39;
  Return
End
If Update (TP_PAR_GRU)
Or Update (TP_PAR)
Or Update (TP_PAR_NAT)
Or Update (TP_PAR_CTG)
Or Update (TP_PAR_STA)
/* Domínio de: Grupo do Vôo */
/* 1 - Grupo 1 */
/* 2 - Grupo 2 */
If (Select Count(*) From Inserted
    Where TP_PAR_GRU In (1,2))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Grupo do Vôo&gt; que se deseja incluir na tabela &lt;Partidas&gt; não é uma opção válida&#39;
  Return
End
/* Domínio de: Tipo do Vôo de Partida */
/* 1 - DOM-Doméstico */
/* 2 - INT-Internacional */
/* 3 - REG-Regional */
If (Select Count(*) From Inserted
    Where TP_PAR In (1,2,3))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Tipo do Vôo de Partida&gt; que se deseja incluir na tabela &lt;Partidas&gt; não é uma opção válida&#39;
  Return
End
/* Domínio de: Natureza do Vôo de Partida */
/* 1 - PAX-Passageiro */
/* 2 - CRG-Carga */
/* 3 - MIS-Misto */
/* 4 - TSL-Translado */
If (Select Count(*) From Inserted
    Where TP_PAR_NAT In (1,2,3,4))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Natureza do Vôo de Partida&gt; que se deseja incluir na tabela &lt;Partidas&gt; não é uma opção válida&#39;
  Return
End
/* Domínio de: Categoria do Vôo de Partida */
/* 1 - RGL-Regular */
/* 2 - CHT-Charter */
/* 3 - CSH-Codeshare */
/* 4 - DPL-Duplicate Leg */
/* 5 - TEC-Pouso Técnico */
/* 6 - TSL-Translado */
/* 7 - AVG-Aviação Geral */
/* 8 - MLT-Militar */
/* 9 - NRG-Não Regular */
/* 10 - TXA-Táxi Aéreo */
If (Select Count(*) From Inserted
    Where TP_PAR_CTG In (1,2,3,4,5,6,7,8,9,10))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Categoria do Vôo de Partida&gt; que se deseja incluir na tabela &lt;Partidas&gt; não é uma opção válida&#39;
  Return
End
/* Domínio de: Tipo do Status de Partida do Vôo */
/* 1 - Em Aberto */
/* 2 - Concluído */
If (Select Count(*) From Inserted
    Where TP_PAR_STA In (1,2))
 &lt;&gt;(Select Count(*) From Inserted
    Where TP_PAR_STA Is Not Null)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Tipo do Status de Partida do Vôo&gt; que se deseja incluir na tabela &lt;Partidas&gt; não é uma opção válida&#39;
  Return
End
/* Regra de negócio */
/* CODESHARE OU DUPLICATE LEG */
IF UPDATE(TP_PAR_CTG) OR UPDATE(CD_PAR_VIN)
	/* Um vôo do tipo normal ou charter não pode ter vôo vinculado e um vôo do tipo codeshare ou duplicate leg tem de ter vôo vinculado */
	IF (	SELECT 	COUNT(*) FROM	INSERTED
		WHERE	(TP_PAR_CTG NOT IN (3,4) AND CD_PAR_VIN IS NOT NULL) OR (TP_PAR_CTG IN (3,4) AND CD_PAR_VIN IS NULL)) &gt; 0
	BEGIN
		RAISERROR 20999 &#39;Operação não executada: Um vôo do tipo Normal ou Charter não pode ter vôo vinculado, e um vôo do tipo Codeshare ou Duplicate Leg tem de ter vôo vinculado.&#39;
		ROLLBACK TRANSACTION
		RETURN
	END
/* ETAPA CONCLUÍDA */
/* Verificar se a partida foi concluída (sem estar cancelada) sem que o vôo da aeronave antecessora tenha sido informado */
IF UPDATE(CD_SIT)
	IF (	SELECT	COUNT(*) FROM	INSERTED INS, T_SIT SIT
		WHERE	SIT.CD_SIT = INS.CD_SIT AND SIT.FL_SIT_CON_VOO = 1 AND INS.FL_PAR_CAN = 0 AND INS.CD_CHG_AEN_ANT IS NULL) &gt; 0
	BEGIN
		RAISERROR 20999 &#39;Operação não executada: O vôo de partida não pode ser concluído sem que seja informado o vôo da aeronave antecessora.&#39;
		ROLLBACK TRANSACTION
		RETURN
	END
/* VÔO ANTECESSOR */
/* Verificar se o vôo antecessor está se relacionando a outro vôo de Partida */
IF UPDATE(CD_CHG_ANT)
	IF(	SELECT 	COUNT(*) FROM 	T_PAR PAR, INSERTED INS
		WHERE	PAR.CD_CHG_ANT = INS.CD_CHG_ANT AND PAR.CD_PAR &lt;&gt; INS.CD_PAR) &gt; 0
	BEGIN
		RAISERROR 20999 &#39;Operação não executada: O Vôo antecessor já está sendo referenciado por outro vôo.&#39;
		ROLLBACK TRANSACTION
		RETURN
	END
/* VÔO DA AERONAVE ANTECESSORA */
IF UPDATE(CD_CHG_AEN_ANT)
BEGIN
	/* Verificar se o vôo da aeronave antecessor está se relacionando a outro vôo de Partida */
	IF(	SELECT 	COUNT(*) FROM 	T_PAR PAR, INSERTED INS
		WHERE	PAR.CD_CHG_AEN_ANT = INS.CD_CHG_AEN_ANT AND PAR.CD_PAR &lt;&gt; INS.CD_PAR) &gt; 0
	BEGIN
		RAISERROR 20999 &#39;Operação não executada: O vôo do qual se pretende utilizar a aeronave já está sendo referenciado em outro vôo.&#39;
		ROLLBACK TRANSACTION
		RETURN
	END

	/* Verificar se a partida foi concluída (sem estar cancelada) sem que o vôo da aeronave antecessora 
	tenha sido informado */
	IF (	SELECT	COUNT(*) FROM	INSERTED INS, T_SIT SIT
		WHERE	SIT.CD_SIT = INS.CD_SIT AND SIT.FL_SIT_CON_VOO = 1 AND INS.FL_PAR_CAN = 0 AND INS.CD_CHG_AEN_ANT IS NULL) &gt; 0
	BEGIN
		RAISERROR 20999 &#39;Operação não executada: O vôo de partida não pode ser concluído sem que seja informado o vôo da aeronave antecessora.&#39;
		ROLLBACK TRANSACTION
		RETURN
	END

	/* Para um vôo ter (par) ou ser (chg) vôo antecessor não pode ser da categoria 3 e 4 (codeshare ou duplicate leg) */
	IF (	SELECT COUNT(*) FROM 	INSERTED INS, T_CHG CHG
		WHERE	CHG.CD_CHG = INS.CD_CHG_AEN_ANT AND (CHG.TP_CHG_CTG IN (3, 4) OR INS.TP_PAR_CTG IN (3, 4))) &gt; 0
	BEGIN
		RAISERROR 20999 &#39;Operação não executada: Para um vôo ter ou ser vôo antecessor não pode ser codeshare nem duplicate leg.&#39;
		ROLLBACK TRANSACTION
		RETURN
	END

END

/* Se atualizarmos a hora de estacionamento de partida */
IF UPDATE(DH_PAR_EST)
BEGIN
	/* Não permitir alteração na Data ou Hora de Estacionamento de um Vôo de Partida, 
	se o Status de Aeronave associado ao último  HPA desse vôo,  estiver  Fechado e a 
	situação do vôo tanto em PAR quanto em INS for Etapa Concluída */
	IF (	SELECT	COUNT(*)
		FROM 	T_PAR PAR, INSERTED INS, T_HPA001 HPA, T_STA STA, T_SIT SITINS, T_SIT SITPAR
		WHERE	PAR.CD_PAR = INS.CD_PAR AND
			HPA.CD_PAR = INS.CD_PAR AND
			HPA.NR_HPA_SEQ = (	SELECT 	MAX(NR_HPA_SEQ) 
						FROM 	T_HPA001 HPAMAX 
						WHERE 	HPAMAX.CD_HPA = HPA.CD_HPA) AND
			STA.CD_STA = HPA.CD_STA AND
			STA.TP_STA = 2 AND
			SITPAR.CD_SIT = PAR.CD_SIT AND
			SITPAR.FL_SIT_CON_VOO = 1 AND
			SITINS.CD_SIT = INS.CD_SIT AND
			SITINS.FL_SIT_CON_VOO = 1) &gt; 0
	BEGIN
		RAISERROR 20999 &#39;Operação não executada: A &lt;Data ou Hora de Estacionamento&gt; do vôo de Partida não pode ser alterada, se o Status de Aeronave associado ao último HPA desse vôo, estiver Fechado.&#39;
		ROLLBACK TRANSACTION
		RETURN
	END
END

/* SITUAÇÃO */
/* Verificar as novas situações são válidas */
IF UPDATE(CD_SIT)
BEGIN
	IF (	SELECT	COUNT(*) FROM	INSERTED INS, T_SIT SIT
		WHERE	SIT.CD_SIT = INS.CD_SIT AND SIT.FL_SIT_PAR &lt;&gt; 1) &gt; 0
	BEGIN
		RAISERROR 20999 &#39;Operação não executada: A situação informada não é uma situação de partida.&#39;
		ROLLBACK TRANSACTION
		RETURN
	END

	/* Verificar se a nova situação de partida é compatível com a situação de partida do vôo da aeronave antecessora */
	IF (	SELECT	COUNT(*) FROM	INSERTED INS, T_CHG CHGAENANT, T_SIT SIT
		WHERE	CHGAENANT.CD_CHG = INS.CD_CHG_AEN_ANT AND 
			SIT.CD_SIT = INS.CD_SIT AND EXISTS (SELECT * FROM T_SCA SCA WHERE SCA.CD_SIT = INS.CD_SIT) AND
			CHGAENANT.CD_SIT NOT IN (SELECT CD_SIT_ANT FROM T_SCA SCA WHERE SCA.CD_SIT = INS.CD_SIT)) &gt; 0
	BEGIN
		RAISERROR 20999 &#39;Operação não executada: A situação do vôo antecessor não permite a nova situação do vôo de partida.&#39;
		ROLLBACK TRANSACTION
		RETURN
	END
END

/* Atualizar o complemento de partida */
IF UPDATE(CD_SIT) OR UPDATE(DH_PAR_EFE)
BEGIN
	UPDATE	T_PAR
	SET	NM_PAR_COM_SIT = CONVERT(CHAR(5), PAR.DH_PAR_EFE, 8)
	FROM	T_PAR PAR, INSERTED INS, T_SIT SIT
	WHERE	PAR.CD_PAR = INS.CD_PAR AND SIT.CD_SIT = PAR.CD_SIT AND SIT.TP_SIT_COM = 1	/* hora */

	UPDATE	T_PAR
	SET	NM_PAR_COM_SIT = NULL
	FROM	T_PAR PAR, INSERTED INS, T_SIT SIT
	WHERE	PAR.CD_PAR = INS.CD_PAR AND SIT.CD_SIT = PAR.CD_SIT AND SIT.TP_SIT_COM = 3	/* Nenhum */

	/* Se a Data e Hora da Situação não já tiver sido alterada */
	IF NOT UPDATE(DH_PAR_SIT)
	BEGIN
		/* Atualizar hora da alteração da situação do vôo de partida */
		UPDATE	T_PAR
		SET	DH_PAR_SIT = GETDATE()
		FROM	T_PAR PAR, INSERTED INS
		WHERE	PAR.CD_PAR = INS.CD_PAR
	END

END

/* Se alterarmos a situação de partida de vôo */
IF UPDATE(CD_SIT)
BEGIN

	/* Um vôo de partida não pode ser cancelado se existir algum registro em T_DEP para este vôo ou para um dos seus vôos vinculados */
	IF (	SELECT	COUNT(*)
		FROM	INSERTED INS, T_SIT SIT
		WHERE	SIT.CD_SIT = INS.CD_SIT AND SIT.FL_SIT_CAN_VOO = 1 AND
			(EXISTS (SELECT CD_PAR FROM T_DEP WHERE CD_PAR = INS.CD_PAR) OR
			EXISTS (SELECT DEP.CD_PAR FROM T_DEP DEP, T_PAR PAR WHERE PAR.CD_PAR_VIN = INS.CD_PAR AND DEP.CD_PAR = PAR.CD_PAR))) &gt; 0
	BEGIN
		RAISERROR 20999 &#39;Operação não executada: O vôo de Partida não pode ser cancelado pois existe registro de &lt;Dados Estatísticos de Partida&gt; para este vôo ou para algum de seus vôos vinculados.&#39;
		ROLLBACK TRANSACTION
		RETURN
	END

	/* Atualizar Flag de partida Cancelada em vôo */
	UPDATE 	T_PAR
	SET 	FL_PAR_CAN = SIT.FL_SIT_CAN_VOO
	FROM 	T_PAR PAR, INSERTED INS,  T_SIT SIT
	WHERE 	PAR.CD_PAR = INS.CD_PAR AND SIT.CD_SIT =  INS.CD_SIT AND (SIT.FL_SIT_CAN_VOO = 1 OR SIT.FL_SIT_CON_VOO = 0)

	/* Setar CD_VOO_ANT e CD_VOO_AEN_ANT para nulo caso a Partida seja cancelado */
	IF (	SELECT	COUNT(*)
		FROM 	T_PAR PAR, INSERTED INS, T_SIT SIT
		WHERE 	PAR.CD_PAR = INS.CD_PAR AND SIT.CD_SIT = INS.CD_SIT AND SIT.FL_SIT_CAN_VOO = 1) &gt; 0
	BEGIN
		UPDATE 	T_PAR
		SET 	CD_CHG_ANT = NULL,
			CD_CHG_AEN_ANT = NULL
		FROM 	T_PAR PAR, INSERTED INS, T_SIT SIT
		WHERE 	PAR.CD_PAR = INS.CD_PAR AND SIT.CD_SIT = INS.CD_SIT AND SIT.FL_SIT_CAN_VOO = 1
	END

	/* Incluir na tabela de vôos candidatos a vôos Antecessores, o vôo antecessor 
	associado a um vôo de partida caso este vôo de partida seja cancelado */
	IF (	SELECT 	COUNT(*)
		FROM	INSERTED INS, DELETED DEL, T_SIT SIT
		WHERE	INS.CD_PAR = DEL.CD_PAR AND SIT.CD_SIT = INS.CD_SIT AND 
			SIT.FL_SIT_CAN_VOO = 1 AND DEL.CD_CHG_AEN_ANT IS NOT NULL) &gt; 0
	BEGIN
		INSERT	T_CHGANT(
			CD_CHG)
		SELECT	DEL.CD_CHG_AEN_ANT
		FROM	INSERTED INS, DELETED DEL, T_SIT SIT
		WHERE	INS.CD_PAR = DEL.CD_PAR AND SIT.CD_SIT = INS.CD_SIT AND 
			SIT.FL_SIT_CAN_VOO = 1 AND DEL.CD_CHG_AEN_ANT IS NOT NULL
	END

	/* Setar flag de vôo não concluído ou concluído */
	UPDATE 	T_PAR
	SET 	TP_PAR_STA = SIT.FL_SIT_CON_VOO + 1   /* 2=Concluída */
	FROM 	T_PAR PAR, T_SIT SIT, INSERTED INS
	WHERE 	PAR.CD_PAR = INS.CD_PAR AND SIT.CD_SIT = INS.CD_SIT
	 
	/* Atualizar Flag de saída concluída em T_HPA para etapas concluídas e não canceladas */
	UPDATE 	T_HPA001
	SET 	FL_HPA_SAI = SIT.FL_SIT_CON_VOO
	FROM 	T_HPA001 HPA, INSERTED INS, T_SIT SIT
	WHERE  	HPA.CD_PAR = INS.CD_PAR AND SIT.CD_SIT = INS.CD_SIT

	/* Tornar nulo o vôo de partida de HPA e FL_HPA_SAI = 0 em todos os registros relativos ao vôo cancelado */
	IF (	SELECT 	COUNT(*)
		FROM	T_HPA001 HPA, INSERTED INS, T_SIT SIT
		WHERE	HPA.CD_PAR = INS.CD_PAR AND SIT.CD_SIT = INS.CD_SIT AND SIT.FL_SIT_CAN_VOO = 1) &gt; 0
	BEGIN
		UPDATE	T_HPA001
		SET	CD_PAR = NULL,
			FL_HPA_SAI = 0
		FROM	T_HPA001 HPA, INSERTED INS, T_SIT SIT
		WHERE	HPA.CD_PAR = INS.CD_PAR AND SIT.CD_SIT = INS.CD_SIT AND SIT.FL_SIT_CAN_VOO = 1
	END
END

IF UPDATE(TP_PAR_CTG)
BEGIN
	/* Anular os vôos de partida dos hpa dos vôos de partida que passaram a ser codeshare ou duplicate leg */
	UPDATE	T_HPA001
	SET	CD_PAR = NULL
	FROM	T_HPA001 HPA, INSERTED INS
	WHERE	HPA.CD_PAR = INS.CD_PAR AND INS.TP_PAR_CTG IN (3,4)

	/* Anular vôo antecessor e vôo da aeronave antecessora dos vôos de partida que passaram a ser codeshare ou duplicate leg */
	UPDATE	T_PAR
	SET	CD_CHG_ANT = NULL,
		CD_CHG_AEN_ANT = NULL
	FROM	T_PAR PAR, INSERTED INS
	WHERE	PAR.CD_PAR = INS.CD_PAR AND INS.TP_PAR_CTG IN (3,4)

	/* Incluir na tabela de vôos candidatos a vôos Antecessores, o vôo antecessor associado 
	a um vôo de partida caso este vôo de partida passe a ser Codeshare ou Duplicate Leg */
	INSERT	T_CHGANT(
		CD_CHG)
	SELECT	DEL.CD_CHG_AEN_ANT
	FROM	INSERTED INS, DELETED DEL
	WHERE	INS.CD_PAR = DEL.CD_PAR AND INS.TP_PAR_CTG IN (3,4) AND DEL.CD_CHG_AEN_ANT IS NOT NULL
END

/* Se houve alteração no voo ANTECESSOR de um vôo de partida */
IF UPDATE(CD_CHG_ANT)
BEGIN
	/* O Vôo antecessor não pode estar cancelado */
	IF (	SELECT 	COUNT(*) 
		FROM 	INSERTED INS,
			T_PAR PAR,
			T_CHG CHG
		WHERE	PAR.CD_PAR = INS.CD_PAR AND CHG.CD_CHG = PAR.CD_CHG_ANT AND CHG.FL_CHG_CAN = 1) &gt; 0
	BEGIN
		RAISERROR 20999 &#39;Operação não executada: O vôo de partida não pode estar ligado a um vôo antecessor cancelado.&#39;
		ROLLBACK TRANSACTION
		RETURN
	END

END
/* Se houve alteração no Vôo DA AERONAVE antecessora de um vôo de partida */
IF UPDATE(CD_CHG_AEN_ANT)
BEGIN
	/* Tornar nulo o Vôo de partida  dos  registros de HPA que tinham este vôo como vôo de partida */
	UPDATE	T_HPA001
	SET 	CD_PAR = NULL
	FROM	T_HPA001 HPA, INSERTED INS
	WHERE	HPA.CD_PAR = INS.CD_PAR

	/* Atualizar os registros de HPA relativos ao novo vôo antecessor, fazendo o vôo de partida igual a este vôo */
	/* Atualizar Flag de saída concluída em T_HPA para etapas concluídas e não  canceladas */
	UPDATE	T_HPA001
	SET	CD_PAR = INS.CD_PAR,
		FL_HPA_SAI = SIT.FL_SIT_CON_VOO
	FROM	T_HPA001 HPA, INSERTED INS, T_SIT SIT
	WHERE	HPA.CD_CHG = INS.CD_CHG_AEN_ANT AND SIT.CD_SIT = INS.CD_SIT 

	/* O Vôo da aeronave antecessora não pode estar cancelado */
	IF (	SELECT 	COUNT(*) 
		FROM 	INSERTED INS,
			T_PAR PAR,
			T_CHG CHG
		WHERE	PAR.CD_PAR = INS.CD_PAR AND 
			CHG.CD_CHG = PAR.CD_CHG_AEN_ANT AND
			CHG.FL_CHG_CAN = 1) &gt; 0
	BEGIN
		RAISERROR 20999 &#39;Operação não executada: O vôo de chegada cuja aeronave será utilizada na partida não pode estar cancelado.&#39;
		ROLLBACK TRANSACTION
		RETURN
	END

	/* O Vôo de Partida ao qual está se querendo vincular um vôo antecessor não pode estar cancelado */
	IF (	SELECT 	COUNT(*)
		FROM 	INSERTED INS,
			T_PAR PAR
		WHERE	PAR.CD_PAR = INS.CD_PAR AND
			PAR.FL_PAR_CAN = 1 AND
			PAR.CD_CHG_AEN_ANT IS NOT NULL) &gt; 0
	BEGIN
		RAISERROR 20999 &#39;Operação não executada: O vôo de partida ao qual se está querendo vincular um vôo antecessor não pode estar cancelado.&#39;
		ROLLBACK TRANSACTION
		RETURN
	END

	/* Incluir vôo na tabela de vôos candidatos a vôos Antecessores se 
	este vôo ainda existir na tabela de Chegada e não existir ainda na tabela de vôos candidatos a vôos Antecessores */
	INSERT	T_CHGANT(
		CD_CHG)
	SELECT	DEL.CD_CHG_AEN_ANT
	FROM	DELETED DEL
	WHERE	DEL.CD_CHG_AEN_ANT IS NOT NULL AND
		DEL.CD_CHG_AEN_ANT IN (		SELECT 	CD_CHG 
						FROM 	T_CHG CHG 
						WHERE 	CHG.CD_CHG = DEL.CD_CHG_AEN_ANT) AND
		DEL.CD_CHG_AEN_ANT NOT IN (	SELECT 	CD_CHG 
						FROM 	T_CHGANT CHGANT
						WHERE 	CHGANT.CD_CHG = DEL.CD_CHG_AEN_ANT)

	/* Excluir vôo da tabela de vôos candidatos a vôos Antecessores se o Vôo Antecessor tiver sido alterado */
	DELETE 	CHGANT
	FROM	T_CHGANT CHGANT, INSERTED INS
	WHERE	CHGANT.CD_CHG = INS.CD_CHG_AEN_ANT

END

/* Se atualizarmos a hora de estacionamento de partida */
IF UPDATE(DH_PAR_EST)
BEGIN
	/* Atualizamos Hora de Saída em HPA como Hora de Estacionamento de partida */
	UPDATE 	T_HPA001
	SET 	DH_HPA_SAI = PAR.DH_PAR_EST
	FROM	T_HPA001 HPA,
		T_PAR PAR,
		INSERTED INS
	WHERE 	PAR.CD_PAR = INS.CD_PAR AND
		HPA.CD_PAR = INS.CD_PAR AND
		HPA.NR_HPA_SEQ = (	SELECT 	MAX(NR_HPA_SEQ) 
					FROM 	T_HPA001 HPAMAX 
					WHERE 	HPAMAX.CD_HPA = HPA.CD_HPA)
END

/* CONSISTÊNCIAS QUE SÓ DEVEM SER FEITAS APÓS AS ATUALIZAÇÕES */

IF UPDATE(CD_SIT) OR UPDATE(CD_CHG_ANT)
BEGIN
	/* Um vôo de partida não pode ser concluído se o seu vôo de chegada estiver em aberto */
	IF (	SELECT	COUNT(*)
		FROM	T_PAR PAR,
			T_CHG CHG,
			INSERTED INS
		WHERE	PAR.CD_PAR = INS.CD_PAR AND
			CHG.CD_CHG = PAR.CD_CHG_ANT AND
			PAR.TP_PAR_STA = 2 AND 
			CHG.TP_CHG_STA = 1) &gt; 0
	BEGIN
		RAISERROR 20999 &#39;Operação não executada: O vôo de partida não pode ser concluído se o seu vôo de chegada ainda estiver em aberto.&#39;
		ROLLBACK TRANSACTION
		RETURN
	END
END

IF UPDATE(CD_SIT) OR UPDATE(CD_CHG_AEN_ANT) OR UPDATE(TP_PAR_CTG)
BEGIN
	/* Um vôo de partida não pode ser concluído se o vôo de chegada que utiliza a mesma aeronave estiver em aberto */
	IF (	SELECT	COUNT(*)
		FROM	T_PAR PAR,
			T_CHG CHG,
			INSERTED INS
		WHERE	PAR.CD_PAR = INS.CD_PAR AND
			CHG.CD_CHG = PAR.CD_CHG_AEN_ANT AND
			PAR.TP_PAR_STA = 2 AND 
			CHG.TP_CHG_STA = 1) &gt; 0
	BEGIN
		RAISERROR 20999 &#39;Operação não executada: O vôo de partida não pode ser concluído se o vôo de chegada que utiliza a mesma aeronave ainda estiver em aberto.&#39;
		ROLLBACK TRANSACTION
		RETURN
	END

END

IF UPDATE(DH_PAR_NRM) OR 
    UPDATE(DH_PAR_EFE) OR 
    UPDATE(DH_PAR_EST) OR
    UPDATE(CD_CHG_ANT) OR
    UPDATE(CD_CHG_AEN_ANT)
BEGIN
	/* Verificar se há horas de chegada maiores que as horas de partida */
	IF (	SELECT COUNT(*)
		FROM 	T_PAR PAR,
			T_CHG CHG,
			INSERTED INS
		WHERE 	PAR.CD_PAR = INS.CD_PAR AND
			CHG.CD_CHG = PAR.CD_CHG_AEN_ANT AND
			((CHG.DH_CHG_EFE &gt;= PAR.DH_PAR_EFE) OR 
			(CHG.DH_CHG_EST &gt;= PAR.DH_PAR_EST))) &gt; 0
	BEGIN
		RAISERROR 20999 &#39;Operação não executada: A hora de partida não pode ser menor nem igual à hora de chegada.&#39;
		ROLLBACK TRANSACTION
		RETURN
	END
END

/* JOGAR os dados dos vôos do tipo Normal, nos vôos do tipo Codeshare */
IF (	SELECT 	COUNT(*)
	FROM	T_PAR PAR,
		T_PAR PARVIN,
		INSERTED INS
	WHERE	PAR.CD_PAR_VIN = INS.CD_PAR AND
		PARVIN.CD_PAR = INS.CD_PAR) &gt; 0
BEGIN
	UPDATE	PAR
	SET	CD_POR = PARVIN.CD_POR,
		DH_PAR_NRM = PARVIN.DH_PAR_NRM,
		DH_PAR_EFE = PARVIN.DH_PAR_EFE,
		DH_PAR_EST = PARVIN.DH_PAR_EST,
		DH_PAR_SIT  = PARVIN.DH_PAR_SIT,
		NM_PAR_COM_SIT = PARVIN.NM_PAR_COM_SIT,
		FL_PAR_CAN = PARVIN.FL_PAR_CAN,
		CD_SIT = PARVIN.CD_SIT,
		TP_PAR_STA = PARVIN.TP_PAR_STA,
		CD_USR = PARVIN.CD_USR
	FROM	T_PAR PAR,
		T_PAR PARVIN,
		INSERTED INS
	WHERE	PAR.CD_PAR_VIN = INS.CD_PAR AND
		PARVIN.CD_PAR = INS.CD_PAR
END

/* PUXAR os dados dos vôos do tipo Normal, nos vôos do tipo Codeshare */
IF (	SELECT 	COUNT(*)
	FROM	T_PAR PAR,
		T_PAR PARVIN,
		INSERTED INS
	WHERE	PAR.CD_PAR = INS.CD_PAR AND
		PARVIN.CD_PAR = INS.CD_PAR_VIN) &gt; 0
BEGIN
	UPDATE	PAR
	SET	CD_POR = PARVIN.CD_POR,
		DH_PAR_NRM = PARVIN.DH_PAR_NRM,
		DH_PAR_EFE = PARVIN.DH_PAR_EFE,
		DH_PAR_EST = PARVIN.DH_PAR_EST,
		DH_PAR_SIT  = PARVIN.DH_PAR_SIT,
		NM_PAR_COM_SIT = PARVIN.NM_PAR_COM_SIT,
		FL_PAR_CAN = PARVIN.FL_PAR_CAN,
		CD_SIT = PARVIN.CD_SIT,
		TP_PAR_STA = PARVIN.TP_PAR_STA,
		CD_USR = PARVIN.CD_USR
	FROM	T_PAR PAR,
		T_PAR PARVIN,
		INSERTED INS
	WHERE	PAR.CD_PAR = INS.CD_PAR AND
		PARVIN.CD_PAR = INS.CD_PAR_VIN
END


IF UPDATE(FL_PAR_TEL)
BEGIN
	--Se desmarcar da tela desmarcar do anunciador automático
	Update	T_PAR
	set	FL_PAR_ANU = 0
	FROM	T_PAR PAR
	JOIN	INSERTED INS ON INS.CD_PAR = PAR.CD_PAR
	WHERE	INS.FL_PAR_TEL = 0
END

IF UPDATE(CD_POR)
BEGIN
	--Deleta todos os registros da programação cujo flag &quot;Reanunciar na alteração de Portão&quot; seja VERDADEIRO ou cujo flag &quot;Somente quando for alteração de Portão&quot; seja VERDADEIRO e que estejam vinculados a este vôo
	DELETE T_PRALOG FROM T_PRALOG LOG JOIN INSERTED INS ON INS.CD_PAR = LOG.CD_PAR
	JOIN T_PRA PRA ON PRA.CD_PRA = LOG.CD_PRA AND (PRA.FL_PRA = 1 OR PRA.FL_PRA_POR = 1)

	--Incluir somente aqueles registros da &quot;Programação de Anúncio&quot;, cujo &quot;Código da Programação&quot; não já exista no Log de Programação deste vôo, e que esteja vinculado à nova situação do vôo, e cujo Tipo de Anúncio seja de Partida e cujo vôo apareça na tela e cujo flag &quot;Somente quando for alteração de Portão&quot; seja VERDADEIRO ou o falg &quot;Reanunciar na alteração de Portão&quot;seja VERDADEIRO
	--Antes da Hora Prevista
	INSERT INTO T_PRALOG (CD_PRA, CD_CHG, CD_PAR, DH_LOG, FL_LOG)
	SELECT 	CD_PRA, NULL, INS.CD_PAR, DATEADD(MI, -PRA.QT_PRA_TMP, INS.DH_PAR_EFE), 0
	FROM	T_PRA PRA JOIN INSERTED INS ON INS.CD_SIT = PRA.CD_SIT AND INS.FL_PAR_TEL = 1 AND INS.FL_PAR_ANU = 1
	JOIN	T_TPA TPA ON TPA.CD_TPA = PRA.CD_TPA AND TPA.TP_TPA = 2 JOIN T_SIT SIT ON SIT.CD_SIT = INS.CD_SIT AND FL_SIT_CON_VOO = 0
	WHERE	PRA.TP_PRA = 1 AND NOT EXISTS (SELECT * FROM T_PRALOG WHERE CD_PRA = PRA.CD_PRA AND CD_PAR = INS.CD_PAR) AND (PRA.FL_PRA = 1 OR PRA.FL_PRA_POR = 1)

	 --Após a Alteração da Situação
	INSERT INTO T_PRALOG (CD_PRA, CD_CHG, CD_PAR, DH_LOG, FL_LOG)
	SELECT 	CD_PRA, NULL, INS.CD_PAR, DATEADD(MI, PRA.QT_PRA_TMP, GETDATE()), 0
	FROM	T_PRA PRA JOIN INSERTED INS ON INS.CD_SIT = PRA.CD_SIT AND INS.FL_PAR_TEL = 1 AND INS.FL_PAR_ANU = 1
	JOIN	T_TPA TPA ON TPA.CD_TPA = PRA.CD_TPA AND TPA.TP_TPA = 2 JOIN T_SIT SIT ON SIT.CD_SIT = INS.CD_SIT AND FL_SIT_CON_VOO = 0
	WHERE	PRA.TP_PRA = 2 AND NOT EXISTS (SELECT * FROM T_PRALOG WHERE CD_PRA = PRA.CD_PRA AND CD_PAR = INS.CD_PAR) AND (PRA.FL_PRA = 1 OR PRA.FL_PRA_POR = 1)
END
--Alexei 18/06/01
IF UPDATE(CD_SIT)  OR UPDATE(DH_PAR_EFE) 
BEGIN
	--Lançar Histórico de Situação de Vôo
	INSERT T_HSP (DH_HSP, CD_PAR, CD_IFT, CD_SIT, DH_HSP_PAR, CD_USR) SELECT GETDATE(), INS.CD_PAR, INS.CD_IFT, INS.CD_SIT, INS.DH_PAR_EFE, INS.CD_USR FROM INSERTED INS

	--Deleta todos os registros da programação não anunciados e que estejam vinculados a este vôo
	DELETE T_PRALOG FROM T_PRALOG LOG JOIN INSERTED INS ON INS.CD_PAR = LOG.CD_PAR WHERE LOG.FL_LOG = 0

	--Inserir programação de Log
	--Antes da Hora Prevista
	INSERT INTO T_PRALOG (CD_PRA, CD_CHG, CD_PAR, DH_LOG, FL_LOG)
	SELECT 	CD_PRA, NULL, INS.CD_PAR, DATEADD(MI, -PRA.QT_PRA_TMP, INS.DH_PAR_EFE), 0
	FROM	T_PRA PRA JOIN INSERTED INS ON INS.CD_SIT = PRA.CD_SIT AND INS.FL_PAR_TEL = 1 AND INS.FL_PAR_ANU = 1 
	JOIN	T_TPA TPA ON TPA.CD_TPA = PRA.CD_TPA AND TPA.TP_TPA = 2 JOIN T_SIT SIT ON SIT.CD_SIT = INS.CD_SIT AND FL_SIT_CON_VOO = 0
 	WHERE	PRA.TP_PRA = 1 AND NOT EXISTS (SELECT * FROM T_PRALOG WHERE CD_PRA = PRA.CD_PRA AND CD_PAR = INS.CD_PAR)  AND PRA.FL_PRA_POR = 0

	 --Após a Alteração da Situação
	INSERT INTO T_PRALOG (CD_PRA, CD_CHG, CD_PAR, DH_LOG, FL_LOG)
	SELECT 	CD_PRA, NULL, INS.CD_PAR, DATEADD(MI, PRA.QT_PRA_TMP, GETDATE()), 0
	FROM	T_PRA PRA JOIN INSERTED INS ON INS.CD_SIT = PRA.CD_SIT AND INS.FL_PAR_TEL = 1 AND INS.FL_PAR_ANU = 1
	JOIN	T_TPA TPA ON TPA.CD_TPA = PRA.CD_TPA AND TPA.TP_TPA = 2 JOIN T_SIT SIT ON SIT.CD_SIT = INS.CD_SIT AND FL_SIT_CON_VOO = 0
	WHERE	PRA.TP_PRA = 2 AND NOT EXISTS (SELECT * FROM T_PRALOG WHERE CD_PRA = PRA.CD_PRA AND CD_PAR = INS.CD_PAR)  AND PRA.FL_PRA_POR = 0

	IF UPDATE(CD_SIT)
	BEGIN
		--Antes da Hora Prevista
		INSERT INTO T_PRALOG (CD_PRA, CD_CHG, CD_PAR, DH_LOG, FL_LOG)
		SELECT 	CD_PRA, NULL, NULL, DATEADD(MI, -PRA.QT_PRA_TMP, INS.DH_PAR_EFE), 0
		FROM	T_PRA PRA JOIN INSERTED INS ON INS.CD_SIT = PRA.CD_SIT AND INS.FL_PAR_TEL = 1 AND INS.FL_PAR_ANU = 1
		JOIN	T_TPA TPA ON TPA.CD_TPA = PRA.CD_TPA AND TPA.TP_TPA = 3 JOIN T_SIT SIT ON SIT.CD_SIT = INS.CD_SIT AND FL_SIT_CON_VOO = 0
		WHERE	PRA.TP_PRA = 1 AND NOT EXISTS (SELECT * FROM T_PRALOG WHERE CD_PRA = PRA.CD_PRA AND CD_PAR = INS.CD_PAR) AND PRA.FL_PRA_POR = 0 AND TP_PRA_TPA = 2

		 --Após a Alteração da Situação
		INSERT INTO T_PRALOG (CD_PRA, CD_CHG, CD_PAR, DH_LOG, FL_LOG)
		SELECT 	CD_PRA, NULL, NULL, DATEADD(MI, PRA.QT_PRA_TMP, GETDATE()), 0
		FROM	T_PRA PRA JOIN INSERTED INS ON INS.CD_SIT = PRA.CD_SIT AND INS.FL_PAR_TEL = 1 AND INS.FL_PAR_ANU = 1
		JOIN	T_TPA TPA ON TPA.CD_TPA = PRA.CD_TPA AND TPA.TP_TPA = 3 JOIN T_SIT SIT ON SIT.CD_SIT = INS.CD_SIT AND FL_SIT_CON_VOO = 0
		WHERE	PRA.TP_PRA = 2 AND NOT EXISTS (SELECT * FROM T_PRALOG WHERE CD_PRA = PRA.CD_PRA AND CD_PAR = INS.CD_PAR) AND PRA.FL_PRA_POR = 0 AND TP_PRA_TPA = 2
	END
END

-- Alexei 12/12/00
-- Milena - 30/06/98 */ /* Alexei - 27/07/98 - Inclusão dos campos DH_REP_ORI e HR_REP_ZUL
-- -------------------------------------------------- Lançar registro para Replicação na tabela T_REP001 -----------
IF	UPDATE(CD_SIT) OR UPDATE(DH_PAR_EFE) OR UPDATE(CD_CHG_AEN_ANT)
BEGIN
	DECLARE @HR_REP_ZUL 	INT
	DECLARE @HR_HOR_NRM 	INT
	DECLARE @HR_HOR_VER 	INT
	DECLARE @CD_PAR 	INT
	DECLARE @SG_COM_IAT_003	CHAR(3)
	DECLARE @NR_VOO		CHAR(10)

	-- Verifica Defazagem em relação ao horário Zulu
	SELECT 	@HR_HOR_NRM = HR_HOR_NRM,
		@HR_HOR_VER = HR_HOR_VER
	FROM 	T_HOR HOR, T_AER AER, T_CID CID, T_PSI PSI
	WHERE 	CID.CD_CID = AER.CD_CID And
		HOR.CD_HOR = CID.CD_HOR And
		AER.CD_AER = PSI.CD_AER
   
	-- Verifica se o Aeroporto está no Horário de Verão
	IF (SELECT COUNT(*) FROM T_HRV WHERE GETDATE() BETWEEN DT_HRV_INI AND DT_HRV_FIM) &gt; 0
		SELECT @HR_REP_ZUL = @HR_HOR_VER
	ELSE
		SELECT @HR_REP_ZUL = @HR_HOR_NRM
END
-- Alexei 12/12/00
IF 	UPDATE(CD_CHG_AEN_ANT)
BEGIN
	-- Vôos de PAR cujas aeronaves antecessoras estão sendo atualizadas e cuja primeira escala 
	-- posterior do vôo de PAR é um dos aeroportos ativos existentes na tabela T_RED
	DECLARE REP2 CURSOR FOR
	SELECT 	INS.CD_PAR, SG_COM_IAT_003, NR_VOO = INS.NR_PAR_VOO, NR_AEN
	FROM 	INSERTED INS, T_CHG CHG, T_COM COM, T_AEN AEN
	WHERE	INS.CD_CHG_AEN_ANT = CHG.CD_CHG AND
		INS.CD_PAR IN (	SELECT	CD_PAR 	FROM T_ECP001 ECP
				WHERE	ECP.CD_PAR = INS.CD_PAR AND
					ECP.CD_ECP = (SELECT MIN(CD_ECP) FROM T_ECP001 ECP1 WHERE ECP1.CD_PAR = ECP.CD_PAR) AND
					ECP.CD_AER IN (SELECT CD_AER FROM T_AER WHERE SG_AER_ICA IN (SELECT SG_AER_ICA FROM T_RED WHERE FL_RED_ATI = 1))) AND
		COM.CD_COM = INS.CD_COM AND AEN.CD_AEN =* CHG.CD_AEN_CHG
	/* Declaração das variáveis */
	DECLARE @NR_AEN CHAR(10)
	/* Abre curso e posiciona no primeiro registro */
	OPEN REP2
	FETCH REP2 INTO @CD_PAR, @SG_COM_IAT_003, @NR_VOO, @NR_AEN
	/* Processar todos os registros de REP2 */
	WHILE @@FETCH_STATUS = 0
	BEGIN
		/* Inserir registro na tabela T_REP001 */
		INSERT INTO T_REP001 (
			SG_AER_ICA_ORI, SG_AER_ICA_DES, SG_COM_IAT_003, NR_VOO, 
			DH_VOO_EFE, QT_VOO_DIF, NM_SIT, NR_AEN,
			FL_CHG_CON, FL_PAR_CON, FL_AEN, DH_REP, DH_REP_ORI, HR_REP_ZUL)
		SELECT 	(SELECT SG_AER_ICA FROM T_AER WHERE CD_AER = (SELECT CD_AER FROM T_PSI)),
			(SELECT SG_AER_ICA FROM T_ECP001 ECP, T_AER AER WHERE ECP.CD_PAR = @CD_PAR AND ECP.CD_ECP = (SELECT MIN(CD_ECP) FROM T_ECP001 WHERE CD_PAR = @CD_PAR) AND ECP.CD_AER = AER.CD_AER),
			@SG_COM_IAT_003, @NR_VOO,
			NULL, NULL, NULL, @NR_AEN, 0, 0, 1, GETDATE(), GETDATE(), @HR_REP_ZUL

		/* Ir para o próximo registro */
		FETCH NEXT FROM REP2 INTO @CD_PAR, @SG_COM_IAT_003, @NR_VOO, @NR_AEN
	END
	CLOSE REP2
	DEALLOCATE REP2
	-- Fim Alexei 12/12/00
END
IF 	UPDATE(CD_SIT) OR UPDATE(DH_PAR_EFE)
BEGIN
	-- -------------------------------------------------- Declaração do Cursor --------------------------------------------------
	-- Vôos de Partida cujas situações estão sendo atualizadas para uma situação diferente de &quot;Etapa Concluída&quot; e 
	-- cuja primeira escala posterior do vôo de Partida associado é um dos aeroportos ativos existentes na tabela T_RED
	DECLARE REP3 CURSOR FOR
	SELECT 	INS.CD_PAR, SG_COM_IAT_003, NR_VOO = INS.NR_PAR_VOO, 
		DH_VOO_EFE = INS.DH_PAR_EFE, QT_VOO_DIF = DATEDIFF(MI, INS.DH_PAR_NRM, INS.DH_PAR_EFE),
		NM_SIT = NM_SIT_LOC
	FROM 	INSERTED INS, T_SIT SIT, T_COM COM
	WHERE	SIT.CD_SIT = INS.CD_SIT AND
		SIT.FL_SIT_CON_VOO = 0 AND	-- Não Concluído
		INS.CD_PAR IN (	SELECT	CD_PAR
				FROM 	T_ECP001 ECP
				WHERE	ECP.CD_PAR = INS.CD_PAR AND
					ECP.CD_ECP = (SELECT MIN(CD_ECP) FROM T_ECP001 ECP1 WHERE ECP1.CD_PAR = ECP.CD_PAR) AND
					ECP.CD_AER IN (SELECT CD_AER FROM T_AER WHERE SG_AER_ICA IN (SELECT SG_AER_ICA FROM T_RED WHERE FL_RED_ATI = 1))) AND
		COM.CD_COM = INS.CD_COM

	-- Declaração das variáveis
	DECLARE	@DH_VOO_EFE		SMALLDATETIME,
			@QT_VOO_DIF		INT,
			@NM_SIT		VARCHAR(30)
		 
	-- Abertura do Cursor
	OPEN REP3

	-- Posiciona no primeiro registro
	FETCH	REP3
	INTO	@CD_PAR, @SG_COM_IAT_003, @NR_VOO, @DH_VOO_EFE, @QT_VOO_DIF, @NM_SIT

	-- Processar todos os registros de REP3
	WHILE @@FETCH_STATUS = 0
	BEGIN
		-- Inserir registro na tabela T_REP001
		INSERT INTO T_REP001 (
			SG_AER_ICA_ORI, SG_AER_ICA_DES, SG_COM_IAT_003, NR_VOO, 
			DH_VOO_EFE, QT_VOO_DIF, NM_SIT, 
			NR_AEN,
			FL_CHG_CON, FL_PAR_CON, FL_AEN, DH_REP, DH_REP_ORI, HR_REP_ZUL)
		SELECT 	(SELECT SG_AER_ICA FROM T_AER WHERE CD_AER = (SELECT CD_AER FROM T_PSI)),
			(SELECT SG_AER_ICA FROM T_ECP001 ECP, T_AER AER WHERE ECP.CD_PAR = @CD_PAR AND ECP.CD_ECP = (SELECT MIN(CD_ECP) FROM T_ECP001 WHERE CD_PAR = @CD_PAR) AND ECP.CD_AER = AER.CD_AER),
			@SG_COM_IAT_003, @NR_VOO,
			@DH_VOO_EFE, @QT_VOO_DIF, @NM_SIT,
			NULL,
			0, 0, 0, GETDATE(), GETDATE(), @HR_REP_ZUL

		-- Ir para o próximo registro
		FETCH NEXT FROM REP3
		INTO	@CD_PAR, @SG_COM_IAT_003, @NR_VOO, @DH_VOO_EFE, @QT_VOO_DIF, @NM_SIT
	END
	CLOSE REP3
	DEALLOCATE REP3
END

IF 	UPDATE(CD_SIT)
BEGIN
	-- -------------------------------------------------- Declaração do Cursor -------------------------------------------------- 
	-- Vôos de Partida cujas situações estão sendo atualizadas para &quot;Etapa Concluída&quot; e cuja primeira 
	-- escala posterior do vôo de Partida associado é um dos aeroportos ativos existentes na tabela T_RED
	DECLARE REP4 CURSOR FOR
	SELECT 	PAR.CD_PAR, SG_COM_IAT_003, NR_VOO = PAR.NR_PAR_VOO, 
		DH_VOO_EFE = INS.DH_PAR_EFE, QT_VOO_DIF = DATEDIFF(MI, INS.DH_PAR_NRM, INS.DH_PAR_EFE),
		NM_SIT = NM_SIT_LOC
	FROM 	INSERTED INS, T_PAR PAR, T_SIT SIT, T_COM COM
	WHERE	INS.CD_PAR = PAR.CD_PAR AND
		SIT.CD_SIT = INS.CD_SIT AND
		SIT.FL_SIT_CON_VOO = 1 AND	-- Concluído
		PAR.FL_PAR_CAN = 0 AND		-- Não Cancelado
		PAR.CD_PAR IN (	SELECT	CD_PAR
				FROM 	T_ECP001 ECP
				WHERE	ECP.CD_PAR = PAR.CD_PAR AND
					ECP.CD_ECP = (SELECT MIN(CD_ECP) FROM T_ECP001 ECP1 WHERE ECP1.CD_PAR = ECP.CD_PAR) AND
					ECP.CD_AER IN (SELECT CD_AER FROM T_AER WHERE SG_AER_ICA IN (SELECT SG_AER_ICA FROM T_RED WHERE FL_RED_ATI = 1))) AND
		COM.CD_COM = PAR.CD_COM

	-- Abertura do Cursor
	OPEN REP4

	-- Posiciona no primeiro registro
	FETCH	REP4
	INTO	@CD_PAR, @SG_COM_IAT_003, @NR_VOO, @DH_VOO_EFE, @QT_VOO_DIF, @NM_SIT

	-- Processar todos os registros de REP4
	WHILE @@FETCH_STATUS = 0
	BEGIN
		-- Inserir registro na tabela T_REP001
		INSERT INTO T_REP001 (
			SG_AER_ICA_ORI, SG_AER_ICA_DES, SG_COM_IAT_003, NR_VOO, 
			DH_VOO_EFE, QT_VOO_DIF, NM_SIT, 
			NR_AEN,
			FL_CHG_CON, FL_PAR_CON, FL_AEN, DH_REP, DH_REP_ORI, HR_REP_ZUL)
		SELECT 	(SELECT SG_AER_ICA FROM T_AER WHERE CD_AER = (SELECT CD_AER FROM T_PSI)),
			(SELECT SG_AER_ICA FROM T_ECP001 ECP, T_AER AER WHERE ECP.CD_PAR = @CD_PAR AND ECP.CD_ECP = (SELECT MIN(CD_ECP) FROM T_ECP001 WHERE CD_PAR = @CD_PAR) AND ECP.CD_AER = AER.CD_AER),
			@SG_COM_IAT_003, @NR_VOO,
			@DH_VOO_EFE, @QT_VOO_DIF, @NM_SIT,
			NULL,
			0, 1, 0, GETDATE(), GETDATE(), @HR_REP_ZUL

		-- Ir para o próximo registro
		FETCH NEXT FROM REP4
		INTO	@CD_PAR, @SG_COM_IAT_003, @NR_VOO, @DH_VOO_EFE, @QT_VOO_DIF, @NM_SIT
	END
	CLOSE REP4
	DEALLOCATE REP4
END

/* INCLUIR REGISTROS EM T_APA */
INSERT	T_APA (DH_APA, CD_PAR)
SELECT GETDATE(), CD_PAR FROM INSERTED

/* Incluir registros em T_AHP */
IF 	UPDATE(NR_PAR_VOO) OR UPDATE(TP_PAR_GRU) OR UPDATE (CD_CHG_AEN_ANT) OR 
	UPDATE(CD_POR) OR UPDATE(CD_COM)
BEGIN
	INSERT	T_AHP (CD_HPA, DH_AHP)
	Select 	DISTINCT CD_HPA, GETDATE()
	From 	T_HPA001 HPA, T_CHG CHG, T_SIT SIT, T_PAR PAR, INSERTED INS
	Where	HPA.CD_CHG = CHG.CD_CHG AND
		SIT.CD_SIT = CHG.CD_SIT AND
		HPA.CD_AER = (Select CD_AER From T_PSI) AND
		(HPA.FL_HPA_ENT = 1 OR SIT.FL_SIT_AEN_PAT = 1) AND
		HPA.FL_HPA_SAI = 0 AND
		HPA.CD_AEN IS NOT NULL AND
		PAR.CD_CHG_AEN_ANT = HPA.CD_CHG AND
		PAR.CD_PAR = INS.CD_PAR
END

End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o300"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o328">
<a:ObjectID>69589FAB-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_15</a:Name>
<a:Code>REFERENCE_15</a:Code>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o277"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o34"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o300"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o329">
<a:ObjectID>69589FAD-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o278"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o37"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o330">
<a:CenterTextOffset>(-1041, -1350)</a:CenterTextOffset>
<a:Rect>((-725982,694698), (-718258,707600))</a:Rect>
<a:ListOfPoints>((-718966,707600),(-724048,694698))</a:ListOfPoints>
<a:ArrowStyle>4882</a:ArrowStyle>
<a:LineColor>32768</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Ref="o244"/>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Ref="o276"/>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o331">
<a:ObjectID>69589FAF-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_16</a:Name>
<a:Code>REFERENCE_16</a:Code>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o277"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o245"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o300"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o332">
<a:ObjectID>69589FB2-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o278"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o247"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o333">
<a:Rect>((-716456,708824), (-706944,714602))</a:Rect>
<a:ListOfPoints>((-716230,708824),(-706944,714602))</a:ListOfPoints>
<a:ArrowStyle>4881</a:ArrowStyle>
<a:LineColor>32768</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Ref="o244"/>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Id="o334">
<a:Rect>((-710335,712665), (-703631,717211))</a:Rect>
<a:LineColor>32768</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o335">
<a:ObjectID>69589FC1-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_POR</a:Name>
<a:Code>T_POR</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o336">
<a:ObjectID>69589ECC-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_POR</a:Name>
<a:Code>CD_POR</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o337">
<a:ObjectID>69589ECD-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NR_POR</a:Name>
<a:Code>NR_POR</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>char(4)</a:DataType>
<a:Length>4</a:Length>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o338">
<a:ObjectID>69589ECE-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_EMB</a:Name>
<a:Code>CD_EMB</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o339">
<a:ObjectID>69589ED0-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_AER</a:Name>
<a:Code>CD_AER</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o340">
<a:ObjectID>69589ED2-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TIMESTAMP</a:Name>
<a:Code>TIMESTAMP</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o341">
<a:ObjectID>69589EE0-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_POR</a:Name>
<a:Code>Pk_T_POR</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_POR</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o336"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Indexes>
<o:Index Id="o342">
<a:ObjectID>69589ED6-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_POR_AER</a:Name>
<a:Code>I_POR_AER</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Unique>1</a:Unique>
<c:IndexColumns>
<o:IndexColumn Id="o343">
<a:ObjectID>69589ED7-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o337"/>
</c:Column>
</o:IndexColumn>
<o:IndexColumn Id="o344">
<a:ObjectID>69589ED8-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_1&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o339"/>
</c:Column>
</o:IndexColumn>
<o:IndexColumn Id="o345">
<a:ObjectID>69589EDA-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_2&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o338"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
<o:Index Id="o346">
<a:ObjectID>69589EDC-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_AER</a:Name>
<a:Code>I_AER</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:IndexColumns>
<o:IndexColumn Id="o347">
<a:ObjectID>69589EDE-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o339"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
</c:Indexes>
<c:Owner>
<o:User Ref="o16"/>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o348">
<a:ObjectID>6958A003-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_POR_TRD</a:Name>
<a:Code>T_POR_TRD</a:Code>
<a:Text>Create Trigger T_POR_TRD On T_POR
For Delete As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* Portão»Hotran - Frequência: É Portão da Frequencia (Restrict) */
If (Select Count(*) From T_HFR dep, Deleted pri
 Where dep.CD_POR = pri.CD_POR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Portão&gt; está sendo referenciada na tabela &lt;Hotran - Frequência&gt;&#39;
  Return
End
/* Portão»FIDS - IST Servidor de Informação: Portão Associado ao IST (Restrict) */
If (Select Count(*) From T_FIDS_IST dep, Deleted pri
 Where dep.CD_POR = pri.CD_POR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Portão&gt; está sendo referenciada na tabela &lt;FIDS - IST Servidor de Informação&gt;&#39;
  Return
End
/* Portão»Mensagem de Partida: Portão da Mensagem de Partida (Restrict) */
If (Select Count(*) From T_MPA dep, Deleted pri
 Where dep.CD_POR = pri.CD_POR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Portão&gt; está sendo referenciada na tabela &lt;Mensagem de Partida&gt;&#39;
  Return
End
/* Portão»Mensagem de Partida - Mirror: Portão da Mensagem de Partida (Restrict) */
If (Select Count(*) From T_MPA_MIR dep, Deleted pri
 Where dep.CD_POR = pri.CD_POR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Portão&gt; está sendo referenciada na tabela &lt;Mensagem de Partida - Mirror&gt;&#39;
  Return
End
/* Portão»Partidas: Portão da Partida (Restrict) */
If (Select Count(*) From T_PAR dep, Deleted pri
 Where dep.CD_POR = pri.CD_POR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Portão&gt; está sendo referenciada na tabela &lt;Partidas&gt;&#39;
  Return
End
/* Portão»Partidas - Mirror: Portão da Partida (Restrict) */
If (Select Count(*) From T_PAR_MIR dep, Deleted pri
 Where dep.CD_POR = pri.CD_POR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Portão&gt; está sendo referenciada na tabela &lt;Partidas - Mirror&gt;&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>D</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o349">
<a:ObjectID>6958A006-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_POR_TRI</a:Name>
<a:Code>T_POR_TRI</a:Code>
<a:Text>Create Trigger T_POR_TRI On T_POR
For Insert As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* Aeroporto»Portão: Aeroporto possui Portões */
If (Select Count(*) From T_AER, Inserted
Where T_AER.CD_AER = Inserted.CD_AER)
 &lt;&gt;(Select Count(CD_AER) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Aeroporto&gt; que se deseja incluir na tabela &lt;Portão&gt; não está cadastrada&#39;
  Return
End
/* Sala de Embarque»Portão: Sal.Emb. possui portões Emb. */
If (Select Count(*) From T_EMB, Inserted
Where T_EMB.CD_EMB = Inserted.CD_EMB)
 &lt;&gt;(Select Count(CD_EMB) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Sala de Embarque&gt; que se deseja incluir na tabela &lt;Portão&gt; não está cadastrada&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>I</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o350">
<a:ObjectID>6958A008-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_POR_TRU</a:Name>
<a:Code>T_POR_TRU</a:Code>
<a:Text>Create Trigger T_POR_TRU On T_POR
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_POR)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código do Portão&gt; da tabela &lt;Portão&gt; não pode ser alterada.&#39;
  Return
End
If Update (CD_AER)
/* Aeroporto»Portão: Aeroporto possui Portões */
If (Select Count(*) From T_AER, Inserted
Where T_AER.CD_AER = Inserted.CD_AER)
 &lt;&gt;(Select Count(CD_AER) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Aeroporto&gt; que se deseja incluir na tabela &lt;Portão&gt; não está cadastrada&#39;
  Return
End
If Update (CD_EMB)
/* Sala de Embarque»Portão: Sal.Emb. possui portões Emb. */
If (Select Count(*) From T_EMB, Inserted
Where T_EMB.CD_EMB = Inserted.CD_EMB)
 &lt;&gt;(Select Count(CD_EMB) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Sala de Embarque&gt; que se deseja incluir na tabela &lt;Portão&gt; não está cadastrada&#39;
  Return
End
/* Regra de negócio */
IF UPDATE(NR_POR) OR UPDATE(CD_EMB)
BEGIN
	/* Incluir Registros em T_APA */
	INSERT	T_APA (DH_APA, CD_PAR)
	Select 	GETDATE(), CD_PAR
	From 	T_PAR PAR, INSERTED INS
	Where	PAR.TP_PAR_STA = 1 AND
		PAR.CD_AER = (Select CD_AER From T_PSI) AND
		PAR.CD_POR = INS.CD_POR

	/* Incluir Registros em T_AHO */
	INSERT	T_AHO (CD_HOT, DH_AHO)
	Select	DISTINCT CD_HOT, GETDATE()
	From	T_HFR HFR, INSERTED INS
	Where	HFR.CD_POR = INS.CD_POR

	/* Incluir Registros em T_AHP */
	INSERT	T_AHP (CD_HPA, DH_AHP)
	Select 	DISTINCT CD_HPA, GETDATE()
	From 	T_HPA001 HPA, T_CHG CHG, T_SIT SIT, T_PAR PAR, INSERTED INS
	Where	HPA.CD_CHG = CHG.CD_CHG AND
		SIT.CD_SIT = CHG.CD_SIT AND
		HPA.CD_AER = (Select CD_AER From T_PSI) AND
		(HPA.FL_HPA_ENT = 1 OR SIT.FL_SIT_AEN_PAT = 1) AND
		HPA.FL_HPA_SAI = 0 AND
		HPA.CD_AEN IS NOT NULL AND
		PAR.CD_CHG_AEN_ANT = HPA.CD_CHG AND
		PAR.CD_POR = INS.CD_POR
END

End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o341"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o351">
<a:ObjectID>69589FB4-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_17</a:Name>
<a:Code>REFERENCE_17</a:Code>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o335"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o245"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o341"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o352">
<a:ObjectID>69589FB6-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o336"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o255"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o353">
<a:CenterTextOffset>(4, 0)</a:CenterTextOffset>
<a:Rect>((-702535,693958), (-695411,721261))</a:Rect>
<a:ListOfPoints>((-695846,721261),(-702089,693958))</a:ListOfPoints>
<a:ArrowStyle>4881</a:ArrowStyle>
<a:LineColor>32768</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Ref="o102"/>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Id="o354">
<a:Rect>((-707446,691421), (-701130,695967))</a:Rect>
<a:LineColor>32768</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o355">
<a:ObjectID>69589FDD-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_SIT</a:Name>
<a:Code>T_SIT</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o356">
<a:ObjectID>69589F2A-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_SIT</a:Name>
<a:Code>CD_SIT</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o357">
<a:ObjectID>69589F2C-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NM_SIT_LOC</a:Name>
<a:Code>NM_SIT_LOC</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>varchar(30)</a:DataType>
<a:Length>30</a:Length>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o358">
<a:ObjectID>69589F2E-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NM_SIT_EST</a:Name>
<a:Code>NM_SIT_EST</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>varchar(30)</a:DataType>
<a:Length>30</a:Length>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o359">
<a:ObjectID>69589F30-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NR_SIT_ORD</a:Name>
<a:Code>NR_SIT_ORD</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DefaultValue>/****** Object:  Default dbo.DF_VAL_ZRO    Script Date: 7/8/2000 12:14:36 ******/
Create Default        DF_VAL_ZRO As
0</a:DefaultValue>
<a:DataType>tinyint</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o360">
<a:ObjectID>69589F31-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>SG_SIT</a:Name>
<a:Code>SG_SIT</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>varchar(3)</a:DataType>
<a:Length>3</a:Length>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o361">
<a:ObjectID>69589F33-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>FL_SIT_PAR</a:Name>
<a:Code>FL_SIT_PAR</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>bit</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o362">
<a:ObjectID>69589F35-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>FL_SIT_CHG</a:Name>
<a:Code>FL_SIT_CHG</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>bit</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o363">
<a:ObjectID>69589F37-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>FL_SIT_REA</a:Name>
<a:Code>FL_SIT_REA</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>bit</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o364">
<a:ObjectID>69589F39-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>FL_SIT_HR1</a:Name>
<a:Code>FL_SIT_HR1</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>bit</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o365">
<a:ObjectID>69589F3A-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>FL_SIT_CON_VOO</a:Name>
<a:Code>FL_SIT_CON_VOO</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>bit</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o366">
<a:ObjectID>69589F3B-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>FL_SIT_CAN_VOO</a:Name>
<a:Code>FL_SIT_CAN_VOO</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>bit</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o367">
<a:ObjectID>69589F3D-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>FL_SIT_AEN_PAT</a:Name>
<a:Code>FL_SIT_AEN_PAT</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>bit</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o368">
<a:ObjectID>69589F3F-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>FL_SIT_TOD</a:Name>
<a:Code>FL_SIT_TOD</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>bit</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o369">
<a:ObjectID>69589F40-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TP_SIT_COM</a:Name>
<a:Code>TP_SIT_COM</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>tinyint</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o370">
<a:ObjectID>69589F41-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>HR_SIT_ANT</a:Name>
<a:Code>HR_SIT_ANT</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>int</a:DataType>
</o:Column>
<o:Column Id="o371">
<a:ObjectID>69589F43-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>HR_SIT_APS</a:Name>
<a:Code>HR_SIT_APS</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>int</a:DataType>
</o:Column>
<o:Column Id="o372">
<a:ObjectID>69589F45-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>FL_SIT_STF</a:Name>
<a:Code>FL_SIT_STF</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>bit</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o373">
<a:ObjectID>69589F47-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TIMESTAMP</a:Name>
<a:Code>TIMESTAMP</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o374">
<a:ObjectID>69589F4B-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_SIT</a:Name>
<a:Code>Pk_T_SIT</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_SIT</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o356"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Owner>
<o:User Ref="o16"/>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o375">
<a:ObjectID>6958A027-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_SIT_TRD</a:Name>
<a:Code>T_SIT_TRD</a:Code>
<a:Text>Create Trigger T_SIT_TRD On T_SIT
For Delete As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* Situação»Situação Sucessora: É Sucessora (Restrict) */
Declare @DBBDsc varchar(255)
Select @DBBDsc = &#39;(&#39;
Select @DBBDsc = @DBBDsc+RTrim(Convert(varchar(255),PRI.NM_SIT_LOC))+&#39;, &#39; From T_SSU dep, Deleted pri
 Where dep.CD_SIT_SUC = pri.CD_SIT
If DataLength(@DBBDsc) &gt; 1
Begin
  RollBack Transaction
  If DataLength(@DBBDsc) &gt; 252
    Select @DBBDsc = Substring(@DBBDsc,1,252)+&#39;...&#39;
  Else
    Select @DBBDsc = Substring(@DBBDsc,1,DataLength(@DBBDsc)-2)
  Select @DBBDsc = &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Situação&gt; está sendo referenciada na tabela &lt;Situação Sucessora&gt; &#39;+@DBBDsc+&#39;)&#39;
  RaisError 20003 @DBBDsc
  Return
End
/* Situação»Situação Condicionante do Vôo Antecessor: Situação Antecessora (Restrict) */
If (Select Count(*) From T_SCA dep, Deleted pri
 Where dep.CD_SIT_ANT = pri.CD_SIT) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Situação&gt; está sendo referenciada na tabela &lt;Situação Condicionante do Vôo Antecessor&gt;&#39;
  Return
End
/* Situação»Chegadas - Mirror: Situação da Chegada (Restrict) */
If (Select Count(*) From T_CHG_MIR dep, Deleted pri
 Where dep.CD_SIT = pri.CD_SIT) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Situação&gt; está sendo referenciada na tabela &lt;Chegadas - Mirror&gt;&#39;
  Return
End
/* Situação»Chegadas: Situação da Chegada (Restrict) */
If (Select Count(*) From T_CHG dep, Deleted pri
 Where dep.CD_SIT = pri.CD_SIT) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Situação&gt; está sendo referenciada na tabela &lt;Chegadas&gt;&#39;
  Return
End
/* Situação»Mensagem de Chegada: Situação da Mensagem de Chegada (Restrict) */
If (Select Count(*) From T_MCH dep, Deleted pri
 Where dep.CD_SIT = pri.CD_SIT) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Situação&gt; está sendo referenciada na tabela &lt;Mensagem de Chegada&gt;&#39;
  Return
End
/* Situação»Mensagem de Partida - Mirror: Situação da Mensagem de Partida (Restrict) */
If (Select Count(*) From T_MPA_MIR dep, Deleted pri
 Where dep.CD_SIT = pri.CD_SIT) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Situação&gt; está sendo referenciada na tabela &lt;Mensagem de Partida - Mirror&gt;&#39;
  Return
End
/* Situação»Mensagem de Partida: Situação da Mensagem de Partida (Restrict) */
If (Select Count(*) From T_MPA dep, Deleted pri
 Where dep.CD_SIT = pri.CD_SIT) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Situação&gt; está sendo referenciada na tabela &lt;Mensagem de Partida&gt;&#39;
  Return
End
/* Situação»Partidas - Mirror: Situação da Partida (Restrict) */
If (Select Count(*) From T_PAR_MIR dep, Deleted pri
 Where dep.CD_SIT = pri.CD_SIT) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Situação&gt; está sendo referenciada na tabela &lt;Partidas - Mirror&gt;&#39;
  Return
End
/* Situação»Partidas: Situação da Partida (Restrict) */
If (Select Count(*) From T_PAR dep, Deleted pri
 Where dep.CD_SIT = pri.CD_SIT) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Situação&gt; está sendo referenciada na tabela &lt;Partidas&gt;&#39;
  Return
End
/* Situação»Programação de Anúncios: Situação da Programação (Restrict) */
If (Select Count(*) From T_PRA dep, Deleted pri
 Where dep.CD_SIT = pri.CD_SIT) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Situação&gt; está sendo referenciada na tabela &lt;Programação de Anúncios&gt;&#39;
  Return
End
/* Situação»Mensagens: Situação das Mensagens (Restrict) */
If (Select Count(*) From T_MSG dep, Deleted pri
 Where dep.CD_SIT = pri.CD_SIT) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Situação&gt; está sendo referenciada na tabela &lt;Mensagens&gt;&#39;
  Return
End
/* Situação»Parâmetros do Sistema: Situação de Confirmação de Chegada (Restrict) */
If (Select Count(*) From T_PSI dep, Deleted pri
 Where dep.CD_SIT_CHG_CON = pri.CD_SIT) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Situação&gt; está sendo referenciada na tabela &lt;Parâmetros do Sistema&gt;&#39;
  Return
End
/* Situação»Parâmetros do Sistema: Situação de Confirmação de Partida (Restrict) */
If (Select Count(*) From T_PSI dep, Deleted pri
 Where dep.CD_SIT_PAR_CON = pri.CD_SIT) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Situação&gt; está sendo referenciada na tabela &lt;Parâmetros do Sistema&gt;&#39;
  Return
End
/* Situação»Mensagem de Chegada - Mirror: Situação de Mensagem de Chegada (Restrict) */
If (Select Count(*) From T_MCH_MIR dep, Deleted pri
 Where dep.CD_SIT = pri.CD_SIT) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Situação&gt; está sendo referenciada na tabela &lt;Mensagem de Chegada - Mirror&gt;&#39;
  Return
End
/* Situação»Histórico de Situação de Vôo de Chegada - Mirror: Situação do HSC (Restrict) */
If (Select Count(*) From T_HSC_MIR dep, Deleted pri
 Where dep.CD_SIT = pri.CD_SIT) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Situação&gt; está sendo referenciada na tabela &lt;Histórico de Situação de Vôo de Chegada - Mirror&gt;&#39;
  Return
End
/* Situação»Histórico de Situação de Vôo de Chegada: Situação do HSC (Restrict) */
If (Select Count(*) From T_HSC dep, Deleted pri
 Where dep.CD_SIT = pri.CD_SIT) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Situação&gt; está sendo referenciada na tabela &lt;Histórico de Situação de Vôo de Chegada&gt;&#39;
  Return
End
/* Situação»Histórico de Situação de Vôo de Partida - Mirror: Situação do HSP (Restrict) */
If (Select Count(*) From T_HSP_MIR dep, Deleted pri
 Where dep.CD_SIT = pri.CD_SIT) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Situação&gt; está sendo referenciada na tabela &lt;Histórico de Situação de Vôo de Partida - Mirror&gt;&#39;
  Return
End
/* Situação»Histórico de Situação de Vôo de Partida: Situação do HSP (Restrict) */
If (Select Count(*) From T_HSP dep, Deleted pri
 Where dep.CD_SIT = pri.CD_SIT) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Situação&gt; está sendo referenciada na tabela &lt;Histórico de Situação de Vôo de Partida&gt;&#39;
  Return
End
/* Situação»Parâmetros do Sistema: Situação Inicial de Chegada do Grupo 1 (Restrict) */
If (Select Count(*) From T_PSI dep, Deleted pri
 Where dep.CD_SIT_CHG_001 = pri.CD_SIT) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Situação&gt; está sendo referenciada na tabela &lt;Parâmetros do Sistema&gt;&#39;
  Return
End
/* Situação»Parâmetros do Sistema: Situação Inicial de Chegada do Grupo 2 (Restrict) */
If (Select Count(*) From T_PSI dep, Deleted pri
 Where dep.CD_SIT_CHG_002 = pri.CD_SIT) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Situação&gt; está sendo referenciada na tabela &lt;Parâmetros do Sistema&gt;&#39;
  Return
End
/* Situação»Parâmetros do Sistema: Situação Inicial de Partida do Grupo 1 (Restrict) */
If (Select Count(*) From T_PSI dep, Deleted pri
 Where dep.CD_SIT_PAR_001 = pri.CD_SIT) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Situação&gt; está sendo referenciada na tabela &lt;Parâmetros do Sistema&gt;&#39;
  Return
End
/* Situação»Parâmetros do Sistema: Situação Inicial de Partida do Grupo 2 (Restrict) */
If (Select Count(*) From T_PSI dep, Deleted pri
 Where dep.CD_SIT_PAR_002 = pri.CD_SIT) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Situação&gt; está sendo referenciada na tabela &lt;Parâmetros do Sistema&gt;&#39;
  Return
End
/* Situação»Situação Sucessora: Possui Sucessora (Cascade) */
Delete T_SSU From T_SSU dep, Deleted pri
 Where dep.CD_SIT = pri.CD_SIT
/* Situação»Situação Condicionante do Vôo Antecessor: Situação (Cascade) */
Delete T_SCA From T_SCA dep, Deleted pri
 Where dep.CD_SIT = pri.CD_SIT
/* Situação»Telas da Situação: Telas da Situação (Cascade) */
Delete T_TSI From T_TSI dep, Deleted pri
 Where dep.CD_SIT = pri.CD_SIT
End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>D</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o376">
<a:ObjectID>6958A029-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_SIT_TRI</a:Name>
<a:Code>T_SIT_TRI</a:Code>
<a:Text>Create Trigger T_SIT_TRI On T_SIT
For Insert As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* Domínio de: Tipo de Complemento da Sitação */
/* 1 - Hora */
/* 2 - Texto */
/* 3 - Nenhum */
If (Select Count(*) From Inserted
    Where TP_SIT_COM In (1,2,3))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Tipo de Complemento da Sitação&gt; que se deseja incluir na tabela &lt;Situação&gt; não é uma opção válida&#39;
  Return
End
/* Regra de negócio */
/* Verificar se há alguma situação que não seja nem de Chegada nem de Partida */
IF (	SELECT	COUNT(*)
	FROM	T_SIT SIT,
		INSERTED INS
	WHERE	SIT.CD_SIT = INS.CD_SIT AND
		INS.FL_SIT_CHG = 0 AND 
		INS.FL_SIT_PAR = 0) &gt; 0
BEGIN
	RAISERROR 20310 &#39;Operação não executada: Uma situação deve ser de chegada ou de partida ou de ambas.&#39;
	ROLLBACK TRANSACTION
	RETURN
END

/* Se existir mais de uma situação de ETAPA CONCLUÍDA não atualiza*/
IF (	SELECT 	COUNT(*) 
	FROM 	T_SIT SIT,
		INSERTED INS
	WHERE 	SIT.CD_SIT &lt;&gt; INS.CD_SIT AND
		SIT.FL_SIT_CON_VOO = 1 AND
		(SIT.FL_SIT_CHG = INS.FL_SIT_CHG OR SIT.FL_SIT_PAR = INS.FL_SIT_PAR) AND
		INS.FL_SIT_CON_VOO = 1) &gt; 0
BEGIN
	RAISERROR 20310 &#39;Operação não executada: Só pode existir uma única situação de vôo do tipo ETAPA CONCLUÍDA.&#39;
	ROLLBACK TRANSACTION
	RETURN
END

/* Se existir mais de uma situação do tipo CANCELADO não atualiza*/
IF (	SELECT 	COUNT(*) 
	FROM 	T_SIT SIT,
		INSERTED INS
	WHERE 	SIT.CD_SIT &lt;&gt; INS.CD_SIT AND
		SIT.FL_SIT_CAN_VOO = 1 AND
		(SIT.FL_SIT_CHG = INS.FL_SIT_CHG OR SIT.FL_SIT_PAR = INS.FL_SIT_PAR) AND
		INS.FL_SIT_CAN_VOO = 1 ) &gt; 0
BEGIN
	RAISERROR 20310 &#39;Operação não executada: Só pode existir uma única  situação de vôo do tipo ETAPA CANCELADA.&#39;
	ROLLBACK TRANSACTION
	RETURN
END

/* Se existir mais de uma situação do tipo AERONAVE NO PÁTIO não atualiza*/
IF (	SELECT 	COUNT(*) 
	FROM 	T_SIT SIT
	WHERE 	SIT.FL_SIT_AEN_PAT = 1) &gt; 1
BEGIN
	RAISERROR 20310 &#39;Operação não executada: Só pode existir uma única  situação de vôo do tipo AERONAVE NO PÁTIO.&#39;
	ROLLBACK TRANSACTION
	RETURN
END

End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>I</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o377">
<a:ObjectID>6958A02B-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_SIT_TRU</a:Name>
<a:Code>T_SIT_TRU</a:Code>
<a:Text>Create Trigger T_SIT_TRU On T_SIT
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_SIT)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código da Situação do Vôo&gt; da tabela &lt;Situação&gt; não pode ser alterada.&#39;
  Return
End
If Update (TP_SIT_COM)
/* Domínio de: Tipo de Complemento da Sitação */
/* 1 - Hora */
/* 2 - Texto */
/* 3 - Nenhum */
If (Select Count(*) From Inserted
    Where TP_SIT_COM In (1,2,3))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Tipo de Complemento da Sitação&gt; que se deseja incluir na tabela &lt;Situação&gt; não é uma opção válida&#39;
  Return
End
/* Regra de negócio */
/* Verificar se há alguma situação que não seja nem de Chegada nem de Partida */
IF (	SELECT	COUNT(*)
	FROM	T_SIT SIT,
		INSERTED INS
	WHERE	SIT.CD_SIT = INS.CD_SIT AND
		INS.FL_SIT_CHG = 0 AND 
		INS.FL_SIT_PAR = 0) &gt; 0
BEGIN
	RAISERROR 20310 &#39;Operação não executada: Uma situação deve ser de chegada ou de partida ou de ambas.&#39;
	ROLLBACK TRANSACTION
	RETURN
END

/* Se existir mais de uma situação de ETAPA CONCLUÍDA não atualiza*/
IF (	SELECT 	COUNT(*) 
	FROM 	T_SIT SIT,
		INSERTED INS
	WHERE 	SIT.CD_SIT &lt;&gt; INS.CD_SIT AND
		SIT.FL_SIT_CON_VOO = 1 AND
		(SIT.FL_SIT_CHG = INS.FL_SIT_CHG OR SIT.FL_SIT_PAR = INS.FL_SIT_PAR) AND
		INS.FL_SIT_CON_VOO = 1) &gt; 0
BEGIN
	RAISERROR 20310 &#39;Operação não executada: Só pode existir uma única situação de vôo do tipo ETAPA CONCLUÍDA.&#39;
	ROLLBACK TRANSACTION
	RETURN
END

/* Se existir mais de uma situação do tipo CANCELADO não atualiza*/
IF (	SELECT 	COUNT(*) 
	FROM 	T_SIT SIT,
		INSERTED INS
	WHERE 	SIT.CD_SIT &lt;&gt; INS.CD_SIT AND
		SIT.FL_SIT_CAN_VOO = 1 AND
		(SIT.FL_SIT_CHG = INS.FL_SIT_CHG OR SIT.FL_SIT_PAR = INS.FL_SIT_PAR) AND
		INS.FL_SIT_CAN_VOO = 1 ) &gt; 0
BEGIN
	RAISERROR 20310 &#39;Operação não executada: Só pode existir uma única  situação de vôo do tipo ETAPA CANCELADA.&#39;
	ROLLBACK TRANSACTION
	RETURN
END

/* Se existir mais de uma situação do tipo AERONAVE NO PÁTIO não atualiza*/
IF (	SELECT 	COUNT(*) 
	FROM 	T_SIT SIT
	WHERE 	SIT.FL_SIT_AEN_PAT = 1) &gt; 1
BEGIN
	RAISERROR 20310 &#39;Operação não executada: Só pode existir uma única  situação de vôo do tipo AERONAVE NO PÁTIO.&#39;
	ROLLBACK TRANSACTION
	RETURN
END

IF UPDATE (FL_SIT_CHG)
BEGIN
	/* Se uma situação de chegada deixar de ser de chegada */
	/* Verificar se há algum vôo de chegada com esta situação */
	IF (	SELECT	COUNT(*)
		FROM	INSERTED INS,
			DELETED DEL,
			T_CHG CHG
		WHERE	INS.CD_SIT = DEL.CD_SIT AND
			DEL.FL_SIT_CHG &lt;&gt; 0 AND
			INS.FL_SIT_CHG = 0 AND
			CHG.CD_SIT = INS.CD_SIT) &gt; 0
	BEGIN
		RAISERROR 20311 &#39;Operação não executada: Existe um vôo de chegada utilizando esta situação.&#39;
		ROLLBACK TRANSACTION
		RETURN
	END

	/* Se uma situação de chegada deixar de ser de chegada */
	/* Verificar se esta situação é situação condicionante de alguma situação de partida */
	IF (	SELECT	COUNT(*)
		FROM	INSERTED INS,
			DELETED DEL,
			T_SCA SCA
		WHERE	INS.CD_SIT = DEL.CD_SIT AND
			DEL.FL_SIT_CHG &lt;&gt; 0 AND
			INS.FL_SIT_CHG = 0 AND
			SCA.CD_SIT_ANT = INS.CD_SIT) &gt; 0
	BEGIN
		RAISERROR 20311 &#39;Operação não executada: Esta situação é uma situação condicionante de alguma situação de partida.&#39;
		ROLLBACK TRANSACTION
		RETURN
	END

	/* Se uma situação de chegada deixar de ser de chegada */
	/* Verificar se esta situação é situação sucessora de alguma situação de chegada */
	IF (	SELECT	COUNT(*)
		FROM	INSERTED INS,
			T_SSU SSU,
			T_SIT SIT
		WHERE	SSU.CD_SIT_SUC = INS.CD_SIT AND
			SIT.CD_SIT = SSU.CD_SIT AND
			INS.FL_SIT_CHG = 0 AND
			SIT.FL_SIT_CHG = 1) &gt; 0
	BEGIN
		RAISERROR 20311 &#39;Operação não executada: Esta situação é situação sucessora de uma situação de chegada. Por esta razão ela também tem de ser de chegada.&#39;
		ROLLBACK TRANSACTION
		RETURN
	END
END

IF UPDATE (FL_SIT_PAR)
BEGIN
	/* Se uma situação de partida deixar de ser de partida */
	/* Verificar se há algum vôo de partida com esta situação */
	IF (	SELECT	COUNT(*)
		FROM	INSERTED INS,
			DELETED DEL,
			T_PAR PAR
		WHERE	INS.CD_SIT = DEL.CD_SIT AND
			DEL.FL_SIT_PAR &lt;&gt; 0 AND
			INS.FL_SIT_PAR = 0 AND
			PAR.CD_SIT = INS.CD_SIT) &gt; 0
	BEGIN
		RAISERROR 20311 &#39;Operação não executada: Existe um vôo de partida utilizando esta situação.&#39;
		ROLLBACK TRANSACTION
		RETURN
	END

	/* Se uma situação de partida deixar de ser de partida */
	/* Verificar se esta situação possui alguma situação de chegada condicionante */
	IF (	SELECT	COUNT(*)
		FROM	INSERTED INS,
			DELETED DEL,
			T_SCA SCA
		WHERE	INS.CD_SIT = DEL.CD_SIT AND
			DEL.FL_SIT_PAR &lt;&gt; 0 AND
			INS.FL_SIT_PAR = 0 AND
			SCA.CD_SIT = INS.CD_SIT) &gt; 0
	BEGIN
		RAISERROR 20311 &#39;Operação não executada: Esta situação possui alguma situação de chegada condicionante.&#39;
		ROLLBACK TRANSACTION
		RETURN
	END

	/* Se uma situação de partida deixar de ser de partida */
	/* Verificar se esta situação é situação sucessora de alguma situação de partida */
	IF (	SELECT	COUNT(*)
		FROM	INSERTED INS,
			T_SSU SSU,
			T_SIT SIT
		WHERE	SSU.CD_SIT_SUC = INS.CD_SIT AND
			SIT.CD_SIT = SSU.CD_SIT AND
			INS.FL_SIT_PAR = 0 AND
			SIT.FL_SIT_PAR = 1) &gt; 0
	BEGIN
		RAISERROR 20311 &#39;Operação não executada: Esta situação é situação sucessora de uma situação de partida. Por esta razão ela também tem de ser de partida.&#39;
		ROLLBACK TRANSACTION
		RETURN
	END
END

/* Incluir Registros em T_ACH */
INSERT	T_ACH (DH_ACH, CD_CHG)
Select 	GETDATE(), CD_CHG
From 	T_CHG CHG, INSERTED INS
Where	CHG.TP_CHG_STA = 1 AND
	CHG.CD_AER = (Select CD_AER From T_PSI) AND
	CHG.CD_SIT = INS.CD_SIT

/* Incluir Registros em T_APA */
INSERT	T_APA (DH_APA, CD_PAR)
Select 	GETDATE(), CD_PAR
From 	T_PAR PAR, INSERTED INS
Where	PAR.TP_PAR_STA = 1 AND
	PAR.CD_AER = (Select CD_AER From T_PSI) AND
	PAR.CD_SIT = INS.CD_SIT

End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o374"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o378">
<a:ObjectID>69589FBE-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_20</a:Name>
<a:Code>REFERENCE_20</a:Code>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o355"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o103"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o374"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o379">
<a:ObjectID>69589FC0-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o356"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o109"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o380">
<a:CenterTextOffset>(-1346, 1500)</a:CenterTextOffset>
<a:Rect>((-717381,695207), (-703524,708804))</a:Rect>
<a:ListOfPoints>((-717381,708804),(-703524,695207))</a:ListOfPoints>
<a:ArrowStyle>4881</a:ArrowStyle>
<a:LineColor>32768</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Ref="o244"/>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Ref="o354"/>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o381">
<a:ObjectID>69589FC3-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_21</a:Name>
<a:Code>REFERENCE_21</a:Code>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o355"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o245"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o374"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o382">
<a:ObjectID>69589FC6-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o356"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o251"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o383">
<a:CenterTextOffset>(4, 0)</a:CenterTextOffset>
<a:Rect>((-709907,656579), (-702783,693350))</a:Rect>
<a:ListOfPoints>((-707383,656579),(-705316,693350))</a:ListOfPoints>
<a:ArrowStyle>4881</a:ArrowStyle>
<a:LineColor>32768</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Ref="o168"/>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Ref="o354"/>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o384">
<a:ObjectID>69589FC8-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_22</a:Name>
<a:Code>REFERENCE_22</a:Code>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o355"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o169"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o374"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o385">
<a:ObjectID>69589FCB-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o356"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o174"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o386">
<a:CenterTextOffset>(1204, 0)</a:CenterTextOffset>
<a:Rect>((-703902,682063), (-696615,693187))</a:Rect>
<a:ListOfPoints>((-699099,682063),(-703902,693187))</a:ListOfPoints>
<a:ArrowStyle>4881</a:ArrowStyle>
<a:LineColor>32768</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Ref="o207"/>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Ref="o354"/>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o387">
<a:ObjectID>69589FD0-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_24</a:Name>
<a:Code>REFERENCE_24</a:Code>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o355"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o208"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o374"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o388">
<a:ObjectID>69589FD2-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o356"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o213"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o389">
<a:CenterTextOffset>(4, 0)</a:CenterTextOffset>
<a:Rect>((-734114,672622), (-720398,683940))</a:Rect>
<a:ListOfPoints>((-734114,672622),(-720398,683940))</a:ListOfPoints>
<a:ArrowStyle>4882</a:ArrowStyle>
<a:LineColor>32768</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Ref="o6"/>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Id="o390">
<a:Rect>((-721301,681825), (-714675,686371))</a:Rect>
<a:LineColor>32768</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o391">
<a:ObjectID>69589FF1-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_TPA</a:Name>
<a:Code>T_TPA</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o392">
<a:ObjectID>69589F4D-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_TPA</a:Name>
<a:Code>CD_TPA</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o393">
<a:ObjectID>69589F4F-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NM_TPA</a:Name>
<a:Code>NM_TPA</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>char(30)</a:DataType>
<a:Length>30</a:Length>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o394">
<a:ObjectID>69589F51-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TP_TPA</a:Name>
<a:Code>TP_TPA</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o395">
<a:ObjectID>69589F53-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TP_MSG</a:Name>
<a:Code>TP_MSG</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o396">
<a:ObjectID>69589F55-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TIMESTAMP</a:Name>
<a:Code>TIMESTAMP</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o397">
<a:ObjectID>69589F67-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_TPA</a:Name>
<a:Code>Pk_T_TPA</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_TPA</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o392"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Indexes>
<o:Index Id="o398">
<a:ObjectID>69589F59-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_TPAMSG</a:Name>
<a:Code>I_TPAMSG</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:IndexColumns>
<o:IndexColumn Id="o399">
<a:ObjectID>69589F5B-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o395"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
<o:Index Id="o400">
<a:ObjectID>69589F5D-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_TPATPA</a:Name>
<a:Code>I_TPATPA</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:IndexColumns>
<o:IndexColumn Id="o401">
<a:ObjectID>69589F5F-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o394"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
<o:Index Id="o402">
<a:ObjectID>69589F61-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_TPATPAMSG</a:Name>
<a:Code>I_TPATPAMSG</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:IndexColumns>
<o:IndexColumn Id="o403">
<a:ObjectID>69589F63-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o394"/>
</c:Column>
</o:IndexColumn>
<o:IndexColumn Id="o404">
<a:ObjectID>69589F65-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_1&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o395"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
</c:Indexes>
<c:Owner>
<o:User Ref="o16"/>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o405">
<a:ObjectID>69589E9A-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_TPA_TRD</a:Name>
<a:Code>T_TPA_TRD</a:Code>
<a:Text>Create Trigger T_TPA_TRD On T_TPA
For Delete As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* Tipo de Anuncio»Área de Anúncio do Tipo de Anúncio: R:TPA-ATA (Restrict) */
If (Select Count(*) From T_ATA dep, Deleted pri
 Where dep.CD_TPA = pri.CD_TPA) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Tipo de Anuncio&gt; está sendo referenciada na tabela &lt;Área de Anúncio do Tipo de Anúncio&gt;&#39;
  Return
End
/* Tipo de Anuncio»Mensagem de Chegada - Mirror: Tipo de Anúncio da Mensagem de Chegada (Restrict) */
If (Select Count(*) From T_MCH_MIR dep, Deleted pri
 Where dep.CD_TPA = pri.CD_TPA) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Tipo de Anuncio&gt; está sendo referenciada na tabela &lt;Mensagem de Chegada - Mirror&gt;&#39;
  Return
End
/* Tipo de Anuncio»Mensagem de Chegada: Tipo de Anúncio da Mensagem de Chegada (Restrict) */
If (Select Count(*) From T_MCH dep, Deleted pri
 Where dep.CD_TPA = pri.CD_TPA) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Tipo de Anuncio&gt; está sendo referenciada na tabela &lt;Mensagem de Chegada&gt;&#39;
  Return
End
/* Tipo de Anuncio»Mensagem de Partida: Tipo de Anúncio da Mensagem de Partida (Restrict) */
If (Select Count(*) From T_MPA dep, Deleted pri
 Where dep.CD_TPA = pri.CD_TPA) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Tipo de Anuncio&gt; está sendo referenciada na tabela &lt;Mensagem de Partida&gt;&#39;
  Return
End
/* Tipo de Anuncio»Mensagem de Partida - Mirror: Tipo de Anúncio da Mensagem de Partida (Restrict) */
If (Select Count(*) From T_MPA_MIR dep, Deleted pri
 Where dep.CD_TPA = pri.CD_TPA) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Tipo de Anuncio&gt; está sendo referenciada na tabela &lt;Mensagem de Partida - Mirror&gt;&#39;
  Return
End
/* Tipo de Anuncio»Programação de Anúncios: Tipo de anúncio da programação (Restrict) */
If (Select Count(*) From T_PRA dep, Deleted pri
 Where dep.CD_TPA = pri.CD_TPA) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Tipo de Anuncio&gt; está sendo referenciada na tabela &lt;Programação de Anúncios&gt;&#39;
  Return
End
/* Tipo de Anuncio»Mensagens: Tipo de Mensagem (Restrict) */
If (Select Count(*) From T_MSG dep, Deleted pri
 Where dep.CD_TPA = pri.CD_TPA) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Tipo de Anuncio&gt; está sendo referenciada na tabela &lt;Mensagens&gt;&#39;
  Return
End
/* Tipo de Anuncio»Log da Programação de Anúncios: C:TPA-PRALOG (Cascade) */
Delete T_PRALOG From T_PRALOG dep, Deleted pri
 Where dep.CD_TPA = pri.CD_TPA
End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>D</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o406">
<a:ObjectID>69589E9B-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_TPA_TRI</a:Name>
<a:Code>T_TPA_TRI</a:Code>
<a:Text>Create Trigger T_TPA_TRI On T_TPA
For Insert As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* Domínio de: Tipo do Tipo de Anuncio */
/* 1 - Anuncio de Chegada */
/* 2 - Anuncio de Partida */
/* 3 - Mensagens diversas */
If (Select Count(*) From Inserted
    Where TP_TPA In (1,2,3))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Tipo do Tipo de Anuncio&gt; que se deseja incluir na tabela &lt;Tipo de Anuncio&gt; não é uma opção válida&#39;
  Return
End
/* Domínio de: Mensagem */
/* 1 - Anunciador Automático */
/* 2 - Atendimento Telefônico */
/* 3 - Situação */
If (Select Count(*) From Inserted
    Where TP_MSG In (1,2,3))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Mensagem&gt; que se deseja incluir na tabela &lt;Tipo de Anuncio&gt; não é uma opção válida&#39;
  Return
End
/* Regra de negócio */
IF (	SELECT 	COUNT(*)
	FROM	INSERTED
	WHERE	TP_TPA = 3 AND
		TP_MSG = 3) &gt; 0
BEGIN
	RAISERROR 20999 &#39;Operação não executada: Não pode existir &lt;Mensagens Diversas&gt; para &lt;Mensagem de Situação&gt;.&#39;
	ROLLBACK TRANSACTION
	RETURN
END

End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>I</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o407">
<a:ObjectID>69589E9D-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_TPA_TRU</a:Name>
<a:Code>T_TPA_TRU</a:Code>
<a:Text>Create Trigger T_TPA_TRU On T_TPA
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_TPA)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código do Tipo de Anuncio&gt; da tabela &lt;Tipo de Anuncio&gt; não pode ser alterada.&#39;
  Return
End
If Update (TP_TPA)
Or Update (TP_MSG)
/* Domínio de: Tipo do Tipo de Anuncio */
/* 1 - Anuncio de Chegada */
/* 2 - Anuncio de Partida */
/* 3 - Mensagens diversas */
If (Select Count(*) From Inserted
    Where TP_TPA In (1,2,3))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Tipo do Tipo de Anuncio&gt; que se deseja incluir na tabela &lt;Tipo de Anuncio&gt; não é uma opção válida&#39;
  Return
End
/* Domínio de: Mensagem */
/* 1 - Anunciador Automático */
/* 2 - Atendimento Telefônico */
/* 3 - Situação */
If (Select Count(*) From Inserted
    Where TP_MSG In (1,2,3))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Mensagem&gt; que se deseja incluir na tabela &lt;Tipo de Anuncio&gt; não é uma opção válida&#39;
  Return
End
/* Regra de negócio */
IF (	SELECT 	COUNT(*)
	FROM	INSERTED
	WHERE	TP_TPA = 3 AND
		TP_MSG = 3) &gt; 0
BEGIN
	RAISERROR 20999 &#39;Operação não executada: Não pode existir &lt;Mensagens Diversas&gt; para &lt;Mensagem de Situação&gt;.&#39;
	ROLLBACK TRANSACTION
	RETURN
END

if 	Update (TP_TPA) Or 
	Update (TP_MSG)
BEGIN
	IF (	SELECT 	COUNT(*)
		FROM	INSERTED INS, T_MSG MSG
		WHERE	MSG.CD_TPA = INS.CD_TPA) &gt; 0
	BEGIN
		RAISERROR 20999 &#39;Operação não executada: Não se pode alterar os tipos de anúncios que já possuem anúncios.&#39;
		ROLLBACK TRANSACTION
		RETURN
	END

END
End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o397"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o408">
<a:ObjectID>69589FD5-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_25</a:Name>
<a:Code>REFERENCE_25</a:Code>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o391"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o7"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o397"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o409">
<a:ObjectID>69589FD8-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o392"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o10"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o410">
<a:CenterTextOffset>(1354, 1800)</a:CenterTextOffset>
<a:Rect>((-716768,684200), (-697184,720862))</a:Rect>
<a:ListOfPoints>((-697184,720862),(-716768,684200))</a:ListOfPoints>
<a:ArrowStyle>4881</a:ArrowStyle>
<a:LineColor>32768</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Ref="o102"/>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Ref="o390"/>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o411">
<a:ObjectID>69589FDA-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_26</a:Name>
<a:Code>REFERENCE_26</a:Code>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o391"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o103"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o397"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o412">
<a:ObjectID>69589FDC-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o392"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o111"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o413">
<a:CenterTextOffset>(1504, 0)</a:CenterTextOffset>
<a:Rect>((-720926,684800), (-713202,707900))</a:Rect>
<a:ListOfPoints>((-717068,707900),(-717068,684800))</a:ListOfPoints>
<a:ArrowStyle>4881</a:ArrowStyle>
<a:LineColor>32768</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Ref="o244"/>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Ref="o390"/>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o414">
<a:ObjectID>69589FDF-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_27</a:Name>
<a:Code>REFERENCE_27</a:Code>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o391"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o245"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o397"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o415">
<a:ObjectID>69589FE1-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o392"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o253"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o416">
<a:CenterTextOffset>(6, 0)</a:CenterTextOffset>
<a:Rect>((-716450,657675), (-708726,683584))</a:Rect>
<a:ListOfPoints>((-709221,657675),(-716229,683584))</a:ListOfPoints>
<a:ArrowStyle>4882</a:ArrowStyle>
<a:LineColor>32768</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Ref="o168"/>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Ref="o390"/>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o417">
<a:ObjectID>69589FE4-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_28</a:Name>
<a:Code>REFERENCE_28</a:Code>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o391"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o169"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o397"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o418">
<a:ObjectID>69589FE7-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o392"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o172"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o419">
<a:CenterTextOffset>(4, 0)</a:CenterTextOffset>
<a:Rect>((-722054,668926), (-714330,683867))</a:Rect>
<a:ListOfPoints>((-719398,668926),(-717160,683867))</a:ListOfPoints>
<a:ArrowStyle>4882</a:ArrowStyle>
<a:LineColor>32768</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Ref="o206"/>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Ref="o390"/>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o420">
<a:ObjectID>69589FEA-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_29</a:Name>
<a:Code>REFERENCE_29</a:Code>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o391"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o208"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o397"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o421">
<a:ObjectID>69589FEC-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o392"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o211"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o422">
<a:CenterTextOffset>(2104, -18150)</a:CenterTextOffset>
<a:Rect>((-745765,653066), (-738041,721352))</a:Rect>
<a:ListOfPoints>((-741913,653066),(-741904,721352))</a:ListOfPoints>
<a:ArrowStyle>4882</a:ArrowStyle>
<a:LineColor>32768</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Ref="o32"/>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Id="o423">
<a:Rect>((-742600,718312), (-735974,722858))</a:Rect>
<a:LineColor>32768</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o424">
<a:ObjectID>69589FF9-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_USR</a:Name>
<a:Code>T_USR</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o425">
<a:ObjectID>69589F69-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_USR</a:Name>
<a:Code>CD_USR</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o426">
<a:ObjectID>69589F6B-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NM_USR_PAS</a:Name>
<a:Code>NM_USR_PAS</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>char(30)</a:DataType>
<a:Length>30</a:Length>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o427">
<a:ObjectID>69589F6D-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TIMESTAMP</a:Name>
<a:Code>TIMESTAMP</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o428">
<a:ObjectID>69589F71-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_USR</a:Name>
<a:Code>Pk_T_USR</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_USR</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o425"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Owner>
<o:User Ref="o16"/>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o429">
<a:ObjectID>69589EA0-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_USR_TRD</a:Name>
<a:Code>T_USR_TRD</a:Code>
<a:Text>Create Trigger T_USR_TRD On T_USR
For Delete As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* Usuários»Chamadas de Anuncio - Mirror: Usuário da Chamada (Restrict) */
If (Select Count(*) From T_CHA_MIR dep, Deleted pri
 Where dep.CD_USR = pri.CD_USR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Usuários&gt; está sendo referenciada na tabela &lt;Chamadas de Anuncio - Mirror&gt;&#39;
  Return
End
/* Usuários»Chamadas de Anuncio: Usuário da Chamada (Restrict) */
If (Select Count(*) From T_CHA dep, Deleted pri
 Where dep.CD_USR = pri.CD_USR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Usuários&gt; está sendo referenciada na tabela &lt;Chamadas de Anuncio&gt;&#39;
  Return
End
/* Usuários»Mensagem de Chegada - Mirror: Usuário da Mensagem de Chegada (Restrict) */
If (Select Count(*) From T_MCH_MIR dep, Deleted pri
 Where dep.CD_USR = pri.CD_USR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Usuários&gt; está sendo referenciada na tabela &lt;Mensagem de Chegada - Mirror&gt;&#39;
  Return
End
/* Usuários»Mensagem de Chegada: Usuário da Mensagem de Chegada (Restrict) */
If (Select Count(*) From T_MCH dep, Deleted pri
 Where dep.CD_USR = pri.CD_USR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Usuários&gt; está sendo referenciada na tabela &lt;Mensagem de Chegada&gt;&#39;
  Return
End
/* Usuários»Mensagem de Partida: Usuário da Mensagem de Partida (Restrict) */
If (Select Count(*) From T_MPA dep, Deleted pri
 Where dep.CD_USR = pri.CD_USR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Usuários&gt; está sendo referenciada na tabela &lt;Mensagem de Partida&gt;&#39;
  Return
End
/* Usuários»Mensagem de Partida - Mirror: Usuário da Mensagem de Partida (Restrict) */
If (Select Count(*) From T_MPA_MIR dep, Deleted pri
 Where dep.CD_USR = pri.CD_USR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Usuários&gt; está sendo referenciada na tabela &lt;Mensagem de Partida - Mirror&gt;&#39;
  Return
End
/* Usuários»Chegadas - Mirror: Usuário Logado (Restrict) */
If (Select Count(*) From T_CHG_MIR dep, Deleted pri
 Where dep.CD_USR = pri.CD_USR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Usuários&gt; está sendo referenciada na tabela &lt;Chegadas - Mirror&gt;&#39;
  Return
End
/* Usuários»Partidas - Mirror: Usuário Logado (Restrict) */
If (Select Count(*) From T_PAR_MIR dep, Deleted pri
 Where dep.CD_USR = pri.CD_USR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Usuários&gt; está sendo referenciada na tabela &lt;Partidas - Mirror&gt;&#39;
  Return
End
/* Usuários»Histórico de Situação de Vôo de Chegada - Mirror: Usuário Logado (Restrict) */
If (Select Count(*) From T_HSC_MIR dep, Deleted pri
 Where dep.CD_USR = pri.CD_USR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Usuários&gt; está sendo referenciada na tabela &lt;Histórico de Situação de Vôo de Chegada - Mirror&gt;&#39;
  Return
End
/* Usuários»Histórico de Situação de Vôo de Partida - Mirror: Usuário Logado (Restrict) */
If (Select Count(*) From T_HSP_MIR dep, Deleted pri
 Where dep.CD_USR = pri.CD_USR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Usuários&gt; está sendo referenciada na tabela &lt;Histórico de Situação de Vôo de Partida - Mirror&gt;&#39;
  Return
End
/* Usuários»Histórico de Situação de Vôo de Chegada: Usuário logado (Restrict) */
If (Select Count(*) From T_HSC dep,Deleted pri
 Where dep.CD_USR = pri.CD_USR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Usuários&gt; está sendo referenciada na tabela &lt;Histórico de Situação de Vôo de Chegada&gt;&#39;
  Return
End
/* Usuários»Histórico de Situação de Vôo de Partida: Usuário logado (Restrict) */
If (Select Count(*) From T_HSP dep, Deleted pri
 Where dep.CD_USR = pri.CD_USR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Usuários&gt; está sendo referenciada na tabela &lt;Histórico de Situação de Vôo de Partida&gt;&#39;
  Return
End
/* Usuários»Chegadas: Usuário logado (Restrict) */
If (Select Count(*) From T_CHG dep, Deleted pri
 Where dep.CD_USR = pri.CD_USR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Usuários&gt; está sendo referenciada na tabela &lt;Chegadas&gt;&#39;
  Return
End
/* Usuários»Partidas: Usuário logado (Restrict) */
If (Select Count(*) From T_PAR dep, Deleted pri
 Where dep.CD_USR = pri.CD_USR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Usuários&gt; está sendo referenciada na tabela &lt;Partidas&gt;&#39;
  Return
End
/* Usuários»Usuários do Grupo: Usuários do Grupo (Restrict) */
If (Select Count(*) From T_USG dep, Deleted pri
 Where dep.CD_USR = pri.CD_USR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Usuários&gt; está sendo referenciada na tabela &lt;Usuários do Grupo&gt;&#39;
  Return
End
/* Usuários»FIDS - Usuário do Grupo de Displays: Usuários do Grupo de Displays (Restrict) */
If (Select Count(*) From T_FIDS_DGU dep, Deleted pri
 Where dep.CD_USR = pri.CD_USR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Usuários&gt; está sendo referenciada na tabela &lt;FIDS - Usuário do Grupo de Displays&gt;&#39;
  Return
End
/* Usuários»Log da Programação de Anúncios: C:USR-PRALOG (Cascade) */
Delete T_PRALOG From T_PRALOG dep, Deleted pri
 Where dep.CD_USR = pri.CD_USR
/* Regra de negócio */
/* INCLUIR REGISTROS EM T_AUS */
INSERT	T_AUS (DH_AUS, CD_USR)
SELECT GETDATE(), CD_USR FROM DELETED

End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>D</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o430">
<a:ObjectID>69589EA1-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_USR_TRI</a:Name>
<a:Code>T_USR_TRI</a:Code>
<a:Text>Create Trigger T_USR_TRI On T_USR
For Insert As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* Pessoas»Usuários: Pessoa do Usuário */
If (Select Count(*) From T_PES, Inserted
Where T_PES.CD_PES = Inserted.CD_USR)
 &lt;&gt;(Select Count(CD_USR) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Pessoas&gt; que se deseja incluir na tabela &lt;Usuários&gt; não está cadastrada&#39;
  Return
End
/* Regra de negócio */
/* INCLUIR REGISTROS EM T_AUS */
INSERT	T_AUS (DH_AUS, CD_USR)
SELECT GETDATE(), CD_USR FROM INSERTED

End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>I</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o431">
<a:ObjectID>69589EA3-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_USR_TRU</a:Name>
<a:Code>T_USR_TRU</a:Code>
<a:Text>Create Trigger T_USR_TRU On T_USR
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_USR)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código do Usuário&gt; da tabela &lt;Usuários&gt; não pode ser alterada.&#39;
  Return
End
/* Regra de negócio */
/* INCLUIR REGISTROS EM T_AUS */
INSERT	T_AUS (DH_AUS, CD_USR)
SELECT GETDATE(), CD_USR FROM INSERTED

End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o428"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o432">
<a:ObjectID>69589FEE-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_30</a:Name>
<a:Code>REFERENCE_30</a:Code>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o424"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o34"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o428"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o433">
<a:ObjectID>69589FF0-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o425"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o41"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o434">
<a:CenterTextOffset>(3, 0)</a:CenterTextOffset>
<a:Rect>((-739558,721895), (-697816,723194))</a:Rect>
<a:ListOfPoints>((-697816,722000),(-739558,721895))</a:ListOfPoints>
<a:ArrowStyle>4882</a:ArrowStyle>
<a:LineColor>32768</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Ref="o102"/>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Ref="o423"/>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o435">
<a:ObjectID>69589FF8-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_32</a:Name>
<a:Code>REFERENCE_32</a:Code>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o424"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o103"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o428"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o436">
<a:ObjectID>69589FFB-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o425"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o106"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o437">
<a:Rect>((-739268,708800), (-719116,721700))</a:Rect>
<a:ListOfPoints>((-719116,708800),(-739268,721700))</a:ListOfPoints>
<a:ArrowStyle>4882</a:ArrowStyle>
<a:LineColor>32768</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Ref="o244"/>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Ref="o423"/>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o438">
<a:ObjectID>69589FFD-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_33</a:Name>
<a:Code>REFERENCE_33</a:Code>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o424"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o245"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o428"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o439">
<a:ObjectID>69589FFF-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620527</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620527</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o425"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o248"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o440">
<a:CenterTextOffset>(1350, -450)</a:CenterTextOffset>
<a:Rect>((-736216,701657), (-728256,714050))</a:Rect>
<a:ListOfPoints>((-736216,714050),(-730806,701657))</a:ListOfPoints>
<a:ArrowStyle>4881</a:ArrowStyle>
<a:LineColor>32768</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Ref="o131"/>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Id="o441">
<a:Rect>((-734269,699384), (-727643,703930))</a:Rect>
<a:LineColor>32768</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o442">
<a:ObjectID>69589FBA-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_PES</a:Name>
<a:Code>T_PES</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o443">
<a:ObjectID>69589EC5-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_PES</a:Name>
<a:Code>CD_PES</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o444">
<a:ObjectID>69589EC6-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NM_PES</a:Name>
<a:Code>NM_PES</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>char(40)</a:DataType>
<a:Length>40</a:Length>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o445">
<a:ObjectID>69589EC7-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TP_PES</a:Name>
<a:Code>TP_PES</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DefaultValue>/****** Object:  Default dbo.DF_VAL_001    Script Date: 7/8/2000 12:14:36 ******/
Create Default        DF_VAL_001 As
1</a:DefaultValue>
<a:DataType>tinyint</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o446">
<a:ObjectID>69589EC8-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TIMESTAMP</a:Name>
<a:Code>TIMESTAMP</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o447">
<a:ObjectID>69589ECB-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_PES</a:Name>
<a:Code>Pk_T_PES</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_PES</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o443"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Indexes>
<o:Index Id="o448">
<a:ObjectID>69589EC9-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_PES_NOM</a:Name>
<a:Code>I_PES_NOM</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Unique>1</a:Unique>
<c:IndexColumns>
<o:IndexColumn Id="o449">
<a:ObjectID>69589ECA-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o444"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
</c:Indexes>
<c:Owner>
<o:User Ref="o16"/>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o450">
<a:ObjectID>69589FF2-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_PES_TRD</a:Name>
<a:Code>T_PES_TRD</a:Code>
<a:Text>Create Trigger T_PES_TRD On T_PES
For Delete As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* Pessoas»Informante da Situação de Vôo: Pessoa do Informante (Cascade) */
Delete T_IFT From T_IFT dep, Deleted pri
 Where dep.CD_IFT = pri.CD_PES
/* Pessoas»Usuários: Pessoa do Usuário (Cascade) */
Delete T_USR From T_USR dep, Deleted pri
 Where dep.CD_USR = pri.CD_PES
End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>D</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o451">
<a:ObjectID>69589FF4-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_PES_TRI</a:Name>
<a:Code>T_PES_TRI</a:Code>
<a:Text>Create Trigger T_PES_TRI On T_PES
For Insert As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* Domínio de: Tipo de Pessoa */
/* 1 - Física */
/* 2 - Jurídica */
If (Select Count(*) From Inserted
    Where TP_PES In (1,2))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Tipo de Pessoa&gt; que se deseja incluir na tabela &lt;Pessoas&gt; não é uma opção válida&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>I</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o452">
<a:ObjectID>69589FF6-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_PES_TRU</a:Name>
<a:Code>T_PES_TRU</a:Code>
<a:Text>Create Trigger T_PES_TRU On T_PES
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_PES)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código da Pessoa&gt; da tabela &lt;Pessoas&gt; não pode ser alterada.&#39;
  Return
End
If Update (TP_PES)
/* Domínio de: Tipo de Pessoa */
/* 1 - Física */
/* 2 - Jurídica */
If (Select Count(*) From Inserted
    Where TP_PES In (1,2))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Tipo de Pessoa&gt; que se deseja incluir na tabela &lt;Pessoas&gt; não é uma opção válida&#39;
  Return
End
/* Regra de negócio */
/* INCLUIR REGISTROS EM T_AUS SE A PESSOA ALTERADA FOR USUÁRIO*/
INSERT	T_AUS (DH_AUS, CD_USR)
Select	GETDATE(), CD_PES
From	INSERTED INS, T_USR USR

Where	INS.CD_PES = USR.CD_USR
End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o447"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o453">
<a:ObjectID>69589F7D-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_35</a:Name>
<a:Code>REFERENCE_35</a:Code>
<a:CreationDate>1081624823</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081624823</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o442"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o132"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o447"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o454">
<a:ObjectID>69589F7F-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081624823</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081624823</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o443"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o135"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o455">
<a:CenterTextOffset>(-600, -2475)</a:CenterTextOffset>
<a:Rect>((-732364,666213), (-721339,670475))</a:Rect>
<a:ListOfPoints>((-722839,668075),(-726814,668000),(-726889,669275),(-726889,670325),(-721339,670475))</a:ListOfPoints>
<a:ArrowStyle>4882</a:ArrowStyle>
<a:LineColor>32768</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Ref="o206"/>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Ref="o206"/>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o456">
<a:ObjectID>69589F1E-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_36</a:Name>
<a:Code>REFERENCE_36</a:Code>
<a:CreationDate>1081626817</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081627252</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o208"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o208"/>
</c:Object2>
<c:Joins>
<o:ReferenceJoin Id="o457">
<a:ObjectID>69589F24-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081627252</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081627252</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o218"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o212"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:TableSymbol Ref="o142"/>
<o:TableSymbol Ref="o49"/>
<o:TableSymbol Ref="o32"/>
<o:TableSymbol Ref="o6"/>
<o:TableSymbol Ref="o190"/>
<o:TableSymbol Ref="o102"/>
<o:TableSymbol Ref="o244"/>
<o:TableSymbol Ref="o168"/>
<o:TableSymbol Ref="o19"/>
<o:TableSymbol Ref="o276"/>
<o:TableSymbol Ref="o441"/>
<o:TableSymbol Ref="o334"/>
<o:TableSymbol Ref="o206"/>
<o:TableSymbol Id="o458">
<a:Rect>((-735894,659846), (-729268,663446))</a:Rect>
<a:LineColor>32768</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o459">
<a:ObjectID>69589FCF-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_PSS</a:Name>
<a:Code>T_PSS</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o460">
<a:ObjectID>69589F11-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_PSS</a:Name>
<a:Code>CD_PSS</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o461">
<a:ObjectID>69589F13-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NM_PSS</a:Name>
<a:Code>NM_PSS</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>varchar(30)</a:DataType>
<a:Length>30</a:Length>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o462">
<a:ObjectID>69589F16-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TP_PSS</a:Name>
<a:Code>TP_PSS</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>tinyint</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o463">
<a:ObjectID>69589F18-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TP_PSS_INT</a:Name>
<a:Code>TP_PSS_INT</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>tinyint</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o464">
<a:ObjectID>69589F1A-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NM_PSS_POR</a:Name>
<a:Code>NM_PSS_POR</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>varchar(30)</a:DataType>
<a:Length>30</a:Length>
</o:Column>
<o:Column Id="o465">
<a:ObjectID>69589F1B-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NR_PSS_POR</a:Name>
<a:Code>NR_PSS_POR</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
</o:Column>
<o:Column Id="o466">
<a:ObjectID>69589F1D-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NM_PSS_IP</a:Name>
<a:Code>NM_PSS_IP</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>varchar(15)</a:DataType>
<a:Length>15</a:Length>
</o:Column>
<o:Column Id="o467">
<a:ObjectID>69589F20-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>FL_PSS</a:Name>
<a:Code>FL_PSS</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>bit</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o468">
<a:ObjectID>69589F22-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Timestamp</a:Name>
<a:Code>Timestamp</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o469">
<a:ObjectID>69589F28-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_PSS</a:Name>
<a:Code>Pk_T_PSS</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_PSS</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o460"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Owner>
<o:User Ref="o16"/>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o470">
<a:ObjectID>6958A01B-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_PSS_TRI</a:Name>
<a:Code>T_PSS_TRI</a:Code>
<a:Text>Create Trigger T_PSS_TRI On T_PSS
For Insert As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* Domínio de: Tipo de Sistema de Som */
/* 1 - RCN Mod 1 */
/* 2 - IBM Mod 1 */
If (Select Count(*) From Inserted
    Where TP_PSS In (1,2))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Tipo de Sistema de Som&gt; que se deseja incluir na tabela &lt;Protocolo Sistema de Som&gt; não é uma opção válida&#39;
  Return
End
/* Domínio de: Tipo de Interface de Comunicação */
/* 1 - TCP/IP */
/* 2 - RS232 */
/* 3 - Paralela */
If (Select Count(*) From Inserted
    Where TP_PSS_INT In (1,2,3))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Tipo de Interface de Comunicação&gt; que se deseja incluir na tabela &lt;Protocolo Sistema de Som&gt; não é uma opção válida&#39;
  Return
End
/* Regra de negócio */
/* Só pode existir um único Protocolo do Sistema de Som em Uso */
IF (	SELECT 	COUNT(*) 
	FROM 	T_PSS PSS,
		INSERTED INS
	WHERE 	PSS.CD_PSS &lt;&gt; INS.CD_PSS AND
		INS.FL_PSS = 1 AND
		PSS.FL_PSS = 1) &gt; 0
BEGIN
	RAISERROR 20310 &#39;Operação não executada: Só pode existir um Protocolo do Sistema de Som em Uso.&#39;
	ROLLBACK TRANSACTION
	RETURN
END

/* Declaração do cursor */
DECLARE INSPSS CURSOR FOR
	SELECT 	NM_PSS_IP
	,	NM_PSS_POR
	,	NR_PSS_POR
	,	TP_PSS_INT
	FROM	INSERTED INS

/*
	TP_PSS_INT
	1-TCP/IP
	2-RS232
	3-Paralela
*/

/* Declaração das variáveis que receberão o cursor */
DECLARE @NM_PSS_IP  VARCHAR(15)
DECLARE @NM_PSS_POR VARCHAR(30)
DECLARE @NR_PSS_POR INT
DECLARE @TP_PSS_INT INT

/* Abertura do cursor */
OPEN INSPSS

/* Ir para o primeiro registro */
FETCH	INSPSS
INTO	@NM_PSS_IP
,	@NM_PSS_POR
,	@NR_PSS_POR
,	@TP_PSS_INT

/* Processar todos os registros de INSPSS*/
WHILE @@FETCH_STATUS = 0
BEGIN

	IF @TP_PSS_INT = 1 -- TCPIP
	BEGIN
		EXEC SP_VERIFICAIP @NM_PSS_IP

		IF @@ERROR &lt;&gt; 0
		BEGIN
			CLOSE INSPSS
			DEALLOCATE INSPSS

			ROLLBACK TRANSACTION
			RETURN
		END

		IF (SELECT ISNULL(@NM_PSS_POR , &#39;&#39;)) &lt;&gt; &#39;&#39; OR (SELECT ISNULL(@NR_PSS_POR, -1)) &lt;&gt; -1
		BEGIN
			RAISERROR 20999 &#39;Operação não executada: O número da Porta e a string de configuração da porta devem ser nulos para interface TCP/IP.&#39;
			ROLLBACK TRANSACTION
			RETURN
		END
	END
	ELSE
	BEGIN
		IF (SELECT ISNULL(@NM_PSS_IP , &#39;&#39;)) &lt;&gt; &#39;&#39;
		BEGIN
			RAISERROR 20999 &#39;Operação não executada: O número do IP deve ser nulo para interface diferente de TCP/IP.&#39;
			ROLLBACK TRANSACTION
			RETURN
		END

		IF (SELECT ISNULL(@NM_PSS_POR , &#39;&#39;)) = &#39;&#39; OR (SELECT ISNULL(@NR_PSS_POR, -1)) = -1
		BEGIN
			RAISERROR 20999 &#39;Operação não executada: O número da Porta e a string de configuração da porta não podem ser nulos para interface diferente de TCP/IP.&#39;
			ROLLBACK TRANSACTION
			RETURN
		END
	END

	/* Ir para o próximo registro */
	FETCH NEXT FROM INSPSS
              INTO	@NM_PSS_IP
	,	@NM_PSS_POR
	,	@NR_PSS_POR
	,	@TP_PSS_INT

END
CLOSE INSPSS

DEALLOCATE INSPSS
End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>I</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o471">
<a:ObjectID>6958A01D-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_PSS_TRU</a:Name>
<a:Code>T_PSS_TRU</a:Code>
<a:Text>CREATE Trigger T_PSS_TRU On T_PSS
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_PSS)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código do Protocolo do Sistema de Som&gt; da tabela &lt;Protocolo Sistema de Som&gt; não pode ser alterada.&#39;
  Return
End
If Update (TP_PSS)
Or Update (TP_PSS_INT)
/* Domínio de: Tipo de Sistema de Som */
/* 1 - RCN Mod 1 */
/* 2 - IBM Mod 1 */
If (Select Count(*) From Inserted
    Where TP_PSS In (1,2))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Tipo de Sistema de Som&gt; que se deseja incluir na tabela &lt;Protocolo Sistema de Som&gt; não é uma opção válida&#39;
  Return
End
/* Domínio de: Tipo de Interface de Comunicação */
/* 1 - TCP/IP */
/* 2 - RS232 */
/* 3 - Paralela */
If (Select Count(*) From Inserted
    Where TP_PSS_INT In (1,2,3))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Tipo de Interface de Comunicação&gt; que se deseja incluir na tabela &lt;Protocolo Sistema de Som&gt; não é uma opção válida&#39;
  Return
End
/* Regra de negócio */
/* Só pode existir um único Protocolo do Sistema de Som em Uso */
IF (	SELECT 	COUNT(*) 
	FROM 	T_PSS PSS,
		INSERTED INS
	WHERE 	PSS.CD_PSS &lt;&gt; INS.CD_PSS AND
		INS.FL_PSS = 1 AND
		PSS.FL_PSS = 1) &gt; 0
BEGIN
	RAISERROR 20310 &#39;Operação não executada: Só pode existir um Protocolo do Sistema de Som em Uso.&#39;
	ROLLBACK TRANSACTION
	RETURN
END

/* Declaração do cursor */
DECLARE INSPSS CURSOR FOR
	SELECT 	NM_PSS_IP
	,	NM_PSS_POR
	,	NR_PSS_POR
	,	TP_PSS_INT
	FROM	INSERTED INS

/*
	TP_PSS_INT
	1-TCP/IP
	2-RS232
	3-Paralela
*/

/* Declaração das variáveis que receberão o cursor */
DECLARE @NM_PSS_IP  VARCHAR(15)
DECLARE @NM_PSS_POR VARCHAR(30)
DECLARE @NR_PSS_POR INT
DECLARE @TP_PSS_INT INT

/* Abertura do cursor */
OPEN INSPSS

/* Ir para o primeiro registro */
FETCH	INSPSS
INTO	@NM_PSS_IP
,	@NM_PSS_POR
,	@NR_PSS_POR
,	@TP_PSS_INT

/* Processar todos os registros de INSPSS*/
WHILE @@FETCH_STATUS = 0
BEGIN

	IF @TP_PSS_INT = 1 -- TCPIP
	BEGIN
		EXEC SP_VERIFICAIP @NM_PSS_IP

		IF @@ERROR &lt;&gt; 0
		BEGIN
			CLOSE INSPSS
			DEALLOCATE INSPSS

			ROLLBACK TRANSACTION
			RETURN
		END

		IF (SELECT ISNULL(@NM_PSS_POR , &#39;&#39;)) &lt;&gt; &#39;&#39; OR (SELECT ISNULL(@NR_PSS_POR, -1)) &lt;&gt; -1
		BEGIN
			RAISERROR 20999 &#39;Operação não executada: O número da Porta e a string de configuração da porta devem ser nulos para interface TCP/IP.&#39;
			ROLLBACK TRANSACTION
			RETURN
		END
	END
	ELSE
	BEGIN
		IF (SELECT ISNULL(@NM_PSS_IP , &#39;&#39;)) &lt;&gt; &#39;&#39;
		BEGIN
			RAISERROR 20999 &#39;Operação não executada: O número do IP deve ser nulo para interface diferente de TCP/IP.&#39;
			ROLLBACK TRANSACTION
			RETURN
		END

		IF (SELECT ISNULL(@NM_PSS_POR , &#39;&#39;)) = &#39;&#39; OR (SELECT ISNULL(@NR_PSS_POR, -1)) = -1
		BEGIN
			RAISERROR 20999 &#39;Operação não executada: O número da Porta e a string de configuração da porta não podem ser nulos para interface diferente de TCP/IP.&#39;
			ROLLBACK TRANSACTION
			RETURN
		END
	END

	/* Ir para o próximo registro */
	FETCH NEXT FROM INSPSS
              INTO	@NM_PSS_IP
	,	@NM_PSS_POR
	,	@NR_PSS_POR
	,	@TP_PSS_INT

END
CLOSE INSPSS

DEALLOCATE INSPSS
End
go</a:Text>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o469"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
<o:TableSymbol Ref="o354"/>
<o:TableSymbol Ref="o390"/>
<o:TableSymbol Ref="o33"/>
<o:TableSymbol Ref="o207"/>
<o:TableSymbol Ref="o131"/>
<o:TableSymbol Ref="o423"/>
</c:Symbols>
</o:PhysicalDiagram>
</c:PhysicalDiagrams>
<c:DefaultDiagram>
<o:PhysicalDiagram Ref="o4"/>
</c:DefaultDiagram>
<c:Users>
<o:User Ref="o16"/>
</c:Users>
<c:Tables>
<o:Table Ref="o20"/>
<o:Table Ref="o7"/>
<o:Table Ref="o34"/>
<o:Table Ref="o50"/>
<o:Table Ref="o143"/>
<o:Table Ref="o191"/>
<o:Table Ref="o132"/>
<o:Table Ref="o103"/>
<o:Table Ref="o245"/>
<o:Table Ref="o169"/>
<o:Table Ref="o277"/>
<o:Table Ref="o442"/>
<o:Table Ref="o335"/>
<o:Table Ref="o208"/>
<o:Table Ref="o459"/>
<o:Table Ref="o355"/>
<o:Table Ref="o391"/>
<o:Table Ref="o424"/>
</c:Tables>
<c:References>
<o:Reference Ref="o29"/>
<o:Reference Ref="o99"/>
<o:Reference Ref="o128"/>
<o:Reference Ref="o165"/>
<o:Reference Ref="o203"/>
<o:Reference Ref="o235"/>
<o:Reference Ref="o238"/>
<o:Reference Ref="o241"/>
<o:Reference Ref="o270"/>
<o:Reference Ref="o273"/>
<o:Reference Ref="o328"/>
<o:Reference Ref="o331"/>
<o:Reference Ref="o351"/>
<o:Reference Ref="o378"/>
<o:Reference Ref="o381"/>
<o:Reference Ref="o384"/>
<o:Reference Ref="o387"/>
<o:Reference Ref="o408"/>
<o:Reference Ref="o411"/>
<o:Reference Ref="o414"/>
<o:Reference Ref="o417"/>
<o:Reference Ref="o420"/>
<o:Reference Ref="o432"/>
<o:Reference Ref="o435"/>
<o:Reference Ref="o438"/>
<o:Reference Ref="o453"/>
<o:Reference Ref="o456"/>
</c:References>
<c:TargetModels>
<o:TargetModel Id="o472">
<a:ObjectID>69589EB5-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Microsoft SQL Server 7.x</a:Name>
<a:Code>SQL SERVER 7</a:Code>
<a:CreationDate>1081620221</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620221</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:TargetModelURL>file:///%_DBMS%/sqlserv7.xdb</a:TargetModelURL>
<a:TargetModelID>986CB218-1936-4245-823C-883D7AF59B86</a:TargetModelID>
<a:TargetModelClassID>4BA9F647-DAB1-11D1-9944-006097355D9B</a:TargetModelClassID>
<c:SessionShortcuts>
<o:Shortcut Ref="o3"/>
<o:Shortcut Id="o473">
<a:ObjectID>69589EBA-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Microsoft SQL Server 7.x</a:Name>
<a:Code>SQL SERVER 7</a:Code>
<a:CreationDate>1081620222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081620222</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:TargetID>986CB218-1936-4245-823C-883D7AF59B86</a:TargetID>
<a:TargetClassID>4BA9F647-DAB1-11D1-9944-006097355D9B</a:TargetClassID>
<a:TargetPackagePath/>
</o:Shortcut>
</c:SessionShortcuts>
</o:TargetModel>
</c:TargetModels>
</o:Model>
</c:Children>
</o:RootObject>

</Model>