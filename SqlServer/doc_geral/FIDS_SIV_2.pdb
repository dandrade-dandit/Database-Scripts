<?xml version="1.0" encoding="UTF-8"?>
<?PowerDesigner ID="{6958AC51-8FBB-11D8-B6CA-00024416849C}" Name="PhysicalDataModel_6" Objects="389" Symbols="57" Type="{CDE44E21-9669-11D1-9914-006097355D9B}" signature="PDM_DATA_MODEL_XML" version="9.0.0.438 Evaluation"?>
<!-- please do not edit this file -->

<Model xmlns:a="attribute" xmlns:c="collection" xmlns:o="object">

<o:RootObject Id="o1">
<c:Children>
<o:Model Id="o2">
<a:ObjectID>6958AC51-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>PhysicalDataModel_6</a:Name>
<a:Code>PHYSICALDATAMODEL_6</a:Code>
<a:CreationDate>1081537223</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081686419</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PackageOptionsText>
[FolderOptions]

[FolderOptions\Physical Objects]
GenerationCheckModel=Yes
GenerationPath=
RevPkey=Yes
RevFkey=Yes
RevAkey=Yes
RevCheck=Yes
RevIndx=Yes
RevOpts=Yes
RevViewAsTabl=No
RevSystAsTabl=Yes
RevSynmAsTabl=Yes
GenScriptName=crebas
GenScriptName0=
GenScriptName1=
GenScriptName2=
GenScriptName3=
GenScriptName4=
GenScriptName5=
GenScriptName6=
GenScriptName7=
GenScriptName8=
GenScriptName9=
GenPathName=
GenSingleFile=Yes
GenTrgScriptName=cretrg
GenTrgScriptName0=
GenTrgScriptName1=
GenTrgScriptName2=
GenTrgScriptName3=
GenTrgScriptName4=
GenTrgScriptName5=
GenTrgScriptName6=
GenTrgScriptName7=
GenTrgScriptName8=
GenTrgScriptName9=
GenTrgPathName=
GenTrgSingleFile=Yes
GenODBC=No
GenCheckModel=Yes
GenScriptPrev=Yes
GenArchiveModel=No
GenDataPathName=
GenDataSinglefile=Yes
GenDataScriptName=testdata
GenDataScriptName0=
GenDataScriptName1=
GenDataScriptName2=
GenDataScriptName3=
GenDataScriptName4=
GenDataScriptName5=
GenDataScriptName6=
GenDataScriptName7=
GenDataScriptName8=
GenDataScriptName9=
GenDataOdbc=No
GenDataDelOld=No
GenDataTitle=No
GenDataDefNumRows=20
GenDataCommit=0
GenDataPacket=0
GenDataCSV=No
GenDataOwner=No
GenDataProfNumb=
GenDataProfChar=
GenDataProfDate=
GenTspcCrea=Yes
GenTspcDrop=Yes
GenStorCrea=Yes
GenStorDrop=Yes
GenUddtCrea=Yes
GenUddtDval=Yes
GenUddtChck=Yes
GenUddtCmmt=Yes
GenUddtDrop=Yes
GenClssCrea=Yes
GenClssHead=Yes
GenClssFoot=Yes
GenClssCmmt=Yes
GenClssDrop=Yes
GenClssInst=Yes
GenClssSupp=Yes
GenDtbsCrea=Yes
GenDtbsOpts=Yes
GenDtbsHead=Yes
GenDtbsFoot=Yes
GenDtbsOpen=Yes
GenDtbsClose=Yes
GenDtbsDrop=Yes
GenUserCrea=Yes
GenUserGrant=Yes
GenUserDrop=Yes
GenTablCrea=Yes
GenTablChck=Yes
GenTablOpts=Yes
GenTablHead=Yes
GenTablFoot=Yes
GenTablCmmt=Yes
GenTablDrop=Yes
GenColnUddt=Yes
GenColnDval=Yes
GenColnChck=Yes
GenColnOpts=Yes
GenColnCmmt=Yes
GenPkeyCrea=Yes
GenPkeyOpts=Yes
GenPkeyDrop=Yes
GenAkeyCrea=Yes
GenAkeyOpts=Yes
GenAkeyDrop=Yes
GenRefrCrea=Yes
GenRefrIdcl=Yes
GenRefrIDUR=Yes
GenRefrIDUC=Yes
GenRefrIDUN=Yes
GenRefrIDUD=Yes
GenRefrIDDR=Yes
GenRefrIDDC=Yes
GenRefrIDDN=Yes
GenRefrIDDD=Yes
GenRefrDrop=Yes
GenIndxCrea=Yes
GenIndxPkey=Yes
GenIndxFkey=Yes
GenIndxAkey=Yes
GenIndxClus=Yes
GenIndxOthr=Yes
GenIndxOpts=Yes
GenIndxCmmt=Yes
GenIndxDrop=Yes
GenViewCrea=Yes
GenViewHead=Yes
GenViewFoot=Yes
GenViewCmmt=Yes
GenViewDrop=Yes
GenJidxCrea=Yes
GenJidxHead=Yes
GenJidxFoot=Yes
GenJidxDrop=Yes
GenSqncCrea=Yes
GenSqncDrop=Yes
GenTrgrCrea=Yes
GenTrgrDrop=Yes
GenTrgrFIns=Yes
GenTrgrFUpd=Yes
GenTrgrFDel=Yes
GenProcCrea=Yes
GenProcDrop=Yes
GenScriptTitle=Yes
GenScriptNamLabl=No
GenScriptQDtbs=Yes
GenScriptQOwnr=Yes
GenScriptCase=0
GenScriptCharset=0
GenScriptNAcct=No
GenScriptODBC=No
GenUseSync=No
GenSyncChoice=0
GenSyncArch=
GenTmpTablCrea=Yes
GenTmpTablDrop=Yes
GenTrgrStdMsg=Yes
GenTrgrMsgTab=
GenTrgrMsgNo=
GenTrgrMsgTxt=
GenRuleCrea=Yes
GenRuleDrop=Yes

[FolderOptions\Pdm]
IndxIQName=%COLUMN%_%INDEXTYPE%
IndxPK=Yes
IndxFK=Yes
IndxAK=Yes
IndxPKName=%TABLE%_PK
IndxFKName=%REFR%_FK
IndxAKName=%AKEY%_AK
IndxPreserve=No
IndxThreshold=0
RefrPreserve=No
JidxPreserve=No
RbldMultiFact=Yes
RbldMultiDim=Yes
RbldMultiJidx=Yes
CubePreserve=No
CubeScriptPath=
CubeScriptCase=0
CubeScriptCharset=0
CubeScriptNacct=No
CubeScriptHeader=No
CubeScriptExt=csv
CubeScriptExt0=txt
CubeScriptExt1=
CubeScriptExt2=
CubeScriptSep=,
CubeScriptDeli=&quot;
TrgrPreserve=No
TrgrIns=Yes
TrgrUpd=Yes
TrgrDel=Yes
TrgrC2Ins=Yes
TrgrC2Upd=Yes
TrgrC3=Yes
TrgrC4=Yes
TrgrC5=Yes
TrgrC6=Yes
TrgrC7=Yes
TrgrC8=Yes
TrgrC9=Yes
TrgrC10=Yes
TrgrC11=Yes
TrgrC1=Yes
TrgrC12Ins=Yes
TrgrC12Upd=Yes
TrgrC13=Yes
</a:PackageOptionsText>
<a:ModelOptionsText>
[ModelOptions]

[ModelOptions\Physical Objects]
DisplayName=Yes
DefaultDttp=&lt;Undefined&gt;
IgnoreOwner=No
RefrUnique=No
RefrAutoMigrate=Yes
RefrMigrateReuse=Yes
RefrMigrateDomain=Yes
RefrMigrateCheck=Yes
RefrMigrateRule=Yes
RefrMigrateExtd=No
RefrMigrDefaultLink=No
DomnForbDivg=No
DomnCopyDttp=Yes
DomnCopyChck=No
DomnCopyRule=No
DomnCopyMand=No
DomnCopyExtd=No
DomnCopyProf=No

[ModelOptions\Connection]

[ModelOptions\Pdm]

[ModelOptions\Generate]

[ModelOptions\Generate\Cdm]
CheckModel=1
SaveLinks=1
NameToCode=0
Notation=2

[ModelOptions\Generate\Oom]
CheckModel=1
SaveLinks=1
ORMapping=0
NameToCode=0
ClassPrefix=

[ModelOptions\ClssNamingOptions]

[ModelOptions\ClssNamingOptions\PDMPCKG]

[ModelOptions\ClssNamingOptions\PDMPCKG\Name]
Template=
MaxLen=254
Case=M
ValidChar=
InvldChar=&quot;+-*/\.,!:;&#39;&quot;
AllValid=1
NoAccent=0
DefaultChar=_
Script=.foreach_part(%Name%)[CRLF].convert_name(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\PDMPCKG\Code]
Template=
MaxLen=254
Case=U
ValidChar=&#39;a&#39;-&#39;z&#39;,&#39;A&#39;-&#39;Z&#39;,&#39;0&#39;-&#39;9&#39;,&quot;_&quot;
InvldChar=
AllValid=0
NoAccent=1
DefaultChar=_
Script=.foreach_part(%Code%)[CRLF].convert_code(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\PDMDOMN]

[ModelOptions\ClssNamingOptions\PDMDOMN\Name]
Template=
MaxLen=254
Case=M
ValidChar=
InvldChar=&quot;+-*/\.,!:;&#39;&quot;
AllValid=1
NoAccent=0
DefaultChar=_
Script=.foreach_part(%Name%)[CRLF].convert_name(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\PDMDOMN\Code]
Template=
MaxLen=128
Case=U
ValidChar=&#39;a&#39;-&#39;z&#39;,&#39;A&#39;-&#39;Z&#39;,&#39;0&#39;-&#39;9&#39;,&quot;_&quot;
InvldChar=
AllValid=0
NoAccent=1
DefaultChar=_
Script=.foreach_part(%Code%)[CRLF].convert_code(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\TABL]

[ModelOptions\ClssNamingOptions\TABL\Name]
Template=
MaxLen=254
Case=M
ValidChar=
InvldChar=&quot;+-*/\.,!:;&#39;&quot;
AllValid=1
NoAccent=0
DefaultChar=_
Script=.foreach_part(%Name%)[CRLF].convert_name(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\TABL\Code]
Template=
MaxLen=128
Case=U
ValidChar=&#39;a&#39;-&#39;z&#39;,&#39;A&#39;-&#39;Z&#39;,&#39;0&#39;-&#39;9&#39;,&quot;_&quot;
InvldChar=
AllValid=0
NoAccent=1
DefaultChar=_
Script=.foreach_part(%Code%)[CRLF].convert_code(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\COLN]

[ModelOptions\ClssNamingOptions\COLN\Name]
Template=
MaxLen=254
Case=M
ValidChar=
InvldChar=&quot;+-*/\.,!:;&#39;&quot;
AllValid=1
NoAccent=0
DefaultChar=_
Script=.foreach_part(%Name%)[CRLF].convert_name(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\COLN\Code]
Template=
MaxLen=128
Case=M
ValidChar=&#39;a&#39;-&#39;z&#39;,&#39;A&#39;-&#39;Z&#39;,&#39;0&#39;-&#39;9&#39;,&quot;_&quot;
InvldChar=
AllValid=0
NoAccent=1
DefaultChar=_
Script=.foreach_part(%Code%)[CRLF].convert_code(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\REFR]

[ModelOptions\ClssNamingOptions\REFR\Name]
Template=
MaxLen=254
Case=M
ValidChar=
InvldChar=&quot;+-*/\.,!:;&#39;&quot;
AllValid=1
NoAccent=0
DefaultChar=_
Script=.foreach_part(%Name%)[CRLF].convert_name(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\REFR\Code]
Template=
MaxLen=254
Case=U
ValidChar=&#39;a&#39;-&#39;z&#39;,&#39;A&#39;-&#39;Z&#39;,&#39;0&#39;-&#39;9&#39;,&quot;_&quot;
InvldChar=
AllValid=0
NoAccent=1
DefaultChar=_
Script=.foreach_part(%Code%)[CRLF].convert_code(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\VREF]

[ModelOptions\ClssNamingOptions\VREF\Name]
Template=
MaxLen=254
Case=M
ValidChar=
InvldChar=&quot;+-*/\.,!:;&#39;&quot;
AllValid=1
NoAccent=0
DefaultChar=_
Script=.foreach_part(%Name%)[CRLF].convert_name(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\VREF\Code]
Template=
MaxLen=254
Case=U
ValidChar=&#39;a&#39;-&#39;z&#39;,&#39;A&#39;-&#39;Z&#39;,&#39;0&#39;-&#39;9&#39;,&quot;_&quot;
InvldChar=
AllValid=0
NoAccent=1
DefaultChar=_
Script=.foreach_part(%Code%)[CRLF].convert_code(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\VIEW]

[ModelOptions\ClssNamingOptions\VIEW\Name]
Template=
MaxLen=254
Case=M
ValidChar=
InvldChar=&quot;+-*/\.,!:;&#39;&quot;
AllValid=1
NoAccent=0
DefaultChar=_
Script=.foreach_part(%Name%)[CRLF].convert_name(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\VIEW\Code]
Template=
MaxLen=128
Case=U
ValidChar=&#39;a&#39;-&#39;z&#39;,&#39;A&#39;-&#39;Z&#39;,&#39;0&#39;-&#39;9&#39;,&quot;_&quot;
InvldChar=
AllValid=0
NoAccent=1
DefaultChar=_
Script=.foreach_part(%Code%)[CRLF].convert_code(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\FACT]

[ModelOptions\ClssNamingOptions\FACT\Name]
Template=
MaxLen=254
Case=M
ValidChar=
InvldChar=&quot;+-*/\.,!:;&#39;&quot;
AllValid=1
NoAccent=0
DefaultChar=_
Script=.foreach_part(%Name%)[CRLF].convert_name(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\FACT\Code]
Template=
MaxLen=254
Case=U
ValidChar=&#39;a&#39;-&#39;z&#39;,&#39;A&#39;-&#39;Z&#39;,&#39;0&#39;-&#39;9&#39;,&quot;_&quot;
InvldChar=
AllValid=0
NoAccent=1
DefaultChar=_
Script=.foreach_part(%Code%)[CRLF].convert_code(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\DIMN]

[ModelOptions\ClssNamingOptions\DIMN\Name]
Template=
MaxLen=254
Case=M
ValidChar=
InvldChar=&quot;+-*/\.,!:;&#39;&quot;
AllValid=1
NoAccent=0
DefaultChar=_
Script=.foreach_part(%Name%)[CRLF].convert_name(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\DIMN\Code]
Template=
MaxLen=254
Case=U
ValidChar=&#39;a&#39;-&#39;z&#39;,&#39;A&#39;-&#39;Z&#39;,&#39;0&#39;-&#39;9&#39;,&quot;_&quot;
InvldChar=
AllValid=0
NoAccent=1
DefaultChar=_
Script=.foreach_part(%Code%)[CRLF].convert_code(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\CUBE]

[ModelOptions\ClssNamingOptions\CUBE\Name]
Template=
MaxLen=254
Case=M
ValidChar=
InvldChar=&quot;+-*/\.,!:;&#39;&quot;
AllValid=1
NoAccent=0
DefaultChar=_
Script=.foreach_part(%Name%)[CRLF].convert_name(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\CUBE\Code]
Template=
MaxLen=254
Case=U
ValidChar=&#39;a&#39;-&#39;z&#39;,&#39;A&#39;-&#39;Z&#39;,&#39;0&#39;-&#39;9&#39;,&quot;_&quot;
InvldChar=
AllValid=0
NoAccent=1
DefaultChar=_
Script=.foreach_part(%Code%)[CRLF].convert_code(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\MEAS]

[ModelOptions\ClssNamingOptions\MEAS\Name]
Template=
MaxLen=254
Case=M
ValidChar=
InvldChar=&quot;+-*/\.,!:;&#39;&quot;
AllValid=1
NoAccent=0
DefaultChar=_
Script=.foreach_part(%Name%)[CRLF].convert_name(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\MEAS\Code]
Template=
MaxLen=254
Case=U
ValidChar=&#39;a&#39;-&#39;z&#39;,&#39;A&#39;-&#39;Z&#39;,&#39;0&#39;-&#39;9&#39;,&quot;_&quot;
InvldChar=
AllValid=0
NoAccent=1
DefaultChar=_
Script=.foreach_part(%Code%)[CRLF].convert_code(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\DATTR]

[ModelOptions\ClssNamingOptions\DATTR\Name]
Template=
MaxLen=254
Case=M
ValidChar=
InvldChar=&quot;+-*/\.,!:;&#39;&quot;
AllValid=1
NoAccent=0
DefaultChar=_
Script=.foreach_part(%Name%)[CRLF].convert_name(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\DATTR\Code]
Template=
MaxLen=254
Case=U
ValidChar=&#39;a&#39;-&#39;z&#39;,&#39;A&#39;-&#39;Z&#39;,&#39;0&#39;-&#39;9&#39;,&quot;_&quot;
InvldChar=
AllValid=0
NoAccent=1
DefaultChar=_
Script=.foreach_part(%Code%)[CRLF].convert_code(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\FILO]

[ModelOptions\ClssNamingOptions\FILO\Name]
Template=
MaxLen=254
Case=M
ValidChar=
InvldChar=&quot;\/:*?&lt;&gt;|&quot;
AllValid=1
NoAccent=0
DefaultChar=_
Script=.foreach_part(%Name%)[CRLF].convert_name(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\FILO\Code]
Template=
MaxLen=254
Case=U
ValidChar=&#39;a&#39;-&#39;z&#39;,&#39;A&#39;-&#39;Z&#39;,&#39;0&#39;-&#39;9&#39;,&quot;_.&quot;
InvldChar=
AllValid=0
NoAccent=1
DefaultChar=_
Script=.foreach_part(%Code%)[CRLF].convert_code(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\DefaultClass]

[ModelOptions\ClssNamingOptions\DefaultClass\Name]
Template=
MaxLen=254
Case=M
ValidChar=
InvldChar=&quot;+-*/\.,!:;&#39;&quot;
AllValid=1
NoAccent=0
DefaultChar=_
Script=.foreach_part(%Name%)[CRLF].convert_name(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\ClssNamingOptions\DefaultClass\Code]
Template=
MaxLen=254
Case=M
ValidChar=&#39;a&#39;-&#39;z&#39;,&#39;A&#39;-&#39;Z&#39;,&#39;0&#39;-&#39;9&#39;,&quot;_&quot;
InvldChar=
AllValid=0
NoAccent=1
DefaultChar=_
Script=.foreach_part(%Code%)[CRLF].convert_code(%CurrentPart%)[CRLF].next(&quot;_&quot;)
ConvTable=

[ModelOptions\NamingOptionsTemplates]

[ModelOptions\Default Opts]

[ModelOptions\Default Opts\TABL]
PhysOpts=

[ModelOptions\Default Opts\COLN]
PhysOpts=

[ModelOptions\Default Opts\INDX]
PhysOpts=

[ModelOptions\Default Opts\AKEY]
PhysOpts=

[ModelOptions\Default Opts\PKEY]
PhysOpts=

[ModelOptions\Default Opts\STOR]
PhysOpts=

[ModelOptions\Default Opts\TSPC]
PhysOpts=

[ModelOptions\Default Opts\SQNC]
PhysOpts=

[ModelOptions\Default Opts\DTBS]
PhysOpts=
</a:ModelOptionsText>
<c:DBMS>
<o:Shortcut Id="o3">
<a:ObjectID>6958AC55-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Microsoft SQL Server 7.x</a:Name>
<a:Code>SQL SERVER 7</a:Code>
<a:CreationDate>1081537223</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537223</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:TargetID>986CB218-1936-4245-823C-883D7AF59B86</a:TargetID>
<a:TargetClassID>4BA9F647-DAB1-11D1-9944-006097355D9B</a:TargetClassID>
<a:TargetPackagePath/>
</o:Shortcut>
</c:DBMS>
<c:PhysicalDiagrams>
<o:PhysicalDiagram Id="o4">
<a:ObjectID>6958AC52-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>PhysicalDiagram_1</a:Name>
<a:Code>PHYSICALDIAGRAM_1</a:Code>
<a:CreationDate>1081537222</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1082142781</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DisplayPreferences>
[DisplayPreferences]

[DisplayPreferences\PDM]

[DisplayPreferences\General]
Adjust to text=Yes
Snap Grid=No
Display Grid=No
Show Page Delimiter=Yes
Grid size=800
Graphic unit=0
Window color=255 255 255

[DisplayPreferences\Object]
Mode=0
Trunc Length=80
Word Length=80
Word Text=!&quot;&quot;#$%&amp;&#39;()*+,-./:;&lt;=&gt;?@[\]^_`{|}~
Shortcut IntIcon=Yes
Shortcut IntLoct=No
Shortcut ExtIcon=Yes
Shortcut ExtLoct=No
File Location=No
TablColn=No
ColnMode=0
ColnMax=5
TablIndx=No
TablKey=No
TablTrgr=Yes
TablOwnr=No
ColnDttp=Yes
ColnDomn=No
ColnShowDomn=Yes
ColnKey=Yes
ColnIndx=Yes
ColnMand=Yes
ViewTabl=Yes
ViewColn=Yes
ViewOwnr=No
VColName=Yes
VColExpr=No
VColDttp=No
VColCMod=1
VColCMax=5
RefrName=No
RefrJoin=Yes
RefrCnam=No
RefrIntg=No
RefrImpl=No
RefrCard=No
RefrMode=2
VRefName=No
VRefJoin=No
VRefMode=0

[DisplayPreferences\Symbol]

[DisplayPreferences\Symbol\PDMPCKG]
DISPNAMEFont=arial,8,N
DISPNAMEFont color=0, 0, 0
AutoAdjustToText=Yes
Width=4800
Height=3600
Brush color=255 255 255
Fill Color=Yes
Pen=1 0 0, 0, 255
Shadow color=192 192 192
Shadow=No

[DisplayPreferences\Symbol\TABL]
DISPNAMEFont=arial,8,N
DISPNAMEFont color=0, 0, 0
TableColumnsFont=arial,8,N
TableColumnsFont color=0, 0, 0
TablePkColumnsFont=arial,8,N
TablePkColumnsFont color=0, 0, 0
TableIndexsFont=arial,8,N
TableIndexsFont color=0, 0, 0
TableKeysFont=arial,8,N
TableKeysFont color=0, 0, 0
TableTriggersFont=arial,8,N
TableTriggersFont color=0, 0, 0
AutoAdjustToText=Yes
Width=4800
Height=3600
Brush color=255 255 255
Fill Color=Yes
Pen=1 0 0, 0, 255
Shadow color=192 192 192
Shadow=No

[DisplayPreferences\Symbol\REFR]
DISPNAMEFont=arial,8,N
DISPNAMEFont color=0, 0, 0
CARDFont=arial,8,N
CARDFont color=0, 0, 0
Line style=0
Brush color=255 255 255
Fill Color=Yes
Pen=1 0 0, 0, 255
Shadow color=192 192 192
Shadow=No

[DisplayPreferences\Symbol\VREF]
DISPNAMEFont=arial,8,N
DISPNAMEFont color=0, 0, 0
Line style=0
Brush color=255 255 255
Fill Color=Yes
Pen=1 0 0, 0, 255
Shadow color=192 192 192
Shadow=No

[DisplayPreferences\Symbol\VIEW]
DISPNAMEFont=arial,8,N
DISPNAMEFont color=0, 0, 0
ViewColumnnFont=arial,8,N
ViewColumnnFont color=0, 0, 0
ViewTablesFont=arial,8,N
ViewTablesFont color=0, 0, 0
AutoAdjustToText=Yes
Width=4800
Height=3600
Brush color=255 255 255
Fill Color=Yes
Pen=1 0 0, 0, 255
Shadow color=192 192 192
Shadow=No

[DisplayPreferences\Symbol\FILO]
NAMEFont=arial,8,N
NAMEFont color=0, 0, 0
AutoAdjustToText=Yes
Width=2400
Height=2400
Brush color=255 255 255
Fill Color=No
Pen=1 0 0, 0, 255
Shadow color=192 192 192
Shadow=No

[DisplayPreferences\Symbol\USRDEPD]
OBJXSTRFont=arial,8,N
OBJXSTRFont color=0, 0, 0
Line style=0
Brush color=255 255 255
Fill Color=Yes
Pen=2 0 0 0 0
Shadow color=192 192 192
Shadow=No

[DisplayPreferences\Symbol\Free Symbol]
Free TextFont=arial,8,N
Free TextFont color=0, 0, 0
Line style=0
Brush color=255 255 255
Fill Color=Yes
Pen=1 0 0, 0, 255
Shadow color=192 192 192
Shadow=No
</a:DisplayPreferences>
<a:PaperSize>(8268, 11689)</a:PaperSize>
<a:PageMargins>((315,354), (433,354))</a:PageMargins>
<a:PageSize>9</a:PageSize>
<a:PaperSource>7</a:PaperSource>
<c:Symbols>
<o:ReferenceSymbol Id="o5">
<a:CenterTextOffset>(3, 0)</a:CenterTextOffset>
<a:Rect>((-738093,674608), (-721595,679070))</a:Rect>
<a:ListOfPoints>((-721595,674608),(-738093,679070))</a:ListOfPoints>
<a:ArrowStyle>4881</a:ArrowStyle>
<a:LineColor>255</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Id="o6">
<a:Rect>((-725873,672334), (-717315,676880))</a:Rect>
<a:LineColor>255</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o7">
<a:ObjectID>6958ABBB-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_IST</a:Name>
<a:Code>T_FIDS_IST</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o8">
<a:ObjectID>6958AC1B-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_IST</a:Name>
<a:Code>CD_IST</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o9">
<a:ObjectID>6958AC1C-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NM_IST</a:Name>
<a:Code>NM_IST</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>char(30)</a:DataType>
<a:Length>30</a:Length>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o10">
<a:ObjectID>6958AC1D-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>QT_IST</a:Name>
<a:Code>QT_IST</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o11">
<a:ObjectID>6958AC1E-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TP_IST</a:Name>
<a:Code>TP_IST</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o12">
<a:ObjectID>6958AC1F-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_CHK</a:Name>
<a:Code>CD_CHK</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
</o:Column>
<o:Column Id="o13">
<a:ObjectID>6958AC20-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_POR</a:Name>
<a:Code>CD_POR</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
</o:Column>
<o:Column Id="o14">
<a:ObjectID>6958AC21-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_EST</a:Name>
<a:Code>CD_EST</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
</o:Column>
<o:Column Id="o15">
<a:ObjectID>6958AC22-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TIMESTAMP</a:Name>
<a:Code>TIMESTAMP</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o16">
<a:ObjectID>6958AC25-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_FIDS_IST</a:Name>
<a:Code>Pk_T_FIDS_IST</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_FIDS_IST</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o8"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Indexes>
<o:Index Id="o17">
<a:ObjectID>6958AC23-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_FIDS_NM</a:Name>
<a:Code>I_FIDS_NM</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Unique>1</a:Unique>
<c:IndexColumns>
<o:IndexColumn Id="o18">
<a:ObjectID>6958AC24-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o9"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
</c:Indexes>
<c:Owner>
<o:User Id="o19">
<a:ObjectID>6958AC5A-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>dbo</a:Name>
<a:Code>dbo</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
</o:User>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o20">
<a:ObjectID>6958AB41-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_IST_TRD</a:Name>
<a:Code>T_FIDS_IST_TRD</a:Code>
<a:Text>Create Trigger T_FIDS_IST_TRD On T_FIDS_IST
For Delete As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* FIDS - IST Servidor de Informação»FIDS - Servidor de Informação do Grupo de Displays: Servidor de Informação do Grupo de Displays (Restrict) */
If (Select Count(*) From T_FIDS_DGI dep, Deleted pri
 Where dep.CD_IST = pri.CD_IST) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;FIDS - IST Servidor de Informação&gt; está sendo referenciada na tabela &lt;FIDS - Servidor de Informação do Grupo de Displays&gt;&#39;
  Return
End
/* FIDS - IST Servidor de Informação»FIDS - IST Categoria: Categoria do IST (Cascade) */
Delete T_FIDS_ISG From T_FIDS_ISG dep, Deleted pri
 Where dep.CD_IST = pri.CD_IST
/* FIDS - IST Servidor de Informação»FIDS - IST Companhia: Companhia do IST (Cascade) */
Delete T_FIDS_ISC From T_FIDS_ISC dep, Deleted pri
 Where dep.CD_IST = pri.CD_IST
/* FIDS - IST Servidor de Informação»FIDS - IST Grupo: Grupo do Information Server (Cascade) */
Delete T_FIDS_ISR From T_FIDS_ISR dep, Deleted pri
 Where dep.CD_IST = pri.CD_IST
/* FIDS - IST Servidor de Informação»FIDS - IST Natureza: Natureza do IST (Cascade) */
Delete T_FIDS_ISN From T_FIDS_ISN dep, Deleted pri
 Where dep.CD_IST = pri.CD_IST
/* FIDS - IST Servidor de Informação»FIDS - IST Tipo do Vôo: Tipo do Vôo do IST (Cascade) */
Delete T_FIDS_ISV From T_FIDS_ISV dep, Deleted pri
 Where dep.CD_IST = pri.CD_IST
/* FIDS - IST Servidor de Informação»FIDS - IST Terminal de Passageiros: TPS do IST (Cascade) */
Delete T_FIDS_ISP From T_FIDS_ISP dep, Deleted pri
 Where dep.CD_IST = pri.CD_IST
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>D</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o21">
<a:ObjectID>6958AB43-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_IST_TRI</a:Name>
<a:Code>T_FIDS_IST_TRI</a:Code>
<a:Text>Create Trigger T_FIDS_IST_TRI On T_FIDS_IST
For Insert As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* Checkin»FIDS - IST Servidor de Informação: Check-in Associado ao IST */
If (Select Count(*) From T_CHK, Inserted
Where T_CHK.CD_CHK = Inserted.CD_CHK)
 &lt;&gt;(Select Count(CD_CHK) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Checkin&gt; que se deseja incluir na tabela &lt;FIDS - IST Servidor de Informação&gt; não está cadastrada&#39;
  Return
End
/* Esteira»FIDS - IST Servidor de Informação: Esteira Associada ao IST */
If (Select Count(*) From T_EST, Inserted
Where T_EST.CD_EST = Inserted.CD_EST)
 &lt;&gt;(Select Count(CD_EST) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Esteira&gt; que se deseja incluir na tabela &lt;FIDS - IST Servidor de Informação&gt; não está cadastrada&#39;
  Return
End
/* Portão»FIDS - IST Servidor de Informação: Portão Associado ao IST */
If (Select Count(*) From T_POR, Inserted
Where T_POR.CD_POR = Inserted.CD_POR)
 &lt;&gt;(Select Count(CD_POR) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Portão&gt; que se deseja incluir na tabela &lt;FIDS - IST Servidor de Informação&gt; não está cadastrada&#39;
  Return
End
/* Domínio de: Tipo de Information Server Padrão */
/* 1 - CHG */
/* 2 - PAR */
/* 3 - EST */
/* 4 - POR */
/* 5 - CHK */
/* 6 - HPA */
/* 7 - HOT */
If (Select Count(*) From Inserted
    Where TP_IST In (1,2,3,4,5,6,7))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Tipo de Information Server Padrão&gt; que se deseja incluir na tabela &lt;FIDS - IST Servidor de Informação&gt; não é uma opção válida&#39;
  Return
End
/* Regra de negócio */
/* Verificar relação entre Tipo de Servidor de Informação e Recursos */
IF (	SELECT	COUNT(*) 
	FROM 	INSERTED INS
	WHERE	(TP_IST = 1 And (CD_CHK Is Not Null Or CD_POR Is Not Null Or CD_EST Is Not Null)) Or
	           	(TP_IST = 2 And (CD_CHK Is Not Null Or CD_POR Is Not Null Or CD_EST Is Not Null)) Or
	           	(TP_IST = 6 And (CD_CHK Is Not Null Or CD_POR Is Not Null Or CD_EST Is Not Null)) Or
	           	(TP_IST = 7 And (CD_CHK Is Not Null Or CD_POR Is Not Null Or CD_EST Is Not Null)) Or
                	(TP_IST = 3 And (CD_CHK Is Not Null Or CD_POR Is Not Null Or CD_EST Is Null)) Or
                	(TP_IST = 4 And (CD_CHK Is Not Null Or CD_POR Is Null Or CD_EST Is Not Null)) Or
                	(TP_IST = 5 And (CD_CHK Is Null Or CD_POR Is Not Null Or CD_EST Is Not Null))) &gt; 0
BEGIN
	RAISERROR 20999 &#39;Operação não executada: Relação incorreta entre Tipo de Servidor de Informação e Portão, Esteira e Checkin.&#39;
	ROLLBACK TRANSACTION
	RETURN
END

/* Verificar se só existe um Servidor de Informação associado ao mesmo Check-in, Portão ou Esteira */
IF (	SELECT 	COUNT(*)
	FROM 	T_FIDS_IST IST,
		T_FIDS_IST INS
	WHERE 	IST.CD_IST &lt;&gt; INS.CD_IST And
		INS.TP_IST NOT IN (1,2,6,7) And
		IST.TP_IST = INS.TP_IST And
		ISNULL(IST.CD_CHK,0) = ISNULL(INS.CD_CHK,0) And
		ISNULL(IST.CD_POR,0) = ISNULL(INS.CD_POR,0) And
		ISNULL(IST.CD_EST,0) = ISNULL(INS.CD_EST,0)) &gt; 0
BEGIN
	RAISERROR 20999 &#39;Operação não executada: Não pode existir mais de um Servidor de Informação associado ao mesmo Portão, Esteira ou Check-in.&#39;
	ROLLBACK TRANSACTION
	RETURN
END

End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>I</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o22">
<a:ObjectID>6958AB45-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_IST_TRU</a:Name>
<a:Code>T_FIDS_IST_TRU</a:Code>
<a:Text>Create Trigger T_FIDS_IST_TRU On T_FIDS_IST
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_IST)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código do Information Server&gt; da tabela &lt;FIDS - IST Servidor de Informação&gt; não pode ser alterada.&#39;
  Return
End
If Update (CD_CHK)
/* Checkin»FIDS - IST Servidor de Informação: Check-in Associado ao IST */
If (Select Count(*) From T_CHK, Inserted
Where T_CHK.CD_CHK = Inserted.CD_CHK)
 &lt;&gt;(Select Count(CD_CHK) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Checkin&gt; que se deseja incluir na tabela &lt;FIDS - IST Servidor de Informação&gt; não está cadastrada&#39;
  Return
End
If Update (CD_EST)
/* Esteira»FIDS - IST Servidor de Informação: Esteira Associada ao IST */
If (Select Count(*) From T_EST, Inserted
Where T_EST.CD_EST = Inserted.CD_EST)
 &lt;&gt;(Select Count(CD_EST) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Esteira&gt; que se deseja incluir na tabela &lt;FIDS - IST Servidor de Informação&gt; não está cadastrada&#39;
  Return
End
If Update (CD_POR)
/* Portão»FIDS - IST Servidor de Informação: Portão Associado ao IST */
If (Select Count(*) From T_POR, Inserted
Where T_POR.CD_POR = Inserted.CD_POR)
 &lt;&gt;(Select Count(CD_POR) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Portão&gt; que se deseja incluir na tabela &lt;FIDS - IST Servidor de Informação&gt; não está cadastrada&#39;
  Return
End
If Update (TP_IST)
/* Domínio de: Tipo de Information Server Padrão */
/* 1 - CHG */
/* 2 - PAR */
/* 3 - EST */
/* 4 - POR */
/* 5 - CHK */
/* 6 - HPA */
/* 7 - HOT */
If (Select Count(*) From Inserted
    Where TP_IST In (1,2,3,4,5,6,7))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Tipo de Information Server Padrão&gt; que se deseja incluir na tabela &lt;FIDS - IST Servidor de Informação&gt; não é uma opção válida&#39;
  Return
End
/* Regra de negócio */
/* Verificar relação entre Tipo de Servidor de Informação e Recursos */
IF (	SELECT	COUNT(*) 
	FROM 	INSERTED INS
	WHERE	(TP_IST = 1 And (CD_CHK Is Not Null Or CD_POR Is Not Null Or CD_EST Is Not Null)) Or
	           	(TP_IST = 2 And (CD_CHK Is Not Null Or CD_POR Is Not Null Or CD_EST Is Not Null)) Or
	           	(TP_IST = 6 And (CD_CHK Is Not Null Or CD_POR Is Not Null Or CD_EST Is Not Null)) Or
	           	(TP_IST = 7 And (CD_CHK Is Not Null Or CD_POR Is Not Null Or CD_EST Is Not Null)) Or
                	(TP_IST = 3 And (CD_CHK Is Not Null Or CD_POR Is Not Null Or CD_EST Is Null)) Or
                	(TP_IST = 4 And (CD_CHK Is Not Null Or CD_POR Is Null Or CD_EST Is Not Null)) Or
                	(TP_IST = 5 And (CD_CHK Is Null Or CD_POR Is Not Null Or CD_EST Is Not Null))) &gt; 0
BEGIN
	RAISERROR 20999 &#39;Operação não executada: Relação incorreta entre Tipo de Servidor de Informação e Portão, Esteira e Checkin.&#39;
	ROLLBACK TRANSACTION
	RETURN
END

/* Verificar se só existe um Servidor de Informação associado ao mesmo Check-in, Portão ou Esteira */
IF (	SELECT 	COUNT(*)
	FROM 	T_FIDS_IST IST,
		T_FIDS_IST INS
	WHERE 	IST.CD_IST &lt;&gt; INS.CD_IST And
		INS.TP_IST NOT IN (1,2,6,7) And
		IST.TP_IST = INS.TP_IST And
		ISNULL(IST.CD_CHK,0) = ISNULL(INS.CD_CHK,0) And
		ISNULL(IST.CD_POR,0) = ISNULL(INS.CD_POR,0) And
		ISNULL(IST.CD_EST,0) = ISNULL(INS.CD_EST,0)) &gt; 0
BEGIN
	RAISERROR 20999 &#39;Operação não executada: Não pode existir mais de um Servidor de Informação associado ao mesmo Portão, Esteira ou Check-in.&#39;
	ROLLBACK TRANSACTION
	RETURN
END

/* Verificar alteração do Número de Linhas do Servidor de Informação */
IF (	SELECT	COUNT(*)
	FROM	INSERTED IST, 
		T_FIDS_DGI DGI
	WHERE	IST.CD_IST = DGI.CD_IST AND
		NOT (QT_IST &gt;= NR_DGI AND
		QT_IST &gt;= QT_DGI + NR_DGI - 1)) &gt; 0
BEGIN
	RAISERROR 20999 &#39;Operação não executada: A Quantidade de Linhas do Servidor de Informação está inconsistente com relação à Quantidade de Linhas do Servidor de Informação do Grupo de Displays.&#39;
	ROLLBACK TRANSACTION
	RETURN
END

End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o16"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Id="o23">
<a:Rect>((-741405,676796), (-734779,681342))</a:Rect>
<a:LineColor>255</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o24">
<a:ObjectID>6958AB61-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_CHK</a:Name>
<a:Code>T_CHK</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081686004</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o25">
<a:ObjectID>6958AC7A-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_CHK</a:Name>
<a:Code>CD_CHK</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o26">
<a:ObjectID>6958AC7D-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NR_CHK</a:Name>
<a:Code>NR_CHK</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>char(4)</a:DataType>
<a:Length>4</a:Length>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o27">
<a:ObjectID>6958AC80-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NR_CHK_ORD</a:Name>
<a:Code>NR_CHK_ORD</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o28">
<a:ObjectID>6958AC83-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_AER</a:Name>
<a:Code>CD_AER</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o29">
<a:ObjectID>6958AC86-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TIMESTAMP</a:Name>
<a:Code>TIMESTAMP</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o30">
<a:ObjectID>6958AC96-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_CHK</a:Name>
<a:Code>Pk_T_CHK</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_CHK</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o25"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Indexes>
<o:Index Id="o31">
<a:ObjectID>6958AC8D-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_CHK_AER</a:Name>
<a:Code>I_CHK_AER</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Unique>1</a:Unique>
<c:IndexColumns>
<o:IndexColumn Id="o32">
<a:ObjectID>6958AC90-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o26"/>
</c:Column>
</o:IndexColumn>
<o:IndexColumn Id="o33">
<a:ObjectID>6958AC93-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_1&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o28"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
</c:Indexes>
<c:Owner>
<o:User Ref="o19"/>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o34">
<a:ObjectID>6958AC35-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_CHK_TRD</a:Name>
<a:Code>T_CHK_TRD</a:Code>
<a:Text>Create Trigger T_CHK_TRD On T_CHK
For Delete As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* Checkin»FIDS - IST Servidor de Informação: Check-in Associado ao IST (Restrict) */
If (Select Count(*) From T_FIDS_IST dep, Deleted pri
 Where dep.CD_CHK = pri.CD_CHK) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Checkin&gt; está sendo referenciada na tabela &lt;FIDS - IST Servidor de Informação&gt;&#39;
  Return
End
/* Checkin»Hotran - Check in: Check-in do Hotran (Restrict) */
If (Select Count(*) From T_HCK dep, Deleted pri
 Where dep.CD_CHK = pri.CD_CHK) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Checkin&gt; está sendo referenciada na tabela &lt;Hotran - Check in&gt;&#39;
  Return
End
/* Checkin»Checkin da Partida de Vôo - Mirror: Check-in integra Check-ins da Partida (Restrict) */
If (Select Count(*) From T_CKV001_MIR dep, Deleted pri
 Where dep.CD_CHK = pri.CD_CHK) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Checkin&gt; está sendo referenciada na tabela &lt;Checkin da Partida de Vôo - Mirror&gt;&#39;
  Return
End
/* Checkin»Checkin da Partida de Vôo: Checkin integra Checkins da Partida (Restrict) */
If (Select Count(*) From T_CKV001 dep, Deleted pri
 Where dep.CD_CHK = pri.CD_CHK) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Checkin&gt; está sendo referenciada na tabela &lt;Checkin da Partida de Vôo&gt;&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>D</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o35">
<a:ObjectID>6958AC37-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_CHK_TRI</a:Name>
<a:Code>T_CHK_TRI</a:Code>
<a:Text>Create Trigger T_CHK_TRI On T_CHK
For Insert As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* Aeroporto»Checkin: Aeroporto possui Checkins */
If (Select Count(*) From T_AER, Inserted
Where T_AER.CD_AER = Inserted.CD_AER)
 &lt;&gt;(Select Count(CD_AER) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Aeroporto&gt; que se deseja incluir na tabela &lt;Checkin&gt; não está cadastrada&#39;
  Return
End
/* Companhia Aérea»Checkin: Companhia Aér. possui Checkins */
If (Select Count(*) From T_COM, Inserted
Where T_COM.CD_COM = Inserted.CD_COM)
 &lt;&gt;(Select Count(CD_COM) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Companhia Aérea&gt; que se deseja incluir na tabela &lt;Checkin&gt; não está cadastrada&#39;
  Return
End
/* Regra de negócio */
/* -------------------- Colocado e Comentado por Milena em 22/06/99 --------------------

/* Declaração do cursor */
DECLARE INSCHK CURSOR FOR
	SELECT 	INS.CD_CHK,
		INS.NR_CHK_ORD,
		INS.CD_AER
	FROM	INSERTED INS
	ORDER BY NR_CHK_ORD

/* Declaração das variáveis  */
DECLARE	@CD_CHK	INT,
		@NR_CHK_ORD	INT,
	 	@CD_AER	INT,
		@CD_CHK_ATU 	INT
		 
/* Abertura do cursor */
OPEN INSCHK

/* Ir para o primeiro registro */
FETCH	INSCHK
INTO	@CD_CHK,
	@NR_CHK_ORD,
	@CD_AER

/* Processar todos os registros de INSCHK */
WHILE @@FETCH_STATUS = 0
BEGIN

	IF (	SELECT 	COUNT(*) 
		FROM 	T_CHK 
		WHERE 	CD_CHK &lt;&gt; @CD_CHK  AND NR_CHK_ORD = @NR_CHK_ORD AND CD_AER = @CD_AER) &gt; 0
	BEGIN
		SELECT	@CD_CHK_ATU = CD_CHK 
		FROM 	T_CHK
		WHERE 	CD_CHK &lt;&gt; @CD_CHK AND NR_CHK_ORD = @NR_CHK_ORD AND CD_AER = @CD_AER

		UPDATE	T_CHK
		SET	NR_CHK_ORD = NR_CHK_ORD + 1
		WHERE	CD_CHK = @CD_CHK_ATU

		SELECT @NR_CHK_ORD = @NR_CHK_ORD + 1, @CD_CHK = @CD_CHK_ATU
	END
	ELSE
	BEGIN
		/* Ir para o próximo registro */
		FETCH NEXT FROM INSCHK
		INTO	@CD_CHK,
			@NR_CHK_ORD,
			@CD_AER
	END

END
CLOSE INSCHK
DEALLOCATE INSCHK

-------------------- Colocado e Comentado por Milena em 22/06/99 -------------------- */

End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>I</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o36">
<a:ObjectID>6958AC39-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_CHK_TRU</a:Name>
<a:Code>T_CHK_TRU</a:Code>
<a:Text>Create Trigger T_CHK_TRU On T_CHK
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_CHK)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código do Checkin&gt; da tabela &lt;Checkin&gt; não pode ser alterada.&#39;
  Return
End
If Update (CD_AER)
/* Aeroporto»Checkin: Aeroporto possui Checkins */
If (Select Count(*) From T_AER, Inserted
Where T_AER.CD_AER = Inserted.CD_AER)
 &lt;&gt;(Select Count(CD_AER) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Aeroporto&gt; que se deseja incluir na tabela &lt;Checkin&gt; não está cadastrada&#39;
  Return
End
If Update (CD_COM)
/* Companhia Aérea»Checkin: Companhia Aér. possui Checkins */
If (Select Count(*) From T_COM, Inserted
Where T_COM.CD_COM = Inserted.CD_COM)
 &lt;&gt;(Select Count(CD_COM) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Companhia Aérea&gt; que se deseja incluir na tabela &lt;Checkin&gt; não está cadastrada&#39;
  Return
End
/* Regra de negócio */
IF UPDATE(NR_CHK) OR UPDATE(NR_CHK_ORD)
BEGIN
	/* Incluir registros em T_APA */
	INSERT	T_APA (DH_APA, CD_PAR)
	Select	GETDATE(), CKV.CD_PAR
	From	T_CKV001 CKV, T_CHK CHK, INSERTED INS
	Where	CKV.CD_PAR IN (	Select 	CD_PAR
				From 	T_PAR PAR
				Where	PAR.TP_PAR_STA = 1 And
					PAR.CD_AER = (Select CD_AER From T_PSI)) And
		CHK.CD_CHK = CKV.CD_CHK And
		CHK.CD_CHK = INS.CD_CHK

	/* Incluir registros em T_AHO */
	INSERT	T_AHO (CD_HOT, DH_AHO)
	Select	DISTINCT HCK.CD_HOT, GETDATE()
	From	T_HCK HCK, T_CHK CHK, INSERTED INS
	Where	CHK.CD_CHK = HCK.CD_CHK And
		CHK.CD_CHK = INS.CD_CHK
END

/* -------------------- Colocado e Comentado por Milena em 22/06/99 --------------------

/* Declaração do cursor */
DECLARE INSCHK CURSOR FOR
	SELECT 	INS.CD_CHK,
		INS.NR_CHK_ORD,
		INS.CD_AER
	FROM	INSERTED INS
	ORDER BY NR_CHK_ORD

/* Declaração das variáveis  */
DECLARE	@CD_CHK	INT,
		@NR_CHK_ORD	INT,
	 	@CD_AER	INT,
		@CD_CHK_ATU 	INT
		 
/* Abertura do cursor */
OPEN INSCHK

/* Ir para o primeiro registro */
FETCH	INSCHK
INTO	@CD_CHK,
	@NR_CHK_ORD,
	@CD_AER

/* Processar todos os registros de INSCHK */
WHILE @@FETCH_STATUS = 0
BEGIN

	IF (	SELECT 	COUNT(*) 
		FROM 	T_CHK 
		WHERE 	CD_CHK &lt;&gt; @CD_CHK  AND NR_CHK_ORD = @NR_CHK_ORD AND CD_AER = @CD_AER) &gt; 0
	BEGIN
		SELECT	@CD_CHK_ATU = CD_CHK 
		FROM 	T_CHK
		WHERE 	CD_CHK &lt;&gt; @CD_CHK AND NR_CHK_ORD = @NR_CHK_ORD AND CD_AER = @CD_AER

		UPDATE	T_CHK
		SET	NR_CHK_ORD = NR_CHK_ORD + 1
		WHERE	CD_CHK = @CD_CHK_ATU

		SELECT @NR_CHK_ORD = @NR_CHK_ORD + 1, @CD_CHK = @CD_CHK_ATU
	END
	ELSE
	BEGIN
		/* Ir para o próximo registro */
		FETCH NEXT FROM INSCHK
		INTO	@CD_CHK,
			@NR_CHK_ORD,
			@CD_AER
	END

END
CLOSE INSCHK
DEALLOCATE INSCHK

-------------------- Colocado e Comentado por Milena em 22/06/99 -------------------- */

End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o30"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o37">
<a:ObjectID>6958ACBE-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_1</a:Name>
<a:Code>REFERENCE_1</a:Code>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o24"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o7"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o30"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o38">
<a:ObjectID>6958ACC1-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o25"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o12"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o39">
<a:CenterTextOffset>(3, 0)</a:CenterTextOffset>
<a:Rect>((-742772,686750), (-734598,696030))</a:Rect>
<a:ListOfPoints>((-738668,686750),(-738718,696030))</a:ListOfPoints>
<a:ArrowStyle>4882</a:ArrowStyle>
<a:LineColor>255</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Id="o40">
<a:Rect>((-741532,684182), (-732974,687782))</a:Rect>
<a:LineColor>255</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o41">
<a:ObjectID>6958ABAA-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_ISC</a:Name>
<a:Code>T_FIDS_ISC</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o42">
<a:ObjectID>6958ABFA-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_IST</a:Name>
<a:Code>CD_IST</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o43">
<a:ObjectID>6958ABFB-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_COM</a:Name>
<a:Code>CD_COM</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o44">
<a:ObjectID>6958ABFC-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TIMESTAMP</a:Name>
<a:Code>TIMESTAMP</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o45">
<a:ObjectID>6958ABFE-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_FIDS_ISC</a:Name>
<a:Code>Pk_T_FIDS_ISC</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_FIDS_ISC</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o42"/>
<o:Column Ref="o43"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Owner>
<o:User Ref="o19"/>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o46">
<a:ObjectID>6958ACA8-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_ISC_TRI</a:Name>
<a:Code>T_FIDS_ISC_TRI</a:Code>
<a:Text>Create Trigger T_FIDS_ISC_TRI On T_FIDS_ISC
For Insert As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* Companhia Aérea»FIDS - IST Companhia: Companhia do ISC */
If (Select Count(*) From T_COM, Inserted
Where T_COM.CD_COM = Inserted.CD_COM)
 &lt;&gt;(Select Count(CD_COM) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Companhia Aérea&gt; que se deseja incluir na tabela &lt;FIDS - IST Companhia&gt; não está cadastrada&#39;
  Return
End
/* FIDS - IST Servidor de Informação»FIDS - IST Companhia: Companhia do IST */
If (Select Count(*) From T_FIDS_IST, Inserted
Where T_FIDS_IST.CD_IST = Inserted.CD_IST)
 &lt;&gt;(Select Count(CD_IST) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;FIDS - IST Servidor de Informação&gt; que se deseja incluir na tabela &lt;FIDS - IST Companhia&gt; não está cadastrada&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>I</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o47">
<a:ObjectID>6958ACAB-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_ISC_TRU</a:Name>
<a:Code>T_FIDS_ISC_TRU</a:Code>
<a:Text>Create Trigger T_FIDS_ISC_TRU On T_FIDS_ISC
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_IST)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código do Information Server&gt; da tabela &lt;FIDS - IST Companhia&gt; não pode ser alterada.&#39;
  Return
End
If Update (CD_COM)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código da Companhia Aérea&gt; da tabela &lt;FIDS - IST Companhia&gt; não pode ser alterada.&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o45"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Id="o48">
<a:Rect>((-741333,693472), (-734475,698018))</a:Rect>
<a:LineColor>255</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o49">
<a:ObjectID>6958AB71-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_COM</a:Name>
<a:Code>T_COM</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o50">
<a:ObjectID>6958AC98-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_COM</a:Name>
<a:Code>CD_COM</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o51">
<a:ObjectID>6958AC9A-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NM_COM</a:Name>
<a:Code>NM_COM</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>char(30)</a:DataType>
<a:Length>30</a:Length>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o52">
<a:ObjectID>6958AC9D-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>SG_COM_IAT_003</a:Name>
<a:Code>SG_COM_IAT_003</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>char(3)</a:DataType>
<a:Length>3</a:Length>
</o:Column>
<o:Column Id="o53">
<a:ObjectID>6958ACA0-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>SG_COM_IAT_002</a:Name>
<a:Code>SG_COM_IAT_002</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>char(2)</a:DataType>
<a:Length>2</a:Length>
</o:Column>
<o:Column Id="o54">
<a:ObjectID>6958ACA3-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>FL_COM_GR1</a:Name>
<a:Code>FL_COM_GR1</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>tinyint</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o55">
<a:ObjectID>6958ACA6-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>FL_COM_GR2</a:Name>
<a:Code>FL_COM_GR2</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>tinyint</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o56">
<a:ObjectID>6958ACA9-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>FL_COM_TAR_RED</a:Name>
<a:Code>FL_COM_TAR_RED</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>tinyint</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o57">
<a:ObjectID>6958ACAC-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_COM_MAT</a:Name>
<a:Code>CD_COM_MAT</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o58">
<a:ObjectID>6958ACAF-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TIMESTAMP</a:Name>
<a:Code>TIMESTAMP</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o59">
<a:ObjectID>6958AB44-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_COM</a:Name>
<a:Code>Pk_T_COM</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_COM</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o50"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Indexes>
<o:Index Id="o60">
<a:ObjectID>6958ACB6-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_COM_GR1</a:Name>
<a:Code>I_COM_GR1</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:IndexColumns>
<o:IndexColumn Id="o61">
<a:ObjectID>6958ACB8-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o54"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
<o:Index Id="o62">
<a:ObjectID>6958ACBA-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_COM_GR2</a:Name>
<a:Code>I_COM_GR2</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:IndexColumns>
<o:IndexColumn Id="o63">
<a:ObjectID>6958ACBD-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o55"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
<o:Index Id="o64">
<a:ObjectID>6958ACC0-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_COM_IAT_002</a:Name>
<a:Code>I_COM_IAT_002</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:IndexColumns>
<o:IndexColumn Id="o65">
<a:ObjectID>6958ACC3-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o53"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
<o:Index Id="o66">
<a:ObjectID>6958AB40-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_COM_IAT_003</a:Name>
<a:Code>I_COM_IAT_003</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:IndexColumns>
<o:IndexColumn Id="o67">
<a:ObjectID>6958AB42-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o52"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
</c:Indexes>
<c:Owner>
<o:User Ref="o19"/>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o68">
<a:ObjectID>6958AC46-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_COM_TRD</a:Name>
<a:Code>T_COM_TRD</a:Code>
<a:Text>Create Trigger T_COM_TRD On T_COM
For Delete As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* Companhia Aérea»Chegadas: Comapanhia Aérea da Chegada (Restrict) */
If (Select Count(*) From T_CHG dep, Deleted pri
 Where dep.CD_COM = pri.CD_COM) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Companhia Aérea&gt; está sendo referenciada na tabela &lt;Chegadas&gt;&#39;
  Return
End
/* Companhia Aérea»Chegadas - Mirror: Companhia Aérea da Chegada (Restrict) */
If (Select Count(*) From T_CHG_MIR dep, Deleted pri
 Where dep.CD_COM = pri.CD_COM) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Companhia Aérea&gt; está sendo referenciada na tabela &lt;Chegadas - Mirror&gt;&#39;
  Return
End
/* Companhia Aérea»Partidas - Mirror: Companhia Aérea da Partida (Restrict) */
If (Select Count(*) From T_PAR_MIR dep, Deleted pri
 Where dep.CD_COM = pri.CD_COM) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Companhia Aérea&gt; está sendo referenciada na tabela &lt;Partidas - Mirror&gt;&#39;
  Return
End
/* Companhia Aérea»Partidas: Companhia Aérea da Partida (Restrict) */
If (Select Count(*) From T_PAR dep, Deleted pri
 Where dep.CD_COM = pri.CD_COM) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Companhia Aérea&gt; está sendo referenciada na tabela &lt;Partidas&gt;&#39;
  Return
End
/* Companhia Aérea»FIDS - IST Companhia: Companhia do ISC (Restrict) */
If (Select Count(*) From T_FIDS_ISC dep, Deleted pri
 Where dep.CD_COM = pri.CD_COM) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Companhia Aérea&gt; está sendo referenciada na tabela &lt;FIDS - IST Companhia&gt;&#39;
  Return
End
/* Companhia Aérea»FIDS - Usuário do Grupo de Displays: DGT-COM:R (Restrict) */
If (Select Count(*) From T_FIDS_DGU dep, Deleted pri
 Where dep.CD_COM = pri.CD_COM) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Companhia Aérea&gt; está sendo referenciada na tabela &lt;FIDS - Usuário do Grupo de Displays&gt;&#39;
  Return
End
/* Companhia Aérea»Hotran: É Companhia do Hotran (Restrict) */
If (Select Count(*) From T_HOT001 dep, Deleted pri
 Where dep.SG_COM = pri.SG_COM_IAT_003) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Companhia Aérea&gt; está sendo referenciada na tabela &lt;Hotran&gt;&#39;
  Return
End
/* Companhia Aérea»Companhia Aérea: É Matriz de (Restrict) */
If (Select Count(*) From T_COM dep, Deleted pri
 Where dep.CD_COM_MAT = pri.CD_COM) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Companhia Aérea&gt; está sendo referenciada na tabela &lt;Companhia Aérea&gt;&#39;
  Return
End
/* Companhia Aérea»Informante da Situação de Vôo: possui (Restrict) */
If (Select Count(*) From T_IFT dep, Deleted pri
 Where dep.CD_COM = pri.CD_COM) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Companhia Aérea&gt; está sendo referenciada na tabela &lt;Informante da Situação de Vôo&gt;&#39;
  Return
End
/* Companhia Aérea»Tarifas Pagas no Bilhete: Se Relaciona (Restrict) */
If (Select Count(*) From T_TFB001 dep, Deleted pri
 Where dep.CD_COM = pri.CD_COM) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Companhia Aérea&gt; está sendo referenciada na tabela &lt;Tarifas Pagas no Bilhete&gt;&#39;
  Return
End
/* Companhia Aérea»Tarifas Pagas no Bilhete - Mirror: Se relaciona (Restrict) */
If (Select Count(*) From T_TFB001_MIR dep, Deleted pri
 Where dep.CD_COM = pri.CD_COM) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Companhia Aérea&gt; está sendo referenciada na tabela &lt;Tarifas Pagas no Bilhete - Mirror&gt;&#39;
  Return
End
/* Companhia Aérea»Boxes da Companhia Aérea: Boxes da Companhia Aérea (Cascade) */
Delete T_BCO From T_BCO dep, Deleted pri
 Where dep.CD_COM = pri.CD_COM
/* Companhia Aérea»Aeronave: Companh Aérea possui Aeronaves (Cascade) */
Delete T_AEN From T_AEN dep, Deleted pri
 Where dep.CD_COM = pri.CD_COM
/* Companhia Aérea»Checkin: Companhia Aér. possui Checkins (Cascade) */
Delete T_CHK From T_CHK dep, Deleted pri
 Where dep.CD_COM = pri.CD_COM
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>D</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o69">
<a:ObjectID>6958AC48-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_COM_TRI</a:Name>
<a:Code>T_COM_TRI</a:Code>
<a:Text>Create Trigger T_COM_TRI On T_COM
For Insert As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* Companhia Aérea»Companhia Aérea: É Matriz de */
If (Select Count(*) From T_COM, Inserted
Where T_COM.CD_COM = Inserted.CD_COM_MAT)
 &lt;&gt;(Select Count(CD_COM_MAT) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Companhia Aérea&gt; que se deseja incluir na tabela &lt;Companhia Aérea&gt; não está cadastrada&#39;
  Return
End
/* Regra de negócio */
/* Verificar se há alguma situação que não seja do Grupo 1 nem do Grupo 2 */
IF (	SELECT	COUNT(*)
	FROM	INSERTED INS,
		T_COM COM
	WHERE	COM.CD_COM = INS.CD_COM AND
		INS.FL_COM_GR1 = 0 AND 
		INS.FL_COM_GR2 = 0) &gt; 0
BEGIN
	RAISERROR 20310 &#39;Operação não executada: Uma Companhia Aérea deve pertencer a pelo menos um Grupo .&#39;
	ROLLBACK TRANSACTION
	RETURN
END

/* Verificar se quando a companhia for do Grupo 1, existe sigla IATA-3 */
IF (	SELECT	COUNT(*)
	FROM	INSERTED INS,
		T_COM COM
	WHERE	COM.CD_COM = INS.CD_COM AND
		INS.FL_COM_GR1 = 1 AND 
		INS.SG_COM_IAT_003 = &#39;&#39;) &gt; 0
BEGIN
	RAISERROR 20310 &#39;Operação não executada: Uma Companhia Aérea do Grupo 1 deve possuir sigla IATA-3.&#39;
	ROLLBACK TRANSACTION
	RETURN
END

/* Verificar se quando a companhia for do Grupo 1, existe sigla IATA-2 */
IF (	SELECT	COUNT(*)
	FROM	INSERTED INS,
		T_COM COM
	WHERE	COM.CD_COM = INS.CD_COM AND
		INS.FL_COM_GR1 = 1 AND 
		INS.SG_COM_IAT_002 = &#39;&#39;) &gt; 0
BEGIN
	RAISERROR 20310 &#39;Operação não executada: Uma Companhia Aérea do Grupo 1 deve possuir sigla IATA-2.&#39;
	ROLLBACK TRANSACTION
	RETURN
END

/* Verificar se já existe alguma companhia cadastrada com a sigla IATA-3 da companhia que se está incluindo */
IF (	SELECT	COUNT(*)
	FROM	T_COM COM, 
		INSERTED INS
	WHERE	COM.CD_COM &lt;&gt; INS.CD_COM AND
		COM.SG_COM_IAT_003 = INS.SG_COM_IAT_003 AND
		INS.SG_COM_IAT_003 &lt;&gt; &#39;&#39;) &gt; 0
BEGIN
	RAISERROR 20310 &#39;Operação não executada: Já existe uma Companhia Áerea cadastrada com esta sigla IATA-3.&#39;
	ROLLBACK TRANSACTION
	RETURN
END


/* Verificar se já existe alguma companhia cadastrada com a sigla IATA-2 da companhia que se está incluindo */
IF (	SELECT	COUNT(*)
	FROM	T_COM COM, 
		INSERTED INS
	WHERE	COM.CD_COM &lt;&gt; INS.CD_COM AND
		COM.SG_COM_IAT_002 = INS.SG_COM_IAT_002 AND
		INS.SG_COM_IAT_002 &lt;&gt; &#39;&#39;) &gt; 0
BEGIN 
	RAISERROR 20310 &#39;Operação não executada: Já existe uma Companhia Áerea cadastrada com esta sigla IATA-2.&#39;
	ROLLBACK TRANSACTION
	RETURN
END

End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>I</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o70">
<a:ObjectID>6958AC4A-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_COM_TRU</a:Name>
<a:Code>T_COM_TRU</a:Code>
<a:Text>Create Trigger T_COM_TRU On T_COM
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_COM)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código da Companhia Aérea&gt; da tabela &lt;Companhia Aérea&gt; não pode ser alterada.&#39;
  Return
End
If Update (CD_COM_MAT)
/* Companhia Aérea»Companhia Aérea: É Matriz de */
If (Select Count(*) From T_COM, Inserted
Where T_COM.CD_COM = Inserted.CD_COM_MAT)
 &lt;&gt;(Select Count(CD_COM_MAT) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Companhia Aérea&gt; que se deseja incluir na tabela &lt;Companhia Aérea&gt; não está cadastrada&#39;
  Return
End
/* Regra de negócio */
/* Verificar se há alguma Companhia que não seja do Grupo 1 nem do Grupo 2 */
IF (	SELECT	COUNT(*)
	FROM	INSERTED
	WHERE	FL_COM_GR1 = 0 AND FL_COM_GR2 = 0) &gt; 0
BEGIN
	RAISERROR 20310 &#39;Operação não executada: Uma Companhia Aérea deve pertencer a pelo menos um Grupo.&#39;
	ROLLBACK TRANSACTION
	RETURN
END

/* Verificar se quando a companhia for do Grupo 1, existe sigla IATA-3 */
IF (	SELECT	COUNT(*)
	FROM	INSERTED INS,
		T_COM COM
	WHERE	COM.CD_COM = INS.CD_COM AND
		INS.FL_COM_GR1 = 1 AND 
		INS.SG_COM_IAT_003 = &#39;&#39;) &gt; 0
BEGIN
	RAISERROR 20310 &#39;Operação não executada: Uma Companhia Aérea do Grupo 1 deve possuir sigla IATA-3.&#39;
	ROLLBACK TRANSACTION
	RETURN
END

/* Verificar se quando a companhia for do Grupo 1, existe sigla IATA-2 */
IF (	SELECT	COUNT(*)
	FROM	INSERTED INS,
		T_COM COM
	WHERE	COM.CD_COM = INS.CD_COM AND
		INS.FL_COM_GR1 = 1 AND 
		INS.SG_COM_IAT_002 = &#39;&#39;) &gt; 0
BEGIN
	RAISERROR 20310 &#39;Operação não executada: Uma Companhia Aérea do Grupo 1 deve possuir sigla IATA-2.&#39;
	ROLLBACK TRANSACTION
	RETURN
END

/* Não permitir que o campo SG_COM_IAT_003 seja alterado se existir alguma referência a esta sigla na tabela T_HOT001 */
IF UPDATE(SG_COM_IAT_003)
BEGIN
	IF (	SELECT	COUNT(*)
		FROM	DELETED DEL, T_HOT001 HOT
		WHERE	HOT.SG_COM = DEL.SG_COM_IAT_003) &gt; 0
	BEGIN 
		RAISERROR 20310 &#39;Operação não executada: A sigla IATA-3 dessa Companhia Aérea não pode ser alterada pois está sendo referenciada em pelo menos um Hotran.&#39;
		ROLLBACK TRANSACTION
		RETURN
	END
END

/* Verificar se já existe alguma companhia cadastrada com a sigla IATA-3 da companhia que se está alterando */
IF (	SELECT	COUNT(*)
	FROM	T_COM COM, 
		INSERTED INS
	WHERE	COM.CD_COM &lt;&gt; INS.CD_COM AND
		COM.SG_COM_IAT_003 = INS.SG_COM_IAT_003 AND
		INS.SG_COM_IAT_003 &lt;&gt; &#39;&#39;) &gt; 0
BEGIN
	RAISERROR 20310 &#39;Operação não executada: Já existe uma Companhia Áerea cadastrada com esta sigla IATA-3.&#39;
	ROLLBACK TRANSACTION
	RETURN
END

/* Verificar se já existe alguma companhia cadastrada com a sigla IATA-2 da companhia que se está alterando */
IF (	SELECT	COUNT(*)
	FROM	T_COM COM, 
		INSERTED INS
	WHERE	COM.CD_COM &lt;&gt; INS.CD_COM AND
		COM.SG_COM_IAT_002 = INS.SG_COM_IAT_002 AND
		INS.SG_COM_IAT_002 &lt;&gt; &#39;&#39;) &gt; 0
BEGIN 
	RAISERROR 20310 &#39;Operação não executada: Já existe uma Companhia Áerea cadastrada com esta sigla IATA-2.&#39;
	ROLLBACK TRANSACTION
	RETURN
END

IF UPDATE(SG_COM_IAT_003)
BEGIN
	/* Incluir Registros em T_ACH */
	INSERT	T_ACH (DH_ACH, CD_CHG)
	Select 	GETDATE(), CD_CHG
	From 	T_CHG CHG, INSERTED INS
	Where	CHG.TP_CHG_STA = 1 AND
		CHG.CD_AER = (Select CD_AER From T_PSI) AND
		CHG.CD_COM = INS.CD_COM

	/* Incluir Registros em T_APA */
	INSERT	T_APA (DH_APA, CD_PAR)
	Select 	GETDATE(), CD_PAR
	From 	T_PAR PAR, INSERTED INS
	Where	PAR.TP_PAR_STA = 1 AND
		PAR.CD_AER = (Select CD_AER From T_PSI) AND
		PAR.CD_COM = INS.CD_COM

	/* Incluir Registros em T_AHP - Chegadas */
	INSERT	T_AHP (CD_HPA, DH_AHP)
	Select 	DISTINCT CD_HPA, GETDATE()
	From 	T_HPA001 HPA, T_CHG CHG, T_SIT SIT, INSERTED INS
	Where	HPA.CD_CHG = CHG.CD_CHG AND
		SIT.CD_SIT = CHG.CD_SIT AND
		HPA.CD_AER = (Select CD_AER From T_PSI) AND
		(HPA.FL_HPA_ENT = 1 OR SIT.FL_SIT_AEN_PAT = 1) AND
		HPA.FL_HPA_SAI = 0 AND
		HPA.CD_AEN IS NOT NULL AND
		CHG.CD_COM = INS.CD_COM

	/* Incluir Registros em T_AHP - Partidas */
	INSERT	T_AHP (CD_HPA, DH_AHP)
	Select 	DISTINCT CD_HPA, GETDATE()
	From 	T_HPA001 HPA, T_CHG CHG, T_SIT SIT, T_PAR PAR, INSERTED INS
	Where	HPA.CD_CHG = CHG.CD_CHG AND
		SIT.CD_SIT = CHG.CD_SIT AND
		HPA.CD_AER = (Select CD_AER From T_PSI) AND
		(HPA.FL_HPA_ENT = 1 OR SIT.FL_SIT_AEN_PAT = 1) AND
		HPA.FL_HPA_SAI = 0 AND
		HPA.CD_AEN IS NOT NULL AND
		PAR.CD_CHG_AEN_ANT = HPA.CD_CHG AND
		PAR.CD_COM = INS.CD_COM

END
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o59"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o71">
<a:ObjectID>6958AB47-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_4</a:Name>
<a:Code>REFERENCE_4</a:Code>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o49"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o41"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o59"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o72">
<a:ObjectID>6958AB4A-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o50"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o43"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o73">
<a:CenterTextOffset>(603, -1798)</a:CenterTextOffset>
<a:Rect>((-721698,658678), (-713974,674264))</a:Rect>
<a:ListOfPoints>((-719583,674264),(-716019,658678))</a:ListOfPoints>
<a:ArrowStyle>4881</a:ArrowStyle>
<a:LineColor>255</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Ref="o6"/>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Id="o74">
<a:Rect>((-719331,656405), (-712705,660951))</a:Rect>
<a:LineColor>255</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o75">
<a:ObjectID>6958AB91-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_EST</a:Name>
<a:Code>T_EST</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o76">
<a:ObjectID>6958AB46-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_EST</a:Name>
<a:Code>CD_EST</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o77">
<a:ObjectID>6958AB49-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NR_EST</a:Name>
<a:Code>NR_EST</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>char(4)</a:DataType>
<a:Length>4</a:Length>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o78">
<a:ObjectID>6958AB4C-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_AER</a:Name>
<a:Code>CD_AER</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o79">
<a:ObjectID>6958AB4F-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_SAL</a:Name>
<a:Code>CD_SAL</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o80">
<a:ObjectID>6958AB52-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TIMESTAMP</a:Name>
<a:Code>TIMESTAMP</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o81">
<a:ObjectID>6958AB66-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_EST</a:Name>
<a:Code>Pk_T_EST</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_EST</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o76"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Indexes>
<o:Index Id="o82">
<a:ObjectID>6958AB59-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_EST_AER</a:Name>
<a:Code>I_EST_AER</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Unique>1</a:Unique>
<c:IndexColumns>
<o:IndexColumn Id="o83">
<a:ObjectID>6958AB5C-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o77"/>
</c:Column>
</o:IndexColumn>
<o:IndexColumn Id="o84">
<a:ObjectID>6958AB5F-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_1&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o79"/>
</c:Column>
</o:IndexColumn>
<o:IndexColumn Id="o85">
<a:ObjectID>6958AB63-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_2&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o78"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
</c:Indexes>
<c:Owner>
<o:User Ref="o19"/>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o86">
<a:ObjectID>6958AC6F-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_EST_TRD</a:Name>
<a:Code>T_EST_TRD</a:Code>
<a:Text>Create Trigger T_EST_TRD On T_EST
For Delete As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* Esteira»Hotran - Frequência: É Esteira da Frequência (Restrict) */
If (Select Count(*) From T_HFR dep, Deleted pri
 Where dep.CD_EST = pri.CD_EST) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Esteira&gt; está sendo referenciada na tabela &lt;Hotran - Frequência&gt;&#39;
  Return
End
/* Esteira»FIDS - IST Servidor de Informação: Esteira Associada ao IST (Restrict) */
If (Select Count(*) From T_FIDS_IST dep, Deleted pri
 Where dep.CD_EST = pri.CD_EST) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Esteira&gt; está sendo referenciada na tabela &lt;FIDS - IST Servidor de Informação&gt;&#39;
  Return
End
/* Esteira»Esteira da Chegada de Vôo - Mirror: Esteira da Chegada (Restrict) */
If (Select Count(*) From T_ESV001_MIR dep, Deleted pri
 Where dep.CD_EST = pri.CD_EST) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Esteira&gt; está sendo referenciada na tabela &lt;Esteira da Chegada de Vôo - Mirror&gt;&#39;
  Return
End
/* Esteira»Esteira da Chegada de Vôo: Esteira integra ESV (Restrict) */
If (Select Count(*) From T_ESV001 dep, Deleted pri
 Where dep.CD_EST = pri.CD_EST) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Esteira&gt; está sendo referenciada na tabela &lt;Esteira da Chegada de Vôo&gt;&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>D</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o87">
<a:ObjectID>6958AC72-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_EST_TRI</a:Name>
<a:Code>T_EST_TRI</a:Code>
<a:Text>Create Trigger T_EST_TRI On T_EST
For Insert As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* Aeroporto»Esteira: Aeroporto possui Esteiras */
If (Select Count(*) From T_AER, Inserted
Where T_AER.CD_AER = Inserted.CD_AER)
 &lt;&gt;(Select Count(CD_AER) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Aeroporto&gt; que se deseja incluir na tabela &lt;Esteira&gt; não está cadastrada&#39;
  Return
End
/* Sala de Desembarque»Esteira: Sala Desemb. possui Esteiras */
If (Select Count(*) From T_SAL, Inserted
Where T_SAL.CD_SAL = Inserted.CD_SAL)
 &lt;&gt;(Select Count(CD_SAL) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Sala de Desembarque&gt; que se deseja incluir na tabela &lt;Esteira&gt; não está cadastrada&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>I</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o88">
<a:ObjectID>6958AC75-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_EST_TRU</a:Name>
<a:Code>T_EST_TRU</a:Code>
<a:Text>Create Trigger T_EST_TRU On T_EST
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_EST)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código da Esteira&gt; da tabela &lt;Esteira&gt; não pode ser alterada.&#39;
  Return
End
If Update (CD_AER)
/* Aeroporto»Esteira: Aeroporto possui Esteiras */
If (Select Count(*) From T_AER, Inserted
Where T_AER.CD_AER = Inserted.CD_AER)
 &lt;&gt;(Select Count(CD_AER) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Aeroporto&gt; que se deseja incluir na tabela &lt;Esteira&gt; não está cadastrada&#39;
  Return
End
If Update (CD_SAL)
/* Sala de Desembarque»Esteira: Sala Desemb. possui Esteiras */
If (Select Count(*) From T_SAL, Inserted
Where T_SAL.CD_SAL = Inserted.CD_SAL)
 &lt;&gt;(Select Count(CD_SAL) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Sala de Desembarque&gt; que se deseja incluir na tabela &lt;Esteira&gt; não está cadastrada&#39;
  Return
End
/* Regra de negócio */
IF UPDATE(NR_EST) OR UPDATE(CD_SAL)
BEGIN
	/* Incluir registros em T_ACH */
	INSERT	T_ACH (DH_ACH, CD_CHG)
	Select	GETDATE(), ESV.CD_CHG
	From	T_ESV001 ESV, T_EST EST, INSERTED INS
	Where	ESV.CD_CHG IN (	Select 	CD_CHG
				From 	T_CHG CHG
				Where	CHG.TP_CHG_STA = 1 And
					CHG.CD_AER = (Select CD_AER From T_PSI)) And
		EST.CD_EST = ESV.CD_EST And
		EST.CD_EST = INS.CD_EST

	/* Incluir Registros em T_AHO */
	INSERT	T_AHO (CD_HOT, DH_AHO)
	Select	DISTINCT CD_HOT, GETDATE()
	From	T_HFR HFR, INSERTED INS
	Where	HFR.CD_EST = INS.CD_EST

	/* Incluir Registros em T_AHP */
	INSERT	T_AHP (CD_HPA, DH_AHP)
	Select	DISTINCT CD_HPA, GETDATE()
	From	T_HPA001 HPA, T_CHG CHG, T_SIT SIT, T_ESV001 ESV, T_EST EST, INSERTED INS
	Where	HPA.CD_CHG = CHG.CD_CHG AND
		SIT.CD_SIT = CHG.CD_SIT AND
		HPA.CD_AER = (Select CD_AER From T_PSI) AND
		(HPA.FL_HPA_ENT = 1 OR SIT.FL_SIT_AEN_PAT = 1) AND
		HPA.FL_HPA_SAI = 0 AND
		HPA.CD_AEN IS NOT NULL AND
		ESV.CD_CHG = HPA.CD_CHG AND 
		EST.CD_EST = ESV.CD_EST And
		EST.CD_EST = INS.CD_EST
END

End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o81"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o89">
<a:ObjectID>6958AB4D-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_5</a:Name>
<a:Code>REFERENCE_5</a:Code>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o75"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o7"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o81"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o90">
<a:ObjectID>6958AB50-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o76"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o14"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o91">
<a:CenterTextOffset>(3, 0)</a:CenterTextOffset>
<a:Rect>((-724932,703985), (-704245,705250))</a:Rect>
<a:ListOfPoints>((-704245,704020),(-724932,703985))</a:ListOfPoints>
<a:ArrowStyle>4882</a:ArrowStyle>
<a:LineColor>255</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Id="o92">
<a:Rect>((-708716,701746), (-699772,706292))</a:Rect>
<a:LineColor>255</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o93">
<a:ObjectID>6958AB9C-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_DGT</a:Name>
<a:Code>T_FIDS_DGT</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081686438</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o94">
<a:ObjectID>6958ABA2-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_DGT</a:Name>
<a:Code>CD_DGT</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o95">
<a:ObjectID>6958ABA5-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NM_DGT</a:Name>
<a:Code>NM_DGT</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>varchar(30)</a:DataType>
<a:Length>30</a:Length>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o96">
<a:ObjectID>6958ABA8-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_CST</a:Name>
<a:Code>CD_CST</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o97">
<a:ObjectID>6958ABAB-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_SCR</a:Name>
<a:Code>CD_SCR</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o98">
<a:ObjectID>6958ABAE-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_SCR_OFF</a:Name>
<a:Code>CD_SCR_OFF</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081686531</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o99">
<a:ObjectID>6958ABB1-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>FL_DGT_PRG</a:Name>
<a:Code>FL_DGT_PRG</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>bit</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o100">
<a:ObjectID>6958ABB4-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>HR_DGT_OFF</a:Name>
<a:Code>HR_DGT_OFF</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL0    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL0 As
@valor &gt;= 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o101">
<a:ObjectID>6958ABB7-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TIMESTAMP</a:Name>
<a:Code>TIMESTAMP</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o102">
<a:ObjectID>6958ABBE-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_FIDS_DGT</a:Name>
<a:Code>Pk_T_FIDS_DGT</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_FIDS_DGT</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o94"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Owner>
<o:User Ref="o19"/>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o103">
<a:ObjectID>6958AC88-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_DGT_TRD</a:Name>
<a:Code>T_FIDS_DGT_TRD</a:Code>
<a:Text>Create Trigger T_FIDS_DGT_TRD On T_FIDS_DGT
For Delete As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* FIDS - Grupo de Displays»FIDS - Displays: Grupo de Display do Display (Restrict) */
If (Select Count(*) From T_FIDS_DIS dep, Deleted pri
 Where dep.CD_DGT = pri.CD_DGT) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;FIDS - Grupo de Displays&gt; está sendo referenciada na tabela &lt;FIDS - Displays&gt;&#39;
  Return
End
/* FIDS - Grupo de Displays»FIDS - Servidor de Informação do Grupo de Displays: Grupo de Displays (Cascade) */
Delete T_FIDS_DGI From T_FIDS_DGI dep, Deleted pri
 Where dep.CD_DGT = pri.CD_DGT
/* FIDS - Grupo de Displays»FIDS - Usuário do Grupo de Displays: Grupo de Displays (Cascade) */
Delete T_FIDS_DGU From T_FIDS_DGU dep, Deleted pri
 Where dep.CD_DGT = pri.CD_DGT
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>D</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o104">
<a:ObjectID>6958AC8A-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_DGT_TRI</a:Name>
<a:Code>T_FIDS_DGT_TRI</a:Code>
<a:Text>Create Trigger T_FIDS_DGT_TRI On T_FIDS_DGT
For Insert As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* FIDS - Servidor de Comunicação»FIDS - Grupo de Displays: Servidor de Comunicação do Grupo de Displays */
If (Select Count(*) From T_FIDS_CST, Inserted
Where T_FIDS_CST.CD_CST = Inserted.CD_CST)
 &lt;&gt;(Select Count(CD_CST) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;FIDS - Servidor de Comunicação&gt; que se deseja incluir na tabela &lt;FIDS - Grupo de Displays&gt; não está cadastrada&#39;
  Return
End
/* FIDS - Scripts de Configuração de Tela»FIDS - Grupo de Displays: Script do Grupo de Displays */
If (Select Count(*) From T_FIDS_SCR, Inserted
Where T_FIDS_SCR.CD_SCR = Inserted.CD_SCR)
 &lt;&gt;(Select Count(CD_SCR) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;FIDS - Scripts de Configuração de Tela&gt; que se deseja incluir na tabela &lt;FIDS - Grupo de Displays&gt; não está cadastrada&#39;
  Return
End
/* FIDS - Scripts de Configuração de Tela»FIDS - Grupo de Displays: Script OffLine do Grupo de Displays */
If (Select Count(*) From T_FIDS_SCR, Inserted
Where T_FIDS_SCR.CD_SCR = Inserted.CD_SCR_OFF)
 &lt;&gt;(Select Count(CD_SCR_OFF) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;FIDS - Scripts de Configuração de Tela&gt; que se deseja incluir na tabela &lt;FIDS - Grupo de Displays&gt; não está cadastrada&#39;
  Return
End
/* Regra de negócio */
 
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>I</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o105">
<a:ObjectID>6958AC8C-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_DGT_TRU</a:Name>
<a:Code>T_FIDS_DGT_TRU</a:Code>
<a:Text>Create Trigger T_FIDS_DGT_TRU On T_FIDS_DGT
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_DGT)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código do Grupo de Displays&gt; da tabela &lt;FIDS - Grupo de Displays&gt; não pode ser alterada.&#39;
  Return
End
If Update (CD_CST)
/* FIDS - Servidor de Comunicação»FIDS - Grupo de Displays: Servidor de Comunicação do Grupo de Displays */
If (Select Count(*) From T_FIDS_CST, Inserted
Where T_FIDS_CST.CD_CST = Inserted.CD_CST)
 &lt;&gt;(Select Count(CD_CST) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;FIDS - Servidor de Comunicação&gt; que se deseja incluir na tabela &lt;FIDS - Grupo de Displays&gt; não está cadastrada&#39;
  Return
End
If Update (CD_SCR)
/* FIDS - Scripts de Configuração de Tela»FIDS - Grupo de Displays: Script do Grupo de Displays */
If (Select Count(*) From T_FIDS_SCR, Inserted
Where T_FIDS_SCR.CD_SCR = Inserted.CD_SCR)
 &lt;&gt;(Select Count(CD_SCR) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;FIDS - Scripts de Configuração de Tela&gt; que se deseja incluir na tabela &lt;FIDS - Grupo de Displays&gt; não está cadastrada&#39;
  Return
End
If Update (CD_SCR_OFF)
/* FIDS - Scripts de Configuração de Tela»FIDS - Grupo de Displays: Script OffLine do Grupo de Displays */
If (Select Count(*) From T_FIDS_SCR, Inserted
Where T_FIDS_SCR.CD_SCR = Inserted.CD_SCR_OFF)
 &lt;&gt;(Select Count(CD_SCR_OFF) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;FIDS - Scripts de Configuração de Tela&gt; que se deseja incluir na tabela &lt;FIDS - Grupo de Displays&gt; não está cadastrada&#39;
  Return
End
/* Regra de negócio */
-- O Comunication Server não pode ser alterado se houver algum display cadastrado para este grupo de Displays
IF UPDATE(CD_CST)
BEGIN
	IF (SELECT COUNT(*) FROM INSERTED INS JOIN T_FIDS_DIS DIS ON DIS.CD_DGT = INS.CD_DGT) &gt; 0 
	BEGIN
		RAISERROR 20999 &#39;Operação não executada: Não é possível alterar o Comunication Server de um Grupo de Displays que possua Displays.&#39;
		ROLLBACK TRANSACTION
		RETURN
	END

END
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o102"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Id="o106">
<a:Rect>((-726537,702463), (-717671,707009))</a:Rect>
<a:LineColor>255</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o107">
<a:ObjectID>6958AB98-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_CST</a:Name>
<a:Code>T_FIDS_CST</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o108">
<a:ObjectID>6958AB69-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_CST</a:Name>
<a:Code>CD_CST</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o109">
<a:ObjectID>6958AB6C-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NM_CST</a:Name>
<a:Code>NM_CST</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>varchar(30)</a:DataType>
<a:Length>30</a:Length>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o110">
<a:ObjectID>6958AB6F-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TP_CST_DIS</a:Name>
<a:Code>TP_CST_DIS</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>tinyint</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o111">
<a:ObjectID>6958AB73-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TP_CST_INT</a:Name>
<a:Code>TP_CST_INT</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>tinyint</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o112">
<a:ObjectID>6958AB76-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NM_CST_SER</a:Name>
<a:Code>NM_CST_SER</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>varchar(30)</a:DataType>
<a:Length>30</a:Length>
</o:Column>
<o:Column Id="o113">
<a:ObjectID>6958AB79-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TIMESTAMP</a:Name>
<a:Code>TIMESTAMP</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o114">
<a:ObjectID>6958AB8B-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_FIDS_CST</a:Name>
<a:Code>Pk_T_FIDS_CST</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_FIDS_CST</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o108"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Indexes>
<o:Index Id="o115">
<a:ObjectID>6958AB80-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_FIDS_CST_NOM</a:Name>
<a:Code>I_FIDS_CST_NOM</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Unique>1</a:Unique>
<c:IndexColumns>
<o:IndexColumn Id="o116">
<a:ObjectID>6958AB83-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o109"/>
</c:Column>
</o:IndexColumn>
<o:IndexColumn Id="o117">
<a:ObjectID>6958AB86-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_1&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o110"/>
</c:Column>
</o:IndexColumn>
<o:IndexColumn Id="o118">
<a:ObjectID>6958AB89-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_2&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o111"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
</c:Indexes>
<c:Owner>
<o:User Ref="o19"/>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o119">
<a:ObjectID>6958AC7C-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_CST_TRD</a:Name>
<a:Code>T_FIDS_CST_TRD</a:Code>
<a:Text>Create Trigger T_FIDS_CST_TRD On T_FIDS_CST
For Delete As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* FIDS - Servidor de Comunicação»FIDS - Grupo de Displays: Servidor de Comunicação do Grupo de Displays (Restrict) */
If (Select Count(*) From T_FIDS_DGT dep, Deleted pri
 Where dep.CD_CST = pri.CD_CST) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;FIDS - Servidor de Comunicação&gt; está sendo referenciada na tabela &lt;FIDS - Grupo de Displays&gt;&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>D</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o120">
<a:ObjectID>6958AC7F-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_CST_TRI</a:Name>
<a:Code>T_FIDS_CST_TRI</a:Code>
<a:Text>Create Trigger T_FIDS_CST_TRI On T_FIDS_CST
For Insert As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* Domínio de: Tipo de Display */
/* 1 - Monitor */
/* 2 - Led Panel */
/* 3 - Split Flap */
If (Select Count(*) From Inserted
    Where TP_CST_DIS In (1,2,3))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Tipo de Display&gt; que se deseja incluir na tabela &lt;FIDS - Servidor de Comunicação&gt; não é uma opção válida&#39;
  Return
End
/* Domínio de: Interface de Comunicação */
/* 1 - TCP/IP */
/* 2 - RS232 */
/* 3 - Paralela */
If (Select Count(*) From Inserted
    Where TP_CST_INT In (1,2,3))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Interface de Comunicação&gt; que se deseja incluir na tabela &lt;FIDS - Servidor de Comunicação&gt; não é uma opção válida&#39;
  Return
End
/* Regra de negócio */
 
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>I</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o121">
<a:ObjectID>6958AC82-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_CST_TRU</a:Name>
<a:Code>T_FIDS_CST_TRU</a:Code>
<a:Text>Create Trigger T_FIDS_CST_TRU On T_FIDS_CST
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_CST)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código do Comunication Server&gt; da tabela &lt;FIDS - Servidor de Comunicação&gt; não pode ser alterada.&#39;
  Return
End
If Update (TP_CST_DIS)
Or Update (TP_CST_INT)
/* Domínio de: Tipo de Display */
/* 1 - Monitor */
/* 2 - Led Panel */
/* 3 - Split Flap */
If (Select Count(*) From Inserted
    Where TP_CST_DIS In (1,2,3))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Tipo de Display&gt; que se deseja incluir na tabela &lt;FIDS - Servidor de Comunicação&gt; não é uma opção válida&#39;
  Return
End
/* Domínio de: Interface de Comunicação */
/* 1 - TCP/IP */
/* 2 - RS232 */
/* 3 - Paralela */
If (Select Count(*) From Inserted
    Where TP_CST_INT In (1,2,3))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Interface de Comunicação&gt; que se deseja incluir na tabela &lt;FIDS - Servidor de Comunicação&gt; não é uma opção válida&#39;
  Return
End
/* Regra de negócio */
-- O Comunication Server não pode ser alterado se houver algum display cadastrado para este grupo de Displays.
IF UPDATE(TP_CST_INT) OR UPDATE(TP_CST_DIS)
BEGIN
	IF (SELECT COUNT(*) FROM INSERTED INS JOIN T_FIDS_DGT DGT ON DGT.CD_CST = INS.CD_CST) &gt; 0 
	BEGIN
		RAISERROR 20999 &#39;Operação não executada: Não é possível alterar o Tipo de Interface ou o Tipo de um Servidor de Comunicação que possua Grupo de Displays.&#39;
		ROLLBACK TRANSACTION
		RETURN
	END

END
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o114"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o122">
<a:ObjectID>6958AB53-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_6</a:Name>
<a:Code>REFERENCE_6</a:Code>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o107"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o93"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o114"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o123">
<a:ObjectID>6958AB55-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o108"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o96"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o124">
<a:Rect>((-721268,685600), (-703718,704050))</a:Rect>
<a:ListOfPoints>((-721268,685600),(-703718,704050))</a:ListOfPoints>
<a:ArrowStyle>4882</a:ArrowStyle>
<a:LineColor>255</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Id="o125">
<a:Rect>((-725636,683487), (-717002,687087))</a:Rect>
<a:LineColor>255</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o126">
<a:ObjectID>6958AB9A-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_DGI</a:Name>
<a:Code>T_FIDS_DGI</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o127">
<a:ObjectID>6958AB8D-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_DGT</a:Name>
<a:Code>CD_DGT</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o128">
<a:ObjectID>6958AB8F-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_IST</a:Name>
<a:Code>CD_IST</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o129">
<a:ObjectID>6958AB92-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>QT_DGI</a:Name>
<a:Code>QT_DGI</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o130">
<a:ObjectID>6958AB94-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NR_DGI</a:Name>
<a:Code>NR_DGI</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o131">
<a:ObjectID>6958AB96-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TIMESTAMP</a:Name>
<a:Code>TIMESTAMP</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o132">
<a:ObjectID>6958AB9F-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_FIDS_DGI</a:Name>
<a:Code>Pk_T_FIDS_DGI</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_FIDS_DGI</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o127"/>
<o:Column Ref="o128"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Owner>
<o:User Ref="o19"/>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o133">
<a:ObjectID>6958AC84-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_DGI_TRI</a:Name>
<a:Code>T_FIDS_DGI_TRI</a:Code>
<a:Text>Create Trigger T_FIDS_DGI_TRI On T_FIDS_DGI
For Insert As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* FIDS - IST Servidor de Informação»FIDS - Servidor de Informação do Grupo de Displays: Servidor de Informação do Grupo de Displays */
If (Select Count(*) From T_FIDS_IST, Inserted
Where T_FIDS_IST.CD_IST = Inserted.CD_IST)
 &lt;&gt;(Select Count(CD_IST) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;FIDS - IST Servidor de Informação&gt; que se deseja incluir na tabela &lt;FIDS - Servidor de Informação do Grupo de Displays&gt; não está cadastrada&#39;
  Return
End
/* FIDS - Grupo de Displays»FIDS - Servidor de Informação do Grupo de Displays: Grupo de Displays */
If (Select Count(*) From T_FIDS_DGT, Inserted
Where T_FIDS_DGT.CD_DGT = Inserted.CD_DGT)
 &lt;&gt;(Select Count(CD_DGT) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;FIDS - Grupo de Displays&gt; que se deseja incluir na tabela &lt;FIDS - Servidor de Informação do Grupo de Displays&gt; não está cadastrada&#39;
  Return
End
/* Regra de negócio */
/* Verificar Alteração do Número de Linhas do Servidor de Informação */
IF (	SELECT	COUNT(*)
	FROM	T_FIDS_IST IST, INSERTED DGI
	WHERE	IST.CD_IST = DGI.CD_IST AND
		NOT (QT_IST &gt;= NR_DGI AND QT_IST &gt;= QT_DGI + NR_DGI - 1)) &gt; 0
BEGIN
	RAISERROR 20999 &#39;Operação não executada: Quantidade de Linhas entre Servidor de Informação e o Servidor de Informação do Grupo de Displays inconsistente.&#39;
	ROLLBACK TRANSACTION
	RETURN
END

End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>I</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o134">
<a:ObjectID>6958AC85-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_DGI_TRU</a:Name>
<a:Code>T_FIDS_DGI_TRU</a:Code>
<a:Text>Create Trigger T_FIDS_DGI_TRU On T_FIDS_DGI
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_DGT)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código do Grupo de Displays&gt; da tabela &lt;FIDS - Servidor de Informação do Grupo de Displays&gt; não pode ser alterada.&#39;
  Return
End
If Update (CD_IST)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código do Servidor de Informação&gt; da tabela &lt;FIDS - Servidor de Informação do Grupo de Displays&gt; não pode ser alterada.&#39;
  Return
End
/* Regra de negócio */
/* Verificar Alteração do Número de Linhas do Servidor de Informação */
IF (	SELECT	COUNT(*)
	FROM	T_FIDS_IST IST, INSERTED DGI
	WHERE	IST.CD_IST = DGI.CD_IST AND
		NOT (QT_IST &gt;= NR_DGI AND QT_IST &gt;= QT_DGI + NR_DGI - 1)) &gt; 0
BEGIN
	RAISERROR 20999 &#39;Operação não executada: Quantidade de Linhas entre Servidor de Informação e o Servidor de Informação do Grupo de Displays inconsistente.&#39;
	ROLLBACK TRANSACTION
	RETURN
END

End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o132"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Ref="o92"/>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o135">
<a:ObjectID>6958AB57-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_7</a:Name>
<a:Code>REFERENCE_7</a:Code>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o93"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o126"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o102"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o136">
<a:ObjectID>6958AB5A-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o94"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o127"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o137">
<a:CenterTextOffset>(4, 2)</a:CenterTextOffset>
<a:Rect>((-722918,695350), (-703685,704398))</a:Rect>
<a:ListOfPoints>((-722918,695350),(-703685,704398))</a:ListOfPoints>
<a:ArrowStyle>4882</a:ArrowStyle>
<a:LineColor>255</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Id="o138">
<a:Rect>((-728151,693574), (-719207,697174))</a:Rect>
<a:LineColor>255</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o139">
<a:ObjectID>6958AB9E-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_DGU</a:Name>
<a:Code>T_FIDS_DGU</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081686001</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o140">
<a:ObjectID>6958ABC1-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_DGU</a:Name>
<a:Code>CD_DGU</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o141">
<a:ObjectID>6958ABC4-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_DGT</a:Name>
<a:Code>CD_DGT</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o142">
<a:ObjectID>6958ABC6-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_USR</a:Name>
<a:Code>CD_USR</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o143">
<a:ObjectID>6958ABCA-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>FL_DGU_EXE</a:Name>
<a:Code>FL_DGU_EXE</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>bit</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o144">
<a:ObjectID>6958ABCE-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TIMESTAMP</a:Name>
<a:Code>TIMESTAMP</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o145">
<a:ObjectID>6958ABD9-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_FIDS_DGU</a:Name>
<a:Code>Pk_T_FIDS_DGU</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_FIDS_DGU</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o140"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Indexes>
<o:Index Id="o146">
<a:ObjectID>6958ABD6-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_DGTUSRCOM</a:Name>
<a:Code>I_DGTUSRCOM</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081686001</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Unique>1</a:Unique>
<c:IndexColumns>
<o:IndexColumn Id="o147">
<a:ObjectID>6958ABD7-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o141"/>
</c:Column>
</o:IndexColumn>
<o:IndexColumn Id="o148">
<a:ObjectID>6958ABD8-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_1&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o142"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
</c:Indexes>
<c:Owner>
<o:User Ref="o19"/>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o149">
<a:ObjectID>6958AC8F-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_DGU_TRI</a:Name>
<a:Code>T_FIDS_DGU_TRI</a:Code>
<a:Text>Create Trigger T_FIDS_DGU_TRI On T_FIDS_DGU
For Insert As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* Companhia Aérea»FIDS - Usuário do Grupo de Displays: DGT-COM:R */
If (Select Count(*) From T_COM, Inserted
Where T_COM.CD_COM = Inserted.CD_COM)
 &lt;&gt;(Select Count(CD_COM) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Companhia Aérea&gt; que se deseja incluir na tabela &lt;FIDS - Usuário do Grupo de Displays&gt; não está cadastrada&#39;
  Return
End
/* Usuários»FIDS - Usuário do Grupo de Displays: Usuários do Grupo de Displays */
If (Select Count(*) From T_USR, Inserted
Where T_USR.CD_USR = Inserted.CD_USR)
 &lt;&gt;(Select Count(CD_USR) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Usuários&gt; que se deseja incluir na tabela &lt;FIDS - Usuário do Grupo de Displays&gt; não está cadastrada&#39;
  Return
End
/* FIDS - Grupo de Displays»FIDS - Usuário do Grupo de Displays: Grupo de Displays */
If (Select Count(*) From T_FIDS_DGT, Inserted
Where T_FIDS_DGT.CD_DGT = Inserted.CD_DGT)
 &lt;&gt;(Select Count(CD_DGT) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;FIDS - Grupo de Displays&gt; que se deseja incluir na tabela &lt;FIDS - Usuário do Grupo de Displays&gt; não está cadastrada&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>I</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o150">
<a:ObjectID>6958AC92-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_DGU_TRU</a:Name>
<a:Code>T_FIDS_DGU_TRU</a:Code>
<a:Text>Create Trigger T_FIDS_DGU_TRU On T_FIDS_DGU
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_DGU)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código do Usuário do Grupo&gt; da tabela &lt;FIDS - Usuário do Grupo de Displays&gt; não pode ser alterada.&#39;
  Return
End
If Update (CD_COM)
/* Companhia Aérea»FIDS - Usuário do Grupo de Displays: DGT-COM:R */
If (Select Count(*) From T_COM, Inserted
Where T_COM.CD_COM = Inserted.CD_COM)
 &lt;&gt;(Select Count(CD_COM) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Companhia Aérea&gt; que se deseja incluir na tabela &lt;FIDS - Usuário do Grupo de Displays&gt; não está cadastrada&#39;
  Return
End
If Update (CD_USR)
/* Usuários»FIDS - Usuário do Grupo de Displays: Usuários do Grupo de Displays */
If (Select Count(*) From T_USR, Inserted
Where T_USR.CD_USR = Inserted.CD_USR)
 &lt;&gt;(Select Count(CD_USR) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Usuários&gt; que se deseja incluir na tabela &lt;FIDS - Usuário do Grupo de Displays&gt; não está cadastrada&#39;
  Return
End
If Update (CD_DGT)
/* FIDS - Grupo de Displays»FIDS - Usuário do Grupo de Displays: Grupo de Displays */
If (Select Count(*) From T_FIDS_DGT, Inserted
Where T_FIDS_DGT.CD_DGT = Inserted.CD_DGT)
 &lt;&gt;(Select Count(CD_DGT) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;FIDS - Grupo de Displays&gt; que se deseja incluir na tabela &lt;FIDS - Usuário do Grupo de Displays&gt; não está cadastrada&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o145"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Ref="o92"/>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o151">
<a:ObjectID>6958AB5D-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_8</a:Name>
<a:Code>REFERENCE_8</a:Code>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o93"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o139"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o102"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o152">
<a:ObjectID>6958AB60-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o94"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o141"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o153">
<a:CenterTextOffset>(-1947, -148)</a:CenterTextOffset>
<a:Rect>((-709295,686200), (-701421,704588))</a:Rect>
<a:ListOfPoints>((-703418,686200),(-703406,704588))</a:ListOfPoints>
<a:ArrowStyle>4882</a:ArrowStyle>
<a:LineColor>255</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Id="o154">
<a:Rect>((-708368,683971), (-699810,687571))</a:Rect>
<a:LineColor>255</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o155">
<a:ObjectID>6958ABA1-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_DIS</a:Name>
<a:Code>T_FIDS_DIS</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o156">
<a:ObjectID>6958ABDB-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_DIS</a:Name>
<a:Code>CD_DIS</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o157">
<a:ObjectID>6958ABDD-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_DGT</a:Name>
<a:Code>CD_DGT</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o158">
<a:ObjectID>6958ABDE-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NM_DIS</a:Name>
<a:Code>NM_DIS</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>varchar(30)</a:DataType>
<a:Length>30</a:Length>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o159">
<a:ObjectID>6958ABDF-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NR_DIS_SER</a:Name>
<a:Code>NR_DIS_SER</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
</o:Column>
<o:Column Id="o160">
<a:ObjectID>6958ABE0-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NR_DIS_END</a:Name>
<a:Code>NR_DIS_END</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL0    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL0 As
@valor &gt;= 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
</o:Column>
<o:Column Id="o161">
<a:ObjectID>6958ABE1-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NR_DIS_PUL</a:Name>
<a:Code>NR_DIS_PUL</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL0    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL0 As
@valor &gt;= 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
</o:Column>
<o:Column Id="o162">
<a:ObjectID>6958ABE2-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NM_DIS_IP</a:Name>
<a:Code>NM_DIS_IP</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>varchar(15)</a:DataType>
<a:Length>15</a:Length>
</o:Column>
<o:Column Id="o163">
<a:ObjectID>6958ABE3-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_DST</a:Name>
<a:Code>CD_DST</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o164">
<a:ObjectID>6958ABE4-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TP_DIS_STA</a:Name>
<a:Code>TP_DIS_STA</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o165">
<a:ObjectID>6958ABE5-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_SET</a:Name>
<a:Code>CD_SET</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o166">
<a:ObjectID>6958ABE6-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TIMESTAMP</a:Name>
<a:Code>TIMESTAMP</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o167">
<a:ObjectID>6958ABE7-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_FIDS_DIS</a:Name>
<a:Code>Pk_T_FIDS_DIS</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_FIDS_DIS</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o156"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Owner>
<o:User Ref="o19"/>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o168">
<a:ObjectID>6958AC95-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_DIS_TRI</a:Name>
<a:Code>T_FIDS_DIS_TRI</a:Code>
<a:Text>Create Trigger T_FIDS_DIS_TRI On T_FIDS_DIS
For Insert As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* FIDS - Setor do Terminal de Passageiros»FIDS - Displays: Setor do Terminal de Passageiros do Display */
If (Select Count(*) From T_FIDS_SET, Inserted
Where T_FIDS_SET.CD_SET = Inserted.CD_SET)
 &lt;&gt;(Select Count(CD_SET) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;FIDS - Setor do Terminal de Passageiros&gt; que se deseja incluir na tabela &lt;FIDS - Displays&gt; não está cadastrada&#39;
  Return
End
/* FIDS - Servidor de Distribuição»FIDS - Displays: Servidor de Distribuição do Display */
If (Select Count(*) From T_FIDS_DST, Inserted
Where T_FIDS_DST.CD_DST = Inserted.CD_DST)
 &lt;&gt;(Select Count(CD_DST) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;FIDS - Servidor de Distribuição&gt; que se deseja incluir na tabela &lt;FIDS - Displays&gt; não está cadastrada&#39;
  Return
End
/* FIDS - Grupo de Displays»FIDS - Displays: Grupo de Display do Display */
If (Select Count(*) From T_FIDS_DGT, Inserted
Where T_FIDS_DGT.CD_DGT = Inserted.CD_DGT)
 &lt;&gt;(Select Count(CD_DGT) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;FIDS - Grupo de Displays&gt; que se deseja incluir na tabela &lt;FIDS - Displays&gt; não está cadastrada&#39;
  Return
End
/* Domínio de: Status do Display */
/* 1 - Ativo */
/* 2 - Inativo */
/* 3 - Manutenção */
If (Select Count(*) From Inserted
    Where TP_DIS_STA In (1,2,3))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Status do Display&gt; que se deseja incluir na tabela &lt;FIDS - Displays&gt; não é uma opção válida&#39;
  Return
End
/* Regra de negócio */
/* Declaração do cursor */
DECLARE INSDIS CURSOR FOR
	SELECT 	NM_DIS_IP
	,	NR_DIS_SER
	,	NR_DIS_END
	,	TP_CST_INT
	,	TP_CST_DIS
	FROM	INSERTED INS
	JOIN	T_FIDS_DGT DGT ON DGT.CD_DGT = INS.CD_DGT
	JOIN	T_FIDS_CST CST ON CST.CD_CST = DGT.CD_CST

/*
	TP_CST_INT
	1-TCP/IP
	2-RS232

	TP_CST_DIS
	1-Monitor
	2-Led Panel
	3-Split Flap
*/

/* Declaração das variáveis que receberão o cursor */
DECLARE @NM_DIS_IP  VARCHAR(15)
DECLARE @NR_DIS_SER INT
DECLARE @NR_DIS_END INT
DECLARE @TP_CST_INT INT
DECLARE @TP_CST_DIS INT

/* Abertura do cursor */
OPEN INSDIS

/* Ir para o primeiro registro */
FETCH	INSDIS
INTO	@NM_DIS_IP
,	@NR_DIS_SER
,	@NR_DIS_END
,	@TP_CST_INT
,	@TP_CST_DIS

/* Processar todos os registros de INSDIS*/
WHILE @@FETCH_STATUS = 0
BEGIN

	IF @TP_CST_INT = 1 -- TCPIP
	BEGIN
		EXEC SP_VERIFICAIP @NM_DIS_IP

		IF @@ERROR &lt;&gt; 0
		BEGIN
			CLOSE INSDIS
			DEALLOCATE INSDIS

			ROLLBACK TRANSACTION
			RETURN
		END

		IF (SELECT ISNULL(@NR_DIS_SER , -1)) &lt;&gt; -1 OR (SELECT ISNULL(@NR_DIS_END, -1)) &lt;&gt; -1
		BEGIN
			RAISERROR 20999 &#39;Operação não executada: O número da Porta serial e o endereço do display devem ser nulos para displays com interface TCP/IP.&#39;
			ROLLBACK TRANSACTION
			RETURN
		END
	END
	ELSE
	BEGIN
		IF (SELECT ISNULL(@NM_DIS_IP , &#39;&#39;)) &lt;&gt; &#39;&#39;
		BEGIN
			RAISERROR 20999 &#39;Operação não executada: O número do IP deve ser nulo para displays com interface RS232.&#39;
			ROLLBACK TRANSACTION
			RETURN
		END

		IF (SELECT ISNULL(@NR_DIS_SER , -1)) = -1 OR (SELECT ISNULL(@NR_DIS_END, -1)) = -1
		BEGIN
			RAISERROR 20999 &#39;Operação não executada: O número da Porta serial e o endereço do display não podem ser nulos para displays com interface RS232.&#39;
			ROLLBACK TRANSACTION
			RETURN
		END
	END

	/* Ir para o próximo registro */
	FETCH NEXT FROM INSDIS
              INTO	@NM_DIS_IP
	,	@NR_DIS_SER
	,	@NR_DIS_END
	,	@TP_CST_INT
	,	@TP_CST_DIS

END
CLOSE INSDIS

DEALLOCATE INSDIS
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>I</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o169">
<a:ObjectID>6958AC97-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_DIS_TRU</a:Name>
<a:Code>T_FIDS_DIS_TRU</a:Code>
<a:Text>Create Trigger T_FIDS_DIS_TRU On T_FIDS_DIS
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_DIS)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código do Display&gt; da tabela &lt;FIDS - Displays&gt; não pode ser alterada.&#39;
  Return
End
If Update (CD_SET)
/* FIDS - Setor do Terminal de Passageiros»FIDS - Displays: Setor do Terminal de Passageiros do Display */
If (Select Count(*) From T_FIDS_SET, Inserted
Where T_FIDS_SET.CD_SET = Inserted.CD_SET)
 &lt;&gt;(Select Count(CD_SET) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;FIDS - Setor do Terminal de Passageiros&gt; que se deseja incluir na tabela &lt;FIDS - Displays&gt; não está cadastrada&#39;
  Return
End
If Update (CD_DST)
/* FIDS - Servidor de Distribuição»FIDS - Displays: Servidor de Distribuição do Display */
If (Select Count(*) From T_FIDS_DST, Inserted
Where T_FIDS_DST.CD_DST = Inserted.CD_DST)
 &lt;&gt;(Select Count(CD_DST) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;FIDS - Servidor de Distribuição&gt; que se deseja incluir na tabela &lt;FIDS - Displays&gt; não está cadastrada&#39;
  Return
End
If Update (CD_DGT)
/* FIDS - Grupo de Displays»FIDS - Displays: Grupo de Display do Display */
If (Select Count(*) From T_FIDS_DGT, Inserted
Where T_FIDS_DGT.CD_DGT = Inserted.CD_DGT)
 &lt;&gt;(Select Count(CD_DGT) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;FIDS - Grupo de Displays&gt; que se deseja incluir na tabela &lt;FIDS - Displays&gt; não está cadastrada&#39;
  Return
End
If Update (TP_DIS_STA)
/* Domínio de: Status do Display */
/* 1 - Ativo */
/* 2 - Inativo */
/* 3 - Manutenção */
If (Select Count(*) From Inserted
    Where TP_DIS_STA In (1,2,3))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Status do Display&gt; que se deseja incluir na tabela &lt;FIDS - Displays&gt; não é uma opção válida&#39;
  Return
End
/* Regra de negócio */
/* Declaração do cursor */
DECLARE INSDIS CURSOR FOR
	SELECT 	NM_DIS_IP
	,	NR_DIS_SER
	,	NR_DIS_END
	,	TP_CST_INT
	,	TP_CST_DIS
	FROM	INSERTED INS
	JOIN	T_FIDS_DGT DGT ON DGT.CD_DGT = INS.CD_DGT
	JOIN	T_FIDS_CST CST ON CST.CD_CST = DGT.CD_CST

/*
	TP_CST_INT
	1-TCP/IP
	2-RS232

	TP_CST_DIS
	1-Monitor
	2-Led Panel
	3-Split Flap
*/

/* Declaração das variáveis que receberão o cursor */
DECLARE @NM_DIS_IP  VARCHAR(15)
DECLARE @NR_DIS_SER INT
DECLARE @NR_DIS_END INT
DECLARE @TP_CST_INT INT
DECLARE @TP_CST_DIS INT

/* Abertura do cursor */
OPEN INSDIS

/* Ir para o primeiro registro */
FETCH	INSDIS
INTO	@NM_DIS_IP
,	@NR_DIS_SER
,	@NR_DIS_END
,	@TP_CST_INT
,	@TP_CST_DIS

/* Processar todos os registros de INSDIS*/
WHILE @@FETCH_STATUS = 0
BEGIN

	IF @TP_CST_INT = 1 -- TCPIP
	BEGIN
		EXEC SP_VERIFICAIP @NM_DIS_IP

		IF @@ERROR &lt;&gt; 0
		BEGIN
			CLOSE INSDIS
			DEALLOCATE INSDIS

			ROLLBACK TRANSACTION
			RETURN
		END

		IF (SELECT ISNULL(@NR_DIS_SER , -1)) &lt;&gt; -1 OR (SELECT ISNULL(@NR_DIS_END, -1)) &lt;&gt; -1
		BEGIN
			RAISERROR 20999 &#39;Operação não executada: O número da Porta serial e o endereço do display devem ser nulos para displays com interface TCP/IP.&#39;
			ROLLBACK TRANSACTION
			RETURN
		END
	END
	ELSE
	BEGIN
		IF (SELECT ISNULL(@NM_DIS_IP , &#39;&#39;)) &lt;&gt; &#39;&#39;
		BEGIN
			RAISERROR 20999 &#39;Operação não executada: O número do IP deve ser nulo para displays com interface RS232.&#39;
			ROLLBACK TRANSACTION
			RETURN
		END

		IF (SELECT ISNULL(@NR_DIS_SER , -1)) = -1 OR (SELECT ISNULL(@NR_DIS_END, -1)) = -1
		BEGIN
			RAISERROR 20999 &#39;Operação não executada: O número da Porta serial e o endereço do display não podem ser nulos para displays com interface RS232.&#39;
			ROLLBACK TRANSACTION
			RETURN
		END
	END

	/* Ir para o próximo registro */
	FETCH NEXT FROM INSDIS
              INTO	@NM_DIS_IP
	,	@NR_DIS_SER
	,	@NR_DIS_END
	,	@TP_CST_INT
	,	@TP_CST_DIS

END
CLOSE INSDIS

DEALLOCATE INSDIS
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o167"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Ref="o92"/>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o170">
<a:ObjectID>6958AB64-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_9</a:Name>
<a:Code>REFERENCE_9</a:Code>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o93"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o155"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o102"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o171">
<a:ObjectID>6958AB67-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o94"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o157"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o172">
<a:CenterTextOffset>(903, 600)</a:CenterTextOffset>
<a:Rect>((-701341,685300), (-693617,695925))</a:Rect>
<a:ListOfPoints>((-701168,685300),(-695448,695925))</a:ListOfPoints>
<a:ArrowStyle>4882</a:ArrowStyle>
<a:LineColor>255</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Ref="o154"/>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Id="o173">
<a:Rect>((-701473,693375), (-692607,697921))</a:Rect>
<a:LineColor>255</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o174">
<a:ObjectID>6958ABA4-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_DST</a:Name>
<a:Code>T_FIDS_DST</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081686301</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o175">
<a:ObjectID>6958ABE8-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_DST</a:Name>
<a:Code>CD_DST</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o176">
<a:ObjectID>6958ABE9-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NM_DST</a:Name>
<a:Code>NM_DST</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>varchar(15)</a:DataType>
<a:Length>15</a:Length>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o177">
<a:ObjectID>6958ABEA-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NM_DST_IP</a:Name>
<a:Code>NM_DST_IP</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>varchar(15)</a:DataType>
<a:Length>15</a:Length>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o178">
<a:ObjectID>6958ABEB-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NR_DST_TCP_LOC</a:Name>
<a:Code>NR_DST_TCP_LOC</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL0    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL0 As
@valor &gt;= 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o179">
<a:ObjectID>6958ABEC-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NR_DST_UDP_LOC</a:Name>
<a:Code>NR_DST_UDP_LOC</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL0    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL0 As
@valor &gt;= 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o180">
<a:ObjectID>6958ABED-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NR_DST_UDP_REM</a:Name>
<a:Code>NR_DST_UDP_REM</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL0    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL0 As
@valor &gt;= 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o181">
<a:ObjectID>6958ABEE-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NM_DST_BRC</a:Name>
<a:Code>NM_DST_BRC</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>varchar(15)</a:DataType>
<a:Length>15</a:Length>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o182">
<a:ObjectID>6958ABEF-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_DST_PRI</a:Name>
<a:Code>CD_DST_PRI</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081686554</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o183">
<a:ObjectID>6958ABF0-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>DH_DST</a:Name>
<a:Code>DH_DST</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>smalldatetime</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o184">
<a:ObjectID>6958ABF1-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TIMESTAMP</a:Name>
<a:Code>TIMESTAMP</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o185">
<a:ObjectID>6958ABF4-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_FIDS_DST</a:Name>
<a:Code>Pk_T_FIDS_DST</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_FIDS_DST</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o175"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Indexes>
<o:Index Id="o186">
<a:ObjectID>6958ABF2-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_FIDS_DST_IP</a:Name>
<a:Code>I_FIDS_DST_IP</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Unique>1</a:Unique>
<c:IndexColumns>
<o:IndexColumn Id="o187">
<a:ObjectID>6958ABF3-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o177"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
</c:Indexes>
<c:Owner>
<o:User Ref="o19"/>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o188">
<a:ObjectID>6958AC99-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_DST_TRD</a:Name>
<a:Code>T_FIDS_DST_TRD</a:Code>
<a:Text>Create Trigger T_FIDS_DST_TRD On T_FIDS_DST
For Delete As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* FIDS - Servidor de Distribuição»FIDS - Servidor de Distribuição: Distribution Server Principal (Restrict) */
If (Select Count(*) From T_FIDS_DST dep, Deleted pri
 Where dep.CD_DST_PRI = pri.CD_DST) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;FIDS - Servidor de Distribuição&gt; está sendo referenciada na tabela &lt;FIDS - Servidor de Distribuição&gt;&#39;
  Return
End
/* FIDS - Servidor de Distribuição»FIDS - Displays: Servidor de Distribuição do Display (Restrict) */
If (Select Count(*) From T_FIDS_DIS dep, Deleted pri
 Where dep.CD_DST = pri.CD_DST) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;FIDS - Servidor de Distribuição&gt; está sendo referenciada na tabela &lt;FIDS - Displays&gt;&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>D</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o189">
<a:ObjectID>6958AC9C-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_DST_TRI</a:Name>
<a:Code>T_FIDS_DST_TRI</a:Code>
<a:Text>Create Trigger T_FIDS_DST_TRI On T_FIDS_DST
For Insert As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* FIDS - Servidor de Distribuição»FIDS - Servidor de Distribuição: Distribution Server Principal */
If (Select Count(*) From T_FIDS_DST, Inserted
Where T_FIDS_DST.CD_DST = Inserted.CD_DST_PRI)
 &lt;&gt;(Select Count(CD_DST_PRI) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;FIDS - Servidor de Distribuição&gt; que se deseja incluir na tabela &lt;FIDS - Servidor de Distribuição&gt; não está cadastrada&#39;
  Return
End
/* Regra de negócio */
/* Declaração do cursor */
DECLARE INSDST CURSOR FOR
	SELECT 	NM_DST_IP, NR_DST_TCP_LOC, NR_DST_UDP_LOC, NR_DST_UDP_REM, NM_DST_BRC      
	FROM	INSERTED

/* Declaração das variáveis que receberão o cursor */
DECLARE @NM_DST_IP  VARCHAR(15),
               @NR_DST_TCP_LOC INT,
               @NR_DST_UDP_LOC INT,
               @NR_DST_UDP_REM INT,
               @NM_DST_BRC  VARCHAR(15)

/* Abertura do cursor */
OPEN INSDST

/* Ir para o primeiro registro */
FETCH	INSDST
INTO	@NM_DST_IP,
              @NR_DST_TCP_LOC,
              @NR_DST_UDP_LOC,
              @NR_DST_UDP_REM,
              @NM_DST_BRC      

/* Processar todos os registros de INSDST*/
WHILE @@FETCH_STATUS = 0
BEGIN

              EXEC SP_VERIFICAIP @NM_DST_IP

	IF @@ERROR &lt;&gt; 0
	BEGIN
		CLOSE INSDST
		DEALLOCATE INSDST

		ROLLBACK TRANSACTION
		RETURN
	END

	if @NR_DST_TCP_LOC &lt; 1025 or @NR_DST_TCP_LOC &gt; 65535
	BEGIN
		CLOSE INSDST
		DEALLOCATE INSDST

		RAISERROR 20999 &#39;Operação não executada: Porta de TCP local Inválida.&#39;
		ROLLBACK TRANSACTION
		RETURN
	END

	if @NR_DST_UDP_LOC &lt; 1025 or @NR_DST_UDP_LOC &gt; 65535
	BEGIN
		CLOSE INSDST
		DEALLOCATE INSDST

		RAISERROR 20999 &#39;Operação não executada: Porta de UDP local Inválida.&#39;
		ROLLBACK TRANSACTION
		RETURN
	END

	if @NR_DST_UDP_REM &lt; 1025 or @NR_DST_UDP_REM &gt; 65535
	BEGIN
		CLOSE INSDST
		DEALLOCATE INSDST

		RAISERROR 20999 &#39;Operação não executada: Porta de UDP remota Inválida.&#39;
		ROLLBACK TRANSACTION
		RETURN
	END
              
              EXEC SP_VERIFICAIP @NM_DST_BRC

	IF @@ERROR &lt;&gt; 0
	BEGIN
		CLOSE INSDST
		DEALLOCATE INSDST

		ROLLBACK TRANSACTION
		RETURN
	END

	/* Ir para o próximo registro */
	FETCH NEXT FROM INSDST
              INTO	@NM_DST_IP,
                            @NR_DST_TCP_LOC,
                            @NR_DST_UDP_LOC,
                            @NR_DST_UDP_REM,
                            @NM_DST_BRC      

END
CLOSE INSDST
DEALLOCATE INSDST


End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>I</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o190">
<a:ObjectID>6958AC9F-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_DST_TRU</a:Name>
<a:Code>T_FIDS_DST_TRU</a:Code>
<a:Text>Create Trigger T_FIDS_DST_TRU On T_FIDS_DST
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_DST)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código do Distribution Server&gt; da tabela &lt;FIDS - Servidor de Distribuição&gt; não pode ser alterada.&#39;
  Return
End
If Update (CD_DST_PRI)
/* FIDS - Servidor de Distribuição»FIDS - Servidor de Distribuição: Distribution Server Principal */
If (Select Count(*) From T_FIDS_DST, Inserted
Where T_FIDS_DST.CD_DST = Inserted.CD_DST_PRI)
 &lt;&gt;(Select Count(CD_DST_PRI) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;FIDS - Servidor de Distribuição&gt; que se deseja incluir na tabela &lt;FIDS - Servidor de Distribuição&gt; não está cadastrada&#39;
  Return
End
/* Regra de negócio */
/* Declaração do cursor */
DECLARE INSDST CURSOR FOR
	SELECT 	NM_DST_IP, NR_DST_TCP_LOC, NR_DST_UDP_LOC, NR_DST_UDP_REM, NM_DST_BRC      
	FROM	INSERTED

/* Declaração das variáveis que receberão o cursor */
DECLARE @NM_DST_IP  VARCHAR(15),
               @NR_DST_TCP_LOC INT,
               @NR_DST_UDP_LOC INT,
               @NR_DST_UDP_REM INT,
               @NM_DST_BRC  VARCHAR(15)

/* Abertura do cursor */
OPEN INSDST

/* Ir para o primeiro registro */
FETCH	INSDST
INTO	@NM_DST_IP,
              @NR_DST_TCP_LOC,
              @NR_DST_UDP_LOC,
              @NR_DST_UDP_REM,
              @NM_DST_BRC      

/* Processar todos os registros de INSDST*/
WHILE @@FETCH_STATUS = 0
BEGIN

              EXEC SP_VERIFICAIP @NM_DST_IP

	IF @@ERROR &lt;&gt; 0
	BEGIN
		CLOSE INSDST
		DEALLOCATE INSDST

		ROLLBACK TRANSACTION
		RETURN
	END

	if @NR_DST_TCP_LOC &lt; 1025 or @NR_DST_TCP_LOC &gt; 65535
	BEGIN
		CLOSE INSDST
		DEALLOCATE INSDST

		RAISERROR 20999 &#39;Operação não executada: Porta de TCP local Inválida.&#39;
		ROLLBACK TRANSACTION
		RETURN
	END

	if @NR_DST_UDP_LOC &lt; 1025 or @NR_DST_UDP_LOC &gt; 65535
	BEGIN
		CLOSE INSDST
		DEALLOCATE INSDST

		RAISERROR 20999 &#39;Operação não executada: Porta de UDP local Inválida.&#39;
		ROLLBACK TRANSACTION
		RETURN
	END

	if @NR_DST_UDP_REM &lt; 1025 or @NR_DST_UDP_REM &gt; 65535
	BEGIN
		CLOSE INSDST
		DEALLOCATE INSDST

		RAISERROR 20999 &#39;Operação não executada: Porta de UDP remota Inválida.&#39;
		ROLLBACK TRANSACTION
		RETURN
	END
              
              EXEC SP_VERIFICAIP @NM_DST_BRC

	IF @@ERROR &lt;&gt; 0
	BEGIN
		CLOSE INSDST
		DEALLOCATE INSDST

		ROLLBACK TRANSACTION
		RETURN
	END

	/* Ir para o próximo registro */
	FETCH NEXT FROM INSDST
              INTO	@NM_DST_IP,
                            @NR_DST_TCP_LOC,
                            @NR_DST_UDP_LOC,
                            @NR_DST_UDP_REM,
                            @NM_DST_BRC      

END
CLOSE INSDST
DEALLOCATE INSDST


End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o185"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o191">
<a:ObjectID>6958AB6A-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_10</a:Name>
<a:Code>REFERENCE_10</a:Code>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o174"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o155"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o185"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o192">
<a:ObjectID>6958AB6D-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o175"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o163"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o193">
<a:CenterTextOffset>(3, 0)</a:CenterTextOffset>
<a:Rect>((-701873,658700), (-694449,669956))</a:Rect>
<a:ListOfPoints>((-698162,669956),(-698168,658700))</a:ListOfPoints>
<a:ArrowStyle>4882</a:ArrowStyle>
<a:LineColor>255</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Id="o194">
<a:Rect>((-702401,668155), (-693921,671755))</a:Rect>
<a:LineColor>255</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o195">
<a:ObjectID>6958ABAD-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_ISF</a:Name>
<a:Code>T_FIDS_ISF</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o196">
<a:ObjectID>6958ABFF-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_ISF</a:Name>
<a:Code>CD_ISF</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o197">
<a:ObjectID>6958AC00-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TP_ISF</a:Name>
<a:Code>TP_ISF</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o198">
<a:ObjectID>6958AC01-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_FLD</a:Name>
<a:Code>CD_FLD</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o199">
<a:ObjectID>6958AC02-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TIMESTAMP</a:Name>
<a:Code>TIMESTAMP</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o200">
<a:ObjectID>6958AC06-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_FIDS_ISF</a:Name>
<a:Code>Pk_T_FIDS_ISF</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_FIDS_ISF</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o196"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Indexes>
<o:Index Id="o201">
<a:ObjectID>6958AC03-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_FIDS_ISTFLD</a:Name>
<a:Code>I_FIDS_ISTFLD</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Unique>1</a:Unique>
<c:IndexColumns>
<o:IndexColumn Id="o202">
<a:ObjectID>6958AC04-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o197"/>
</c:Column>
</o:IndexColumn>
<o:IndexColumn Id="o203">
<a:ObjectID>6958AC05-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_1&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o198"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
</c:Indexes>
<c:Owner>
<o:User Ref="o19"/>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o204">
<a:ObjectID>6958ACAE-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_ISF_TRI</a:Name>
<a:Code>T_FIDS_ISF_TRI</a:Code>
<a:Text>Create Trigger T_FIDS_ISF_TRI On T_FIDS_ISF
For Insert As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* FIDS - Campos»FIDS - Campos do Tipo do Servidor de Informação: Campos do Servidor de Informação */
If (Select Count(*) From T_FIDS_FLD, Inserted
Where T_FIDS_FLD.CD_FLD = Inserted.CD_FLD)
 &lt;&gt;(Select Count(CD_FLD) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;FIDS - Campos&gt; que se deseja incluir na tabela &lt;FIDS - Campos do Tipo do Servidor de Informação&gt; não está cadastrada&#39;
  Return
End
/* Domínio de: Tipo de Information Server Padrão */
/* 1 - CHG */
/* 2 - PAR */
/* 3 - EST */
/* 4 - POR */
/* 5 - CHK */
/* 6 - HPA */
/* 7 - HOT */
If (Select Count(*) From Inserted
    Where TP_ISF In (1,2,3,4,5,6,7))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Tipo de Information Server Padrão&gt; que se deseja incluir na tabela &lt;FIDS - Campos do Tipo do Servidor de Informação&gt; não é uma opção válida&#39;
  Return
End
/* Regra de negócio */
/*Comentário*/
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>I</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o205">
<a:ObjectID>6958ACB1-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_ISF_TRU</a:Name>
<a:Code>T_FIDS_ISF_TRU</a:Code>
<a:Text>Create Trigger T_FIDS_ISF_TRU On T_FIDS_ISF
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_ISF)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código dos Campos do Information Server&gt; da tabela &lt;FIDS - Campos do Tipo do Servidor de Informação&gt; não pode ser alterada.&#39;
  Return
End
If Update (CD_FLD)
/* FIDS - Campos»FIDS - Campos do Tipo do Servidor de Informação: Campos do Servidor de Informação */
If (Select Count(*) From T_FIDS_FLD, Inserted
Where T_FIDS_FLD.CD_FLD = Inserted.CD_FLD)
 &lt;&gt;(Select Count(CD_FLD) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;FIDS - Campos&gt; que se deseja incluir na tabela &lt;FIDS - Campos do Tipo do Servidor de Informação&gt; não está cadastrada&#39;
  Return
End
If Update (TP_ISF)
/* Domínio de: Tipo de Information Server Padrão */
/* 1 - CHG */
/* 2 - PAR */
/* 3 - EST */
/* 4 - POR */
/* 5 - CHK */
/* 6 - HPA */
/* 7 - HOT */
If (Select Count(*) From Inserted
    Where TP_ISF In (1,2,3,4,5,6,7))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Tipo de Information Server Padrão&gt; que se deseja incluir na tabela &lt;FIDS - Campos do Tipo do Servidor de Informação&gt; não é uma opção válida&#39;
  Return
End
/* Regra de negócio */
/*Comentário*/
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o200"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Id="o206">
<a:Rect>((-702818,656935), (-694106,660535))</a:Rect>
<a:LineColor>255</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o207">
<a:ObjectID>6958ABA7-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_FLD</a:Name>
<a:Code>T_FIDS_FLD</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o208">
<a:ObjectID>6958ABF5-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_FLD</a:Name>
<a:Code>CD_FLD</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o209">
<a:ObjectID>6958ABF6-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NM_FLD</a:Name>
<a:Code>NM_FLD</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>varchar(30)</a:DataType>
<a:Length>30</a:Length>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o210">
<a:ObjectID>6958ABF7-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NR_FLD</a:Name>
<a:Code>NR_FLD</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o211">
<a:ObjectID>6958ABF8-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TIMESTAMP</a:Name>
<a:Code>TIMESTAMP</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o212">
<a:ObjectID>6958ABF9-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_FIDS_FLD</a:Name>
<a:Code>Pk_T_FIDS_FLD</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_FIDS_FLD</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o208"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Owner>
<o:User Ref="o19"/>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o213">
<a:ObjectID>6958ACA2-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_FLD_TRD</a:Name>
<a:Code>T_FIDS_FLD_TRD</a:Code>
<a:Text>Create Trigger T_FIDS_FLD_TRD On T_FIDS_FLD
For Delete As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* FIDS - Campos»FIDS - Campos do Tipo do Servidor de Informação: Campos do Servidor de Informação (Restrict) */
If (Select Count(*) From T_FIDS_ISF dep, Deleted pri
 Where dep.CD_FLD = pri.CD_FLD) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;FIDS - Campos&gt; está sendo referenciada na tabela &lt;FIDS - Campos do Tipo do Servidor de Informação&gt;&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>D</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o214">
<a:ObjectID>6958ACA5-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_FLD_TRU</a:Name>
<a:Code>T_FIDS_FLD_TRU</a:Code>
<a:Text>Create Trigger T_FIDS_FLD_TRU On T_FIDS_FLD
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_FLD)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código do Campo&gt; da tabela &lt;FIDS - Campos&gt; não pode ser alterada.&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o212"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o215">
<a:ObjectID>6958AB70-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_11</a:Name>
<a:Code>REFERENCE_11</a:Code>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o207"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o195"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o212"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o216">
<a:ObjectID>6958AB74-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o208"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o198"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o217">
<a:CenterTextOffset>(3, 0)</a:CenterTextOffset>
<a:Rect>((-724613,674986), (-717489,685438))</a:Rect>
<a:ListOfPoints>((-721050,685438),(-721060,674986))</a:ListOfPoints>
<a:ArrowStyle>4882</a:ArrowStyle>
<a:LineColor>255</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Ref="o125"/>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Ref="o6"/>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o218">
<a:ObjectID>6958AB77-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_12</a:Name>
<a:Code>REFERENCE_12</a:Code>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o7"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o126"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o16"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o219">
<a:ObjectID>6958AB7A-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o8"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o128"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o220">
<a:CenterTextOffset>(3, 0)</a:CenterTextOffset>
<a:Rect>((-735968,675932), (-723169,686500))</a:Rect>
<a:ListOfPoints>((-735968,686500),(-723169,675932))</a:ListOfPoints>
<a:ArrowStyle>4882</a:ArrowStyle>
<a:LineColor>255</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Ref="o40"/>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Ref="o6"/>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o221">
<a:ObjectID>6958AB7C-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_13</a:Name>
<a:Code>REFERENCE_13</a:Code>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o7"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o41"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o16"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o222">
<a:ObjectID>6958AB7E-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o8"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o42"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o223">
<a:CenterTextOffset>(3, 0)</a:CenterTextOffset>
<a:Rect>((-724448,650576), (-717324,675365))</a:Rect>
<a:ListOfPoints>((-721221,650576),(-720525,675365))</a:ListOfPoints>
<a:ArrowStyle>4882</a:ArrowStyle>
<a:LineColor>255</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Id="o224">
<a:Rect>((-725537,648776), (-716903,652376))</a:Rect>
<a:LineColor>255</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o225">
<a:ObjectID>6958ABB0-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_ISG</a:Name>
<a:Code>T_FIDS_ISG</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o226">
<a:ObjectID>6958AC07-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_IST</a:Name>
<a:Code>CD_IST</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o227">
<a:ObjectID>6958AC08-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TP_ISG_CTG</a:Name>
<a:Code>TP_ISG_CTG</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>tinyint</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o228">
<a:ObjectID>6958AC09-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TIMESTAMP</a:Name>
<a:Code>TIMESTAMP</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o229">
<a:ObjectID>6958AC0A-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_FIDS_ISG</a:Name>
<a:Code>Pk_T_FIDS_ISG</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_FIDS_ISG</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o226"/>
<o:Column Ref="o227"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Owner>
<o:User Ref="o19"/>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o230">
<a:ObjectID>6958ACB3-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_ISG_TRI</a:Name>
<a:Code>T_FIDS_ISG_TRI</a:Code>
<a:Text>Create Trigger T_FIDS_ISG_TRI On T_FIDS_ISG
For Insert As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* FIDS - IST Servidor de Informação»FIDS - IST Categoria: Categoria do IST */
If (Select Count(*) From T_FIDS_IST, Inserted
Where T_FIDS_IST.CD_IST = Inserted.CD_IST)
 &lt;&gt;(Select Count(CD_IST) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;FIDS - IST Servidor de Informação&gt; que se deseja incluir na tabela &lt;FIDS - IST Categoria&gt; não está cadastrada&#39;
  Return
End
/* Domínio de: Tipo de Categoria de Vôo */
/* 1 - RGL-Regular */
/* 2 - CHT-Charter */
/* 3 - CSH-Codeshare */
/* 4 - DPL-Duplicate Leg */
/* 5 - TEC-Pouso Técnico */
/* 6 - TSL-Translado */
/* 7 - AVG-Aviação Geral */
/* 8 - MLT-Militar */
/* 9 - NRG-Não Regular */
/* 10 - TXA-Táxi Aéreo */
If (Select Count(*) From Inserted
    Where TP_ISG_CTG In (1,2,3,4,5,6,7,8,9,10))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Tipo de Categoria de Vôo&gt; que se deseja incluir na tabela &lt;FIDS - IST Categoria&gt; não é uma opção válida&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>I</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o231">
<a:ObjectID>6958ACB5-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_ISG_TRU</a:Name>
<a:Code>T_FIDS_ISG_TRU</a:Code>
<a:Text>Create Trigger T_FIDS_ISG_TRU On T_FIDS_ISG
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_IST)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código do Information Server&gt; da tabela &lt;FIDS - IST Categoria&gt; não pode ser alterada.&#39;
  Return
End
If Update (TP_ISG_CTG)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Tipo de Categoria de Vôo&gt; da tabela &lt;FIDS - IST Categoria&gt; não pode ser alterada.&#39;
  Return
End
If Update (TP_ISG_CTG)
/* Domínio de: Tipo de Categoria de Vôo */
/* 1 - RGL-Regular */
/* 2 - CHT-Charter */
/* 3 - CSH-Codeshare */
/* 4 - DPL-Duplicate Leg */
/* 5 - TEC-Pouso Técnico */
/* 6 - TSL-Translado */
/* 7 - AVG-Aviação Geral */
/* 8 - MLT-Militar */
/* 9 - NRG-Não Regular */
/* 10 - TXA-Táxi Aéreo */
If (Select Count(*) From Inserted
    Where TP_ISG_CTG In (1,2,3,4,5,6,7,8,9,10))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Tipo de Categoria de Vôo&gt; que se deseja incluir na tabela &lt;FIDS - IST Categoria&gt; não é uma opção válida&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o229"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Ref="o6"/>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o232">
<a:ObjectID>6958AB81-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_14</a:Name>
<a:Code>REFERENCE_14</a:Code>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o7"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o225"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o16"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o233">
<a:ObjectID>6958AB84-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o8"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o226"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o234">
<a:CenterTextOffset>(3, 0)</a:CenterTextOffset>
<a:Rect>((-727633,659112), (-720509,675500))</a:Rect>
<a:ListOfPoints>((-726373,659112),(-721418,675500))</a:ListOfPoints>
<a:ArrowStyle>4882</a:ArrowStyle>
<a:LineColor>255</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Id="o235">
<a:Rect>((-730651,657137), (-722093,661087))</a:Rect>
<a:LineColor>255</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o236">
<a:ObjectID>6958ABB3-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_ISN</a:Name>
<a:Code>T_FIDS_ISN</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o237">
<a:ObjectID>6958AC0B-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_IST</a:Name>
<a:Code>CD_IST</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o238">
<a:ObjectID>6958AC0C-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TP_ISN_NAT</a:Name>
<a:Code>TP_ISN_NAT</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>tinyint</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o239">
<a:ObjectID>6958AC0D-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TIMESTAMP</a:Name>
<a:Code>TIMESTAMP</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o240">
<a:ObjectID>6958AC0F-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_FIDS_ISN</a:Name>
<a:Code>Pk_T_FIDS_ISN</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_FIDS_ISN</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o237"/>
<o:Column Ref="o238"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Owner>
<o:User Ref="o19"/>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o241">
<a:ObjectID>6958ACB7-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_ISN_TRI</a:Name>
<a:Code>T_FIDS_ISN_TRI</a:Code>
<a:Text>Create Trigger T_FIDS_ISN_TRI On T_FIDS_ISN
For Insert As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* FIDS - IST Servidor de Informação»FIDS - IST Natureza: Natureza do IST */
If (Select Count(*) From T_FIDS_IST, Inserted
Where T_FIDS_IST.CD_IST = Inserted.CD_IST)
 &lt;&gt;(Select Count(CD_IST) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;FIDS - IST Servidor de Informação&gt; que se deseja incluir na tabela &lt;FIDS - IST Natureza&gt; não está cadastrada&#39;
  Return
End
/* Domínio de: Tipo de Natureza do Vôo */
/* 1 - PAX-Passageiro */
/* 2 - CRG-Carga */
/* 3 - MIS-Misto */
/* 4 - TSL-Translado */
If (Select Count(*) From Inserted
    Where TP_ISN_NAT In (1,2,3,4))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Tipo de Natureza do Vôo&gt; que se deseja incluir na tabela &lt;FIDS - IST Natureza&gt; não é uma opção válida&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>I</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o242">
<a:ObjectID>6958ACB9-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_ISN_TRU</a:Name>
<a:Code>T_FIDS_ISN_TRU</a:Code>
<a:Text>Create Trigger T_FIDS_ISN_TRU On T_FIDS_ISN
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_IST)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código do Information Server&gt; da tabela &lt;FIDS - IST Natureza&gt; não pode ser alterada.&#39;
  Return
End
If Update (TP_ISN_NAT)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Tipo de Natureza do Vôo&gt; da tabela &lt;FIDS - IST Natureza&gt; não pode ser alterada.&#39;
  Return
End
If Update (TP_ISN_NAT)
/* Domínio de: Tipo de Natureza do Vôo */
/* 1 - PAX-Passageiro */
/* 2 - CRG-Carga */
/* 3 - MIS-Misto */
/* 4 - TSL-Translado */
If (Select Count(*) From Inserted
    Where TP_ISN_NAT In (1,2,3,4))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Tipo de Natureza do Vôo&gt; que se deseja incluir na tabela &lt;FIDS - IST Natureza&gt; não é uma opção válida&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o240"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Ref="o6"/>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o243">
<a:ObjectID>6958AB87-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_15</a:Name>
<a:Code>REFERENCE_15</a:Code>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o7"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o236"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o16"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o244">
<a:ObjectID>6958AB8A-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o8"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o237"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o245">
<a:CenterTextOffset>(303, -600)</a:CenterTextOffset>
<a:Rect>((-719018,650667), (-706260,675800))</a:Rect>
<a:ListOfPoints>((-706260,650667),(-719018,675800))</a:ListOfPoints>
<a:ArrowStyle>4882</a:ArrowStyle>
<a:LineColor>255</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Id="o246">
<a:Rect>((-710538,648866), (-701980,652466))</a:Rect>
<a:LineColor>255</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o247">
<a:ObjectID>6958ABB6-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_ISP</a:Name>
<a:Code>T_FIDS_ISP</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o248">
<a:ObjectID>6958AC10-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_IST</a:Name>
<a:Code>CD_IST</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o249">
<a:ObjectID>6958AC11-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_TPS</a:Name>
<a:Code>CD_TPS</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o250">
<a:ObjectID>6958AC13-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TIMESTAMP</a:Name>
<a:Code>TIMESTAMP</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o251">
<a:ObjectID>6958AC16-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_FIDS_ISP</a:Name>
<a:Code>Pk_T_FIDS_ISP</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_FIDS_ISP</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o248"/>
<o:Column Ref="o249"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Owner>
<o:User Ref="o19"/>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o252">
<a:ObjectID>6958ACBC-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_ISP_TRI</a:Name>
<a:Code>T_FIDS_ISP_TRI</a:Code>
<a:Text>Create Trigger T_FIDS_ISP_TRI On T_FIDS_ISP
For Insert As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* FIDS - Terminal de Passageiros»FIDS - IST Terminal de Passageiros: TPS do ISP */
If (Select Count(*) From T_FIDS_TPS, Inserted
Where T_FIDS_TPS.CD_TPS = Inserted.CD_TPS)
 &lt;&gt;(Select Count(CD_TPS) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;FIDS - Terminal de Passageiros&gt; que se deseja incluir na tabela &lt;FIDS - IST Terminal de Passageiros&gt; não está cadastrada&#39;
  Return
End
/* FIDS - IST Servidor de Informação»FIDS - IST Terminal de Passageiros: TPS do IST */
If (Select Count(*) From T_FIDS_IST, Inserted
Where T_FIDS_IST.CD_IST = Inserted.CD_IST)
 &lt;&gt;(Select Count(CD_IST) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;FIDS - IST Servidor de Informação&gt; que se deseja incluir na tabela &lt;FIDS - IST Terminal de Passageiros&gt; não está cadastrada&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>I</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o253">
<a:ObjectID>6958ACBF-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_ISP_TRU</a:Name>
<a:Code>T_FIDS_ISP_TRU</a:Code>
<a:Text>Create Trigger T_FIDS_ISP_TRU On T_FIDS_ISP
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_IST)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código do Information Server&gt; da tabela &lt;FIDS - IST Terminal de Passageiros&gt; não pode ser alterada.&#39;
  Return
End
If Update (CD_TPS)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código do Terminal de Passageiros&gt; da tabela &lt;FIDS - IST Terminal de Passageiros&gt; não pode ser alterada.&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o251"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Ref="o6"/>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o254">
<a:ObjectID>6958AB8C-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_16</a:Name>
<a:Code>REFERENCE_16</a:Code>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o7"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o247"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o16"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o255">
<a:ObjectID>6958AB8E-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o8"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o248"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o256">
<a:CenterTextOffset>(1653, 1200)</a:CenterTextOffset>
<a:Rect>((-739386,651051), (-720923,676084))</a:Rect>
<a:ListOfPoints>((-739386,651051),(-720923,676084))</a:ListOfPoints>
<a:ArrowStyle>4882</a:ArrowStyle>
<a:LineColor>255</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Id="o257">
<a:Rect>((-742464,649101), (-733906,652701))</a:Rect>
<a:LineColor>255</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o258">
<a:ObjectID>6958ABB9-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_ISR</a:Name>
<a:Code>T_FIDS_ISR</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o259">
<a:ObjectID>6958AC17-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_IST</a:Name>
<a:Code>CD_IST</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o260">
<a:ObjectID>6958AC18-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TP_ISR_GRU</a:Name>
<a:Code>TP_ISR_GRU</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>tinyint</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o261">
<a:ObjectID>6958AC19-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TIMESTAMP</a:Name>
<a:Code>TIMESTAMP</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o262">
<a:ObjectID>6958AC1A-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_FIDS_ISR</a:Name>
<a:Code>Pk_T_FIDS_ISR</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_FIDS_ISR</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o259"/>
<o:Column Ref="o260"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Owner>
<o:User Ref="o19"/>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o263">
<a:ObjectID>6958ACC2-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_ISR_TRI</a:Name>
<a:Code>T_FIDS_ISR_TRI</a:Code>
<a:Text>Create Trigger T_FIDS_ISR_TRI On T_FIDS_ISR
For Insert As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* FIDS - IST Servidor de Informação»FIDS - IST Grupo: Grupo do Information Server */
If (Select Count(*) From T_FIDS_IST, Inserted
Where T_FIDS_IST.CD_IST = Inserted.CD_IST)
 &lt;&gt;(Select Count(CD_IST) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;FIDS - IST Servidor de Informação&gt; que se deseja incluir na tabela &lt;FIDS - IST Grupo&gt; não está cadastrada&#39;
  Return
End
/* Domínio de: Grupo do Information Server */
/* 1 - Grupo 1 */
/* 2 - Grupo 2 */
If (Select Count(*) From Inserted
    Where TP_ISR_GRU In (1,2))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Grupo do Information Server&gt; que se deseja incluir na tabela &lt;FIDS - IST Grupo&gt; não é uma opção válida&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>I</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o264">
<a:ObjectID>6958AB3F-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_ISR_TRU</a:Name>
<a:Code>T_FIDS_ISR_TRU</a:Code>
<a:Text>Create Trigger T_FIDS_ISR_TRU On T_FIDS_ISR
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_IST)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código do Information Server&gt; da tabela &lt;FIDS - IST Grupo&gt; não pode ser alterada.&#39;
  Return
End
If Update (TP_ISR_GRU)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Grupo do Information Server&gt; da tabela &lt;FIDS - IST Grupo&gt; não pode ser alterada.&#39;
  Return
End
If Update (TP_ISR_GRU)
/* Domínio de: Grupo do Information Server */
/* 1 - Grupo 1 */
/* 2 - Grupo 2 */
If (Select Count(*) From Inserted
    Where TP_ISR_GRU In (1,2))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Grupo do Information Server&gt; que se deseja incluir na tabela &lt;FIDS - IST Grupo&gt; não é uma opção válida&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o262"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Ref="o6"/>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o265">
<a:ObjectID>6958AB90-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_17</a:Name>
<a:Code>REFERENCE_17</a:Code>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o7"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o258"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o16"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o266">
<a:ObjectID>6958AB93-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o8"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o259"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o267">
<a:CenterTextOffset>(3, 0)</a:CenterTextOffset>
<a:Rect>((-737335,663214), (-721568,675700))</a:Rect>
<a:ListOfPoints>((-737335,663214),(-721568,675700))</a:ListOfPoints>
<a:ArrowStyle>4882</a:ArrowStyle>
<a:LineColor>255</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Id="o268">
<a:Rect>((-741613,661414), (-733055,665014))</a:Rect>
<a:LineColor>255</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o269">
<a:ObjectID>6958ABBD-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_ISV</a:Name>
<a:Code>T_FIDS_ISV</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o270">
<a:ObjectID>6958AC26-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_IST</a:Name>
<a:Code>CD_IST</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o271">
<a:ObjectID>6958AC27-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TP_ISV</a:Name>
<a:Code>TP_ISV</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>tinyint</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o272">
<a:ObjectID>6958AC28-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TIMESTAMP</a:Name>
<a:Code>TIMESTAMP</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o273">
<a:ObjectID>6958AC29-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_FIDS_ISV</a:Name>
<a:Code>Pk_T_FIDS_ISV</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_FIDS_ISV</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o270"/>
<o:Column Ref="o271"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Owner>
<o:User Ref="o19"/>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o274">
<a:ObjectID>6958AB48-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_ISV_TRI</a:Name>
<a:Code>T_FIDS_ISV_TRI</a:Code>
<a:Text>Create Trigger T_FIDS_ISV_TRI On T_FIDS_ISV
For Insert As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* FIDS - IST Servidor de Informação»FIDS - IST Tipo do Vôo: Tipo do Vôo do IST */
If (Select Count(*) From T_FIDS_IST, Inserted
Where T_FIDS_IST.CD_IST = Inserted.CD_IST)
 &lt;&gt;(Select Count(CD_IST) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;FIDS - IST Servidor de Informação&gt; que se deseja incluir na tabela &lt;FIDS - IST Tipo do Vôo&gt; não está cadastrada&#39;
  Return
End
/* Domínio de: Tipo do Vôo */
/* 1 - DOM-Doméstico */
/* 2 - INT-Internacional */
/* 3 - REG-Regional */
If (Select Count(*) From Inserted
    Where TP_ISV In (1,2,3))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Tipo do Vôo&gt; que se deseja incluir na tabela &lt;FIDS - IST Tipo do Vôo&gt; não é uma opção válida&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>I</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o275">
<a:ObjectID>6958AB4B-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_ISV_TRU</a:Name>
<a:Code>T_FIDS_ISV_TRU</a:Code>
<a:Text>Create Trigger T_FIDS_ISV_TRU On T_FIDS_ISV
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_IST)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código do Information Server&gt; da tabela &lt;FIDS - IST Tipo do Vôo&gt; não pode ser alterada.&#39;
  Return
End
If Update (TP_ISV)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Tipo do Vôo&gt; da tabela &lt;FIDS - IST Tipo do Vôo&gt; não pode ser alterada.&#39;
  Return
End
If Update (TP_ISV)
/* Domínio de: Tipo do Vôo */
/* 1 - DOM-Doméstico */
/* 2 - INT-Internacional */
/* 3 - REG-Regional */
If (Select Count(*) From Inserted
    Where TP_ISV In (1,2,3))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Tipo do Vôo&gt; que se deseja incluir na tabela &lt;FIDS - IST Tipo do Vôo&gt; não é uma opção válida&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o273"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Ref="o6"/>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o276">
<a:ObjectID>6958AB95-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_18</a:Name>
<a:Code>REFERENCE_18</a:Code>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o7"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o269"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o16"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o277">
<a:ObjectID>6958AB97-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o8"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o270"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o278">
<a:CenterTextOffset>(0, -450)</a:CenterTextOffset>
<a:Rect>((-738827,720646), (-722254,721980))</a:Rect>
<a:ListOfPoints>((-738827,721795),(-722254,721980))</a:ListOfPoints>
<a:ArrowStyle>4882</a:ArrowStyle>
<a:LineColor>255</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Id="o279">
<a:Rect>((-742967,719212), (-734023,722812))</a:Rect>
<a:LineColor>255</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o280">
<a:ObjectID>6958ABC5-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_POB</a:Name>
<a:Code>T_FIDS_POB</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o281">
<a:ObjectID>6958AC3B-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_POB</a:Name>
<a:Code>CD_POB</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o282">
<a:ObjectID>6958AC3C-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_OBJ</a:Name>
<a:Code>CD_OBJ</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o283">
<a:ObjectID>6958AC3D-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_PRO</a:Name>
<a:Code>CD_PRO</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o284">
<a:ObjectID>6958AC3E-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>VL_POB</a:Name>
<a:Code>VL_POB</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>varchar(30)</a:DataType>
<a:Length>30</a:Length>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o285">
<a:ObjectID>6958AC3F-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TIMESTAMP</a:Name>
<a:Code>TIMESTAMP</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o286">
<a:ObjectID>6958AC41-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_FIDS_POB</a:Name>
<a:Code>Pk_T_FIDS_POB</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_FIDS_POB</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o281"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Owner>
<o:User Ref="o19"/>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o287">
<a:ObjectID>6958AB5B-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_POB_TRI</a:Name>
<a:Code>T_FIDS_POB_TRI</a:Code>
<a:Text>Create Trigger T_FIDS_POB_TRI On T_FIDS_POB
For Insert As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* FIDS - Objeto do Painter»FIDS - Propriedades do Objeto do Painter: Propriedades do Objeto do Painter */
If (Select Count(*) From T_FIDS_OBJ, Inserted
Where T_FIDS_OBJ.CD_OBJ = Inserted.CD_OBJ)
 &lt;&gt;(Select Count(CD_OBJ) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;FIDS - Objeto do Painter&gt; que se deseja incluir na tabela &lt;FIDS - Propriedades do Objeto do Painter&gt; não está cadastrada&#39;
  Return
End
/* FIDS - Propriedades»FIDS - Propriedades do Objeto do Painter: Propriedades do Objeto */
If (Select Count(*) From T_FIDS_PRO, Inserted
Where T_FIDS_PRO.CD_PRO = Inserted.CD_PRO)
 &lt;&gt;(Select Count(CD_PRO) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;FIDS - Propriedades&gt; que se deseja incluir na tabela &lt;FIDS - Propriedades do Objeto do Painter&gt; não está cadastrada&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>I</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o288">
<a:ObjectID>6958AB5E-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_POB_TRU</a:Name>
<a:Code>T_FIDS_POB_TRU</a:Code>
<a:Text>Create Trigger T_FIDS_POB_TRU On T_FIDS_POB
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_POB)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código da propriedade do objeto do Painter&gt; da tabela &lt;FIDS - Propriedades do Objeto do Painter&gt; não pode ser alterada.&#39;
  Return
End
If Update (CD_OBJ)
/* FIDS - Objeto do Painter»FIDS - Propriedades do Objeto do Painter: Propriedades do Objeto do Painter */
If (Select Count(*) From T_FIDS_OBJ, Inserted
Where T_FIDS_OBJ.CD_OBJ = Inserted.CD_OBJ)
 &lt;&gt;(Select Count(CD_OBJ) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;FIDS - Objeto do Painter&gt; que se deseja incluir na tabela &lt;FIDS - Propriedades do Objeto do Painter&gt; não está cadastrada&#39;
  Return
End
If Update (CD_PRO)
/* FIDS - Propriedades»FIDS - Propriedades do Objeto do Painter: Propriedades do Objeto */
If (Select Count(*) From T_FIDS_PRO, Inserted
Where T_FIDS_PRO.CD_PRO = Inserted.CD_PRO)
 &lt;&gt;(Select Count(CD_PRO) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;FIDS - Propriedades&gt; que se deseja incluir na tabela &lt;FIDS - Propriedades do Objeto do Painter&gt; não está cadastrada&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o286"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Id="o289">
<a:Rect>((-726314,718507), (-717526,723053))</a:Rect>
<a:LineColor>255</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o290">
<a:ObjectID>6958ABC0-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_OBJ</a:Name>
<a:Code>T_FIDS_OBJ</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o291">
<a:ObjectID>6958AC2A-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_OBJ</a:Name>
<a:Code>CD_OBJ</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o292">
<a:ObjectID>6958AC2B-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TP_OBJ</a:Name>
<a:Code>TP_OBJ</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o293">
<a:ObjectID>6958AC2C-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_SCR</a:Name>
<a:Code>CD_SCR</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o294">
<a:ObjectID>6958AC2D-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TIMESTAMP</a:Name>
<a:Code>TIMESTAMP</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o295">
<a:ObjectID>6958AC2E-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_FIDS_OBJ</a:Name>
<a:Code>Pk_T_FIDS_OBJ</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_FIDS_OBJ</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o291"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Owner>
<o:User Ref="o19"/>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o296">
<a:ObjectID>6958AB4E-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_OBJ_TRD</a:Name>
<a:Code>T_FIDS_OBJ_TRD</a:Code>
<a:Text>Create Trigger T_FIDS_OBJ_TRD On T_FIDS_OBJ
For Delete As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* FIDS - Objeto do Painter»FIDS - Propriedades do Objeto do Painter: Propriedades do Objeto do Painter (Cascade) */
Delete T_FIDS_POB From T_FIDS_POB dep, Deleted pri
 Where dep.CD_OBJ = pri.CD_OBJ
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>D</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o297">
<a:ObjectID>6958AB51-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_OBJ_TRI</a:Name>
<a:Code>T_FIDS_OBJ_TRI</a:Code>
<a:Text>Create Trigger T_FIDS_OBJ_TRI On T_FIDS_OBJ
For Insert As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* FIDS - Scripts de Configuração de Tela»FIDS - Objeto do Painter: Objeto do Painter */
If (Select Count(*) From T_FIDS_SCR, Inserted
Where T_FIDS_SCR.CD_SCR = Inserted.CD_SCR)
 &lt;&gt;(Select Count(CD_SCR) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;FIDS - Scripts de Configuração de Tela&gt; que se deseja incluir na tabela &lt;FIDS - Objeto do Painter&gt; não está cadastrada&#39;
  Return
End
/* Domínio de: Tipo do Objeto do Painter */
/* 1 - Página */
/* 2 - Área */
/* 3 - Texto */
/* 4 - Figura */
/* 5 - Linha */
If (Select Count(*) From Inserted
    Where TP_OBJ In (1,2,3,4,5))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Tipo do Objeto do Painter&gt; que se deseja incluir na tabela &lt;FIDS - Objeto do Painter&gt; não é uma opção válida&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>I</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o298">
<a:ObjectID>6958AB54-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_OBJ_TRU</a:Name>
<a:Code>T_FIDS_OBJ_TRU</a:Code>
<a:Text>Create Trigger T_FIDS_OBJ_TRU On T_FIDS_OBJ
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_OBJ)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código do Objeto do Painter&gt; da tabela &lt;FIDS - Objeto do Painter&gt; não pode ser alterada.&#39;
  Return
End
If Update (CD_SCR)
/* FIDS - Scripts de Configuração de Tela»FIDS - Objeto do Painter: Objeto do Painter */
If (Select Count(*) From T_FIDS_SCR, Inserted
Where T_FIDS_SCR.CD_SCR = Inserted.CD_SCR)
 &lt;&gt;(Select Count(CD_SCR) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;FIDS - Scripts de Configuração de Tela&gt; que se deseja incluir na tabela &lt;FIDS - Objeto do Painter&gt; não está cadastrada&#39;
  Return
End
If Update (TP_OBJ)
/* Domínio de: Tipo do Objeto do Painter */
/* 1 - Página */
/* 2 - Área */
/* 3 - Texto */
/* 4 - Figura */
/* 5 - Linha */
If (Select Count(*) From Inserted
    Where TP_OBJ In (1,2,3,4,5))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Tipo do Objeto do Painter&gt; que se deseja incluir na tabela &lt;FIDS - Objeto do Painter&gt; não é uma opção válida&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o295"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o299">
<a:ObjectID>6958AB99-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_19</a:Name>
<a:Code>REFERENCE_19</a:Code>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o290"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o280"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o295"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o300">
<a:ObjectID>6958AB9B-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o291"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o282"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o301">
<a:CenterTextOffset>(3, 0)</a:CenterTextOffset>
<a:Rect>((-738216,712521), (-720896,721163))</a:Rect>
<a:ListOfPoints>((-738216,721163),(-720896,712521))</a:ListOfPoints>
<a:ArrowStyle>4882</a:ArrowStyle>
<a:LineColor>255</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Ref="o279"/>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Id="o302">
<a:Rect>((-725367,710720), (-716423,714320))</a:Rect>
<a:LineColor>255</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o303">
<a:ObjectID>6958ABC9-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_PRO</a:Name>
<a:Code>T_FIDS_PRO</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o304">
<a:ObjectID>6958AC4D-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_PRO</a:Name>
<a:Code>CD_PRO</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o305">
<a:ObjectID>6958AC4E-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NM_PRO</a:Name>
<a:Code>NM_PRO</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>varchar(30)</a:DataType>
<a:Length>30</a:Length>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o306">
<a:ObjectID>6958AC4F-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NR_PRO_SEQ</a:Name>
<a:Code>NR_PRO_SEQ</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL0    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL0 As
@valor &gt;= 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o307">
<a:ObjectID>6958AC50-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TIMESTAMP</a:Name>
<a:Code>TIMESTAMP</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o308">
<a:ObjectID>6958AC57-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_FIDS_PRO</a:Name>
<a:Code>Pk_T_FIDS_PRO</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_FIDS_PRO</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o304"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Indexes>
<o:Index Id="o309">
<a:ObjectID>6958AC54-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_FIDS_PRO_NOM</a:Name>
<a:Code>I_FIDS_PRO_NOM</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Unique>1</a:Unique>
<c:IndexColumns>
<o:IndexColumn Id="o310">
<a:ObjectID>6958AC56-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o305"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
</c:Indexes>
<c:Owner>
<o:User Ref="o19"/>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o311">
<a:ObjectID>6958AB68-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_PRO_TRD</a:Name>
<a:Code>T_FIDS_PRO_TRD</a:Code>
<a:Text>Create Trigger T_FIDS_PRO_TRD On T_FIDS_PRO
For Delete As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* FIDS - Propriedades»FIDS - Propriedades do Controle: Propriedades do Controle (Restrict) */
If (Select Count(*) From T_FIDS_PRC dep, Deleted pri
 Where dep.CD_PRO = pri.CD_PRO) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;FIDS - Propriedades&gt; está sendo referenciada na tabela &lt;FIDS - Propriedades do Controle&gt;&#39;
  Return
End
/* FIDS - Propriedades»FIDS - Propriedades do Objeto do Painter: Propriedades do Objeto (Restrict) */
If (Select Count(*) From T_FIDS_POB dep, Deleted pri
 Where dep.CD_PRO = pri.CD_PRO) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;FIDS - Propriedades&gt; está sendo referenciada na tabela &lt;FIDS - Propriedades do Objeto do Painter&gt;&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>D</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o312">
<a:ObjectID>6958AB6B-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_PRO_TRU</a:Name>
<a:Code>T_FIDS_PRO_TRU</a:Code>
<a:Text>Create Trigger T_FIDS_PRO_TRU On T_FIDS_PRO
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_PRO)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código da Propriedade&gt; da tabela &lt;FIDS - Propriedades&gt; não pode ser alterada.&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o308"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o313">
<a:ObjectID>6958AB9D-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_20</a:Name>
<a:Code>REFERENCE_20</a:Code>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o303"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o280"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o308"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o314">
<a:ObjectID>6958ABA0-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o304"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o283"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o315">
<a:Rect>((-738196,711377), (-720616,712670))</a:Rect>
<a:ListOfPoints>((-738196,712579),(-720616,712670))</a:ListOfPoints>
<a:ArrowStyle>4882</a:ArrowStyle>
<a:LineColor>255</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Id="o316">
<a:Rect>((-742628,710778), (-733762,714378))</a:Rect>
<a:LineColor>255</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o317">
<a:ObjectID>6958ABC7-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_PRC</a:Name>
<a:Code>T_FIDS_PRC</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o318">
<a:ObjectID>6958AC43-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_PRC</a:Name>
<a:Code>CD_PRC</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o319">
<a:ObjectID>6958AC45-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TP_PRC</a:Name>
<a:Code>TP_PRC</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o320">
<a:ObjectID>6958AC47-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_PRO</a:Name>
<a:Code>CD_PRO</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o321">
<a:ObjectID>6958AC49-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>VL_PRC</a:Name>
<a:Code>VL_PRC</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>varchar(30)</a:DataType>
<a:Length>30</a:Length>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o322">
<a:ObjectID>6958AC4B-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TIMESTAMP</a:Name>
<a:Code>TIMESTAMP</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o323">
<a:ObjectID>6958AC4C-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_FIDS_PRC</a:Name>
<a:Code>Pk_T_FIDS_PRC</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_FIDS_PRC</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o318"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Owner>
<o:User Ref="o19"/>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o324">
<a:ObjectID>6958AB62-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_PRC_TRI</a:Name>
<a:Code>T_FIDS_PRC_TRI</a:Code>
<a:Text>Create Trigger T_FIDS_PRC_TRI On T_FIDS_PRC
For Insert As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* FIDS - Propriedades»FIDS - Propriedades do Controle: Propriedades do Controle */
If (Select Count(*) From T_FIDS_PRO, Inserted
Where T_FIDS_PRO.CD_PRO = Inserted.CD_PRO)
 &lt;&gt;(Select Count(CD_PRO) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;FIDS - Propriedades&gt; que se deseja incluir na tabela &lt;FIDS - Propriedades do Controle&gt; não está cadastrada&#39;
  Return
End
/* Domínio de: Tipo do Objeto do Painter */
/* 1 - Página */
/* 2 - Área */
/* 3 - Texto */
/* 4 - Figura */
/* 5 - Linha */
If (Select Count(*) From Inserted
    Where TP_PRC In (1,2,3,4,5))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Tipo do Objeto do Painter&gt; que se deseja incluir na tabela &lt;FIDS - Propriedades do Controle&gt; não é uma opção válida&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>I</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o325">
<a:ObjectID>6958AB65-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_PRC_TRU</a:Name>
<a:Code>T_FIDS_PRC_TRU</a:Code>
<a:Text>Create Trigger T_FIDS_PRC_TRU On T_FIDS_PRC
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_PRC)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código da Propriedade do Controle&gt; da tabela &lt;FIDS - Propriedades do Controle&gt; não pode ser alterada.&#39;
  Return
End
If Update (CD_PRO)
/* FIDS - Propriedades»FIDS - Propriedades do Controle: Propriedades do Controle */
If (Select Count(*) From T_FIDS_PRO, Inserted
Where T_FIDS_PRO.CD_PRO = Inserted.CD_PRO)
 &lt;&gt;(Select Count(CD_PRO) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;FIDS - Propriedades&gt; que se deseja incluir na tabela &lt;FIDS - Propriedades do Controle&gt; não está cadastrada&#39;
  Return
End
If Update (TP_PRC)
/* Domínio de: Tipo do Objeto do Painter */
/* 1 - Página */
/* 2 - Área */
/* 3 - Texto */
/* 4 - Figura */
/* 5 - Linha */
If (Select Count(*) From Inserted
    Where TP_PRC In (1,2,3,4,5))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Tipo do Objeto do Painter&gt; que se deseja incluir na tabela &lt;FIDS - Propriedades do Controle&gt; não é uma opção válida&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o323"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Ref="o302"/>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o326">
<a:ObjectID>6958ABA3-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_21</a:Name>
<a:Code>REFERENCE_21</a:Code>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o303"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o317"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o308"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o327">
<a:ObjectID>6958ABA6-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o304"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o320"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o328">
<a:CenterTextOffset>(3, 0)</a:CenterTextOffset>
<a:Rect>((-714176,672423), (-706452,680317))</a:Rect>
<a:ListOfPoints>((-710317,672423),(-710317,680317))</a:ListOfPoints>
<a:ArrowStyle>4882</a:ArrowStyle>
<a:LineColor>255</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Id="o329">
<a:Rect>((-714710,670622), (-705922,674222))</a:Rect>
<a:LineColor>255</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o330">
<a:ObjectID>6958ABC3-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_PAL</a:Name>
<a:Code>T_FIDS_PAL</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o331">
<a:ObjectID>6958AC2F-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_PAL</a:Name>
<a:Code>CD_PAL</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o332">
<a:ObjectID>6958AC30-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NR_PAL</a:Name>
<a:Code>NR_PAL</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL0    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL0 As
@valor &gt;= 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o333">
<a:ObjectID>6958AC31-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NM_PAL</a:Name>
<a:Code>NM_PAL</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>varchar(30)</a:DataType>
<a:Length>30</a:Length>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o334">
<a:ObjectID>6958AC32-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_ROL</a:Name>
<a:Code>CD_ROL</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o335">
<a:ObjectID>6958AC33-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Timestamp</a:Name>
<a:Code>Timestamp</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o336">
<a:ObjectID>6958AC3A-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_FIDS_PAL</a:Name>
<a:Code>Pk_T_FIDS_PAL</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_FIDS_PAL</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o331"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Indexes>
<o:Index Id="o337">
<a:ObjectID>6958AC34-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_PAL_NM</a:Name>
<a:Code>I_PAL_NM</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Unique>1</a:Unique>
<c:IndexColumns>
<o:IndexColumn Id="o338">
<a:ObjectID>6958AC36-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o333"/>
</c:Column>
</o:IndexColumn>
<o:IndexColumn Id="o339">
<a:ObjectID>6958AC38-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_1&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o334"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
</c:Indexes>
<c:Owner>
<o:User Ref="o19"/>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o340">
<a:ObjectID>6958AB56-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_PAL_TRI</a:Name>
<a:Code>T_FIDS_PAL_TRI</a:Code>
<a:Text>Create Trigger T_FIDS_PAL_TRI On T_FIDS_PAL
For Insert As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* FIDS - Rolos de Palheta»FIDS - Palhetas: ROL-PAL:R */
If (Select Count(*) From T_FIDS_ROL, Inserted
Where T_FIDS_ROL.CD_ROL = Inserted.CD_ROL)
 &lt;&gt;(Select Count(CD_ROL) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;FIDS - Rolos de Palheta&gt; que se deseja incluir na tabela &lt;FIDS - Palhetas&gt; não está cadastrada&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>I</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o341">
<a:ObjectID>6958AB58-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_PAL_TRU</a:Name>
<a:Code>T_FIDS_PAL_TRU</a:Code>
<a:Text>Create Trigger T_FIDS_PAL_TRU On T_FIDS_PAL
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_PAL)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código da Palheta&gt; da tabela &lt;FIDS - Palhetas&gt; não pode ser alterada.&#39;
  Return
End
If Update (CD_ROL)
/* FIDS - Rolos de Palheta»FIDS - Palhetas: ROL-PAL:R */
If (Select Count(*) From T_FIDS_ROL, Inserted
Where T_FIDS_ROL.CD_ROL = Inserted.CD_ROL)
 &lt;&gt;(Select Count(CD_ROL) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;FIDS - Rolos de Palheta&gt; que se deseja incluir na tabela &lt;FIDS - Palhetas&gt; não está cadastrada&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o336"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Id="o342">
<a:Rect>((-714749,678517), (-705883,682117))</a:Rect>
<a:LineColor>255</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o343">
<a:ObjectID>6958ABCD-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_ROL</a:Name>
<a:Code>T_FIDS_ROL</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o344">
<a:ObjectID>6958AC59-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_ROL</a:Name>
<a:Code>CD_ROL</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o345">
<a:ObjectID>6958AC5B-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NM_ROL</a:Name>
<a:Code>NM_ROL</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>varchar(30)</a:DataType>
<a:Length>30</a:Length>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o346">
<a:ObjectID>6958AC5C-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Timestamp</a:Name>
<a:Code>Timestamp</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o347">
<a:ObjectID>6958AC64-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_FIDS_ROL</a:Name>
<a:Code>Pk_T_FIDS_ROL</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_FIDS_ROL</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o344"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Indexes>
<o:Index Id="o348">
<a:ObjectID>6958AC60-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_ROL_NM</a:Name>
<a:Code>I_ROL_NM</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Unique>1</a:Unique>
<c:IndexColumns>
<o:IndexColumn Id="o349">
<a:ObjectID>6958AC62-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o345"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
</c:Indexes>
<c:Owner>
<o:User Ref="o19"/>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o350">
<a:ObjectID>6958AB6E-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_ROL_TRD</a:Name>
<a:Code>T_FIDS_ROL_TRD</a:Code>
<a:Text>Create Trigger T_FIDS_ROL_TRD On T_FIDS_ROL
For Delete As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* FIDS - Rolos de Palheta»FIDS - Palhetas: ROL-PAL:R (Restrict) */
If (Select Count(*) From T_FIDS_PAL dep, Deleted pri
 Where dep.CD_ROL = pri.CD_ROL) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;FIDS - Rolos de Palheta&gt; está sendo referenciada na tabela &lt;FIDS - Palhetas&gt;&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>D</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o351">
<a:ObjectID>6958AB72-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_ROL_TRU</a:Name>
<a:Code>T_FIDS_ROL_TRU</a:Code>
<a:Text>Create Trigger T_FIDS_ROL_TRU On T_FIDS_ROL
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_ROL)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código do Rolo&gt; da tabela &lt;FIDS - Rolos de Palheta&gt; não pode ser alterada.&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o347"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o352">
<a:ObjectID>6958ABA9-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_22</a:Name>
<a:Code>REFERENCE_22</a:Code>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o343"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o330"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o347"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o353">
<a:ObjectID>6958ABAC-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o344"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o334"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o354">
<a:CenterTextOffset>(453, -1650)</a:CenterTextOffset>
<a:Rect>((-706499,704778), (-698775,721189))</a:Rect>
<a:ListOfPoints>((-703126,704778),(-703050,721189))</a:ListOfPoints>
<a:ArrowStyle>4882</a:ArrowStyle>
<a:LineColor>255</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Ref="o92"/>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Id="o355">
<a:Rect>((-708664,718414), (-699798,722960))</a:Rect>
<a:LineColor>255</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o356">
<a:ObjectID>6958ABD0-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_SCR</a:Name>
<a:Code>T_FIDS_SCR</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o357">
<a:ObjectID>6958AC66-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_SCR</a:Name>
<a:Code>CD_SCR</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o358">
<a:ObjectID>6958AC68-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NM_SCR</a:Name>
<a:Code>NM_SCR</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>varchar(30)</a:DataType>
<a:Length>30</a:Length>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o359">
<a:ObjectID>6958AC6A-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TP_SCR</a:Name>
<a:Code>TP_SCR</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o360">
<a:ObjectID>6958AC6C-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TIMESTAMP</a:Name>
<a:Code>TIMESTAMP</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o361">
<a:ObjectID>6958AC71-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_FIDS_SCR</a:Name>
<a:Code>Pk_T_FIDS_SCR</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_FIDS_SCR</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o357"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Owner>
<o:User Ref="o19"/>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o362">
<a:ObjectID>6958AB75-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_SCR_TRD</a:Name>
<a:Code>T_FIDS_SCR_TRD</a:Code>
<a:Text>Create Trigger T_FIDS_SCR_TRD On T_FIDS_SCR
For Delete As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* FIDS - Scripts de Configuração de Tela»FIDS - Grupo de Displays: Script do Grupo de Displays (Restrict) */
If (Select Count(*) From T_FIDS_DGT dep, Deleted pri
 Where dep.CD_SCR = pri.CD_SCR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;FIDS - Scripts de Configuração de Tela&gt; está sendo referenciada na tabela &lt;FIDS - Grupo de Displays&gt;&#39;
  Return
End
/* FIDS - Scripts de Configuração de Tela»FIDS - Grupo de Displays: Script OffLine do Grupo de Displays (Restrict) */
If (Select Count(*) From T_FIDS_DGT dep, Deleted pri
 Where dep.CD_SCR_OFF = pri.CD_SCR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;FIDS - Scripts de Configuração de Tela&gt; está sendo referenciada na tabela &lt;FIDS - Grupo de Displays&gt;&#39;
  Return
End
/* FIDS - Scripts de Configuração de Tela»FIDS - Objeto do Painter: Objeto do Painter (Cascade) */
Delete T_FIDS_OBJ From T_FIDS_OBJ dep, Deleted pri
 Where dep.CD_SCR = pri.CD_SCR
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>D</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o363">
<a:ObjectID>6958AB78-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_SCR_TRI</a:Name>
<a:Code>T_FIDS_SCR_TRI</a:Code>
<a:Text>Create Trigger T_FIDS_SCR_TRI On T_FIDS_SCR
For Insert As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* Domínio de: Tipo de Script */
/* 1 - 640x480 */
/* 2 - 1000x562 */
/* 3 - 800x600 */
If (Select Count(*) From Inserted
    Where TP_SCR In (1,2,3))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Tipo de Script&gt; que se deseja incluir na tabela &lt;FIDS - Scripts de Configuração de Tela&gt; não é uma opção válida&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>I</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o364">
<a:ObjectID>6958AB7B-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_SCR_TRU</a:Name>
<a:Code>T_FIDS_SCR_TRU</a:Code>
<a:Text>Create Trigger T_FIDS_SCR_TRU On T_FIDS_SCR
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_SCR)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código do Script de definição da Tela&gt; da tabela &lt;FIDS - Scripts de Configuração de Tela&gt; não pode ser alterada.&#39;
  Return
End
If Update (TP_SCR)
/* Domínio de: Tipo de Script */
/* 1 - 640x480 */
/* 2 - 1000x562 */
/* 3 - 800x600 */
If (Select Count(*) From Inserted
    Where TP_SCR In (1,2,3))
 &lt;&gt;(Select Count(*) From Inserted)
Begin
  RollBack Transaction
  RaisError 20004 &#39;Operação não executada: A informação &lt;Tipo de Script&gt; que se deseja incluir na tabela &lt;FIDS - Scripts de Configuração de Tela&gt; não é uma opção válida&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o361"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o365">
<a:ObjectID>6958ABAF-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_23</a:Name>
<a:Code>REFERENCE_23</a:Code>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o356"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o93"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o361"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o366">
<a:ObjectID>6958ABB2-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o357"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o97"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o367">
<a:CenterTextOffset>(3, 0)</a:CenterTextOffset>
<a:Rect>((-721381,721437), (-704501,722833))</a:Rect>
<a:ListOfPoints>((-721381,721732),(-704501,721437))</a:ListOfPoints>
<a:ArrowStyle>4882</a:ArrowStyle>
<a:LineColor>255</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Ref="o289"/>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Ref="o355"/>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o368">
<a:ObjectID>6958ABB5-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_24</a:Name>
<a:Code>REFERENCE_24</a:Code>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o356"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o290"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o361"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o369">
<a:ObjectID>6958ABB8-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o357"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o293"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o370">
<a:CenterTextOffset>(3, 0)</a:CenterTextOffset>
<a:Rect>((-704821,676606), (-697097,686072))</a:Rect>
<a:ListOfPoints>((-703555,686072),(-698276,676606))</a:ListOfPoints>
<a:ArrowStyle>4882</a:ArrowStyle>
<a:LineColor>255</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Ref="o154"/>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Id="o371">
<a:Rect>((-702708,674332), (-693842,678878))</a:Rect>
<a:LineColor>255</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o372">
<a:ObjectID>6958ABD3-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_SET</a:Name>
<a:Code>T_FIDS_SET</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081686158</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o373">
<a:ObjectID>6958AC74-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_SET</a:Name>
<a:Code>CD_SET</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o374">
<a:ObjectID>6958AC77-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NM_SET</a:Name>
<a:Code>NM_SET</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>varchar(50)</a:DataType>
<a:Length>50</a:Length>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o375">
<a:ObjectID>6958AC78-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TIMESTAMP</a:Name>
<a:Code>TIMESTAMP</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o376">
<a:ObjectID>6958AC79-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_FIDS_SET</a:Name>
<a:Code>Pk_T_FIDS_SET</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_FIDS_SET</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o373"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Owner>
<o:User Ref="o19"/>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o377">
<a:ObjectID>6958AB7D-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_SET_TRD</a:Name>
<a:Code>T_FIDS_SET_TRD</a:Code>
<a:Text>Create Trigger T_FIDS_SET_TRD On T_FIDS_SET
For Delete As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* FIDS - Setor do Terminal de Passageiros»FIDS - Displays: Setor do Terminal de Passageiros do Display (Restrict) */
If (Select Count(*) From T_FIDS_DIS dep, Deleted pri
 Where dep.CD_SET = pri.CD_SET) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;FIDS - Setor do Terminal de Passageiros&gt; está sendo referenciada na tabela &lt;FIDS - Displays&gt;&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>D</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o378">
<a:ObjectID>6958AB7F-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_SET_TRI</a:Name>
<a:Code>T_FIDS_SET_TRI</a:Code>
<a:Text>Create Trigger T_FIDS_SET_TRI On T_FIDS_SET
For Insert As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* FIDS - Terminal de Passageiros»FIDS - Setor do Terminal de Passageiros: Setor do Terminal */
If (Select Count(*) From T_FIDS_TPS, Inserted
Where T_FIDS_TPS.CD_TPS = Inserted.CD_TPS)
 &lt;&gt;(Select Count(CD_TPS) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;FIDS - Terminal de Passageiros&gt; que se deseja incluir na tabela &lt;FIDS - Setor do Terminal de Passageiros&gt; não está cadastrada&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>I</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o379">
<a:ObjectID>6958AB82-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_SET_TRU</a:Name>
<a:Code>T_FIDS_SET_TRU</a:Code>
<a:Text>Create Trigger T_FIDS_SET_TRU On T_FIDS_SET
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_SET)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código do Setor do Terminal de Passageiros&gt; da tabela &lt;FIDS - Setor do Terminal de Passageiros&gt; não pode ser alterada.&#39;
  Return
End
If Update (CD_TPS)
/* FIDS - Terminal de Passageiros»FIDS - Setor do Terminal de Passageiros: Setor do Terminal */
If (Select Count(*) From T_FIDS_TPS, Inserted
Where T_FIDS_TPS.CD_TPS = Inserted.CD_TPS)
 &lt;&gt;(Select Count(CD_TPS) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;FIDS - Terminal de Passageiros&gt; que se deseja incluir na tabela &lt;FIDS - Setor do Terminal de Passageiros&gt; não está cadastrada&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o376"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o380">
<a:ObjectID>6958ABBA-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_25</a:Name>
<a:Code>REFERENCE_25</a:Code>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o372"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o155"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o376"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o381">
<a:ObjectID>6958ABBC-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o373"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o165"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o382">
<a:CenterTextOffset>(303, -1650)</a:CenterTextOffset>
<a:Rect>((-708873,650817), (-701149,664928))</a:Rect>
<a:ListOfPoints>((-704942,650817),(-705092,664928))</a:ListOfPoints>
<a:ArrowStyle>4882</a:ArrowStyle>
<a:LineColor>255</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Ref="o246"/>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Id="o383">
<a:Rect>((-710574,662813), (-701708,667043))</a:Rect>
<a:LineColor>255</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o384">
<a:ObjectID>6958ABD5-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_TPS</a:Name>
<a:Code>T_FIDS_TPS</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o385">
<a:ObjectID>6958AC7B-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_TPS</a:Name>
<a:Code>CD_TPS</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o386">
<a:ObjectID>6958AC7E-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NM_TPS</a:Name>
<a:Code>NM_TPS</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>char(1)</a:DataType>
<a:Length>1</a:Length>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o387">
<a:ObjectID>6958AC81-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TIMESTAMP</a:Name>
<a:Code>TIMESTAMP</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o388">
<a:ObjectID>6958AC87-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_FIDS_TPS</a:Name>
<a:Code>Pk_T_FIDS_TPS</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_FIDS_TPS</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o385"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Owner>
<o:User Ref="o19"/>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o389">
<a:ObjectID>6958AB85-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_TPS_TRD</a:Name>
<a:Code>T_FIDS_TPS_TRD</a:Code>
<a:Text>Create Trigger T_FIDS_TPS_TRD On T_FIDS_TPS
For Delete As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* FIDS - Terminal de Passageiros»FIDS - Setor do Terminal de Passageiros: Setor do Terminal (Restrict) */
If (Select Count(*) From T_FIDS_SET dep, Deleted pri
 Where dep.CD_TPS = pri.CD_TPS) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;FIDS - Terminal de Passageiros&gt; está sendo referenciada na tabela &lt;FIDS - Setor do Terminal de Passageiros&gt;&#39;
  Return
End
/* FIDS - Terminal de Passageiros»FIDS - IST Terminal de Passageiros: TPS do ISP (Restrict) */
If (Select Count(*) From T_FIDS_ISP dep, Deleted pri
 Where dep.CD_TPS = pri.CD_TPS) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;FIDS - Terminal de Passageiros&gt; está sendo referenciada na tabela &lt;FIDS - IST Terminal de Passageiros&gt;&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>D</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o390">
<a:ObjectID>6958AB88-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_FIDS_TPS_TRU</a:Name>
<a:Code>T_FIDS_TPS_TRU</a:Code>
<a:Text>Create Trigger T_FIDS_TPS_TRU On T_FIDS_TPS
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_TPS)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código do Terminal de Passageiros&gt; da tabela &lt;FIDS - Terminal de Passageiros&gt; não pode ser alterada.&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o388"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o391">
<a:ObjectID>6958ABBF-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_26</a:Name>
<a:Code>REFERENCE_26</a:Code>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o384"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o247"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o388"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o392">
<a:ObjectID>6958ABC2-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o385"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o249"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o393">
<a:CenterTextOffset>(4, 2)</a:CenterTextOffset>
<a:Rect>((-737918,670550), (-719187,676313))</a:Rect>
<a:ListOfPoints>((-719187,676313),(-737918,670550))</a:ListOfPoints>
<a:ArrowStyle>4881</a:ArrowStyle>
<a:LineColor>255</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Ref="o6"/>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Id="o394">
<a:Rect>((-741172,669105), (-734468,673651))</a:Rect>
<a:LineColor>255</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o395">
<a:ObjectID>6958ABFD-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_POR</a:Name>
<a:Code>T_POR</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o396">
<a:ObjectID>6958AC89-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_POR</a:Name>
<a:Code>CD_POR</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o397">
<a:ObjectID>6958AC8B-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NR_POR</a:Name>
<a:Code>NR_POR</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>char(4)</a:DataType>
<a:Length>4</a:Length>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o398">
<a:ObjectID>6958AC8E-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_EMB</a:Name>
<a:Code>CD_EMB</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o399">
<a:ObjectID>6958AC91-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_AER</a:Name>
<a:Code>CD_AER</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o400">
<a:ObjectID>6958AC94-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TIMESTAMP</a:Name>
<a:Code>TIMESTAMP</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o401">
<a:ObjectID>6958ACAD-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_POR</a:Name>
<a:Code>Pk_T_POR</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_POR</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o396"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Indexes>
<o:Index Id="o402">
<a:ObjectID>6958AC9B-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_POR_AER</a:Name>
<a:Code>I_POR_AER</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Unique>1</a:Unique>
<c:IndexColumns>
<o:IndexColumn Id="o403">
<a:ObjectID>6958AC9E-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o397"/>
</c:Column>
</o:IndexColumn>
<o:IndexColumn Id="o404">
<a:ObjectID>6958ACA1-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_1&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o399"/>
</c:Column>
</o:IndexColumn>
<o:IndexColumn Id="o405">
<a:ObjectID>6958ACA4-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_2&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o398"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
<o:Index Id="o406">
<a:ObjectID>6958ACA7-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>I_AER</a:Name>
<a:Code>I_AER</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:IndexColumns>
<o:IndexColumn Id="o407">
<a:ObjectID>6958ACAA-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:IndexColumn.Expression>&lt;Index Expression_0&gt;</a:IndexColumn.Expression>
<c:Column>
<o:Column Ref="o399"/>
</c:Column>
</o:IndexColumn>
</c:IndexColumns>
</o:Index>
</c:Indexes>
<c:Owner>
<o:User Ref="o19"/>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o408">
<a:ObjectID>6958AC12-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_POR_TRD</a:Name>
<a:Code>T_POR_TRD</a:Code>
<a:Text>Create Trigger T_POR_TRD On T_POR
For Delete As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* Portão»Hotran - Frequência: É Portão da Frequencia (Restrict) */
If (Select Count(*) From T_HFR dep, Deleted pri
 Where dep.CD_POR = pri.CD_POR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Portão&gt; está sendo referenciada na tabela &lt;Hotran - Frequência&gt;&#39;
  Return
End
/* Portão»FIDS - IST Servidor de Informação: Portão Associado ao IST (Restrict) */
If (Select Count(*) From T_FIDS_IST dep, Deleted pri
 Where dep.CD_POR = pri.CD_POR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Portão&gt; está sendo referenciada na tabela &lt;FIDS - IST Servidor de Informação&gt;&#39;
  Return
End
/* Portão»Mensagem de Partida: Portão da Mensagem de Partida (Restrict) */
If (Select Count(*) From T_MPA dep, Deleted pri
 Where dep.CD_POR = pri.CD_POR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Portão&gt; está sendo referenciada na tabela &lt;Mensagem de Partida&gt;&#39;
  Return
End
/* Portão»Mensagem de Partida - Mirror: Portão da Mensagem de Partida (Restrict) */
If (Select Count(*) From T_MPA_MIR dep, Deleted pri
 Where dep.CD_POR = pri.CD_POR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Portão&gt; está sendo referenciada na tabela &lt;Mensagem de Partida - Mirror&gt;&#39;
  Return
End
/* Portão»Partidas: Portão da Partida (Restrict) */
If (Select Count(*) From T_PAR dep, Deleted pri
 Where dep.CD_POR = pri.CD_POR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Portão&gt; está sendo referenciada na tabela &lt;Partidas&gt;&#39;
  Return
End
/* Portão»Partidas - Mirror: Portão da Partida (Restrict) */
If (Select Count(*) From T_PAR_MIR dep, Deleted pri
 Where dep.CD_POR = pri.CD_POR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Portão&gt; está sendo referenciada na tabela &lt;Partidas - Mirror&gt;&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>D</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o409">
<a:ObjectID>6958AC14-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_POR_TRI</a:Name>
<a:Code>T_POR_TRI</a:Code>
<a:Text>Create Trigger T_POR_TRI On T_POR
For Insert As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* Aeroporto»Portão: Aeroporto possui Portões */
If (Select Count(*) From T_AER, Inserted
Where T_AER.CD_AER = Inserted.CD_AER)
 &lt;&gt;(Select Count(CD_AER) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Aeroporto&gt; que se deseja incluir na tabela &lt;Portão&gt; não está cadastrada&#39;
  Return
End
/* Sala de Embarque»Portão: Sal.Emb. possui portões Emb. */
If (Select Count(*) From T_EMB, Inserted
Where T_EMB.CD_EMB = Inserted.CD_EMB)
 &lt;&gt;(Select Count(CD_EMB) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Sala de Embarque&gt; que se deseja incluir na tabela &lt;Portão&gt; não está cadastrada&#39;
  Return
End
End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>I</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o410">
<a:ObjectID>6958AC15-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_POR_TRU</a:Name>
<a:Code>T_POR_TRU</a:Code>
<a:Text>Create Trigger T_POR_TRU On T_POR
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_POR)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código do Portão&gt; da tabela &lt;Portão&gt; não pode ser alterada.&#39;
  Return
End
If Update (CD_AER)
/* Aeroporto»Portão: Aeroporto possui Portões */
If (Select Count(*) From T_AER, Inserted
Where T_AER.CD_AER = Inserted.CD_AER)
 &lt;&gt;(Select Count(CD_AER) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Aeroporto&gt; que se deseja incluir na tabela &lt;Portão&gt; não está cadastrada&#39;
  Return
End
If Update (CD_EMB)
/* Sala de Embarque»Portão: Sal.Emb. possui portões Emb. */
If (Select Count(*) From T_EMB, Inserted
Where T_EMB.CD_EMB = Inserted.CD_EMB)
 &lt;&gt;(Select Count(CD_EMB) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Sala de Embarque&gt; que se deseja incluir na tabela &lt;Portão&gt; não está cadastrada&#39;
  Return
End
/* Regra de negócio */
IF UPDATE(NR_POR) OR UPDATE(CD_EMB)
BEGIN
	/* Incluir Registros em T_APA */
	INSERT	T_APA (DH_APA, CD_PAR)
	Select 	GETDATE(), CD_PAR
	From 	T_PAR PAR, INSERTED INS
	Where	PAR.TP_PAR_STA = 1 AND
		PAR.CD_AER = (Select CD_AER From T_PSI) AND
		PAR.CD_POR = INS.CD_POR

	/* Incluir Registros em T_AHO */
	INSERT	T_AHO (CD_HOT, DH_AHO)
	Select	DISTINCT CD_HOT, GETDATE()
	From	T_HFR HFR, INSERTED INS
	Where	HFR.CD_POR = INS.CD_POR

	/* Incluir Registros em T_AHP */
	INSERT	T_AHP (CD_HPA, DH_AHP)
	Select 	DISTINCT CD_HPA, GETDATE()
	From 	T_HPA001 HPA, T_CHG CHG, T_SIT SIT, T_PAR PAR, INSERTED INS
	Where	HPA.CD_CHG = CHG.CD_CHG AND
		SIT.CD_SIT = CHG.CD_SIT AND
		HPA.CD_AER = (Select CD_AER From T_PSI) AND
		(HPA.FL_HPA_ENT = 1 OR SIT.FL_SIT_AEN_PAT = 1) AND
		HPA.FL_HPA_SAI = 0 AND
		HPA.CD_AEN IS NOT NULL AND
		PAR.CD_CHG_AEN_ANT = HPA.CD_CHG AND
		PAR.CD_POR = INS.CD_POR
END

End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o401"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o411">
<a:ObjectID>6958ABC8-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_28</a:Name>
<a:Code>REFERENCE_28</a:Code>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o395"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o7"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o401"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o412">
<a:ObjectID>6958ABCB-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o396"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o13"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o413">
<a:CenterTextOffset>(3, 0)</a:CenterTextOffset>
<a:Rect>((-738080,695350), (-725768,704908))</a:Rect>
<a:ListOfPoints>((-725768,695350),(-738080,704908))</a:ListOfPoints>
<a:ArrowStyle>4882</a:ArrowStyle>
<a:LineColor>255</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Ref="o138"/>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Id="o414">
<a:Rect>((-741392,702634), (-734766,707180))</a:Rect>
<a:LineColor>255</a:LineColor>
<a:FillColor>16777215</a:FillColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N
TableColumns 0 arial,8,N
TablePkColumns 0 arial,8,N
TableKeys 0 arial,8,N
TableIndexs 0 arial,8,N
TableTriggers 0 arial,8,N</a:FontList>
<c:Object>
<o:Table Id="o415">
<a:ObjectID>6958AC0E-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_USR</a:Name>
<a:Code>T_USR</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Columns>
<o:Column Id="o416">
<a:ObjectID>6958ACB0-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>CD_USR</a:Name>
<a:Code>CD_USR</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:ServerCheckExpression>/****** Object:  Rule dbo.RU_VL1    Script Date: 7/8/2000 12:14:36 ******/
Create Rule        RU_VL1 As
@valor &gt; 0 and %MINMAX% and %LISTVAL% and %RULES%</a:ServerCheckExpression>
<a:DataType>int</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o417">
<a:ObjectID>6958ACB2-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>NM_USR_PAS</a:Name>
<a:Code>NM_USR_PAS</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>char(30)</a:DataType>
<a:Length>30</a:Length>
<a:Mandatory>1</a:Mandatory>
</o:Column>
<o:Column Id="o418">
<a:ObjectID>6958ACB4-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>TIMESTAMP</a:Name>
<a:Code>TIMESTAMP</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:DataType>timestamp</a:DataType>
<a:Mandatory>1</a:Mandatory>
</o:Column>
</c:Columns>
<c:Keys>
<o:Key Id="o419">
<a:ObjectID>6958ACBB-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Pk_T_USR</a:Name>
<a:Code>Pk_T_USR</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:PhysicalOptions>
clustered</a:PhysicalOptions>
<a:ConstraintName>Pk_T_USR</a:ConstraintName>
<c:Key.Columns>
<o:Column Ref="o416"/>
</c:Key.Columns>
</o:Key>
</c:Keys>
<c:Owner>
<o:User Ref="o19"/>
</c:Owner>
<c:Triggers>
<o:Trigger Id="o420">
<a:ObjectID>6958AC40-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_USR_TRD</a:Name>
<a:Code>T_USR_TRD</a:Code>
<a:Text>Create Trigger T_USR_TRD On T_USR
For Delete As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* Usuários»Chamadas de Anuncio - Mirror: Usuário da Chamada (Restrict) */
If (Select Count(*) From T_CHA_MIR dep, Deleted pri
 Where dep.CD_USR = pri.CD_USR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Usuários&gt; está sendo referenciada na tabela &lt;Chamadas de Anuncio - Mirror&gt;&#39;
  Return
End
/* Usuários»Chamadas de Anuncio: Usuário da Chamada (Restrict) */
If (Select Count(*) From T_CHA dep, Deleted pri
 Where dep.CD_USR = pri.CD_USR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Usuários&gt; está sendo referenciada na tabela &lt;Chamadas de Anuncio&gt;&#39;
  Return
End
/* Usuários»Mensagem de Chegada - Mirror: Usuário da Mensagem de Chegada (Restrict) */
If (Select Count(*) From T_MCH_MIR dep, Deleted pri
 Where dep.CD_USR = pri.CD_USR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Usuários&gt; está sendo referenciada na tabela &lt;Mensagem de Chegada - Mirror&gt;&#39;
  Return
End
/* Usuários»Mensagem de Chegada: Usuário da Mensagem de Chegada (Restrict) */
If (Select Count(*) From T_MCH dep, Deleted pri
 Where dep.CD_USR = pri.CD_USR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Usuários&gt; está sendo referenciada na tabela &lt;Mensagem de Chegada&gt;&#39;
  Return
End
/* Usuários»Mensagem de Partida: Usuário da Mensagem de Partida (Restrict) */
If (Select Count(*) From T_MPA dep, Deleted pri
 Where dep.CD_USR = pri.CD_USR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Usuários&gt; está sendo referenciada na tabela &lt;Mensagem de Partida&gt;&#39;
  Return
End
/* Usuários»Mensagem de Partida - Mirror: Usuário da Mensagem de Partida (Restrict) */
If (Select Count(*) From T_MPA_MIR dep, Deleted pri
 Where dep.CD_USR = pri.CD_USR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Usuários&gt; está sendo referenciada na tabela &lt;Mensagem de Partida - Mirror&gt;&#39;
  Return
End
/* Usuários»Chegadas - Mirror: Usuário Logado (Restrict) */
If (Select Count(*) From T_CHG_MIR dep, Deleted pri
 Where dep.CD_USR = pri.CD_USR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Usuários&gt; está sendo referenciada na tabela &lt;Chegadas - Mirror&gt;&#39;
  Return
End
/* Usuários»Partidas - Mirror: Usuário Logado (Restrict) */
If (Select Count(*) From T_PAR_MIR dep, Deleted pri
 Where dep.CD_USR = pri.CD_USR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Usuários&gt; está sendo referenciada na tabela &lt;Partidas - Mirror&gt;&#39;
  Return
End
/* Usuários»Histórico de Situação de Vôo de Chegada - Mirror: Usuário Logado (Restrict) */
If (Select Count(*) From T_HSC_MIR dep, Deleted pri
 Where dep.CD_USR = pri.CD_USR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Usuários&gt; está sendo referenciada na tabela &lt;Histórico de Situação de Vôo de Chegada - Mirror&gt;&#39;
  Return
End
/* Usuários»Histórico de Situação de Vôo de Partida - Mirror: Usuário Logado (Restrict) */
If (Select Count(*) From T_HSP_MIR dep, Deleted pri
 Where dep.CD_USR = pri.CD_USR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Usuários&gt; está sendo referenciada na tabela &lt;Histórico de Situação de Vôo de Partida - Mirror&gt;&#39;
  Return
End
/* Usuários»Histórico de Situação de Vôo de Chegada: Usuário logado (Restrict) */
If (Select Count(*) From T_HSC dep,Deleted pri
 Where dep.CD_USR = pri.CD_USR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Usuários&gt; está sendo referenciada na tabela &lt;Histórico de Situação de Vôo de Chegada&gt;&#39;
  Return
End
/* Usuários»Histórico de Situação de Vôo de Partida: Usuário logado (Restrict) */
If (Select Count(*) From T_HSP dep, Deleted pri
 Where dep.CD_USR = pri.CD_USR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Usuários&gt; está sendo referenciada na tabela &lt;Histórico de Situação de Vôo de Partida&gt;&#39;
  Return
End
/* Usuários»Chegadas: Usuário logado (Restrict) */
If (Select Count(*) From T_CHG dep, Deleted pri
 Where dep.CD_USR = pri.CD_USR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Usuários&gt; está sendo referenciada na tabela &lt;Chegadas&gt;&#39;
  Return
End
/* Usuários»Partidas: Usuário logado (Restrict) */
If (Select Count(*) From T_PAR dep, Deleted pri
 Where dep.CD_USR = pri.CD_USR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Usuários&gt; está sendo referenciada na tabela &lt;Partidas&gt;&#39;
  Return
End
/* Usuários»Usuários do Grupo: Usuários do Grupo (Restrict) */
If (Select Count(*) From T_USG dep, Deleted pri
 Where dep.CD_USR = pri.CD_USR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Usuários&gt; está sendo referenciada na tabela &lt;Usuários do Grupo&gt;&#39;
  Return
End
/* Usuários»FIDS - Usuário do Grupo de Displays: Usuários do Grupo de Displays (Restrict) */
If (Select Count(*) From T_FIDS_DGU dep, Deleted pri
 Where dep.CD_USR = pri.CD_USR) &gt; 0
Begin
  RollBack Transaction
  RaisError 20003 &#39;Operação não executada: A informação que se deseja excluir da tabela &lt;Usuários&gt; está sendo referenciada na tabela &lt;FIDS - Usuário do Grupo de Displays&gt;&#39;
  Return
End
/* Usuários»Log da Programação de Anúncios: C:USR-PRALOG (Cascade) */
Delete T_PRALOG From T_PRALOG dep, Deleted pri
 Where dep.CD_USR = pri.CD_USR
/* Regra de negócio */
/* INCLUIR REGISTROS EM T_AUS */
INSERT	T_AUS (DH_AUS, CD_USR)
SELECT GETDATE(), CD_USR FROM DELETED

End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>D</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o421">
<a:ObjectID>6958AC42-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_USR_TRI</a:Name>
<a:Code>T_USR_TRI</a:Code>
<a:Text>Create Trigger T_USR_TRI On T_USR
For Insert As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
/* Pessoas»Usuários: Pessoa do Usuário */
If (Select Count(*) From T_PES, Inserted
Where T_PES.CD_PES = Inserted.CD_USR)
 &lt;&gt;(Select Count(CD_USR) From Inserted)
Begin
  RollBack Transaction
  RaisError 20001 &#39;Operação não executada: A informação &lt;Pessoas&gt; que se deseja incluir na tabela &lt;Usuários&gt; não está cadastrada&#39;
  Return
End
/* Regra de negócio */
/* INCLUIR REGISTROS EM T_AUS */
INSERT	T_AUS (DH_AUS, CD_USR)
SELECT GETDATE(), CD_USR FROM INSERTED

End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>I</a:Trigger.Type>
</o:Trigger>
<o:Trigger Id="o422">
<a:ObjectID>6958AC44-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>T_USR_TRU</a:Name>
<a:Code>T_USR_TRU</a:Code>
<a:Text>Create Trigger T_USR_TRU On T_USR
For Update As
Begin
IF @@ROWCOUNT = 0 RETURN
SET NOCOUNT ON
If Update (CD_USR)
Begin
  RollBack Transaction
  RaisError 20002 &#39;Operação não executada: A informação &lt;Código do Usuário&gt; da tabela &lt;Usuários&gt; não pode ser alterada.&#39;
  Return
End
/* Regra de negócio */
/* INCLUIR REGISTROS EM T_AUS */
INSERT	T_AUS (DH_AUS, CD_USR)
SELECT GETDATE(), CD_USR FROM INSERTED

End
go</a:Text>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Trigger.Type>U</a:Trigger.Type>
</o:Trigger>
</c:Triggers>
<c:PrimaryKey>
<o:Key Ref="o419"/>
</c:PrimaryKey>
</o:Table>
</c:Object>
</o:TableSymbol>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o423">
<a:ObjectID>6958ABCF-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_29</a:Name>
<a:Code>REFERENCE_29</a:Code>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o415"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o139"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o419"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o424">
<a:ObjectID>6958ABD1-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081537429</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537429</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o416"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o142"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o425">
<a:CenterTextOffset>(-300, -3900)</a:CenterTextOffset>
<a:Rect>((-702653,695600), (-693203,703000))</a:Rect>
<a:ListOfPoints>((-694568,695750),(-694418,702950),(-697628,703000),(-697628,700600),(-697418,695600))</a:ListOfPoints>
<a:ArrowStyle>4882</a:ArrowStyle>
<a:LineColor>255</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Ref="o173"/>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Ref="o173"/>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o426">
<a:ObjectID>6958ABD2-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_28</a:Name>
<a:Code>REFERENCE_28</a:Code>
<a:CreationDate>1081686254</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081686254</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o174"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o174"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o185"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o427">
<a:ObjectID>6958ABD4-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081686254</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081686301</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o175"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o182"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:ReferenceSymbol Id="o428">
<a:Rect>((-711765,703849), (-702091,720493))</a:Rect>
<a:ListOfPoints>((-706964,703849),(-706897,720493))</a:ListOfPoints>
<a:ArrowStyle>4882</a:ArrowStyle>
<a:LineColor>255</a:LineColor>
<a:ShadowColor>12632256</a:ShadowColor>
<a:FontList>DISPNAME 0 arial,8,N</a:FontList>
<c:SourceSymbol>
<o:TableSymbol Ref="o92"/>
</c:SourceSymbol>
<c:DestinationSymbol>
<o:TableSymbol Ref="o355"/>
</c:DestinationSymbol>
<c:Object>
<o:Reference Id="o429">
<a:ObjectID>6958ABDA-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_29</a:Name>
<a:Code>REFERENCE_29</a:Code>
<a:CreationDate>1081686419</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081686531</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o356"/>
</c:Object1>
<c:Object2>
<o:Table Ref="o93"/>
</c:Object2>
<c:ParentKey>
<o:Key Ref="o361"/>
</c:ParentKey>
<c:Joins>
<o:ReferenceJoin Id="o430">
<a:ObjectID>6958ABDC-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:CreationDate>1081686419</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081686438</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<c:Object1>
<o:Column Ref="o357"/>
</c:Object1>
<c:Object2>
<o:Column Ref="o98"/>
</c:Object2>
</o:ReferenceJoin>
</c:Joins>
</o:Reference>
</c:Object>
</o:ReferenceSymbol>
<o:TableSymbol Ref="o23"/>
<o:TableSymbol Ref="o48"/>
<o:TableSymbol Ref="o74"/>
<o:TableSymbol Ref="o106"/>
<o:TableSymbol Ref="o125"/>
<o:TableSymbol Ref="o92"/>
<o:TableSymbol Ref="o138"/>
<o:TableSymbol Ref="o154"/>
<o:TableSymbol Ref="o173"/>
<o:TableSymbol Ref="o206"/>
<o:TableSymbol Ref="o40"/>
<o:TableSymbol Ref="o194"/>
<o:TableSymbol Ref="o224"/>
<o:TableSymbol Ref="o235"/>
<o:TableSymbol Ref="o246"/>
<o:TableSymbol Ref="o257"/>
<o:TableSymbol Ref="o6"/>
<o:TableSymbol Ref="o268"/>
<o:TableSymbol Ref="o289"/>
<o:TableSymbol Ref="o329"/>
<o:TableSymbol Ref="o279"/>
<o:TableSymbol Ref="o316"/>
<o:TableSymbol Ref="o302"/>
<o:TableSymbol Ref="o342"/>
<o:TableSymbol Ref="o355"/>
<o:TableSymbol Ref="o371"/>
<o:TableSymbol Ref="o383"/>
<o:TableSymbol Ref="o394"/>
<o:TableSymbol Ref="o414"/>
</c:Symbols>
</o:PhysicalDiagram>
</c:PhysicalDiagrams>
<c:DefaultDiagram>
<o:PhysicalDiagram Ref="o4"/>
</c:DefaultDiagram>
<c:Users>
<o:User Ref="o19"/>
</c:Users>
<c:Procedures>
<o:Procedure Id="o431">
<a:ObjectID>6958AC5D-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>SP_BCL_DEL</a:Name>
<a:Code>SP_BCL_DEL</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Procedure.Text>/****** Object:  Stored Procedure dbo.SP_BCL_DEL    Script Date: 7/8/2000 12:15:32 ******/
Create Procedure SP_BCL_DEL
(@CD_BCP	INT, @CD_BCP_LIM	INT) As
/* Deletar todos os BCL  que sejam limitantes de CD_BCP de mesmo BOX e tipo e com valor menor que o deletado */
DELETE BCL
FROM	T_BCL BCL,
	T_BCP BCP,
	T_BCP BCPLIM
WHERE	BCL.CD_BCP = @CD_BCP AND
	BCL.CD_BCP_LIM = BCPLIM.CD_BCP AND
	BCP.CD_BCP = @CD_BCP_LIM AND
	BCPLIM.CD_BOX = BCP.CD_BOX AND
	BCPLIM.TP_BCP = BCP.TP_BCP AND
	BCPLIM.VL_BCP &lt; BCP.VL_BCP

/* Deletar todos os BCL  que sejam limitantes de CD_BCP_LIM de mesmo BOX e tipo e com valor menor que o deletado */
DELETE BCL
FROM	T_BCL BCL,
	T_BCP BCP,
	T_BCP BCPLIM
WHERE	BCL.CD_BCP = @CD_BCP_LIM AND
	BCL.CD_BCP_LIM = BCPLIM.CD_BCP AND
	BCP.CD_BCP = @CD_BCP AND
	BCPLIM.CD_BOX = BCP.CD_BOX AND
	BCPLIM.TP_BCP = BCP.TP_BCP AND
	BCPLIM.VL_BCP &lt; BCP.VL_BCP
go</a:Procedure.Text>
<c:Procedure.Owner>
<o:User Ref="o19"/>
</c:Procedure.Owner>
</o:Procedure>
<o:Procedure Id="o432">
<a:ObjectID>6958AC5E-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>SP_BCL_INS</a:Name>
<a:Code>SP_BCL_INS</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Procedure.Text>/****** Object:  Stored Procedure dbo.SP_BCL_INS    Script Date: 7/8/2000 12:15:32 ******/
Create Procedure SP_BCL_INS
(@CD_BCP	INT, @CD_BCP_LIM	INT) As
/* Verificar se há BCLs cujos boxes de BCP e BCP_LIM sejam iguais */
IF	(SELECT COUNT(*) FROM T_BCP BCP, T_BCP BCPLIM
	WHERE	BCP.CD_BCP = @CD_BCP AND
		BCPLIM.CD_BCP = @CD_BCP_LIM AND
		BCP.CD_BOX = BCPLIM.CD_BOX) &gt; 0
BEGIN
	RAISERROR 20999 &#39;Operação não executada: Um box não pode ser referenciado como limitante do próprio box&#39;
	RETURN
END

/* Inserir como limitante de CD_BCP todos os CD_BCP do mesmo tipo e de valor maior ao inserido */
INSERT INTO T_BCL(CD_BCP, CD_BCP_LIM)
SELECT 	@CD_BCP, BCPLIM.CD_BCP
FROM	T_BCP BCP,
	T_BCP BCPLIM
WHERE	BCP.CD_BCP = @CD_BCP_LIM AND
	BCPLIM.CD_BOX = BCP.CD_BOX AND
	BCPLIM.TP_BCP = BCP.TP_BCP AND
	BCPLIM.VL_BCP &gt; BCP.VL_BCP


/* Inserir como limitante de CD_BCP_LIM todos os CD_BCP do mesmo tipo e de valor maior ao inserido */
INSERT INTO T_BCL(CD_BCP, CD_BCP_LIM)
SELECT 	@CD_BCP_LIM, BCPLIM.CD_BCP
FROM	T_BCP BCP,
	T_BCP BCPLIM
WHERE	BCP.CD_BCP = @CD_BCP AND
	BCPLIM.CD_BOX = BCP.CD_BOX AND
	BCPLIM.TP_BCP = BCP.TP_BCP AND
	BCPLIM.VL_BCP &gt; BCP.VL_BCP
go</a:Procedure.Text>
<c:Procedure.Owner>
<o:User Ref="o19"/>
</c:Procedure.Owner>
</o:Procedure>
<o:Procedure Id="o433">
<a:ObjectID>6958AC5F-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>SP_CriaStatus</a:Name>
<a:Code>SP_CriaStatus</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Procedure.Text>/****** Object:  Stored Procedure dbo.SP_CriaStatus    Script Date: 7/8/2000 12:15:31 ******/
Create Procedure SP_CriaStatus As
/* Verificar se existe algum registro em T_STA */
IF EXISTS (SELECT * FROM T_STA)
BEGIN
	RAISERROR 30000 &#39;OPERAÇÃO NÃO EXECUTADA: HÁ REGISTROS NA TABELA DE STATUS&#39;
	RETURN
END

/* CRIAR CURSOR COM OS DADOS PARA GERAÇÃO DOS STATUS */
/* Declaração do cursor */
/* Criar um cursor com dados do primeiro e do último registro de cada HPA cuja entrada 
   esteja concluída */
DECLARE CRIAR_STATUS CURSOR FOR
	SELECT	HPA1.CD_HPA,
		HPA1.DH_HPA_ENT,
		MA_STA_ABE = DATEADD(SS, -DATEPART(SS, HPA1.DH_HPA_ENT) - 60*DATEPART(MI, HPA1.DH_HPA_ENT) - 60*60*DATEPART(HH, HPA1.DH_HPA_ENT) - 24*60*60*DATEPART(DD, HPA1.DH_HPA_ENT) + 24*60*60, HPA1.DH_HPA_ENT),
		HPA2.DH_HPA_SAI,
		MA_STA_FEC = DATEADD(SS, -DATEPART(SS, HPA2.DH_HPA_SAI) - 60*DATEPART(MI, HPA2.DH_HPA_SAI) - 60*60*DATEPART(HH, HPA2.DH_HPA_SAI) - 24*60*60*DATEPART(DD, HPA2.DH_HPA_SAI) + 24*60*60, HPA2.DH_HPA_SAI),
		TP_STA = CONVERT(INT, HPA2.FL_HPA_SAI) + 1
	FROM	T_HPA001 HPA1,
		T_HPA001 HPA2
	WHERE	HPA2.CD_HPA = HPA1.CD_HPA AND
		HPA2.NR_HPA_SEQ = (SELECT MAX(NR_HPA_SEQ) FROM T_HPA001 HPA3 WHERE HPA3.CD_HPA = HPA1.CD_HPA) AND
		HPA1.NR_HPA_SEQ = 1 AND
		HPA1.FL_HPA_ENT = 1
	ORDER BY HPA1.DH_HPA_ENT


/* Declaração de variáveis */
DECLARE	@CD_HPA 	INT,
	@DH_STA_ABE	SMALLDATETIME,
	@MA_STA_ABE	SMALLDATETIME,
	@DH_STA_FEC	SMALLDATETIME,
	@MA_STA_FEC	SMALLDATETIME,
	@TP_STA		INT,
	@CD_STA		INT,
	@NR_STA		INT

/* Abrir cursor */
OPEN CRIAR_STATUS

/* Ir para o primeiro registro */
FETCH	CRIAR_STATUS
INTO	@CD_HPA,
	@DH_STA_ABE,
	@MA_STA_ABE,
	@DH_STA_FEC,
	@MA_STA_FEC,
	@TP_STA

/* Processar todos os registros de CRIAR_STATUS */
WHILE @@FETCH_STATUS = 0
BEGIN

	/* Anular @DH_STA_FEC e @MA_STA_FEC caso @TP_STA = 1 */
	IF @TP_STA = 1 	SELECT  @DH_STA_FEC = NULL, @MA_STA_FEC = NULL

	/* Identificar o próximo número de STATUS disponível */
	SELECT @CD_STA = (SELECT ISNULL(MAX(CD_STA),0) + 1 FROM T_STA)

	/* Incluir um novo status */
	INSERT	INTO T_STA (
		CD_STA,
		DH_STA_ABE,

		MA_STA_ABE,
		NR_STA,
		DH_STA_FEC,
		MA_STA_FEC,
		TP_STA)
	SELECT	@CD_STA,
		@DH_STA_ABE,
		@MA_STA_ABE,
		(SELECT ISNULL(MAX(NR_STA), 0) + 1 FROM T_STA WHERE MA_STA_ABE = @MA_STA_ABE),
		@DH_STA_FEC,
		@MA_STA_FEC,
		@TP_STA

	/* Atualizar HPA */
	UPDATE	T_HPA001
	SET	CD_STA = @CD_STA
	WHERE	CD_HPA = @CD_HPA

	/* Ir para o próximo registro */
	FETCH	NEXT FROM CRIAR_STATUS
	INTO	@CD_HPA,
		@DH_STA_ABE,
		@MA_STA_ABE,
		@DH_STA_FEC,
		@MA_STA_FEC,
		@TP_STA

END
CLOSE CRIAR_STATUS
DEALLOCATE CRIAR_STATUS
go</a:Procedure.Text>
<c:Procedure.Owner>
<o:User Ref="o19"/>
</c:Procedure.Owner>
</o:Procedure>
<o:Procedure Id="o434">
<a:ObjectID>6958AC61-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>SP_DIA</a:Name>
<a:Code>SP_DIA</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Procedure.Text>/****** Object:  Stored Procedure dbo.SP_DIA    Script Date: 7/8/2000 12:15:32 ******/
Create Procedure SP_DIA
(@DS_FRQ_IN CHAR(30), @DS_FRQ_OUT CHAR(30) OUTPUT, @DS_DIA CHAR(03) OUTPUT) As
DECLARE @NR_POS INTEGER

SELECT @DS_DIA = &#39;&#39;
SELECT @DS_FRQ_OUT = &#39;&#39;
SELECT @NR_POS = CHARINDEX(&#39;,&#39;, @DS_FRQ_IN)
IF (@NR_POS &gt; 0)
BEGIN
	SELECT @DS_DIA = SUBSTRING(@DS_FRQ_IN, 1, @NR_POS)
	SELECT @DS_FRQ_OUT = SUBSTRING(@DS_FRQ_IN, @NR_POS + 1, 30 - (@NR_POS + 1))
END
go</a:Procedure.Text>
<c:Procedure.Owner>
<o:User Ref="o19"/>
</c:Procedure.Owner>
</o:Procedure>
<o:Procedure Id="o435">
<a:ObjectID>6958AC63-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>SP_ExcTabPrincipal</a:Name>
<a:Code>SP_ExcTabPrincipal</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Procedure.Text>/****** Object:  Stored Procedure dbo.SP_ExcTabPrincipal    Script Date: 7/8/2000 12:15:32 ******/
Create Procedure SP_ExcTabPrincipal
(@pTipo INT) As
/* Objetivo:  Excluir das tabelas principais registros associados ao vôo de Chegada selecionado : 
T_CHG, T_CHA, T_HSC, T_DEC, T_ECC001, T_ESV001, T_CHGANT, T_STA, T_HPA001 */
   
/* Chegada com partida associada */
If @pTipo = 1
BEGIN
	/* &#39;Exclui vôos Codeshare ou Duplicate Leg vinculados ao vôo de Partida associado ao vôo de Chegada selecionado */
	Delete T_HSP Where CD_PAR IN (SELECT CD_PAR FROM T_MIR_LOG_PAR_001)
	IF @@ERROR &gt; 0 RETURN
       
         	/* Exclui vôos Codeshare ou Duplicate Leg vinculados ao vôo de Partida associado ao vôo de Chegada selecionado */
	Delete T_PAR Where CD_PAR IN (SELECT CD_PAR FROM T_MIR_LOG_PAR_001)
	IF @@ERROR &gt; 0 RETURN

	/* Exclui movimentação de situação dos vôos de Partida associadoS ao vôo de Chegada selecionado */
	Delete T_HSP Where CD_PAR IN (SELECT CD_PAR FROM T_MIR_LOG_PAR)
	IF @@ERROR &gt; 0 RETURN

	/* Exclui vôos de Partida associadoS ao vôo de Chegada selecionado */
	Delete T_PAR Where CD_PAR IN (SELECT CD_PAR FROM T_MIR_LOG_PAR)
	IF @@ERROR &gt; 0 RETURN
     
	/* Exclui histórico de situação dos vôos Codeshare ou Duplicate Leg vinculados ao vôo de Chegada selecionado */
	Delete T_HSC Where CD_CHG IN (SELECT CD_CHG FROM T_MIR_LOG_CHG_001)
	IF @@ERROR &gt; 0 RETURN

	/* Exclui vôos Codeshare ou Duplicate Leg vinculados ao vôo de Chegada selecionado */
	Delete T_CHG Where CD_CHG IN (SELECT CD_CHG FROM T_MIR_LOG_CHG_001)
	IF @@ERROR &gt; 0 RETURN

	/* Exclui movimentação de situação do vôo de Chegada selecionado */
	Delete T_HSC Where CD_CHG IN (SELECT CD_CHG FROM T_MIR_LOG_CHG)
	IF @@ERROR &gt; 0 RETURN

	/* Exclui vôo de Chegada selecionado */
	Delete T_CHG Where CD_CHG IN (SELECT CD_CHG FROM T_MIR_LOG_CHG)
	IF @@ERROR &gt; 0 RETURN
END
ELSE
BEGIN
	/* &#39;Vôos de Chegada Cancelados 2*/
	IF @pTipo = 2

	BEGIN
		/* Exclui movimentação de situação do vôo de Chegada selecionado */
		Delete T_HSC Where CD_CHG IN (SELECT CD_CHG FROM T_MIR_LOG_CHG_001)
		IF @@ERROR &gt; 0 RETURN

		/* Exclui vôo de Chegada selecionado */
		Delete T_CHG Where CD_CHG IN (SELECT CD_CHG FROM T_MIR_LOG_CHG_001)
		IF @@ERROR &gt; 0 RETURN
	END
	/* Vôos de Partida Cancelados 3*/
	ELSE
	BEGIN
		/* Exclui movimentação de situação do vôo de Partida selecionado */
		Delete T_HSP Where CD_PAR IN (SELECT CD_PAR FROM T_MIR_LOG_PAR_001)
		IF @@ERROR &gt; 0 RETURN

		/* Exclui vôo de Partida selecionado */
		Delete T_PAR Where CD_PAR IN (SELECT CD_PAR FROM T_MIR_LOG_PAR_001)
		IF @@ERROR &gt; 0 RETURN
	END
END
go</a:Procedure.Text>
<c:Procedure.Owner>
<o:User Ref="o19"/>
</c:Procedure.Owner>
</o:Procedure>
<o:Procedure Id="o436">
<a:ObjectID>6958AC65-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>SP_IncTabEspRelCHG</a:Name>
<a:Code>SP_IncTabEspRelCHG</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Procedure.Text>/****** Object:  Stored Procedure dbo.SP_IncTabEspRelCHG    Script Date: 7/8/2000 12:15:32 ******/
Create Procedure SP_IncTabEspRelCHG As
Insert Into T_CHG_MIR (
	CD_CHG
	, DT_CHG
	, CD_AER
	, NR_CHG_VOO
	, NR_CHG_HOT
	, TP_CHG_GRU
	, TP_CHG
	, TP_CHG_NAT
	, TP_CHG_CTG
	, CD_COM
	, CD_CHG_VIN
	, FL_CHG_TEL
	, CD_EQP_CHG
	, CD_AEN_CHG
	, CD_BOX
	, QT_CHG_PER_MIN
	, DH_CHG_NRM
	, DH_CHG_EFE
	, DH_CHG_EST
	, CD_SIT
	, NM_CHG_COM_SIT
	, DH_CHG_SIT

	, FL_CHG_CAN
	, TP_CHG_STA
	, CD_IFT
	, CD_USR
	, FL_CHG_PAR_ORI)
Select	CHG.CD_CHG
	, DT_CHG
	, CD_AER
	, NR_CHG_VOO
	, NR_CHG_HOT
	, TP_CHG_GRU
	, TP_CHG
	, TP_CHG_NAT
	, TP_CHG_CTG
	, CD_COM
	, CD_CHG_VIN
	, FL_CHG_TEL
	, CD_EQP_CHG
	, CD_AEN_CHG
	, CD_BOX
	, QT_CHG_PER_MIN
	, DH_CHG_NRM
	, DH_CHG_EFE
	, DH_CHG_EST
	, CD_SIT
	, NM_CHG_COM_SIT
	, DH_CHG_SIT
	, FL_CHG_CAN
	, TP_CHG_STA
	, CD_IFT
	, CD_USR
	, FL_CHG_PAR_ORI
From	T_CHG CHG, T_MIR_LOG_CHG CHGTMP
Where	CHG.CD_CHG = CHGTMP.CD_CHG
IF @@ERROR &gt; 0 RETURN
   
/* Transfere dados da tabela T_CHA, associados ao vôo de Chegada selecionado, para a tabela T_CHA espelho */
Insert Into T_CHA_MIR (
	CD_CHA
	, CD_CHG
	, CD_PAR

	, CD_IFT
	, DH_CHA
	, CD_MSG
	, CD_USR)
Select	CD_CHA
	, CHA.CD_CHG
	, CD_PAR
	, CD_IFT
	, DH_CHA
	, CD_MSG
	, CD_USR
From	T_CHA CHA, T_MIR_LOG_CHG CHG
Where	CHA.CD_CHG = CHG.CD_CHG
IF @@ERROR &gt; 0 RETURN
   
/* Transfere dados da tabela T_HSC, associados ao vôo de Chegada selecionado, para a tabela T_HSC espelho */
Insert Into T_HSC_MIR (
	DH_HSC
	, CD_CHG
	, CD_IFT

	, CD_SIT
	, DH_HSC_CHG
	, CD_USR
	, NM_HSC_USR)
Select	DH_HSC
	, HSC.CD_CHG
	, CD_IFT
	, CD_SIT
	, DH_HSC_CHG

	, CD_USR
	, NM_HSC_USR
From	T_HSC HSC, T_MIR_LOG_CHG CHG
Where	HSC.CD_CHG = CHG.CD_CHG
IF @@ERROR &gt; 0 RETURN
   
/* Transfere dados da tabela T_DEC, associados ao vôo de Chegada selecionado, para a tabela T_DEC espelho */
Insert Into T_DEC_MIR (
	CD_CHG
	, QT_DEC_DES_DOM
	, QT_DEC_DES_INT
	, QT_DEC_DES_BAG_DOM
	, QT_DEC_DES_BAG_INT
	, QT_DEC_DES_CAR_DOM
	, QT_DEC_DES_CAR_INT
	, QT_DEC_DES_COR_DOM
	, QT_DEC_DES_COR_INT
	, QT_DEC_TRA_BAG_DOM
	, QT_DEC_TRA_BAG_INT
	, QT_DEC_TRA_CAR_DOM
	, QT_DEC_TRA_CAR_INT
	, QT_DEC_TRA_COR_DOM
	, QT_DEC_TRA_COR_INT)
Select	DEC.CD_CHG
	, QT_DEC_DES_DOM
	, QT_DEC_DES_INT
	, QT_DEC_DES_BAG_DOM
	, QT_DEC_DES_BAG_INT

	, QT_DEC_DES_CAR_DOM
	, QT_DEC_DES_CAR_INT
	, QT_DEC_DES_COR_DOM
	, QT_DEC_DES_COR_INT
	, QT_DEC_TRA_BAG_DOM
	, QT_DEC_TRA_BAG_INT
	, QT_DEC_TRA_CAR_DOM
	, QT_DEC_TRA_CAR_INT
	, QT_DEC_TRA_COR_DOM
	, QT_DEC_TRA_COR_INT
From	T_DEC DEC, T_MIR_LOG_CHG CHG
Where	DEC.CD_CHG = CHG.CD_CHG
IF @@ERROR &gt; 0 RETURN
  
/* Transfere dados da tabela T_ECC001, associados ao vôo de Chegada selecionado, para a tabela T_ECC001 espelho */
Insert Into T_ECC001_MIR (
	CD_CHG
	, CD_ECC
	, CD_AER)
Select	ECC.CD_CHG
	, CD_ECC
	, CD_AER
From	T_ECC001 ECC, T_MIR_LOG_CHG CHG
Where	ECC.CD_CHG = CHG.CD_CHG
IF @@ERROR &gt; 0 RETURN
   
/* Transfere dados da tabela T_ESV001, associados ao vôo de Chegada selecionado, para a tabela T_ESV001 espelho */
Insert Into T_ESV001_MIR (
	CD_CHG
	, CD_EST)
Select	ESV.CD_CHG
	, CD_EST
From	T_ESV001 ESV, T_MIR_LOG_CHG CHG
Where	ESV.CD_CHG = CHG.CD_CHG
IF @@ERROR &gt; 0 RETURN
   
/* Transfere dados da tabela T_CHGANT, associados ao vôo de Chegada selecionado, para a tabela T_CHGANT espelho */
Insert Into T_CHGANT_MIR (CD_CHG)
Select	CHGANT.CD_CHG
From	T_CHGANT CHGANT, T_MIR_LOG_CHG CHG
Where	CHGANT.CD_CHG = CHG.CD_CHG
IF @@ERROR &gt; 0 RETURN

/* Transfere dados da tabela T_STA, associados ao vôo de Chegada selecionado, para a tabela T_STA espelho */
Insert Into T_STA_MIR (
	CD_STA
	, DH_STA_ABE
	, MA_STA_ABE
	, NR_STA
	, DH_STA_FEC
	, MA_STA_FEC
	, CD_STA_ANT
	, TP_STA
	, FL_STA_AEN_ISE
	, FL_STA_COM_TAR_RED
	, QT_STA_PSI_ISE
	, QT_STA_PSI_TAR_RED)
Select	CD_STA
	, DH_STA_ABE
	, MA_STA_ABE
	, NR_STA
	, DH_STA_FEC
	, MA_STA_FEC
	, CD_STA_ANT
	, TP_STA
	, FL_STA_AEN_ISE
	, FL_STA_COM_TAR_RED
	, QT_STA_PSI_ISE
	, QT_STA_PSI_TAR_RED
From	T_STA
Where	CD_STA In (  Select CD_STA
	             From  T_HPA001 HPA, T_MIR_LOG_CHG CHG
	             Where HPA.CD_CHG = CHG.CD_CHG)
IF @@ERROR &gt; 0 RETURN
   
/* Transfere dados da tabela T_HPA001 associados ao vôo de Chegada selecionado, para a tabela T_HPA001 espelho */
Insert Into T_HPA001_MIR (
	CD_HPA

	, NR_HPA_SEQ
	, CD_AER
	, CD_EQP
	, CD_AEN
	, CD_BOX
	, CD_CHG
	, DH_HPA_ENT
	, CD_PAR
	, DH_HPA_SAI
	, FL_HPA_ENT
	, FL_HPA_SAI
	, FL_HPA_TOK
	, CD_STA)
Select	CD_HPA
	, NR_HPA_SEQ
	, CD_AER
	, CD_EQP

	, CD_AEN
	, CD_BOX
	, HPA.CD_CHG
	, DH_HPA_ENT
	, CD_PAR
	, DH_HPA_SAI
	, FL_HPA_ENT
	, FL_HPA_SAI
	, FL_HPA_TOK
	, CD_STA
From	T_HPA001 HPA, T_MIR_LOG_CHG CHG
Where	HPA.CD_CHG = CHG.CD_CHG
IF @@ERROR &gt; 0 RETURN
   
/* Transfere dados da tabela T_PRALOG, associados ao vôo de Chegada selecionado, para a tabela T_PRALOG espelho */
Insert Into T_PRALOG_MIR (
	CD_PRA
	, CD_CHG
	, CD_PAR
	, QT_LOG_POR)
Select  	CD_PRA
	, LOG.CD_CHG
	, CD_PAR
	, QT_LOG_POR
From	T_PRALOG LOG, T_MIR_LOG_CHG CHG
Where	LOG.CD_CHG = CHG.CD_CHG
IF @@ERROR &gt; 0 RETURN

/* Transfere dados da tabela T_MCH, associados ao vôo de Chegada selecionado, para a tabela T_MCH espelho */
Insert Into T_MCH_MIR (
	CD_MCH
	, CD_CHG
	, CD_USR
	, DH_MCH
	, DH_MCH_EFE
	, CD_SIT
	, NM_MCH_COM_SIT
	, CD_TPA
	, CD_IFT
	, DS_MCH_EST
	, DS_MCH_EST_001
	, NR_MCH_AEN
	, TT_MCH_OBS
	, TP_MCH
	, FL_MCH_TEL)
Select	CD_MCH
	, MCH.CD_CHG
	, CD_USR
	, DH_MCH
	, DH_MCH_EFE
	, CD_SIT
	, NM_MCH_COM_SIT
	, CD_TPA
	, CD_IFT
	, DS_MCH_EST
	, DS_MCH_EST_001
	, NR_MCH_AEN
	, TT_MCH_OBS
	, TP_MCH
	, FL_MCH_TEL
From	T_MCH MCH, T_MIR_LOG_CHG CHG
Where	MCH.CD_CHG = CHG.CD_CHG
IF @@ERROR &gt; 0 RETURN
go</a:Procedure.Text>
<c:Procedure.Owner>
<o:User Ref="o19"/>
</c:Procedure.Owner>
</o:Procedure>
<o:Procedure Id="o437">
<a:ObjectID>6958AC67-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>SP_IncTabEspRelCHG001</a:Name>
<a:Code>SP_IncTabEspRelCHG001</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Procedure.Text>/****** Object:  Stored Procedure dbo.SP_IncTabEspRelCHG001    Script Date: 7/8/2000 12:15:33 ******/
Create Procedure SP_IncTabEspRelCHG001 As
Insert Into T_CHG_MIR (
	CD_CHG
	, DT_CHG
	, CD_AER
	, NR_CHG_VOO
	, NR_CHG_HOT
	, TP_CHG_GRU
	, TP_CHG
	, TP_CHG_NAT
	, TP_CHG_CTG
	, CD_COM
	, CD_CHG_VIN
	, FL_CHG_TEL
	, CD_EQP_CHG
	, CD_AEN_CHG

	, CD_BOX
	, QT_CHG_PER_MIN
	, DH_CHG_NRM
	, DH_CHG_EFE
	, DH_CHG_EST
	, CD_SIT
	, NM_CHG_COM_SIT
	, DH_CHG_SIT

	, FL_CHG_CAN
	, TP_CHG_STA
	, CD_IFT
	, CD_USR
	, FL_CHG_PAR_ORI)
Select	CHG.CD_CHG
	, DT_CHG
	, CD_AER
	, NR_CHG_VOO
	, NR_CHG_HOT
	, TP_CHG_GRU
	, TP_CHG
	, TP_CHG_NAT
	, TP_CHG_CTG
	, CD_COM
	, CD_CHG_VIN
	, FL_CHG_TEL
	, CD_EQP_CHG
	, CD_AEN_CHG
	, CD_BOX
	, QT_CHG_PER_MIN
	, DH_CHG_NRM
	, DH_CHG_EFE
	, DH_CHG_EST
	, CD_SIT
	, NM_CHG_COM_SIT
	, DH_CHG_SIT
	, FL_CHG_CAN
	, TP_CHG_STA
	, CD_IFT
	, CD_USR
	, FL_CHG_PAR_ORI
From	T_CHG CHG, T_MIR_LOG_CHG_001 CHGTMP
Where	CHG.CD_CHG = CHGTMP.CD_CHG
IF @@ERROR &gt; 0 RETURN
   
/* Transfere dados da tabela T_CHA, associados ao vôo de Chegada selecionado, para a tabela T_CHA espelho */
Insert Into T_CHA_MIR (
	CD_CHA
	, CD_CHG
	, CD_PAR

	, CD_IFT
	, DH_CHA
	, CD_MSG
	, CD_USR)
Select	CD_CHA
	, CHA.CD_CHG
	, CD_PAR
	, CD_IFT
	, DH_CHA
	, CD_MSG
	, CD_USR
From	T_CHA CHA, T_MIR_LOG_CHG_001 CHG
Where	CHA.CD_CHG = CHG.CD_CHG
IF @@ERROR &gt; 0 RETURN
   
/* Transfere dados da tabela T_HSC, associados ao vôo de Chegada selecionado, para a tabela T_HSC espelho */
Insert Into T_HSC_MIR (
	DH_HSC
	, CD_CHG
	, CD_IFT

	, CD_SIT
	, DH_HSC_CHG
	, CD_USR
	, NM_HSC_USR)
Select	DH_HSC
	, HSC.CD_CHG
	, CD_IFT
	, CD_SIT
	, DH_HSC_CHG

	, CD_USR
	, NM_HSC_USR
From	T_HSC HSC, T_MIR_LOG_CHG_001 CHG
Where	HSC.CD_CHG = CHG.CD_CHG
IF @@ERROR &gt; 0 RETURN
   
/* Transfere dados da tabela T_DEC, associados ao vôo de Chegada selecionado, para a tabela T_DEC espelho */
Insert Into T_DEC_MIR (
	CD_CHG
	, QT_DEC_DES_DOM
	, QT_DEC_DES_INT
	, QT_DEC_DES_BAG_DOM
	, QT_DEC_DES_BAG_INT
	, QT_DEC_DES_CAR_DOM
	, QT_DEC_DES_CAR_INT
	, QT_DEC_DES_COR_DOM
	, QT_DEC_DES_COR_INT
	, QT_DEC_TRA_BAG_DOM
	, QT_DEC_TRA_BAG_INT
	, QT_DEC_TRA_CAR_DOM
	, QT_DEC_TRA_CAR_INT
	, QT_DEC_TRA_COR_DOM
	, QT_DEC_TRA_COR_INT)
Select	DEC.CD_CHG
	, QT_DEC_DES_DOM
	, QT_DEC_DES_INT
	, QT_DEC_DES_BAG_DOM
	, QT_DEC_DES_BAG_INT
	, QT_DEC_DES_CAR_DOM
	, QT_DEC_DES_CAR_INT
	, QT_DEC_DES_COR_DOM
	, QT_DEC_DES_COR_INT
	, QT_DEC_TRA_BAG_DOM
	, QT_DEC_TRA_BAG_INT
	, QT_DEC_TRA_CAR_DOM
	, QT_DEC_TRA_CAR_INT
	, QT_DEC_TRA_COR_DOM
	, QT_DEC_TRA_COR_INT
From	T_DEC DEC, T_MIR_LOG_CHG_001 CHG
Where	DEC.CD_CHG = CHG.CD_CHG
IF @@ERROR &gt; 0 RETURN
   
/* Transfere dados da tabela T_ECC001, associados ao vôo de Chegada selecionado, para a tabela T_ECC001 espelho 	*/
Insert Into T_ECC001_MIR (
	CD_CHG
	, CD_ECC
	, CD_AER)
Select	ECC.CD_CHG
	, CD_ECC
	, CD_AER
From	T_ECC001 ECC, T_MIR_LOG_CHG_001 CHG
Where	ECC.CD_CHG = CHG.CD_CHG
IF @@ERROR &gt; 0 RETURN
   
/* Transfere dados da tabela T_ESV001, associados ao vôo de Chegada selecionado, para a tabela T_ESV001 espelho */
Insert Into T_ESV001_MIR (
	CD_CHG
	, CD_EST)
Select	ESV.CD_CHG
	, CD_EST
From	T_ESV001 ESV, T_MIR_LOG_CHG_001 CHG
Where	ESV.CD_CHG = CHG.CD_CHG
IF @@ERROR &gt; 0 RETURN
   
/* Transfere dados da tabela T_CHGANT, associados ao vôo de Chegada selecionado, para a tabela T_CHGANT espelho */
Insert Into T_CHGANT_MIR (CD_CHG)
Select	CHGANT.CD_CHG
From	T_CHGANT CHGANT, T_MIR_LOG_CHG_001 CHG
Where	CHGANT.CD_CHG = CHG.CD_CHG
IF @@ERROR &gt; 0 RETURN

/* Transfere dados da tabela T_STA, associados ao vôo de Chegada selecionado, para a tabela T_STA espelho */
Insert Into T_STA_MIR (
	CD_STA
	, DH_STA_ABE
	, MA_STA_ABE
	, NR_STA
	, DH_STA_FEC
	, MA_STA_FEC
	, CD_STA_ANT
	, TP_STA
	, FL_STA_AEN_ISE
	, FL_STA_COM_TAR_RED
	, QT_STA_PSI_ISE
	, QT_STA_PSI_TAR_RED)
Select	CD_STA
	, DH_STA_ABE
	,MA_STA_ABE
	, NR_STA
	, DH_STA_FEC
	, MA_STA_FEC
	, CD_STA_ANT
	, TP_STA
	, FL_STA_AEN_ISE
	, FL_STA_COM_TAR_RED
	, QT_STA_PSI_ISE
	, QT_STA_PSI_TAR_RED
From	T_STA
Where	CD_STA In (  Select CD_STA
	             From  T_HPA001 HPA, T_MIR_LOG_CHG_001 CHG
	             Where HPA.CD_CHG = CHG.CD_CHG)
IF @@ERROR &gt; 0 RETURN
  
/* Transfere dados da tabela T_HPA001 associados ao vôo de Chegada selecionado, para a tabela T_HPA001 espelho */
Insert Into T_HPA001_MIR (
	CD_HPA

	, NR_HPA_SEQ
	, CD_AER
	, CD_EQP
	, CD_AEN
	, CD_BOX
	, CD_CHG
	, DH_HPA_ENT
	, CD_PAR
	, DH_HPA_SAI
	, FL_HPA_ENT
	, FL_HPA_SAI
	, FL_HPA_TOK
	, CD_STA)
Select	CD_HPA
	, NR_HPA_SEQ
	, CD_AER
	, CD_EQP

	, CD_AEN
	, CD_BOX
	, HPA.CD_CHG
	, DH_HPA_ENT
	, CD_PAR
	, DH_HPA_SAI
	, FL_HPA_ENT
	, FL_HPA_SAI
	, FL_HPA_TOK
	, CD_STA
From	T_HPA001 HPA, T_MIR_LOG_CHG_001 CHG
Where	HPA.CD_CHG = CHG.CD_CHG
IF @@ERROR &gt; 0 RETURN
   
/* Transfere dados da tabela T_PRALOG, associados ao vôo de Chegada selecionado, para a tabela T_PRALOG espelho */
Insert Into T_PRALOG_MIR (
	CD_PRA
	, CD_CHG
	, CD_PAR
	, QT_LOG_POR)
Select  CD_PRA
	, LOG.CD_CHG

	, CD_PAR
	, QT_LOG_POR
From	T_PRALOG LOG, T_MIR_LOG_CHG_001 CHG
Where	LOG.CD_CHG = CHG.CD_CHG
IF @@ERROR &gt; 0 RETURN

/* Transfere dados da tabela T_MCH, associados ao vôo de Chegada selecionado, para a tabela T_MCH espelho */

Insert Into T_MCH_MIR (
	CD_MCH
	, CD_CHG
	, CD_USR
	, DH_MCH
	, DH_MCH_EFE
	, CD_SIT
	, NM_MCH_COM_SIT
	, CD_TPA
	, CD_IFT
	, DS_MCH_EST
	, DS_MCH_EST_001
	, NR_MCH_AEN
	, TT_MCH_OBS
	, TP_MCH
	, FL_MCH_TEL)
Select	CD_MCH
	, MCH.CD_CHG
	, CD_USR
	, DH_MCH
	, DH_MCH_EFE
	, CD_SIT
	, NM_MCH_COM_SIT
	, CD_TPA
	, CD_IFT
	, DS_MCH_EST
	, DS_MCH_EST_001
	, NR_MCH_AEN
	, TT_MCH_OBS
	, TP_MCH
	, FL_MCH_TEL
From	T_MCH MCH, T_MIR_LOG_CHG_001 CHG
Where	MCH.CD_CHG = CHG.CD_CHG
IF @@ERROR &gt; 0 RETURN
go</a:Procedure.Text>
<c:Procedure.Owner>
<o:User Ref="o19"/>
</c:Procedure.Owner>
</o:Procedure>
<o:Procedure Id="o438">
<a:ObjectID>6958AC69-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>SP_IncTabEspRelPAR</a:Name>
<a:Code>SP_IncTabEspRelPAR</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Procedure.Text>/****** Object:  Stored Procedure dbo.SP_IncTabEspRelPAR    Script Date: 7/8/2000 12:15:33 ******/
Create Procedure SP_IncTabEspRelPAR As
/* Objetivo: Incluir registros associados ao vôo de Partida selecionado nas tabelas espelho relacionadas: 
T_PAR, T_CHA, T_CKV001, T_DEP, T_ECP001, T_HSP, T_TFB001, T_PRALOG, T_MPA */   
   
/* Transfere dados da tabela T_PAR, associados ao vôo de Partida selecionado, para a tabela T_PAR espelho */
Insert Into T_PAR_MIR (
	CD_PAR
	, DT_PAR
	, CD_AER
	, NR_PAR_VOO
	, NR_PAR_HOT
	, TP_PAR_GRU
	, TP_PAR
	, TP_PAR_NAT
	, TP_PAR_CTG
	, CD_COM
	, CD_CHG_ANT
	, CD_CHG_AEN_ANT
	, CD_PAR_VIN
	, FL_PAR_TEL
	, DH_PAR_NRM
	, DH_PAR_EFE
	, DH_PAR_EST
	, CD_SIT
	, NM_PAR_COM_SIT
	, DH_PAR_SIT
	, CD_POR
	, FL_PAR_CAN
	, TP_PAR_STA
	, CD_IFT
	, CD_USR)
 Select 	PAR.CD_PAR
	, DT_PAR
	, CD_AER
	, NR_PAR_VOO
	, NR_PAR_HOT
	, TP_PAR_GRU
	, TP_PAR
	, TP_PAR_NAT
	, TP_PAR_CTG
	, CD_COM
	, CD_CHG_ANT
	, CD_CHG_AEN_ANT
	, CD_PAR_VIN
	, FL_PAR_TEL
	, DH_PAR_NRM
	, DH_PAR_EFE
	, DH_PAR_EST
	, CD_SIT
	, NM_PAR_COM_SIT
	, DH_PAR_SIT
	, CD_POR
	, FL_PAR_CAN
	, TP_PAR_STA
	, CD_IFT
	, CD_USR
From	T_PAR PAR, T_MIR_LOG_PAR PARLOG
Where	PAR.CD_PAR = PARLOG.CD_PAR
IF @@ERROR &gt; 0 RETURN
   
/* Transfere dados da tabela T_CHA, associados ao vôo de Partida selecionado, para a tabela T_CHA espelho */
Insert Into T_CHA_MIR (
	CD_CHA
	, CD_CHG
	, CD_PAR
	, CD_IFT
	, DH_CHA
	, CD_MSG
	, CD_USR)
Select	CD_CHA
	, CD_CHG
	, CHA.CD_PAR
	, CD_IFT
	, DH_CHA
	, CD_MSG
	, CD_USR
From	T_CHA CHA, T_MIR_LOG_PAR PAR
Where	CHA.CD_PAR = PAR.CD_PAR
IF @@ERROR &gt; 0 RETURN

/* Transfere dados da tabela T_CKV001, associados ao vôo de Partida selecionado, para a tabela T_CKV001 espelho */
Insert Into T_CKV001_MIR (
	CD_PAR
	, CD_CHK
	, CD_CLS)
Select	CKV.CD_PAR
	, CD_CHK
	, CD_CLS
From	T_CKV001 CKV, T_MIR_LOG_PAR PAR
Where	CKV.CD_PAR = PAR.CD_PAR
IF @@ERROR &gt; 0 RETURN

/* Transfere dados da tabela T_DEP, associados ao vôo de Partida selecionado, para a tabela T_DEP espelho */
Insert Into T_DEP_MIR (
	CD_PAR

	, CD_AER
	, QT_DEP_TFB_DOM
	, QT_DEP_TFB_INT
	, QT_DEP_TFC_DOM
	, QT_DEP_TFC_INT
	, QT_DEP_ISE_COL
	, QT_DEP_ISE_TRA
	, QT_DEP_ISE_CON_DOM
	, QT_DEP_ISE_CON_INT
	, QT_DEP_ISE_OUT
	, QT_DEP_EMB_BAG_DOM
	, QT_DEP_EMB_BAG_INT

	, QT_DEP_EMB_CAR_DOM
	, QT_DEP_EMB_CAR_INT

	, QT_DEP_EMB_COR_DOM
	, QT_DEP_EMB_COR_INT)
Select	DEP.CD_PAR
	, CD_AER
	, QT_DEP_TFB_DOM
	, QT_DEP_TFB_INT
	, QT_DEP_TFC_DOM
	, QT_DEP_TFC_INT
	, QT_DEP_ISE_COL
	, QT_DEP_ISE_TRA
	, QT_DEP_ISE_CON_DOM
	, QT_DEP_ISE_CON_INT
	, QT_DEP_ISE_OUT
	, QT_DEP_EMB_BAG_DOM
	, QT_DEP_EMB_BAG_INT
	, QT_DEP_EMB_CAR_DOM
	, QT_DEP_EMB_CAR_INT
	, QT_DEP_EMB_COR_DOM
	, QT_DEP_EMB_COR_INT
From	T_DEP DEP, T_MIR_LOG_PAR PAR
Where	DEP.CD_PAR = PAR.CD_PAR
IF @@ERROR &gt; 0 RETURN

/* Transfere dados da tabela T_ECP001, associados ao vôo de Partida selecionado, para a tabela T_ECP001 espelho */
Insert Into T_ECP001_MIR (
	CD_PAR
	, CD_ECP
	, CD_AER)
Select	ECP.CD_PAR
	, CD_ECP
	, CD_AER
From	T_ECP001 ECP, T_MIR_LOG_PAR PAR
Where	ECP.CD_PAR = PAR.CD_PAR
IF @@ERROR &gt; 0 RETURN

/* Transfere dados da tabela T_TFB001, associados ao vôo de Partida selecionado, para a tabela T_TFB001 espelho */
Insert Into T_TFB001_MIR (
	CD_TFB
	, CD_COM
	, CD_HTE
	, QT_TFB
	, CD_PAR)
Select	 CD_TFB
	, CD_COM
	, CD_HTE
	, QT_TFB
	, TFB.CD_PAR
From	T_TFB001 TFB, T_MIR_LOG_PAR PAR
Where	TFB.CD_PAR = PAR.CD_PAR
IF @@ERROR &gt; 0 RETURN

/* Transfere dados da tabela T_HSP, associados ao vôo de Partida selecionado, para a tabela T_HSP espelho */
Insert Into T_HSP_MIR (
	DH_HSP
	, CD_PAR
	, CD_IFT
	, CD_SIT
	, DH_HSP_PAR
	, CD_USR
	, NM_HSP_USR)
Select	DH_HSP
	, HSP.CD_PAR
	, CD_IFT
	, CD_SIT
	, DH_HSP_PAR
	, CD_USR
	, NM_HSP_USR
From	T_HSP HSP, T_MIR_LOG_PAR PAR
Where	HSP.CD_PAR = PAR.CD_PAR

IF @@ERROR &gt; 0 RETURN

/* Transfere dados da tabela T_PRALOG, associados ao vôo de Partida selecionado, para a tabela T_PRALOG espelho */
Insert Into T_PRALOG_MIR (CD_PRA
	, CD_CHG
	, CD_PAR
	, QT_LOG_POR)
Select	CD_PRA
	, CD_CHG
	, LOG.CD_PAR
	, QT_LOG_POR
From	T_PRALOG LOG, T_MIR_LOG_PAR PAR
Where	LOG.CD_PAR = PAR.CD_PAR
IF @@ERROR &gt; 0 RETURN

/* Transfere dados da tabela T_MPA, associados ao vôo de Partida selecionado, para a tabela T_MPA espelho */
Insert Into T_MPA_MIR (
	CD_MPA
	, CD_PAR
	, CD_USR
	, DH_MPA
	, DH_MPA_EFE
	, CD_SIT
	, NM_MPA_COM_SIT
	, CD_TPA
	, CD_IFT
	, CD_POR
	, DS_MPA_CHK
	, DS_MPA_CHK_001
	, TT_MPA_OBS
	, TP_MPA
	, FL_MPA_TEL)
Select	CD_MPA
	, MPA.CD_PAR
	, CD_USR
	, DH_MPA
	, DH_MPA_EFE
	, CD_SIT
	, NM_MPA_COM_SIT
	, CD_TPA

	, CD_IFT
	, CD_POR
	, DS_MPA_CHK
	, DS_MPA_CHK_001
	, TT_MPA_OBS
	, TP_MPA
	, FL_MPA_TEL
From	T_MPA MPA, T_MIR_LOG_PAR PAR
Where	MPA.CD_PAR = PAR.CD_PAR
IF @@ERROR &gt; 0 RETURN
go</a:Procedure.Text>
<c:Procedure.Owner>
<o:User Ref="o19"/>
</c:Procedure.Owner>
</o:Procedure>
<o:Procedure Id="o439">
<a:ObjectID>6958AC6B-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>SP_IncTabEspRelPAR001</a:Name>
<a:Code>SP_IncTabEspRelPAR001</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Procedure.Text>/****** Object:  Stored Procedure dbo.SP_IncTabEspRelPAR001    Script Date: 7/8/2000 12:15:33 ******/
Create Procedure SP_IncTabEspRelPAR001 As
/* Objetivo: Incluir registros associados ao vôo de Partida selecionado nas tabelas espelho relacionadas:
T_PAR. T_CHA, T_CKV001, T_DEP, T_ECP001, T_HSP, T_TFB001, T_PRALOG, T_MPA */   
   
/* Transfere dados da tabela T_PAR, associados ao vôo de Partida selecionado, para a tabela T_PAR espelho */
Insert Into T_PAR_MIR (
	CD_PAR
	, DT_PAR
	, CD_AER
	, NR_PAR_VOO
	, NR_PAR_HOT
	, TP_PAR_GRU
	, TP_PAR
	, TP_PAR_NAT
	, TP_PAR_CTG
	, CD_COM
	, CD_CHG_ANT
	, CD_CHG_AEN_ANT
	, CD_PAR_VIN
	, FL_PAR_TEL
	, DH_PAR_NRM
	, DH_PAR_EFE
	, DH_PAR_EST
	, CD_SIT
	, NM_PAR_COM_SIT
	, DH_PAR_SIT
	, CD_POR
	, FL_PAR_CAN
	, TP_PAR_STA
	, CD_IFT
	, CD_USR)
 Select 	PAR.CD_PAR
	, DT_PAR
	, CD_AER
	, NR_PAR_VOO
	, NR_PAR_HOT
	, TP_PAR_GRU
	, TP_PAR
	, TP_PAR_NAT
	, TP_PAR_CTG
	, CD_COM
	, CD_CHG_ANT
	, CD_CHG_AEN_ANT
	, CD_PAR_VIN
	, FL_PAR_TEL
	, DH_PAR_NRM
	, DH_PAR_EFE
	, DH_PAR_EST
	, CD_SIT
	, NM_PAR_COM_SIT
	, DH_PAR_SIT
	, CD_POR
	, FL_PAR_CAN
	, TP_PAR_STA
	, CD_IFT
	, CD_USR
From	T_PAR PAR, T_MIR_LOG_PAR_001 PARLOG
Where	PAR.CD_PAR = PARLOG.CD_PAR
IF @@ERROR &gt; 0 RETURN
   
/* Transfere dados da tabela T_CHA, associados ao vôo de Partida selecionado, para a tabela T_CHA espelho */
Insert Into T_CHA_MIR (
	CD_CHA
	, CD_CHG
	, CD_PAR
	, CD_IFT
	, DH_CHA
	, CD_MSG
	, CD_USR)
Select	CD_CHA
	, CD_CHG
	, CHA.CD_PAR
	, CD_IFT
	, DH_CHA
	, CD_MSG
	, CD_USR
From	T_CHA CHA, T_MIR_LOG_PAR_001 PAR

Where	CHA.CD_PAR = PAR.CD_PAR
IF @@ERROR &gt; 0 RETURN

/* Transfere dados da tabela T_CKV001, associados ao vôo de Partida selecionado, para a tabela T_CKV001 espelho */
Insert Into T_CKV001_MIR (
	CD_PAR
	, CD_CHK
	, CD_CLS)
Select	CKV.CD_PAR
	, CD_CHK
	, CD_CLS
From	T_CKV001 CKV, T_MIR_LOG_PAR_001 PAR
Where	CKV.CD_PAR = PAR.CD_PAR
IF @@ERROR &gt; 0 RETURN

/* Transfere dados da tabela T_DEP, associados ao vôo de Partida selecionado, para a tabela T_DEP espelho */
Insert Into T_DEP_MIR (
	CD_PAR

	, CD_AER
	, QT_DEP_TFB_DOM
	, QT_DEP_TFB_INT
	, QT_DEP_TFC_DOM
	, QT_DEP_TFC_INT
	, QT_DEP_ISE_COL
	, QT_DEP_ISE_TRA
	, QT_DEP_ISE_CON_DOM
	, QT_DEP_ISE_CON_INT
	, QT_DEP_ISE_OUT
	, QT_DEP_EMB_BAG_DOM
	, QT_DEP_EMB_BAG_INT
	, QT_DEP_EMB_CAR_DOM
	, QT_DEP_EMB_CAR_INT
	, QT_DEP_EMB_COR_DOM
	, QT_DEP_EMB_COR_INT)
Select	DEP.CD_PAR
	, CD_AER
	, QT_DEP_TFB_DOM
	, QT_DEP_TFB_INT
	, QT_DEP_TFC_DOM
	, QT_DEP_TFC_INT
	, QT_DEP_ISE_COL
	, QT_DEP_ISE_TRA
	, QT_DEP_ISE_CON_DOM
	, QT_DEP_ISE_CON_INT
	, QT_DEP_ISE_OUT
	, QT_DEP_EMB_BAG_DOM
	, QT_DEP_EMB_BAG_INT
	, QT_DEP_EMB_CAR_DOM
	, QT_DEP_EMB_CAR_INT
	, QT_DEP_EMB_COR_DOM
	, QT_DEP_EMB_COR_INT
From	T_DEP DEP, T_MIR_LOG_PAR_001 PAR
Where	DEP.CD_PAR = PAR.CD_PAR
IF @@ERROR &gt; 0 RETURN

/* Transfere dados da tabela T_ECP001, associados ao vôo de Partida selecionado, para a tabela T_ECP001 espelho */
Insert Into T_ECP001_MIR (
	CD_PAR
	, CD_ECP
	, CD_AER)
Select	ECP.CD_PAR
	, CD_ECP
	, CD_AER
From	T_ECP001 ECP, T_MIR_LOG_PAR_001 PAR
Where	ECP.CD_PAR = PAR.CD_PAR
IF @@ERROR &gt; 0 RETURN

/* Transfere dados da tabela T_TFB001, associados ao vôo de Partida selecionado, para a tabela T_TFB001 espelho */
Insert Into T_TFB001_MIR (
	CD_TFB
	, CD_COM
	, CD_HTE
	, QT_TFB
	, CD_PAR)
Select	 CD_TFB
	, CD_COM
	, CD_HTE
	, QT_TFB
	, TFB.CD_PAR
From	T_TFB001 TFB, T_MIR_LOG_PAR_001 PAR
Where	TFB.CD_PAR = PAR.CD_PAR
IF @@ERROR &gt; 0 RETURN

/* Transfere dados da tabela T_HSP, associados ao vôo de Partida selecionado, para a tabela T_HSP espelho */
Insert Into T_HSP_MIR (
	DH_HSP
	, CD_PAR
	, CD_IFT
	, CD_SIT
	, DH_HSP_PAR
	, CD_USR
	, NM_HSP_USR)
Select	DH_HSP
	, HSP.CD_PAR
	, CD_IFT
	, CD_SIT
	, DH_HSP_PAR
	, CD_USR
	, NM_HSP_USR
From	T_HSP HSP, T_MIR_LOG_PAR_001 PAR
Where	HSP.CD_PAR = PAR.CD_PAR
IF @@ERROR &gt; 0 RETURN

/* Transfere dados da tabela T_PRALOG, associados ao vôo de Partida selecionado, para a tabela T_PRALOG espelho */
Insert Into T_PRALOG_MIR (
	CD_PRA
	, CD_CHG
	, CD_PAR
	, QT_LOG_POR)
Select	CD_PRA
	, CD_CHG
	, LOG.CD_PAR
	, QT_LOG_POR
From	T_PRALOG LOG, T_MIR_LOG_PAR_001 PAR
Where	LOG.CD_PAR = PAR.CD_PAR
IF @@ERROR &gt; 0 RETURN

/* Transfere dados da tabela T_MPA, associados ao vôo de Partida selecionado, para a tabela T_MPA espelho */
Insert Into T_MPA_MIR (
	CD_MPA
	, CD_PAR
	, CD_USR
	, DH_MPA
	, DH_MPA_EFE
	, CD_SIT
	, NM_MPA_COM_SIT
	, CD_TPA
	, CD_IFT
	, CD_POR
	, DS_MPA_CHK
	, DS_MPA_CHK_001
	, TT_MPA_OBS
	, TP_MPA
	, FL_MPA_TEL)
Select	CD_MPA
	, MPA.CD_PAR
	, CD_USR
	, DH_MPA
	, DH_MPA_EFE
	, CD_SIT
	, NM_MPA_COM_SIT
	, CD_TPA

	, CD_IFT
	, CD_POR
	, DS_MPA_CHK
	, DS_MPA_CHK_001
	, TT_MPA_OBS
	, TP_MPA
	, FL_MPA_TEL
From	T_MPA MPA, T_MIR_LOG_PAR_001 PAR
Where	MPA.CD_PAR = PAR.CD_PAR
IF @@ERROR &gt; 0 RETURN
go</a:Procedure.Text>
<c:Procedure.Owner>
<o:User Ref="o19"/>
</c:Procedure.Owner>
</o:Procedure>
<o:Procedure Id="o440">
<a:ObjectID>6958AC6D-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>SP_MONITOR</a:Name>
<a:Code>SP_MONITOR</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Procedure.Text>CREATE PROCEDURE SP_MONITOR AS
/*	CHEGADAS
	Atualizar os vôos de chegada cuja situaçao atual tem uma situaçao sucessora e
	o tempo para atualizaçao é o TEMPO ANTES e que a diferença entre a hora
	prevista e a hora atual é menor ou igual que o TEMPO ANTES
*/

UPDATE	T_CHG
SET	CD_SIT = CD_SIT_SUC,
	CD_USR = NULL
FROM  	T_CHG CHG, T_SSU SSU   
WHERE 	SSU.CD_SIT = CHG.CD_SIT AND
	SSU.TP_SSU = 1 AND
	CHG.TP_CHG_STA = 1 AND
	DATEDIFF(MI, GETDATE(), DH_CHG_EFE) &lt;= SSU.QT_SSU AND
	CHG.TP_CHG_CTG NOT IN (3, 4) AND
	NOT EXISTS (	SELECT 	CD_CHG = CHG001.CD_CHG 
			FROM 	T_CHG CHG001,
				T_SSU SSU001,
				T_SIT SIT001
			WHERE 	CHG001.CD_CHG = CHG.CD_CHG AND
				SSU001.CD_SIT = CHG001.CD_SIT AND
				SIT001.CD_SIT = SSU001.CD_SIT_SUC AND
				SIT001.FL_SIT_CON_VOO = 1 AND
				CHG001.CD_AEN_CHG IS NULL)


/*	Atualizar os vôos de chegada cuja situaçao atual tem uma situaçao sucessora e
	o tempo para atualizaçao é o TEMPO APOS e que a diferença entre a hora da
	atualizaçao da situaçao e a hora atual é maior ou igual que o TEMPO APOS
*/
UPDATE	T_CHG
SET	CD_SIT = CD_SIT_SUC,
	CD_USR = NULL
FROM  	T_CHG CHG, T_SSU SSU   
WHERE 	SSU.CD_SIT = CHG.CD_SIT AND
	SSU.TP_SSU = 2 AND
	CHG.TP_CHG_STA = 1 AND
	DATEDIFF(MI, DH_CHG_SIT, GETDATE()) &gt;= SSU.QT_SSU AND
	CHG.TP_CHG_CTG NOT IN (3, 4) AND
	NOT EXISTS (	SELECT 	CD_CHG = CHG001.CD_CHG 
			FROM 	T_CHG CHG001,
				T_SSU SSU001,
				T_SIT SIT001
			WHERE 	CHG001.CD_CHG = CHG.CD_CHG AND
				SSU001.CD_SIT = CHG001.CD_SIT AND
				SIT001.CD_SIT = SSU001.CD_SIT_SUC AND
				SIT001.FL_SIT_CON_VOO = 1 AND
				CHG001.CD_AEN_CHG IS NULL)

/*	Atualizar os vôos de chegada cuja situaçao atual tem uma situaçao sucessora e
	o tempo para atualizaçao é o TEMPO MINIMO DE PERMANENCIA e que a diferença entre
	a hora prevista e a hora atual é menor ou igual que o TEMPO MINIMO DE PERMANENCIA
*/

UPDATE	T_CHG
SET	CD_SIT = CD_SIT_SUC,
	CD_USR = NULL
FROM  	T_CHG CHG, T_SSU SSU   
WHERE 	SSU.CD_SIT = CHG.CD_SIT AND
	SSU.TP_SSU = 3 AND
	CHG.TP_CHG_STA = 1 AND
	DATEDIFF(MI, GETDATE(), DH_CHG_EFE) &lt;= CHG.QT_CHG_PER_MIN AND
	CHG.TP_CHG_CTG NOT IN (3, 4) AND
	NOT EXISTS (	SELECT 	CD_CHG = CHG001.CD_CHG 
			FROM 	T_CHG CHG001,
				T_SSU SSU001,
				T_SIT SIT001
			WHERE 	CHG001.CD_CHG = CHG.CD_CHG AND
				SSU001.CD_SIT = CHG001.CD_SIT AND
				SIT001.CD_SIT = SSU001.CD_SIT_SUC AND
				SIT001.FL_SIT_CON_VOO = 1 AND
				CHG001.CD_AEN_CHG IS NULL)

/*	Atualizar os vôos de partida cuja situaçao atual tem uma situaçao sucessora e
	o tempo para atualizaçao é o TEMPO ANTES e que a diferença entre a hora
	prevista e a hora atual é menor ou igual que o TEMPO ANTES e que os vôos antecessores
	estao nas situaçoes condicionantes, caso existam
*/

UPDATE	T_PAR
SET	CD_SIT = CD_SIT_SUC,
	CD_USR = NULL
FROM  	T_PAR PAR, T_CHG CHGAENANT, T_SSU SSU, T_SIT SIT   
WHERE 	SSU.CD_SIT = PAR.CD_SIT AND
	SIT.CD_SIT = PAR.CD_SIT AND
	CHGAENANT.CD_CHG = PAR.CD_CHG_AEN_ANT AND
	PAR.TP_PAR_STA = 1 AND
	SSU.TP_SSU = 1 AND /* TEMPO ANTES */
	DATEDIFF(MI, GETDATE(), PAR.DH_PAR_EFE) &lt;= SSU.QT_SSU AND
   	(	/* não existe situação condicionante ou a situação do vôo de chegada é uma das situações condicionantes */
		NOT EXISTS (SELECT *  FROM T_SCA SCA WHERE SCA.CD_SIT = SSU.CD_SIT_SUC)  OR
		CHGAENANT.CD_SIT IN (SELECT CD_SIT_ANT FROM T_SCA SCA WHERE SCA.CD_SIT = SSU.CD_SIT_SUC)
	)

/*	Atualizar os vôos de partida cuja situaçao atual tem uma situaçao sucessora e
	o tempo para atualizaçao é o TEMPO APOS e que a diferença entre a hora
	prevista e a hora atual é maior ou igual que o TEMPO APOS e que os vôos antecessores
	estao nas situaçoes condicionantes, caso existam
*/

UPDATE 	T_PAR
SET	CD_SIT = CD_SIT_SUC,
	CD_USR = NULL
FROM  	T_PAR PAR, T_CHG CHGAENANT, T_SSU SSU, T_SIT SIT   
WHERE 	SSU.CD_SIT = PAR.CD_SIT AND
	SIT.CD_SIT = PAR.CD_SIT AND
	CHGAENANT.CD_CHG = PAR.CD_CHG_AEN_ANT AND
	PAR.TP_PAR_STA = 1 AND
	SSU.TP_SSU = 2 AND /* TEMPO APÓS */
	DATEDIFF(MI, PAR.DH_PAR_SIT, GETDATE()) &gt;= SSU.QT_SSU AND
   	(	/* não existe situação condicionante ou a situação do vôo de chegada é uma das situações condicionantes */
		NOT EXISTS (SELECT *  FROM T_SCA SCA WHERE SCA.CD_SIT = SSU.CD_SIT_SUC)  OR
		CHGAENANT.CD_SIT IN (SELECT CD_SIT_ANT FROM T_SCA SCA WHERE SCA.CD_SIT = SSU.CD_SIT_SUC)
	)

/*	Atualizar os vôos de partida cuja situaçao atual tem uma situaçao sucessora e
	o tempo para atualizaçao é o TEMPO MINIMO DE PERMANENCIA e que a diferença entre a hora
	prevista e a hora atual é menor ou igual que o TEMPO MINIMO DE PERMANENCIA e que os vôos antecessores
	estao nas situaçoes condicionantes, caso existam
*/

UPDATE 	T_PAR
SET	CD_SIT = CD_SIT_SUC,
	CD_USR = NULL
FROM  	T_PAR PAR, T_CHG CHGAENANT, T_SSU SSU, T_SIT SIT   
WHERE 	SSU.CD_SIT = PAR.CD_SIT AND
	SIT.CD_SIT = PAR.CD_SIT AND
	CHGAENANT.CD_CHG = PAR.CD_CHG_AEN_ANT AND
	PAR.TP_PAR_STA = 1 AND
	SSU.TP_SSU = 3 AND /* TEMPO MÍNIMO DE PERMANÊNCIA */
	DATEDIFF(MI, GETDATE(), PAR.DH_PAR_EFE) &lt;= CHGAENANT.QT_CHG_PER_MIN AND
   	(	/* não existe situação condicionante ou a situação do vôo de chegada é uma das situações condicionantes */
		NOT EXISTS (SELECT *  FROM T_SCA SCA WHERE SCA.CD_SIT = SSU.CD_SIT_SUC)  OR
		CHGAENANT.CD_SIT IN (SELECT CD_SIT_ANT FROM T_SCA SCA WHERE SCA.CD_SIT = SSU.CD_SIT_SUC)
	)
go</a:Procedure.Text>
<c:Procedure.Owner>
<o:User Ref="o19"/>
</c:Procedure.Owner>
</o:Procedure>
<o:Procedure Id="o441">
<a:ObjectID>6958AC6E-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>SP_SOMA_DIA</a:Name>
<a:Code>SP_SOMA_DIA</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Procedure.Text>/****** Object:  Stored Procedure dbo.SP_SOMA_DIA    Script Date: 7/8/2000 12:15:32 ******/
Create Procedure SP_SOMA_DIA
(@DS_DIA VARCHAR(04), @NR_DIA INTEGER, @DS_SOMA_DIA VARCHAR(04) OUTPUT) As
DECLARE @DIA INTEGER
DECLARE @NR_POS INTEGER

SELECT @NR_POS = CHARINDEX(&#39;,&#39;, @DS_DIA)
SELECT @DIA = @NR_DIA + CONVERT(INTEGER, SUBSTRING(@DS_DIA, 1, @NR_POS - 1))
SELECT @DS_SOMA_DIA = CONVERT(VARCHAR, @DIA) + &#39;,&#39;
go</a:Procedure.Text>
<c:Procedure.Owner>
<o:User Ref="o19"/>
</c:Procedure.Owner>
</o:Procedure>
<o:Procedure Id="o442">
<a:ObjectID>6958AC70-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>SP_TransfereEspelho</a:Name>
<a:Code>SP_TransfereEspelho</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Procedure.Text>/****** Object:  Stored Procedure dbo.SP_TransfereEspelho    Script Date: 7/8/2000 12:15:34 ******/
Create Procedure SP_TransfereEspelho
(@pQtDt INT) As
IF @pQtDt &lt; (SELECT QT_PSI_MIR_TEM FROM T_PSI)
BEGIN
	RollBack Transaction
	RaisError 20003 &#39;Operação não executada: Data Limite para Espelhamento é menor que a data requerida&#39;
	Return
END

/* Monta recordset com vôos de Chegada cancelados que ocorreram até a data especificada */
DELETE T_MIR_LOG_CHG_001

Insert into T_MIR_LOG_CHG_001 (CD_CHG)
Select	CD_CHG 
From	T_CHG CHG
Where	TP_CHG_STA = 2
And 	FL_CHG_CAN = 1
And 	DATEDIFF(DD, DH_CHG_EFE, GETDATE()) &gt; @pQtDt

IF (SELECT COUNT(*) FROM T_MIR_LOG_CHG_001) &gt; 0
BEGIN

	Begin Transaction

	/* Inclui registros associados ao vôo de Chegada selecionado nas tabelas espelhos relacionadas */

	EXEC SP_IncTabEspRelCHG001

	IF @@ERROR &gt; 0

	BEGIN
		RollBack Transaction
		RaisError 20003 &#39;Operação não executada: SP_TransfereEspelho&#39;
		Return
	END

      
	/* Excluir registros das Tabelas Principais */
	EXEC SP_ExcTabPrincipal 2

	IF @@ERROR &gt; 0
	BEGIN

		RollBack Transaction
		RaisError 20003 &#39;Operação não executada: SP_TransfereEspelho&#39;
		Return
	END

	Commit Transaction
END


/* Monta recordset com vôos de Partida cancelados que ocorreram até a data especificada */
DELETE T_MIR_LOG_PAR_001

Insert into T_MIR_LOG_PAR_001 (CD_PAR)
Select	CD_PAR 
From	T_PAR PAR
Where	TP_PAR_STA = 2
And 	FL_PAR_CAN =1
And	DATEDIFF(DD, DH_PAR_EFE, GETDATE()) &gt; @pQtDt

IF (SELECT COUNT(*) FROM T_MIR_LOG_PAR_001) &gt; 0 
BEGIN
	Begin Transaction


	/* Inclui registros associados ao vôo de Chegada selecionado nas tabelas espelhos relacionadas */
	EXEC SP_IncTabEspRelPAR001
	IF @@ERROR &gt; 0
	BEGIN

		RollBack Transaction
		RaisError 20003 &#39;Operação não executada: SP_TransfereEspelho&#39;
		Return
	END


	/* Excluir registros das Tabelas Principais */
	EXEC SP_ExcTabPrincipal 3
	IF @@ERROR &gt; 0
	BEGIN
		RollBack Transaction

		RaisError 20003 &#39;Operação não executada: SP_TransfereEspelho&#39;
		Return
	END


	Commit Transaction
END

/* Monta recordset com vôos de Chegada associados aos vôos de Partida cujas decolagens aconteceram até a data especificada */

DELETE T_MIR_LOG_CHG

Insert into T_MIR_LOG_CHG (CD_CHG)
Select	CD_CHG 
From	T_CHG CHG
Where	CD_CHG In (	Select 	CD_CHG_AEN_ANT
			From  	T_PAR PAR
			Where 	PAR.TP_PAR_STA = 2

			And   	PAR.CD_AER = (SELECT CD_AER FROM T_PSI)
			And   	PAR.TP_PAR_CTG NOT IN (3,4)

			And   	DATEDIFF(DD, DH_PAR_EFE, GETDATE()) &gt; @pQtDt
			And   	PAR.FL_PAR_CAN = 0)

IF (SELECT COUNT(*) FROM T_MIR_LOG_CHG) &gt; 0
BEGIN


	Begin Transaction

	/* Inclui registros associados ao vôo de Chegada selecionado nas tabelas espelhos relacionadas */
	EXEC SP_IncTabEspRelCHG 

	IF @@ERROR &gt; 0
	BEGIN

		RollBack Transaction
		RaisError 20003 &#39;Operação não executada: SP_TransfereEspelho&#39;
		Return
	END

	/* Seleciona vôos de Chegada Codeshare ou Duplicate Leg vinculados ao vôo de Chegada selecionado */
	DELETE T_MIR_LOG_CHG_001

	Insert into T_MIR_LOG_CHG_001 (CD_CHG)
	Select	CHGVIN.CD_CHG 

	From	T_CHG CHGVIN, T_MIR_LOG_CHG CHG
	Where	CHGVIN.CD_CHG_VIN = CHG.CD_CHG
	Order By CHGVIN.CD_CHG

	/* Percorre vetor com vôos de Chegada vinculados a serem processados */
	EXEC SP_IncTabEspRelCHG001
	IF @@ERROR &gt; 0
	BEGIN
		RollBack Transaction
		RaisError 20003 &#39;Operação não executada: SP_TransfereEspelho&#39;
		Return
	END

	/* Seleciona vôos de Partida associados ao vôo de Chegada selecionado */

	DELETE T_MIR_LOG_PAR

	Insert into T_MIR_LOG_PAR (CD_PAR)
        	Select	PAR.CD_PAR
	From	T_PAR PAR, T_MIR_LOG_CHG CHG
	Where	PAR.CD_CHG_AEN_ANT = CHG.CD_CHG
	Order By PAR.CD_PAR


	/* Inclui registros associados ao vôo de Partida selecionado nas tabelas espelhos relacionadas */
	EXEC SP_IncTabEspRelPAR 
	IF @@ERROR &gt; 0

	BEGIN
		RollBack Transaction
		RaisError 20003 &#39;Operação não executada: SP_TransfereEspelho&#39;
		Return
	END

	/* Seleciona vôos de Partida Codeshare ou Duplicate Leg vinculados ao vôo de Partida selecionado */
	DELETE T_MIR_LOG_PAR_001
		Insert into T_MIR_LOG_PAR_001 (CD_PAR)
	Select	PARVIN.CD_PAR 
	From	T_PAR PARVIN, T_MIR_LOG_PAR PAR
	Where	PARVIN.CD_PAR_VIN = PAR.CD_PAR
	Order By PARVIN.CD_PAR

	/* Percorre vetor com vôos de Chegada vinculados a serem processados */
	EXEC SP_IncTabEspRelPAR001
	IF @@ERROR &gt; 0
	BEGIN
		RollBack Transaction
		RaisError 20003 &#39;Operação não executada: SP_TransfereEspelho&#39;
		Return
	END


       	/* Excluir Tabela Principal */
	EXEC SP_ExcTabPrincipal 1
	IF @@ERROR &gt; 0
	BEGIN
		RollBack Transaction
		RaisError 20003 &#39;Operação não executada: SP_TransfereEspelho&#39;
		Return
	END

	Commit Transaction
END
go</a:Procedure.Text>
<c:Procedure.Owner>
<o:User Ref="o19"/>
</c:Procedure.Owner>
</o:Procedure>
<o:Procedure Id="o443">
<a:ObjectID>6958AC73-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>SP_VerificaCodeShare</a:Name>
<a:Code>SP_VerificaCodeShare</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Procedure.Text>/****** Object:  Stored Procedure dbo.SP_VerificaCodeShare    Script Date: 7/8/2000 12:15:34 ******/
CREATE Procedure SP_VerificaCodeShare
(@CD_HOT_INS CHAR(7), @CD_HVE_INS CHAR(3), @CD_HFR_INS CHAR(1), @TP_HET_CTG_INS TINYINT) As
/* Declaração das variáveis que receberão o cursor */
DECLARE @CD_HOT			CHAR(7),
	 @CD_HVE			CHAR(3),
	 @CD_HFR			CHAR(1),
	 @CD_HET			CHAR(2),
	 @DS_HFR_CSH			CHAR(7),
	 @QT_HET_DIA_PAR_CSH		INT,
	 @QT_HET_DIA_CHG_CSH		INT,
	 @DS_HFR_NRM			CHAR(7),
	 @QT_HET_DIA_PAR_NRM		INT,
	 @QT_HET_DIA_CHG_NRM		INT,
	 @CD_HET_CORRENTE		CHAR(13),
	 @QT_NOK			TINYINT,
	 @FL_OK				BIT,
	 @FL_OK_TOTAL			BIT,
	 @NR_POS			TINYINT,
	 @DS_HFR_Descoberta 		CHAR(7),
	 @CD_HOT_NRM			CHAR(10),
	 @CD_HOT_NRM_CORRENTE	CHAR(10)

IF @TP_HET_CTG_INS IN (3, 4)
BEGIN
/* Verificar todas as etapas do tipo Code-Share ou Duplicate Leg pertencentes à mesma freqüencia das etapas alteradas, 
    se no Hotran Vinculado existe alguma etapa com a mesma origem e destino e 
    cujo período de validade abranja o período de validade do vôo code-share/duplicate leg */
IF (	SELECT	COUNT(*) FROM T_HVE HVEINS, T_HET HETINS
	WHERE	HETINS.CD_HOT + HETINS.CD_HVE + HETINS.CD_HFR = @CD_HOT_INS + @CD_HVE_INS + @CD_HFR_INS AND
		HVEINS.CD_HOT + HVEINS.CD_HVE = @CD_HOT_INS + @CD_HVE_INS AND
		HETINS.TP_HET_CTG IN (3, 4) AND
		NOT EXISTS (	SELECT * FROM T_HVE HVE, T_HET HET
				WHERE	HET.CD_HOT = HETINS.CD_HOT_VIN AND
					HVE.CD_HOT + HVE.CD_HVE = HET.CD_HOT + HET.CD_HVE AND
					HET.SG_AER_ORI = HETINS.SG_AER_ORI AND
					HET.SG_AER_DES = HETINS.SG_AER_DES AND
					HVE.DT_HVE_INI &lt;= HVEINS.DT_HVE_INI AND
					(HVE.DT_HVE_FIM &gt;= HVEINS.DT_HVE_FIM OR HVE.DT_HVE_FIM IS NULL))) &gt; 0
BEGIN
	RAISERROR 20999 &#39;Operação não executada: Um vôo Code-Share ou Duplicate Leg tem de estar associado a um Hotran que possua pelo menos uma etapa com a mesma origem e destino e cujo período de validade abranja o período de validade.&#39;
	RETURN
END

/* Verificar entre as etapas do Hotran Vinculado válidas pela condição anterior, isto é, têm a mesma origem e destino desta etapa e com período de validade
    compreendido pelo período de validade da etapa vinculada, se há alguma etapa cuja freqüência abranja a freqüência do vôo code-share que está sendo alterado. */

/* Declaração do cursor */
DECLARE SP_CURSOR CURSOR FOR
	SELECT 	DISTINCT 
		HETCSH.CD_HOT,
		HETCSH.CD_HVE,
		HETCSH.CD_HFR,
		HETCSH.CD_HET,
		HET.CD_HOT + HET.CD_HVE,
		DS_HFR_CSH = HFRCSH.DS_HFR,
		QT_HET_DIA_PAR_CSH = CONVERT(INT, HETCSH.QT_HET_DIA_PAR),
		QT_HET_DIA_CHG_CSH = CONVERT(INT, HETCSH.QT_HET_DIA_CHG),
		DS_HFR_NRM = HFR.DS_HFR,

		QT_HET_DIA_PAR_NRM = CONVERT(INT, HET.QT_HET_DIA_PAR),
		QT_HET_DIA_CHG_NRM = CONVERT(INT, HET.QT_HET_DIA_CHG)
	FROM	T_HVE HVECSH, T_HFR HFRCSH, T_HET HETCSH, T_HVE HVE, T_HFR HFR, T_HET HET
	WHERE	HVECSH.CD_HOT + HVECSH.CD_HVE = HETCSH.CD_HOT + HETCSH.CD_HVE AND
		HFRCSH.CD_HOT + HFRCSH.CD_HVE + HFRCSH.CD_HFR = HETCSH.CD_HOT + HETCSH.CD_HVE + HETCSH.CD_HFR AND
		HETCSH.CD_HOT + HETCSH.CD_HVE + HETCSH.CD_HFR = @CD_HOT_INS + @CD_HVE_INS + @CD_HFR_INS AND
		HETCSH.TP_HET_CTG IN (3, 4) AND
		HVE.CD_HOT + HVE.CD_HVE = HET.CD_HOT + HET.CD_HVE AND
		HFR.CD_HOT + HFR.CD_HVE + HFR.CD_HFR = HET.CD_HOT + HET.CD_HVE + HET.CD_HFR AND
		HET.CD_HOT = HETCSH.CD_HOT_VIN AND
		HET.SG_AER_ORI = HETCSH.SG_AER_ORI AND
		HET.SG_AER_DES = HETCSH.SG_AER_DES AND


		HVE.DT_HVE_INI &lt;= HVECSH.DT_HVE_INI AND
		(HVE.DT_HVE_FIM &gt;= HVECSH.DT_HVE_FIM OR HVE.DT_HVE_FIM IS NULL)
	ORDER BY HETCSH.CD_HOT, HETCSH.CD_HVE, HETCSH.CD_HFR, HETCSH.CD_HET, HET.CD_HOT + HET.CD_HVE

SELECT @FL_OK_TOTAL = 1

/* Abertura do cursor */
OPEN SP_CURSOR

/* Ir para o primeiro registro */
FETCH	SP_CURSOR
INTO	@CD_HOT,
	@CD_HVE,
	@CD_HFR,
	@CD_HET,
	@CD_HOT_NRM,
	@DS_HFR_CSH,
	@QT_HET_DIA_PAR_CSH,
	@QT_HET_DIA_CHG_CSH,
	@DS_HFR_NRM,
	@QT_HET_DIA_PAR_NRM,
	@QT_HET_DIA_CHG_NRM

/* Processar todos os registros de SP_CURSOR */
WHILE @@FETCH_STATUS = 0
BEGIN

	SELECT	@CD_HET_CORRENTE = @CD_HOT + @CD_HVE + @CD_HFR + @CD_HET, 
		@FL_OK = 0

	/* Verificar todos os hotrans normais possivelmente válidos para esta etapa */


	WHILE @@FETCH_STATUS = 0 AND @CD_HOT + @CD_HVE + @CD_HFR + @CD_HET = @CD_HET_CORRENTE
	BEGIN


		SELECT 	@CD_HOT_NRM_CORRENTE = @CD_HOT_NRM,
			@DS_HFR_Descoberta = @DS_HFR_CSH

		/* Processar todas as frequüências deste hotran normal */
		WHILE @@FETCH_STATUS = 0 AND @CD_HOT + @CD_HVE + @CD_HFR + @CD_HET = @CD_HET_CORRENTE AND @CD_HOT_NRM = @CD_HOT_NRM_CORRENTE
		BEGIN

			SELECT	@DS_HFR_CSH = @DS_HFR_Descoberta,
				@DS_HFR_Descoberta = &#39;&#39;,
				@NR_POS = 1

			/* Varrer @DS_HFR_CSH para verificar se cada dia desta freqüência está contido na freqüência da etapa normal */
			WHILE SUBSTRING(RTRIM(@DS_HFR_CSH) + &#39;X&#39;, @NR_POS, 1) &lt;&gt; &#39;X&#39;
			BEGIN

				    /* Verificar se este dia da freqüência de partida do vôo codeshare/duplicate está na freqüência de partida do vôo vinculado */
				IF PATINDEX(&#39;%&#39; + CONVERT(CHAR(1), (((CONVERT(INT, SUBSTRING(@DS_HFR_CSH, @NR_POS, 1)) - ( ISNULL(@QT_HET_DIA_PAR_NRM,0) - ISNULL(@QT_HET_DIA_PAR_CSH,0) ) - 1) % 7) + 7) % 7 + 1) + &#39;%&#39;, @DS_HFR_NRM) = 0
				    OR
				   /* Verificar se este dia da freqüência de chegada do vôo codeshare/duplicate está na freqüência de chegada do vôo vinculado */
				    PATINDEX(&#39;%&#39; + CONVERT(CHAR(1), (((CONVERT(INT, SUBSTRING(@DS_HFR_CSH, @NR_POS, 1)) - ( ISNULL(@QT_HET_DIA_CHG_NRM,0) - ISNULL(@QT_HET_DIA_CHG_CSH,0) ) - 1) % 7) + 7) % 7 + 1) + &#39;%&#39;, @DS_HFR_NRM) = 0
					SELECT @DS_HFR_Descoberta = RTRIM(@DS_HFR_Descoberta) + SUBSTRING(@DS_HFR_CSH, @NR_POS, 1)

				SELECT @NR_POS = @NR_POS + 1

			END

			/* Ir para o próximo registro */
			FETCH	NEXT FROM SP_CURSOR
			INTO	@CD_HOT,
				@CD_HVE,
				@CD_HFR,
				@CD_HET,
				@CD_HOT_NRM,
				@DS_HFR_CSH,
				@QT_HET_DIA_PAR_CSH,
				@QT_HET_DIA_CHG_CSH,
				@DS_HFR_NRM,
				@QT_HET_DIA_PAR_NRM,
				@QT_HET_DIA_CHG_NRM

		END

		IF RTRIM(@DS_HFR_Descoberta) + &#39;X&#39; = &#39;X&#39; SELECT @FL_OK = 1

	END

	IF @FL_OK = 0 SELECT @FL_OK_TOTAL = 0

END
CLOSE SP_CURSOR
DEALLOCATE SP_CURSOR


IF @FL_OK_TOTAL = 0
BEGIN
	RAISERROR 20001 &#39;Operação não executada:Um vôo CodeShare ou DuplicateLeg tem de estar associado a um Hotran que possua pelo menos uma etapa com a mesma origem e destino e cuja freqüência e período de validade abranjam sua freqüência e período de validade, respectivamente.&#39;
	RETURN
END

END
ELSE
BEGIN

/* VERIFICAR SE ALTERAÇÕES NAS ETAPAS NORMAIS AFETAM AS ETAPAS CODE-SHARE/DUPLICATE LEG */

/* Verificar se, após a alteração, as etapas do tipo Code-Share ou Duplicate Leg que têm o hotran desta etapa como hotran vinculado,
    se no Hotran Vinculado continua existindo alguma etapa com a mesma origem e destino e cujo período de validade abranja o 
    período de validade da etapa CS/DL */
IF (	SELECT	COUNT(*) FROM T_HVE HVECSH, T_HET HETCSH
	WHERE	HVECSH.CD_HOT + HVECSH.CD_HVE = HETCSH.CD_HOT + HETCSH.CD_HVE AND
		HETCSH.CD_HOT_VIN = @CD_HOT_INS AND
		NOT EXISTS (	SELECT * FROM T_HVE HVE, T_HET HET
				WHERE	HVE.CD_HOT + HVE.CD_HVE = HET.CD_HOT + HET.CD_HVE AND
					HET.CD_HOT = HETCSH.CD_HOT_VIN AND
					HET.SG_AER_ORI = HETCSH.SG_AER_ORI AND
					HET.SG_AER_DES = HETCSH.SG_AER_DES AND
					HVE.DT_HVE_INI &lt;= HVECSH.DT_HVE_INI AND
					(HVE.DT_HVE_FIM &gt;= HVECSH.DT_HVE_FIM OR HVE.DT_HVE_FIM IS NULL))) &gt; 0
BEGIN
	RAISERROR 20999 &#39;Operação não executada: Há vôos Code-Share ou Duplicate Leg associados a este Hotran que impedem esta alteração.&#39;
	RETURN
END



/* Verificar se após esta alteração, as etapas code-share ou duplicate leg vinculadas a este hotran continuaram válildas quanto à freqüência */

/* Declaração do cursor */
DECLARE SP_CURSOR CURSOR FOR
	SELECT 	DISTINCT 
		HETCSH.CD_HOT,
		HETCSH.CD_HVE,
		HETCSH.CD_HFR,
		HETCSH.CD_HET,
		HET.CD_HOT + HET.CD_HVE,
		DS_HFR_CSH = HFRCSH.DS_HFR,
		QT_HET_DIA_PAR_CSH = CONVERT(INT, HETCSH.QT_HET_DIA_PAR),
		QT_HET_DIA_CHG_CSH = CONVERT(INT, HETCSH.QT_HET_DIA_CHG),
		DS_HFR_NRM = HFR.DS_HFR,
		QT_HET_DIA_PAR_NRM = CONVERT(INT, HET.QT_HET_DIA_PAR),
		QT_HET_DIA_CHG_NRM = CONVERT(INT, HET.QT_HET_DIA_CHG)

	FROM	T_HVE HVECSH, T_HFR HFRCSH, T_HET HETCSH, T_HVE HVE, T_HFR HFR, T_HET HET
	WHERE	HVECSH.CD_HOT + HVECSH.CD_HVE = HETCSH.CD_HOT + HETCSH.CD_HVE AND
		HFRCSH.CD_HOT + HFRCSH.CD_HVE + HFRCSH.CD_HFR = HETCSH.CD_HOT + HETCSH.CD_HVE + HETCSH.CD_HFR AND
		HETCSH.CD_HOT_VIN = @CD_HOT_INS AND
		HVE.CD_HOT + HVE.CD_HVE = HET.CD_HOT + HET.CD_HVE AND
		HFR.CD_HOT + HFR.CD_HVE + HFR.CD_HFR = HET.CD_HOT + HET.CD_HVE + HET.CD_HFR AND
		HET.CD_HOT = HETCSH.CD_HOT_VIN AND
		HET.SG_AER_ORI = HETCSH.SG_AER_ORI AND
		HET.SG_AER_DES = HETCSH.SG_AER_DES AND
		HVE.DT_HVE_INI &lt;= HVECSH.DT_HVE_INI AND
		(HVE.DT_HVE_FIM &gt;= HVECSH.DT_HVE_FIM OR HVE.DT_HVE_FIM IS NULL)

	ORDER BY HETCSH.CD_HOT, HETCSH.CD_HVE, HETCSH.CD_HFR, HETCSH.CD_HET, HET.CD_HOT + HET.CD_HVE

SELECT @FL_OK_TOTAL = 1

/* Abertura do cursor */
OPEN SP_CURSOR

/* Ir para o primeiro registro */
FETCH	SP_CURSOR
INTO	@CD_HOT,
	@CD_HVE,
	@CD_HFR,
	@CD_HET,
	@CD_HOT_NRM,
	@DS_HFR_CSH,
	@QT_HET_DIA_PAR_CSH,
	@QT_HET_DIA_CHG_CSH,
	@DS_HFR_NRM,
	@QT_HET_DIA_PAR_NRM,
	@QT_HET_DIA_CHG_NRM


/* Processar todos os registros de SP_CURSOR */
WHILE @@FETCH_STATUS = 0
BEGIN

	SELECT	@CD_HET_CORRENTE = @CD_HOT + @CD_HVE + @CD_HFR + @CD_HET, 
		@FL_OK = 0

	/* Verificar todos os hotrans normais possivelmente válidos para esta etapa */
	WHILE @@FETCH_STATUS = 0 AND @CD_HOT + @CD_HVE + @CD_HFR + @CD_HET = @CD_HET_CORRENTE
	BEGIN

		SELECT 	@CD_HOT_NRM_CORRENTE = @CD_HOT_NRM,
			@DS_HFR_Descoberta = @DS_HFR_CSH

		/* Processar todas as frequüências deste hotran normal */
		WHILE @@FETCH_STATUS = 0 AND @CD_HOT + @CD_HVE + @CD_HFR + @CD_HET = @CD_HET_CORRENTE AND @CD_HOT_NRM = @CD_HOT_NRM_CORRENTE
		BEGIN

			SELECT	@DS_HFR_CSH = @DS_HFR_Descoberta,
				@DS_HFR_Descoberta = &#39;&#39;,
				@NR_POS = 1

			/* Varrer @DS_HFR_CSH para verificar se cada dia desta freqüência está contido na freqüência da etapa normal */
			WHILE SUBSTRING(RTRIM(@DS_HFR_CSH) + &#39;X&#39;, @NR_POS, 1) &lt;&gt; &#39;X&#39;
			BEGIN

				    /* Verificar se este dia da freqüência de partida do vôo codeshare/duplicate está na freqüência de partida do vôo vinculado */
				IF PATINDEX(&#39;%&#39; + CONVERT(CHAR(1), (((CONVERT(INT, SUBSTRING(@DS_HFR_CSH, @NR_POS, 1)) - ( ISNULL(@QT_HET_DIA_PAR_NRM,0) - ISNULL(@QT_HET_DIA_PAR_CSH,0) ) - 1) % 7) + 7) % 7 + 1) + &#39;%&#39;, @DS_HFR_NRM) = 0
				    OR

				   /* Verificar se este dia da freqüência de chegada do vôo codeshare/duplicate está na freqüência de chegada do vôo vinculado */
				    PATINDEX(&#39;%&#39; + CONVERT(CHAR(1), (((CONVERT(INT, SUBSTRING(@DS_HFR_CSH, @NR_POS, 1)) - ( ISNULL(@QT_HET_DIA_CHG_NRM,0) - ISNULL(@QT_HET_DIA_CHG_CSH,0) ) - 1) % 7) + 7) % 7 + 1) + &#39;%&#39;, @DS_HFR_NRM) = 0
					SELECT @DS_HFR_Descoberta = RTRIM(@DS_HFR_Descoberta) + SUBSTRING(@DS_HFR_CSH, @NR_POS, 1)

				SELECT @NR_POS = @NR_POS + 1

			END

			/* Ir para o próximo registro */
			FETCH	NEXT FROM SP_CURSOR
			INTO	@CD_HOT,
				@CD_HVE,
				@CD_HFR,
				@CD_HET,
				@CD_HOT_NRM,
				@DS_HFR_CSH,
				@QT_HET_DIA_PAR_CSH,
				@QT_HET_DIA_CHG_CSH,
				@DS_HFR_NRM,
				@QT_HET_DIA_PAR_NRM,
				@QT_HET_DIA_CHG_NRM

		END

		IF RTRIM(@DS_HFR_Descoberta) + &#39;X&#39; = &#39;X&#39; SELECT @FL_OK = 1

	END

	IF @FL_OK = 0 SELECT @FL_OK_TOTAL = 0

END
CLOSE SP_CURSOR
DEALLOCATE SP_CURSOR


IF @FL_OK_TOTAL = 0
BEGIN
	RAISERROR 20999 &#39;Operação não executada: Há vôos Code-Share ou Duplicate Leg associados a este Hotran que impedem esta alteração.&#39;
	RETURN
END

END
go</a:Procedure.Text>
<c:Procedure.Owner>
<o:User Ref="o19"/>
</c:Procedure.Owner>
</o:Procedure>
<o:Procedure Id="o444">
<a:ObjectID>6958AC76-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>SP_VerificaIP</a:Name>
<a:Code>SP_VerificaIP</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Procedure.Text>/****** Object:  Stored Procedure dbo.SP_VerificaIP    Script Date: 7/8/2000 12:15:32 ******/
Create Procedure SP_VerificaIP
(@pIP VARCHAR(15)) As
DECLARE @i INT
DECLARE @lIPPart VARCHAR(3)
DECLARE @lChar CHAR(1)
DECLARE @lPontos INT
DECLARE @lLenIP INT
DECLARE @lNumeros INT

select @lIPPart = &#39;&#39;
select @lPontos = 0
select @i = 1
IF PATINDEX(&#39;%@%&#39;, @pIP) &gt; 0 
BEGIN
	RAISERROR 20999 &#39;Operação não executada: IP Inválido.&#39;
	RETURN
END
SELECT @lLenIP = PATINDEX (&#39;%@%&#39;,@pIP + &#39;@&#39;) - 1

SELECT @lNumeros = 0

while @i &lt;= @lLenIP

BEGIN
	select @lChar = substring(@pIP, @i, 1)

	if @lChar = &#39;.&#39;
	BEGIN
		SELECT @lNumeros = 0
	END

        If @lChar &lt;&gt; &#39;.&#39; 
	BEGIN
		select @lNumeros = @lNumeros + 1
                
  	        IF @LCHAR &lt; &#39;0&#39; OR @LCHAR &gt; &#39;9&#39; OR @lNumeros &gt; 3
		BEGIN
			RAISERROR 20999 &#39;Operação não executada: IP Inválido.&#39;
			RETURN
		END
		select @lIPPart = LTRIM(@lIPPart) + @lChar
	END

	If (@lChar = &#39;.&#39; Or @i = @lLenIP) And @lIPPart &lt;&gt; &#39;&#39;
	BEGIN
		select @lPontos = @lPontos + 1
		If Not (CONVERT(INT, @lIPPart) &gt;= 0 and CONVERT(INT, @lippart) &lt;= 255)
		BEGIN
			RAISERROR 20999 &#39;Operação não executada: IP Inválido.&#39;
			RETURN
		END
		select @lIPPart = &#39;&#39;
	END
	select @i = @i + 1
END   

If @lPontos &lt;&gt; 4
BEGIN
	RAISERROR 20999 &#39;Operação não executada: IP Inválido.&#39;
	RETURN
END
go</a:Procedure.Text>
<c:Procedure.Owner>
<o:User Ref="o19"/>
</c:Procedure.Owner>
</o:Procedure>
</c:Procedures>
<c:Tables>
<o:Table Ref="o24"/>
<o:Table Ref="o49"/>
<o:Table Ref="o75"/>
<o:Table Ref="o107"/>
<o:Table Ref="o126"/>
<o:Table Ref="o93"/>
<o:Table Ref="o139"/>
<o:Table Ref="o155"/>
<o:Table Ref="o174"/>
<o:Table Ref="o207"/>
<o:Table Ref="o41"/>
<o:Table Ref="o195"/>
<o:Table Ref="o225"/>
<o:Table Ref="o236"/>
<o:Table Ref="o247"/>
<o:Table Ref="o258"/>
<o:Table Ref="o7"/>
<o:Table Ref="o269"/>
<o:Table Ref="o290"/>
<o:Table Ref="o330"/>
<o:Table Ref="o280"/>
<o:Table Ref="o317"/>
<o:Table Ref="o303"/>
<o:Table Ref="o343"/>
<o:Table Ref="o356"/>
<o:Table Ref="o372"/>
<o:Table Ref="o384"/>
<o:Table Ref="o395"/>
<o:Table Ref="o415"/>
</c:Tables>
<c:References>
<o:Reference Ref="o37"/>
<o:Reference Ref="o71"/>
<o:Reference Ref="o89"/>
<o:Reference Ref="o122"/>
<o:Reference Ref="o135"/>
<o:Reference Ref="o151"/>
<o:Reference Ref="o170"/>
<o:Reference Ref="o191"/>
<o:Reference Ref="o215"/>
<o:Reference Ref="o218"/>
<o:Reference Ref="o221"/>
<o:Reference Ref="o232"/>
<o:Reference Ref="o243"/>
<o:Reference Ref="o254"/>
<o:Reference Ref="o265"/>
<o:Reference Ref="o276"/>
<o:Reference Ref="o299"/>
<o:Reference Ref="o313"/>
<o:Reference Ref="o326"/>
<o:Reference Ref="o352"/>
<o:Reference Ref="o365"/>
<o:Reference Ref="o368"/>
<o:Reference Ref="o380"/>
<o:Reference Ref="o391"/>
<o:Reference Ref="o411"/>
<o:Reference Ref="o423"/>
<o:Reference Id="o445">
<a:ObjectID>6958ABCC-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Reference_28</a:Name>
<a:Code>REFERENCE_28</a:Code>
<a:CreationDate>1081686158</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081686158</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:Cardinality>0..*</a:Cardinality>
<a:UpdateConstraint>1</a:UpdateConstraint>
<a:DeleteConstraint>1</a:DeleteConstraint>
<c:Object1>
<o:Table Ref="o174"/>
</c:Object1>
</o:Reference>
<o:Reference Ref="o426"/>
<o:Reference Ref="o429"/>
</c:References>
<c:TargetModels>
<o:TargetModel Id="o446">
<a:ObjectID>6958AC53-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Microsoft SQL Server 7.x</a:Name>
<a:Code>SQL SERVER 7</a:Code>
<a:CreationDate>1081537223</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537223</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:TargetModelURL>file:///%_DBMS%/sqlserv7.xdb</a:TargetModelURL>
<a:TargetModelID>986CB218-1936-4245-823C-883D7AF59B86</a:TargetModelID>
<a:TargetModelClassID>4BA9F647-DAB1-11D1-9944-006097355D9B</a:TargetModelClassID>
<c:SessionShortcuts>
<o:Shortcut Ref="o3"/>
<o:Shortcut Id="o447">
<a:ObjectID>6958AC58-8FBB-11D8-B6CA-00024416849C</a:ObjectID>
<a:Name>Microsoft SQL Server 7.x</a:Name>
<a:Code>SQL SERVER 7</a:Code>
<a:CreationDate>1081537224</a:CreationDate>
<a:Creator>prsi_ronei</a:Creator>
<a:ModificationDate>1081537224</a:ModificationDate>
<a:Modifier>prsi_ronei</a:Modifier>
<a:TargetID>986CB218-1936-4245-823C-883D7AF59B86</a:TargetID>
<a:TargetClassID>4BA9F647-DAB1-11D1-9944-006097355D9B</a:TargetClassID>
<a:TargetPackagePath/>
</o:Shortcut>
</c:SessionShortcuts>
</o:TargetModel>
</c:TargetModels>
</o:Model>
</c:Children>
</o:RootObject>

</Model>