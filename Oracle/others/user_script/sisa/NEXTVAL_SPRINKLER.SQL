CREATE OR REPLACE FUNCTION NEXTVAL_SPRINKLER(P_VALOR NUMBER) RETURN NUMBER IS
   V_SEQ_MALHA CAD_SPRINKLER.SEQ_MALHA%TYPE;
BEGIN
   IF P_VALOR IS NULL THEN
      /*SELECT SEQ_SPRINKLER.NEXTVAL INTO V_SEQ_MALHA FROM DUAL;*/
 
     SELECT NVL(MAX(SEQ_MALHA), 0) + 1 
     INTO V_SEQ_MALHA
     FROM CAD_SPRINKLER;
     
     RETURN V_SEQ_MALHA;
   ELSE
      RETURN P_VALOR;
   END IF;
END;
