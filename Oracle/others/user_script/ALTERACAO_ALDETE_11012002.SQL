-- 1º PASSO
--
-- DROP PRIMARY KEY DA TABELA FILHA NO MENOR NIVEL (HONORARIOS_MEDICOS)
--
ALTER TABLE HONORARIOS_MEDICOS
DROP CONSTRAINT HNM_PK
/

-- RECRIAÇÃO DA PRIMARY KEY (HONORARIOS_MEDICOS)
--

ALTER TABLE HONORARIOS_MEDICOS
ADD CONSTRAINT HNM_PK PRIMARY KEY (HNM_SEQUENCIAL, HNM_GPR_GUI_DOC_DEP_CODIGO)
/

-- DROP FOREING KEY DA TABELA FILHA NO MENOR NIVEL (HONORARIOS_MEDICOS)
--
ALTER TABLE HONORARIOS_MEDICOS
DROP CONSTRAINT HNM_GPR_FK
/

-- RECRIAÇÃO DA FOREING KEY (HONORARIOS_MEDICOS)
--

ALTER TABLE IFRSRH.HONORARIOS_MEDICOS ADD  CONSTRAINT HNM_GPR_FK
 FOREIGN KEY (HNM_GPR_GUI_NUMERO, HNM_GPR_GUI_DOC_NUMERO, HNM_GPR_GUI_DOC_CBE_BEN_SIGLA, HNM_GPR_GUI_DOC_CBE_CRE_SEQ, HNM_GPR_SEQUENCIAL, HNM_GPR_GUI_DOC_DEP_CODIGO) 
  REFERENCES IFRSRH.GUIAS_PROCEDIMENTOS (GPR_GUI_NUMERO, GPR_GUI_DOC_NUMERO, GPR_GUI_DOC_CBE_BEN_SIGLA, GPR_GUI_DOC_CBE_CRE_SEQUENCIAL, GPR_SEQUENCIAL, GPR_GUI_DOC_DEP_CODIGO) ;


-- 2º PASSO
--
-- DROP PRIMARY KEY DA TABELA FILHA NO MENOR NIVEL (GUIAS_PROCEDIMENTOS)
--
ALTER TABLE GUIAS_PROCEDIMENTOS
DROP CONSTRAINT GPR_PK
/

-- RECRIAÇÃO DA PRIMARY KEY (GUIAS_PROCEDIMENTOS)
--

ALTER TABLE GUIAS_PROCEDIMENTOS
ADD CONSTRAINT GPR_PK PRIMARY KEY ( GPR_GUI_NUMERO, GPR_GUI_DOC_NUMERO, GPR_GUI_DOC_CBE_BEN_SIGLA, GPR_GUI_DOC_CBE_CRE_SEQUENCIAL, GPR_SEQUENCIAL, GPR_GUI_DOC_DEP_CODIGO )
/

-- DROP FOREING KEY DA TABELA FILHA NO MENOR NIVEL (GUIAS_PROCEDIMENTOS)
--
ALTER TABLE GUIAS_PROCEDIMENTOS
DROP CONSTRAINT GPR_GUI_FK
/

-- RECRIAÇÃO DA FOREING KEY (GUIAS_PROCEDIMENTOS)
--

ALTER TABLE IFRSRH.GUIAS_PROCEDIMENTOS ADD  CONSTRAINT GPR_GUI_FK
 FOREIGN KEY (GPR_GUI_NUMERO, GPR_GUI_DOC_NUMERO, GPR_GUI_DOC_CBE_BEN_SIGLA, GPR_GUI_DOC_CBE_CRE_SEQUENCIAL, GPR_GUI_DOC_DEP_CODIGO) 
  REFERENCES IFRSRH.GUIAS (GUI_NUMERO, GUI_DOC_NUMERO, GUI_DOC_CBE_BEN_SIGLA, GUI_DOC_CBE_CRE_SEQUENCIAL, GUI_DOC_DEP_CODIGO) ;


-- 3º PASSO
--
-- DROP PRIMARY KEY DA TABELA FILHA NO MENOR NIVEL (TAB_DESPESA_MEDICAMENTOS)
--
ALTER TABLE TAB_DESPESA_MEDICAMENTOS
DROP CONSTRAINT GPR_PK
/

-- RECRIAÇÃO DA PRIMARY KEY (TAB_DESPESA_MEDICAMENTOS)
--

ALTER TABLE TAB_DESPESA_MEDICAMENTOS
ADD CONSTRAINT GPR_PK PRIMARY KEY ( GPR_GUI_NUMERO, GPR_GUI_DOC_NUMERO, GPR_GUI_DOC_CBE_BEN_SIGLA, GPR_GUI_DOC_CBE_CRE_SEQUENCIAL, GPR_SEQUENCIAL, GPR_GUI_DOC_DEP_CODIGO )
/

-- DROP FOREING KEY DA TABELA FILHA NO MENOR NIVEL (TAB_DESPESA_MEDICAMENTOS)
--
ALTER TABLE TAB_DESPESA_MEDICAMENTOS
DROP CONSTRAINT GPR_GUI_FK
/

-- RECRIAÇÃO DA FOREING KEY (TAB_DESPESA_MEDICAMENTOS)
--

ALTER TABLE IFRSRH.GUIAS_PROCEDIMENTOS ADD  CONSTRAINT GPR_GUI_FK
 FOREIGN KEY (GPR_GUI_NUMERO, GPR_GUI_DOC_NUMERO, GPR_GUI_DOC_CBE_BEN_SIGLA, GPR_GUI_DOC_CBE_CRE_SEQUENCIAL, GPR_GUI_DOC_DEP_CODIGO) 
  REFERENCES IFRSRH.GUIAS (GUI_NUMERO, GUI_DOC_NUMERO, GUI_DOC_CBE_BEN_SIGLA, GUI_DOC_CBE_CRE_SEQUENCIAL, GUI_DOC_DEP_CODIGO) ;
