CREATE OR REPLACE FUNCTION NEXTVAL_AGENTE_EXTINTOR(P_VALOR NUMBER) RETURN NUMBER IS
   V_SEQ_AGENTE TAB_AGENTE_EXTINTOR.SEQ_AGENTE_EXT%TYPE;
BEGIN
   IF P_VALOR IS NULL THEN
      /*SELECT SEQ_AGENTE_EXTINTOR.NEXTVAL INTO V_SEQ_AGENTE FROM DUAL;*/

      SELECT NVL(MAX(SEQ_AGENTE_EXT), 0) + 1 
      INTO V_SEQ_AGENTE
      FROM TAB_AGENTE_EXTINTOR;
      
      RETURN V_SEQ_AGENTE;
   ELSE
      RETURN P_VALOR;
   END IF;
END;