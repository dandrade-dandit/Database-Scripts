CREATE OR REPLACE FUNCTION NEXTVAL_SITUACAO_EQUIP(P_VALOR NUMBER) RETURN NUMBER IS
   V_SEQ_SITUACAO TAB_SITUACAO_EQUIP.SEQ_SITUACAO_EQUIP%TYPE;
BEGIN
   IF P_VALOR IS NULL THEN
      /*SELECT SEQ_SITUACAO_EQUIP.NEXTVAL INTO V_SEQ_SITUACAO FROM DUAL;*/
      
      SELECT NVL(MAX(SEQ_SITUACAO_EQUIP), 0) + 1 
      INTO V_SEQ_SITUACAO
      FROM TAB_SITUACAO_EQUIP;

      RETURN V_SEQ_SITUACAO;
   ELSE
      RETURN P_VALOR;
   END IF;
END;