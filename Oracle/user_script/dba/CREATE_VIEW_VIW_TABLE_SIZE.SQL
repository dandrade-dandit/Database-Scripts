CREATE OR REPLACE VIEW VIW_TABLE_SIZE (OWNER, NOME_OBJETO, TIPO_OBJETO, TOTAL_MB)
AS 
SELECT OWNER, SEGMENT_NAME, SEGMENT_TYPE, (SUM(BYTES)/1024/1024)
FROM DBA_EXTENTS
WHERE SEGMENT_TYPE = 'TABLE'
GROUP BY OWNER, SEGMENT_NAME, SEGMENT_TYPE
UNION ALL
SELECT OWNER, SEGMENT_NAME, SEGMENT_TYPE, (SUM(BYTES)/1024/1024)
FROM DBA_EXTENTS
WHERE SEGMENT_TYPE = 'INDEX'
GROUP BY OWNER, SEGMENT_NAME, SEGMENT_TYPE
WITH READ ONLY
/

 