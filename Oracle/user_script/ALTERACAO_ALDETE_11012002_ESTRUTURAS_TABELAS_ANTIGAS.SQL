-- DESPESAS_MEDICAS_HOSPITALARES
--
DROP TABLE DESPESAS_MEDICAS_HOSPITALARES CASCADE CONSTRAINTS ; 

CREATE TABLE DESPESAS_MEDICAS_HOSPITALARES ( 
  DMP_SEQUENCIAL                  NUMBER (7)    NOT NULL, 
  DMP_GUI_NUMERO                  NUMBER (6)    NOT NULL, 
  DMP_GUI_DOC_NUMERO              NUMBER (10)   NOT NULL, 
  DMP_GUI_DOC_CBE_BEN_SIGLA       VARCHAR2 (3)  NOT NULL, 
  DMP_GUI_DOC_CBE_CRE_SEQUENCIAL  NUMBER (5)    NOT NULL, 
  DMP_VAU_ENQ_NUMERO              NUMBER (7), 
  DMP_DESCRICAO                   VARCHAR2 (250), 
  DMP_VALOR_INFORMADO             NUMBER (12,2) NOT NULL, 
  DMP_VALOR_GLOSA                 NUMBER (12,2), 
  DMP_VALOR_CALCULADO             NUMBER (12,2), 
  DMP_VALOR_PARTICIPACAO          NUMBER (12,2), 
  DMP_VALOR_TAXA                  NUMBER (12,2), 
  DMP_MOV_PARTICIPACAO            VARCHAR2 (1), 
  CONSTRAINT DMP_PK
  PRIMARY KEY ( DMP_SEQUENCIAL ) ) ; 

ALTER TABLE IFRSRH.DESPESAS_MEDICAS_HOSPITALARES ADD  CONSTRAINT DMP_GUI_FK
 FOREIGN KEY (DMP_GUI_NUMERO, DMP_GUI_DOC_NUMERO, DMP_GUI_DOC_CBE_BEN_SIGLA, DMP_GUI_DOC_CBE_CRE_SEQUENCIAL) 
  REFERENCES IFRSRH.GUIAS (GUI_NUMERO, GUI_DOC_NUMERO, GUI_DOC_CBE_BEN_SIGLA, GUI_DOC_CBE_CRE_SEQUENCIAL) ;

-- DIVERSOS_MEDICAS_HOSPIT
--
DROP TABLE DIVERSOS_MEDICAS_HOSPIT CASCADE CONSTRAINTS ; 

CREATE TABLE DIVERSOS_MEDICAS_HOSPIT ( 
  DMO_SEQUENCIAL                  NUMBER (7)    NOT NULL, 
  DMO_GUI_NUMERO                  NUMBER (6)    NOT NULL, 
  DMO_GUI_DOC_NUMERO              NUMBER (10)   NOT NULL, 
  DMO_GUI_DOC_CBE_BEN_SIGLA       VARCHAR2 (3)  NOT NULL, 
  DMO_GUI_DOC_CBE_CRE_SEQUENCIAL  NUMBER (5)    NOT NULL, 
  DMO_DESCRICAO                   VARCHAR2 (2000)  NOT NULL, 
  DMO_VALOR_INFORMADO             NUMBER (12,2) NOT NULL, 
  DMO_AUTORIZACAO                 VARCHAR2 (1), 
  DMO_AES_NUMERO_DOCUMENTO        VARCHAR2 (25), 
  DMO_VALOR_PARTICIPACAO          NUMBER (12,2), 
  DMO_MOV_PARTICIPACAO            VARCHAR2 (1), 
  CONSTRAINT DMO_PK
  PRIMARY KEY ( DMO_SEQUENCIAL ) ) ; 

ALTER TABLE IFRSRH.DIVERSOS_MEDICAS_HOSPIT ADD  CONSTRAINT DMO_GUI_FK
 FOREIGN KEY (DMO_GUI_NUMERO, DMO_GUI_DOC_NUMERO, DMO_GUI_DOC_CBE_BEN_SIGLA, DMO_GUI_DOC_CBE_CRE_SEQUENCIAL) 
  REFERENCES IFRSRH.GUIAS (GUI_NUMERO, GUI_DOC_NUMERO, GUI_DOC_CBE_BEN_SIGLA, GUI_DOC_CBE_CRE_SEQUENCIAL) ;

-- GUIAS_PROCEDIMENTOS
--
DROP TABLE GUIAS_PROCEDIMENTOS CASCADE CONSTRAINTS ; 

CREATE TABLE GUIAS_PROCEDIMENTOS ( 
  GPR_GUI_NUMERO                  NUMBER (6)    NOT NULL, 
  GPR_GUI_DOC_NUMERO              NUMBER (10)   NOT NULL, 
  GPR_GUI_DOC_CBE_BEN_SIGLA       VARCHAR2 (3)  NOT NULL, 
  GPR_GUI_DOC_CBE_CRE_SEQUENCIAL  NUMBER (5)    NOT NULL, 
  GPR_SEQUENCIAL                  NUMBER (7)    NOT NULL, 
  GPR_AMB_CODIGO                  NUMBER (7), 
  GPR_AMB_DV                      NUMBER (1), 
  GPR_ABO_CODIGO                  NUMBER (4), 
  GPR_VALOR                       NUMBER (12,2) NOT NULL, 
  GPR_VALOR_EXCEDENTE             NUMBER (12,2), 
  GRP_VALOR_CALCULADO             NUMBER (12,2), 
  GPR_TRINTA                      VARCHAR2 (1), 
  GPR_TRINTA_ESPECIFICACAO        VARCHAR2 (100), 
  GPR_LIMITE_CONSULTA             VARCHAR2 (1), 
  GPR_QTD                         NUMBER (2), 
  GPR_TIPO_ACOMODACAO             VARCHAR2 (1), 
  GPR_VALOR_TRINTA                NUMBER (12,2), 
  GPR_OBS_TRINTA                  VARCHAR2 (500), 
  GPR_VALOR_TAXA                  NUMBER (12,2), 
  GPR_VALOR_PARTICIPACAO          NUMBER (12,2), 
  GPR_VALOR_EXCEDE                NUMBER (12,2), 
  GPR_MOV_PARTICIPACAO            VARCHAR2 (1), 
  GPR_IND_PERICIA                 VARCHAR2 (1), 
  GPR_QTD_PERIODO                 NUMBER (2), 
  GPR_IND_INSS                    VARCHAR2 (1), 
  CONSTRAINT GPR_PK
  PRIMARY KEY ( GPR_GUI_NUMERO, GPR_GUI_DOC_NUMERO, GPR_GUI_DOC_CBE_BEN_SIGLA, GPR_GUI_DOC_CBE_CRE_SEQUENCIAL, GPR_SEQUENCIAL ) ) ; 

ALTER TABLE IFRSRH.GUIAS_PROCEDIMENTOS ADD  CONSTRAINT GPR_ABO_FK
 FOREIGN KEY (GPR_ABO_CODIGO) 
  REFERENCES IFRSRH.ABO (ABO_CODIGO) ;

ALTER TABLE IFRSRH.GUIAS_PROCEDIMENTOS ADD  CONSTRAINT GPR_GUI_FK
 FOREIGN KEY (GPR_GUI_NUMERO, GPR_GUI_DOC_NUMERO, GPR_GUI_DOC_CBE_BEN_SIGLA, GPR_GUI_DOC_CBE_CRE_SEQUENCIAL) 
  REFERENCES IFRSRH.GUIAS (GUI_NUMERO, GUI_DOC_NUMERO, GUI_DOC_CBE_BEN_SIGLA, GUI_DOC_CBE_CRE_SEQUENCIAL) ;

-- TAB_DESPESA_MEDICAMENTOS
--
DROP TABLE TAB_DESPESA_MEDICAMENTOS CASCADE CONSTRAINTS ; 

CREATE TABLE TAB_DESPESA_MEDICAMENTOS ( 
  TDM_SEQUENCIAL                  NUMBER (7)    NOT NULL, 
  TDM_GUI_NUMERO                  NUMBER (6)    NOT NULL, 
  TDM_GUI_DOC_NUMERO              NUMBER (10)   NOT NULL, 
  TDM_GUI_DOC_CBE_BEN_SIGLA       VARCHAR2 (3)  NOT NULL, 
  TDM_GUI_DOC_CBE_CRE_SEQUENCIAL  NUMBER (5)    NOT NULL, 
  TDM_DESCRICAO                   VARCHAR2 (250)  NOT NULL, 
  TDM_VALOR                       NUMBER (12,2) NOT NULL, 
  TDM_VALOR_PARTICIPACAO          NUMBER (12,2), 
  TDM_MOV_PARTICIPACAO            VARCHAR2 (1), 
  CONSTRAINT TDM_PK
  PRIMARY KEY ( TDM_SEQUENCIAL ) ) ; 

ALTER TABLE IFRSRH.TAB_DESPESA_MEDICAMENTOS ADD  CONSTRAINT TDM_GUI_FK
 FOREIGN KEY (TDM_GUI_NUMERO, TDM_GUI_DOC_NUMERO, TDM_GUI_DOC_CBE_BEN_SIGLA, TDM_GUI_DOC_CBE_CRE_SEQUENCIAL) 
  REFERENCES IFRSRH.GUIAS (GUI_NUMERO, GUI_DOC_NUMERO, GUI_DOC_CBE_BEN_SIGLA, GUI_DOC_CBE_CRE_SEQUENCIAL) ;

-- HONORARIOS_MEDICOS
--
DROP TABLE HONORARIOS_MEDICOS CASCADE CONSTRAINTS ; 

CREATE TABLE HONORARIOS_MEDICOS ( 
  HNM_SEQUENCIAL                 NUMBER (7)    NOT NULL, 
  HNM_GPR_GUI_NUMERO             NUMBER (6)    NOT NULL, 
  HNM_GPR_GUI_DOC_NUMERO         NUMBER (10)   NOT NULL, 
  HNM_GPR_GUI_DOC_CBE_BEN_SIGLA  VARCHAR2 (3)  NOT NULL, 
  HNM_GPR_GUI_DOC_CBE_CRE_SEQ    NUMBER (5)    NOT NULL, 
  HNM_GPR_SEQUENCIAL             NUMBER (7)    NOT NULL, 
  HNM_TIPO_ACOMODACAO            VARCHAR2 (1)  NOT NULL, 
  HNM_QTD_VISITA                 NUMBER (3), 
  HNM_HONOR_VALOR_INFORMADO      NUMBER (12,2), 
  HNM_HONOR_VALOR_GLOSA          NUMBER (12,2), 
  HNM_HONOR_VALOR_CALCULADO      NUMBER (12,2), 
  HNM_CRO_CRM                    NUMBER (6), 
  HNM_AUX1_VALOR_INFORMADO       NUMBER (12,2), 
  HNM_AUX1_VALOR_GLOSA           NUMBER (12,2), 
  HNM_AUX1_VALOR_CALCULADO       NUMBER (12,2), 
  HNM_AUX2_VALOR_INFORMADO       NUMBER (12,2), 
  HNM_AUX2_VALOR_GLOSA           NUMBER (12,2), 
  HNM_AUX2_VALOR_CALCULADO       NUMBER (12,2), 
  HNM_AUX3_VALOR_INFORMADO       NUMBER (12,2), 
  HNM_AUX3_VALOR_GLOSA           NUMBER (12,2), 
  HNM_AUX3_VALOR_CALCULADO       NUMBER (12,2), 
  HNM_ANEST_VALOR_INFORMADO      NUMBER (12,2), 
  HNM_ANEST_VALOR_GLOSA          NUMBER (12,2), 
  HNM_ANEST_VALOR_CALCULADO      NUMBER (12,2), 
  HNM_HONOR_VALOR_TAXA           NUMBER (12,2), 
  HNM_AUX1_VALOR_TAXA            NUMBER (12,2), 
  HNM_AUX2_VALOR_TAXA            NUMBER (12,2), 
  HNM_AUX3_VALOR_TAXA            NUMBER (12,2), 
  HNM_ANEST_VALOR_TAXA           NUMBER (12,2), 
  CONSTRAINT HNM_PK
  PRIMARY KEY ( HNM_SEQUENCIAL ) ) ; 

ALTER TABLE IFRSRH.HONORARIOS_MEDICOS ADD  CONSTRAINT HNM_GPR_FK
 FOREIGN KEY (HNM_GPR_GUI_NUMERO, HNM_GPR_GUI_DOC_NUMERO, HNM_GPR_GUI_DOC_CBE_BEN_SIGLA, HNM_GPR_GUI_DOC_CBE_CRE_SEQ, HNM_GPR_SEQUENCIAL) 
  REFERENCES IFRSRH.GUIAS_PROCEDIMENTOS (GPR_GUI_NUMERO, GPR_GUI_DOC_NUMERO, GPR_GUI_DOC_CBE_BEN_SIGLA, GPR_GUI_DOC_CBE_CRE_SEQUENCIAL, GPR_SEQUENCIAL) ;

-- GUIAS
--
DROP TABLE GUIAS CASCADE CONSTRAINTS ; 

CREATE TABLE GUIAS ( 
  GUI_NUMERO                  NUMBER (6)    NOT NULL, 
  GUI_DOC_NUMERO              NUMBER (10)   NOT NULL, 
  GUI_DOC_CBE_BEN_SIGLA       VARCHAR2 (3)  NOT NULL, 
  GUI_DOC_CBE_CRE_SEQUENCIAL  NUMBER (5)    NOT NULL, 
  GUI_DATA                    DATE          NOT NULL, 
  GUI_VALOR                   NUMBER (12,2), 
  GUI_VALOR_EXCEDENTE         NUMBER (12,2), 
  GUI_VALOR_GLOSA             NUMBER (12,2), 
  GUI_AUTORIZADA              VARCHAR2 (1)  NOT NULL, 
  GUI_EMISSAO                 DATE, 
  GUI_EMP_NUMERO_MATRICULA    NUMBER (7), 
  GUI_PVI_SEQUENCIAL          NUMBER (2), 
  GUI_CRE_SEQUENCIAL          NUMBER (5), 
  GUI_TIPO_EXAME              NUMBER (1), 
  GUI_CCT_CODIGO              NUMBER (10)   NOT NULL, 
  GUI_DEP_CODIGO              NUMBER (4)    NOT NULL, 
  GUI_PVB_ADESAO              DATE, 
  GUI_CRE_CRM                 VARCHAR2 (12), 
  GUI_CRE_CRO                 NUMBER (6), 
  GUI_CRE_NOME                VARCHAR2 (80), 
  GUI_CRM_ESP_TIPO            NUMBER (1), 
  GUI_CRM_ESP_NUMERO          NUMBER (7), 
  GUI_VALOR_PARTICIPACAO      NUMBER (12,2), 
  GUI_DATA_PGTO_APOSENTADO    DATE, 
  GUI_NRO_RECIBO_APOSENTADO   NUMBER (10), 
  GUI_EMP_DEP_CODIGO_LOTACAO  NUMBER (4)    NOT NULL, 
  GUI_VALOR_EXCEDE            NUMBER (12,2), 
  GUI_MOV_PARTICIPACAO        VARCHAR2 (1), 
   CONSTRAINT GUIAS_CK_1
          CHECK (GUI_TIPO_EXAME IN (1,2,3,4,5,6,7)), 
  CONSTRAINT GUI_PK
  PRIMARY KEY ( GUI_NUMERO, GUI_DOC_NUMERO, GUI_DOC_CBE_BEN_SIGLA, GUI_DOC_CBE_CRE_SEQUENCIAL ) ) ; 

ALTER TABLE IFRSRH.GUIAS ADD  CONSTRAINT GUI_DOC_FK
 FOREIGN KEY (GUI_DOC_NUMERO, GUI_DOC_CBE_BEN_SIGLA, GUI_DOC_CBE_CRE_SEQUENCIAL) 
  REFERENCES IFRSRH.DOCUMENTOS_COBRANCA (DOC_NUMERO, DOC_CBE_BEN_SIGLA, DOC_CBE_CRE_SEQUENCIAL) ;

ALTER TABLE IFRSRH.GUIAS ADD  CONSTRAINT GUI_EMB_FK
 FOREIGN KEY (GUI_EMP_NUMERO_MATRICULA, GUI_DOC_CBE_BEN_SIGLA) 
  REFERENCES IFRSRH.EMPREGADOS_BENEFICIOS (EMB_EMP_NUMERO_MATRICULA, EMB_BEN_SIGLA) ;

ALTER TABLE IFRSRH.GUIAS ADD  CONSTRAINT GUI_LOT_FK
 FOREIGN KEY (GUI_EMP_DEP_CODIGO_LOTACAO) 
  REFERENCES IFRDBA2.DEPENDENCIAS (DEP_CODIGO) ;

ALTER TABLE IFRSRH.GUIAS ADD  CONSTRAINT GUI_PVB_FK
 FOREIGN KEY (GUI_EMP_NUMERO_MATRICULA, GUI_PVI_SEQUENCIAL, GUI_DOC_CBE_BEN_SIGLA, GUI_PVB_ADESAO) 
  REFERENCES IFRSRH.PESSOAS_VINCULADAS_BENEF (PVB_PVI_EMP_NUMERO_MATRICULA, PVB_PVI_SEQUENCIAL, EMB_BEN_SIGLA, PVB_ADESAO) ;


-- PEDIDOS_COBRANCAS
--
DROP TABLE PEDIDOS_COBRANCAS CASCADE CONSTRAINTS ; 

CREATE TABLE PEDIDOS_COBRANCAS ( 
  PCO_DOC_NUMERO              NUMBER (10)   NOT NULL, 
  PCO_DOC_CBE_BEN_SIGLA       VARCHAR2 (3)  NOT NULL, 
  PCO_DOC_CBE_CRE_SEQUENCIAL  NUMBER (5)    NOT NULL, 
  PCO_VALOR                   NUMBER (12,2) NOT NULL, 
  PCO_NUMERO_PEDIDO           NUMBER        NOT NULL, 
  CONSTRAINT PCO_PK
  PRIMARY KEY ( PCO_DOC_NUMERO, PCO_DOC_CBE_BEN_SIGLA, PCO_DOC_CBE_CRE_SEQUENCIAL, PCO_NUMERO_PEDIDO ) ) ; 

ALTER TABLE IFRSRH.PEDIDOS_COBRANCAS ADD  CONSTRAINT PCO_FK
 FOREIGN KEY (PCO_DOC_NUMERO, PCO_DOC_CBE_BEN_SIGLA, PCO_DOC_CBE_CRE_SEQUENCIAL) 
  REFERENCES IFRSRH.DOCUMENTOS_COBRANCA (DOC_NUMERO, DOC_CBE_BEN_SIGLA, DOC_CBE_CRE_SEQUENCIAL) ;

-- DOCUMENTOS_COBRANCA
--
DROP TABLE DOCUMENTOS_COBRANCA CASCADE CONSTRAINTS ; 

CREATE TABLE DOCUMENTOS_COBRANCA ( 
  DOC_NUMERO                    NUMBER (10)   NOT NULL, 
  DOC_CBE_BEN_SIGLA             VARCHAR2 (3)  NOT NULL, 
  DOC_CBE_CRE_SEQUENCIAL        NUMBER (5)    NOT NULL, 
  DOC_DATA                      DATE, 
  DOC_DATA_PAGAMENTO            DATE, 
  DOC_VALOR                     NUMBER (12,2), 
  DOC_TIPO                      NUMBER (1), 
  DOC_DEDUCAO                   NUMBER (7,2), 
  DOC_ESPECIFICACAO             VARCHAR2 (2000), 
  DOC_MODALIDADE                NUMBER (1), 
  DOC_EMB_EMP_NUMERO_MATRICULA  NUMBER (7), 
  DOC_PVI_SEQUENCIAL            NUMBER (2), 
  DOC_CCT_CODIGO                NUMBER (10), 
  DOC_DEP_CODIGO                NUMBER (4), 
  DOC_EMB_BEN_SIGLA             VARCHAR2 (3), 
  DOC_TOT_FATURAMENTO           NUMBER (12,2), 
  DOC_TOT_GLOSA                 NUMBER (12,2), 
  DOC_TOT_IRRF                  NUMBER (12,2), 
  DOC_TOT_ISS                   NUMBER (12,2), 
  DOC_ESPECIFICACAO_DEDUCAO     VARCHAR2 (2000), 
  DOC_VALOR_LIQUIDO             NUMBER (12,2), 
  DOC_VALOR_PARTICIPACAO        NUMBER (12,2), 
  DOC_MES_PAGAMENTO             NUMBER (2), 
  DOC_ANO_PAGAMENTO             NUMBER (4), 
  DOC_VALOR_DIFERENCA           NUMBER (12,2), 
  DOC_VALOR_AUTORIZADO          NUMBER (12,2), 
  DOC_ESPECIFICACAO_DIFERENCA   VARCHAR2 (2000), 
  DOC_MES_VALE                  VARCHAR2 (2), 
  DOC_ANO_VALE                  VARCHAR2 (4), 
  DOC_VALOR_TAXA                NUMBER (12,2), 
  DOC_PROCESSO_ENCERRADO        VARCHAR2 (1), 
  DOC_GUIAS_EMP                 NUMBER (8), 
  DOC_CAPITAL_SEGURO            NUMBER (12,2), 
  DOC_NR_DOC_FISCAL             VARCHAR2 (15), 
  DOC_PVI_EMP_NUMERO_MATRICULA  NUMBER (7), 
  DOC_DEP_RESP_INCL             NUMBER (4)    DEFAULT 1 NOT NULL, 
  DOC_TIPO_PEDIDO               NUMBER (1), 
  DOC_IND_IMPOSTO               VARCHAR2 (1), 
  DOC_NUMERO_IMP_ACUMUL         NUMBER (10), 
  DOC_MOV_PARTICIPACAO          VARCHAR2 (1), 
  DOC_VALOR_INSS                NUMBER (12,2), 
  DOC_VL_BASE_INSS              NUMBER (12,2), 
  DOC_QTD_DEPEND_IRRF           NUMBER (2), 
  DOC_VALOR_DESC_IRRF           NUMBER (12,2), 
  DOC_VALOR_AJUSTE              NUMBER (12,2), 
   CONSTRAINT DOCCOB_CK_1
          CHECK (DOC_TIPO IN (1,2,3,4,5,6)) , 
   CONSTRAINT DOCCOB_CK_2
          CHECK (  DOC_MODALIDADE IN (1,2)                                                         ), 
  CONSTRAINT DOC2_PK
  PRIMARY KEY ( DOC_NUMERO, DOC_CBE_BEN_SIGLA, DOC_CBE_CRE_SEQUENCIAL ) ) ; 

ALTER TABLE IFRSRH.DOCUMENTOS_COBRANCA ADD  CONSTRAINT DOC_CBE_FK
 FOREIGN KEY (DOC_CBE_BEN_SIGLA, DOC_CBE_CRE_SEQUENCIAL) 
  REFERENCES IFRSRH.CREDENCIADOS_BENEFICIOS (CBE_BEN_SIGLA, CBE_CRE_SEQUENCIAL) ;

ALTER TABLE IFRSRH.DOCUMENTOS_COBRANCA ADD  CONSTRAINT DOC_EMB_FK
 FOREIGN KEY (DOC_EMB_EMP_NUMERO_MATRICULA, DOC_CBE_BEN_SIGLA) 
  REFERENCES IFRSRH.EMPREGADOS_BENEFICIOS (EMB_EMP_NUMERO_MATRICULA, EMB_BEN_SIGLA) ;

ALTER TABLE IFRSRH.DOCUMENTOS_COBRANCA ADD  CONSTRAINT DOC_PVB_FK
 FOREIGN KEY (DOC_PVI_EMP_NUMERO_MATRICULA, DOC_PVI_SEQUENCIAL) 
  REFERENCES IFRSRH.PESSOAS_VINCULADAS (PVI_EMP_NUMERO_MATRICULA, PVI_SEQUENCIAL) ;


