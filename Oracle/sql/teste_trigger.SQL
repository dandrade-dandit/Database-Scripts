CREATE TABLE BOOK (
	CAMPO1 VARCHAR2(10)
,	CAMPO2 NUMBER(2)
)
/

CREATE OR REPLACE TRIGGER MYTRIG1 BEFORE DELETE OR INSERT OR UPDATE ON BOOK
BEGIN
   IF (TO_CHAR(SYSDATE,'DY') IN ('SAT','SUN')) OR (TO_CHAR(SYSDATE,'HH24:MI') NOT BETWEEN '08:00' AND '15:30') THEN
      RAISE_APPLICATION_ERROR(-20500,'TABELA SO PODE SER ALTERADA DE SEG A SEX ENTRE 08:00 E 15:30');
   END IF;
END;
/

SELECT PROGRAM 
FROM oper_sessoes
where  audsid in (SELECT SYS_CONTEXT ('USERENV', 'SESSIONID') FROM DUAL)
/



CREATE OR REPLACE TRIGGER MYTRIG1 BEFORE DELETE OR INSERT OR UPDATE ON BOOK
DECLARE
   V_PROGRAM  VARCHAR2(64);
BEGIN
   SELECT PROGRAM 
   INTO V_PROGRAM
   FROM OPER_SESSOES
   WHERE  AUDSID IN (SELECT SYS_CONTEXT ('USERENV', 'SESSIONID') FROM DUAL);

   IF ( (UPPER(SUBSTR(V_PROGRAM,1,6)) = 'SQLNAV') OR (UPPER(SUBSTR(V_PROGRAM,1,6)) = 'MSACCE') ) THEN
      RAISE_APPLICATION_ERROR(-20500,'APLICATIVO PROIBIDO!!');
   END IF;
END;
/
